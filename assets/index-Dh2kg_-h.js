(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();var dg={exports:{}},pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function eI(){if(K0)return pu;K0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return pu.Fragment=t,pu.jsx=e,pu.jsxs=e,pu}var Q0;function nI(){return Q0||(Q0=1,dg.exports=eI()),dg.exports}var R=nI(),mg={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function iI(){if(Y0)return wt;Y0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function z(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,Y={};function lt(O,J,rt){this.props=O,this.context=J,this.refs=Y,this.updater=rt||X}lt.prototype.isReactComponent={},lt.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},lt.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ft(){}ft.prototype=lt.prototype;function at(O,J,rt){this.props=O,this.context=J,this.refs=Y,this.updater=rt||X}var vt=at.prototype=new ft;vt.constructor=at,G(vt,lt.prototype),vt.isPureReactComponent=!0;var Et=Array.isArray;function et(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(O,J,rt){var ut=rt.ref;return{$$typeof:s,type:O,key:J,ref:ut!==void 0?ut:null,props:rt}}function M(O,J){return x(O.type,J,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function k(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(rt){return J[rt]})}var C=/\/+/g;function re(O,J){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):J.toString(36)}function ge(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(et,et):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function K(O,J,rt,ut,St){var Rt=typeof O;(Rt==="undefined"||Rt==="boolean")&&(O=null);var jt=!1;if(O===null)jt=!0;else switch(Rt){case"bigint":case"string":case"number":jt=!0;break;case"object":switch(O.$$typeof){case s:case t:jt=!0;break;case T:return jt=O._init,K(jt(O._payload),J,rt,ut,St)}}if(jt)return St=St(O),jt=ut===""?"."+re(O,0):ut,Et(St)?(rt="",jt!=null&&(rt=jt.replace(C,"$&/")+"/"),K(St,J,rt,"",function(ws){return ws})):St!=null&&(D(St)&&(St=M(St,rt+(St.key==null||O&&O.key===St.key?"":(""+St.key).replace(C,"$&/")+"/")+jt)),J.push(St)),1;jt=0;var ze=ut===""?".":ut+":";if(Et(O))for(var ue=0;ue<O.length;ue++)ut=O[ue],Rt=ze+re(ut,ue),jt+=K(ut,J,rt,Rt,St);else if(ue=z(O),typeof ue=="function")for(O=ue.call(O),ue=0;!(ut=O.next()).done;)ut=ut.value,Rt=ze+re(ut,ue++),jt+=K(ut,J,rt,Rt,St);else if(Rt==="object"){if(typeof O.then=="function")return K(ge(O),J,rt,ut,St);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return jt}function it(O,J,rt){if(O==null)return O;var ut=[],St=0;return K(O,ut,"","",function(Rt){return J.call(rt,Rt,St++)}),ut}function pt(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(rt){(O._status===0||O._status===-1)&&(O._status=1,O._result=rt)},function(rt){(O._status===0||O._status===-1)&&(O._status=2,O._result=rt)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var zt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ht={map:it,forEach:function(O,J,rt){it(O,function(){J.apply(this,arguments)},rt)},count:function(O){var J=0;return it(O,function(){J++}),J},toArray:function(O){return it(O,function(J){return J})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return wt.Activity=E,wt.Children=Ht,wt.Component=lt,wt.Fragment=e,wt.Profiler=o,wt.PureComponent=at,wt.StrictMode=r,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,wt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return I.H.useMemoCache(O)}},wt.cache=function(O){return function(){return O.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(O,J,rt){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ut=G({},O.props),St=O.key;if(J!=null)for(Rt in J.key!==void 0&&(St=""+J.key),J)!A.call(J,Rt)||Rt==="key"||Rt==="__self"||Rt==="__source"||Rt==="ref"&&J.ref===void 0||(ut[Rt]=J[Rt]);var Rt=arguments.length-2;if(Rt===1)ut.children=rt;else if(1<Rt){for(var jt=Array(Rt),ze=0;ze<Rt;ze++)jt[ze]=arguments[ze+2];ut.children=jt}return x(O.type,St,ut)},wt.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},wt.createElement=function(O,J,rt){var ut,St={},Rt=null;if(J!=null)for(ut in J.key!==void 0&&(Rt=""+J.key),J)A.call(J,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(St[ut]=J[ut]);var jt=arguments.length-2;if(jt===1)St.children=rt;else if(1<jt){for(var ze=Array(jt),ue=0;ue<jt;ue++)ze[ue]=arguments[ue+2];St.children=ze}if(O&&O.defaultProps)for(ut in jt=O.defaultProps,jt)St[ut]===void 0&&(St[ut]=jt[ut]);return x(O,Rt,St)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(O){return{$$typeof:m,render:O}},wt.isValidElement=D,wt.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:pt}},wt.memo=function(O,J){return{$$typeof:p,type:O,compare:J===void 0?null:J}},wt.startTransition=function(O){var J=I.T,rt={};I.T=rt;try{var ut=O(),St=I.S;St!==null&&St(rt,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(et,zt)}catch(Rt){zt(Rt)}finally{J!==null&&rt.types!==null&&(J.types=rt.types),I.T=J}},wt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},wt.use=function(O){return I.H.use(O)},wt.useActionState=function(O,J,rt){return I.H.useActionState(O,J,rt)},wt.useCallback=function(O,J){return I.H.useCallback(O,J)},wt.useContext=function(O){return I.H.useContext(O)},wt.useDebugValue=function(){},wt.useDeferredValue=function(O,J){return I.H.useDeferredValue(O,J)},wt.useEffect=function(O,J){return I.H.useEffect(O,J)},wt.useEffectEvent=function(O){return I.H.useEffectEvent(O)},wt.useId=function(){return I.H.useId()},wt.useImperativeHandle=function(O,J,rt){return I.H.useImperativeHandle(O,J,rt)},wt.useInsertionEffect=function(O,J){return I.H.useInsertionEffect(O,J)},wt.useLayoutEffect=function(O,J){return I.H.useLayoutEffect(O,J)},wt.useMemo=function(O,J){return I.H.useMemo(O,J)},wt.useOptimistic=function(O,J){return I.H.useOptimistic(O,J)},wt.useReducer=function(O,J,rt){return I.H.useReducer(O,J,rt)},wt.useRef=function(O){return I.H.useRef(O)},wt.useState=function(O){return I.H.useState(O)},wt.useSyncExternalStore=function(O,J,rt){return I.H.useSyncExternalStore(O,J,rt)},wt.useTransition=function(){return I.H.useTransition()},wt.version="19.2.3",wt}var X0;function Tp(){return X0||(X0=1,mg.exports=iI()),mg.exports}var Pt=Tp(),gg={exports:{}},yu={},pg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function rI(){return $0||($0=1,(function(s){function t(K,it){var pt=K.length;K.push(it);t:for(;0<pt;){var zt=pt-1>>>1,Ht=K[zt];if(0<o(Ht,it))K[zt]=it,K[pt]=Ht,pt=zt;else break t}}function e(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var it=K[0],pt=K.pop();if(pt!==it){K[0]=pt;t:for(var zt=0,Ht=K.length,O=Ht>>>1;zt<O;){var J=2*(zt+1)-1,rt=K[J],ut=J+1,St=K[ut];if(0>o(rt,pt))ut<Ht&&0>o(St,rt)?(K[zt]=St,K[ut]=pt,zt=ut):(K[zt]=rt,K[J]=pt,zt=J);else if(ut<Ht&&0>o(St,pt))K[zt]=St,K[ut]=pt,zt=ut;else break t}}return it}function o(K,it){var pt=K.sortIndex-it.sortIndex;return pt!==0?pt:K.id-it.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],T=1,E=null,w=3,z=!1,X=!1,G=!1,Y=!1,lt=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function vt(K){for(var it=e(p);it!==null;){if(it.callback===null)r(p);else if(it.startTime<=K)r(p),it.sortIndex=it.expirationTime,t(g,it);else break;it=e(p)}}function Et(K){if(G=!1,vt(K),!X)if(e(g)!==null)X=!0,et||(et=!0,k());else{var it=e(p);it!==null&&ge(Et,it.startTime-K)}}var et=!1,I=-1,A=5,x=-1;function M(){return Y?!0:!(s.unstable_now()-x<A)}function D(){if(Y=!1,et){var K=s.unstable_now();x=K;var it=!0;try{t:{X=!1,G&&(G=!1,ft(I),I=-1),z=!0;var pt=w;try{e:{for(vt(K),E=e(g);E!==null&&!(E.expirationTime>K&&M());){var zt=E.callback;if(typeof zt=="function"){E.callback=null,w=E.priorityLevel;var Ht=zt(E.expirationTime<=K);if(K=s.unstable_now(),typeof Ht=="function"){E.callback=Ht,vt(K),it=!0;break e}E===e(g)&&r(g),vt(K)}else r(g);E=e(g)}if(E!==null)it=!0;else{var O=e(p);O!==null&&ge(Et,O.startTime-K),it=!1}}break t}finally{E=null,w=pt,z=!1}it=void 0}}finally{it?k():et=!1}}}var k;if(typeof at=="function")k=function(){at(D)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,re=C.port2;C.port1.onmessage=D,k=function(){re.postMessage(null)}}else k=function(){lt(D,0)};function ge(K,it){I=lt(function(){K(s.unstable_now())},it)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(K){switch(w){case 1:case 2:case 3:var it=3;break;default:it=w}var pt=w;w=it;try{return K()}finally{w=pt}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(K,it){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var pt=w;w=K;try{return it()}finally{w=pt}},s.unstable_scheduleCallback=function(K,it,pt){var zt=s.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?zt+pt:zt):pt=zt,K){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=pt+Ht,K={id:T++,callback:it,priorityLevel:K,startTime:pt,expirationTime:Ht,sortIndex:-1},pt>zt?(K.sortIndex=pt,t(p,K),e(g)===null&&K===e(p)&&(G?(ft(I),I=-1):G=!0,ge(Et,pt-zt))):(K.sortIndex=Ht,t(g,K),X||z||(X=!0,et||(et=!0,k()))),K},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(K){var it=w;return function(){var pt=w;w=it;try{return K.apply(this,arguments)}finally{w=pt}}}})(yg)),yg}var Z0;function sI(){return Z0||(Z0=1,pg.exports=rI()),pg.exports}var _g={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function aI(){if(J0)return tn;J0=1;var s=Tp();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:T}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(g,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,T)},tn.flushSync=function(g){var p=c.T,T=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=T,r.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,z=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:z}):T==="script"&&r.d.X(g,{crossOrigin:E,integrity:w,fetchPriority:z,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin);r.d.L(g,T,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var T=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},tn.requestFormReset=function(g){r.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,T){return c.H.useFormState(g,p,T)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var W0;function oI(){if(W0)return _g.exports;W0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),_g.exports=aI(),_g.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function lI(){if(tT)return yu;tT=1;var s=sI(),t=Tp(),e=oI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function T(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=T(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),ft=Symbol.for("react.consumer"),at=Symbol.for("react.context"),vt=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case G:return"Fragment";case lt:return"Profiler";case Y:return"StrictMode";case Et:return"Suspense";case et:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case X:return"Portal";case at:return n.displayName||"Context";case ft:return(n._context.displayName||"Context")+".Consumer";case vt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:re(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return re(n(i))}catch{}}return null}var ge=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt={pending:!1,data:null,method:null,action:null},zt=[],Ht=-1;function O(n){return{current:n}}function J(n){0>Ht||(n.current=zt[Ht],zt[Ht]=null,Ht--)}function rt(n,i){Ht++,zt[Ht]=n.current,n.current=i}var ut=O(null),St=O(null),Rt=O(null),jt=O(null);function ze(n,i){switch(rt(Rt,i),rt(St,n),rt(ut,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?g0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=g0(i),n=p0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(ut),rt(ut,n)}function ue(){J(ut),J(St),J(Rt)}function ws(n){n.memoizedState!==null&&rt(jt,n);var i=ut.current,a=p0(i,n.type);i!==a&&(rt(St,n),rt(ut,a))}function Na(n){St.current===n&&(J(ut),J(St)),jt.current===n&&(J(jt),fu._currentValue=pt)}var Da,Va;function mi(n){if(Da===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Da=i&&i[1]||"",Va=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Da+n+Va}var fl=!1;function Is(n,i){if(!n||fl)return"";fl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var q=H}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(H){q=H}n.call(Z.prototype)}}else{try{throw Error()}catch(H){q=H}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),B=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===B.length)for(l=N.length-1,f=B.length-1;1<=l&&0<=f&&N[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==B[f]){var Q=`
`+N[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{fl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?mi(a):""}function dl(n,i){switch(n.tag){case 26:case 27:case 5:return mi(n.type);case 16:return mi("Lazy");case 13:return n.child!==i&&i!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Is(n.type,!1);case 11:return Is(n.type.render,!1);case 1:return Is(n.type,!0);case 31:return mi("Activity");default:return""}}function ml(n){try{var i="",a=null;do i+=dl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var we=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,br=s.unstable_cancelCallback,gd=s.unstable_shouldYield,hc=s.unstable_requestPaint,un=s.unstable_now,xs=s.unstable_getCurrentPriorityLevel,gl=s.unstable_ImmediatePriority,pl=s.unstable_UserBlockingPriority,Sr=s.unstable_NormalPriority,pd=s.unstable_LowPriority,fc=s.unstable_IdlePriority,dc=s.log,mc=s.unstable_setDisableYieldValue,Jn=null,Ke=null;function zn(n){if(typeof dc=="function"&&mc(n),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Jn,n)}catch{}}var ve=Math.clz32?Math.clz32:pc,gc=Math.log,Oa=Math.LN2;function pc(n){return n>>>=0,n===0?32:31-(gc(n)/Oa|0)|0}var gi=256,Rs=262144,Ie=4194304;function pi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function yi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=pi(l):(_&=b,_!==0?f=pi(_):a||(a=b&~n,a!==0&&(f=pi(a))))):(b=l&~d,b!==0?f=pi(b):_!==0?f=pi(_):a||(a=l&~n,a!==0&&(f=pi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Wn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function yd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var n=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),n}function _i(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Cs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function _d(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,B=n.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-ve(a),Z=1<<Q;b[Q]=0,N[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var H=q[Q];H!==null&&(H.lane&=-536870913)}a&=~Z}l!==0&&Ns(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Ns(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-ve(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function yl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-ve(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function _l(n,i){var a=i&-i;return a=(a&42)!==0?1:Ds(a),(a&(n.suspendedLanes|i))!==0?0:a}function Ds(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function _c(){var n=it.p;return n!==0?n:(n=window.event,n===void 0?32:L0(n.type))}function ti(n,i){var a=it.p;try{return it.p=n,i()}finally{it.p=a}}var ei=Math.random().toString(36).slice(2),xe="__reactFiber$"+ei,qe="__reactProps$"+ei,vi="__reactContainer$"+ei,Ma="__reactEvents$"+ei,vd="__reactListeners$"+ei,vc="__reactHandles$"+ei,Tc="__reactResources$"+ei,Ti="__reactMarker$"+ei;function Pa(n){delete n[xe],delete n[qe],delete n[Ma],delete n[vd],delete n[vc]}function Ei(n){var i=n[xe];if(i)return i;for(var a=n.parentNode;a;){if(i=a[vi]||a[xe]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=S0(n);n!==null;){if(a=n[xe])return a;n=S0(n)}return i}n=a,a=n.parentNode}return null}function Un(n){if(n=n[xe]||n[vi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function bn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function bi(n){var i=n[Tc];return i||(i=n[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Re(n){n[Ti]=!0}var vl=new Set,Tl={};function Si(n,i){Ai(n,i),Ai(n+"Capture",i)}function Ai(n,i){for(Tl[n]=i,n=0;n<i.length;n++)vl.add(i[n])}var El=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},Sl={};function Ec(n){return we.call(Sl,n)?!0:we.call(bl,n)?!1:El.test(n)?Sl[n]=!0:(bl[n]=!0,!1)}function ka(n,i,a){if(Ec(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Sn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Ce(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Fe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ar(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Al(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Yt(n){if(!n._valueTracker){var i=Ar(n)?"checked":"value";n._valueTracker=Al(n,i,""+n[i])}}function Vs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Ar(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function wi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Os=/[\n"\\]/g;function dn(n){return n.replace(Os,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function za(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Fe(i)):n.value!==""+Fe(i)&&(n.value=""+Fe(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?wl(n,_,Fe(i)):a!=null?wl(n,_,Fe(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Fe(b):n.removeAttribute("name")}function bc(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Yt(n);return}a=a!=null?""+Fe(a):"",i=i!=null?""+Fe(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Yt(n)}function wl(n,i,a){i==="number"&&wi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function wr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Sc(n,i,a){if(i!=null&&(i=""+Fe(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Fe(a):""}function Ir(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ge(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Fe(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Yt(n)}function mn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Ac.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function xl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Il(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Il(n,d,i[d])}function Ua(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(n){return xr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ni(){}var Rl=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rr=null,Ii=null;function Ms(n){var i=Un(n);if(i&&(n=i.stateNode)){var a=n[qe]||null;t:switch(n=i.stateNode,i.type){case"input":if(za(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[qe]||null;if(!f)throw Error(r(90));za(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Vs(l)}break t;case"textarea":Sc(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&wr(n,!!a.multiple,i,!1)}}}var ja=!1;function Cr(n,i,a){if(ja)return n(i,a);ja=!0;try{var l=n(i);return l}finally{if(ja=!1,(Rr!==null||Ii!==null)&&(_h(),Rr&&(i=Rr,n=Ii,Ii=Rr=null,Ms(i),n)))for(i=0;i<n.length;i++)Ms(n[i])}}function ii(n,i){var a=n.stateNode;if(a===null)return null;var l=a[qe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(jn)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Ps=!1}var xi=null,Cl=null,ks=null;function Nl(){if(ks)return ks;var n,i=Cl,a=i.length,l,f="value"in xi?xi.value:xi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return ks=f.slice(n,1<l?1-l:void 0)}function zs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ki(){return!0}function ri(){return!1}function Qe(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ki:ri,this.isPropagationStopped=ri,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),i}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Qe(Qi),Nr=E({},Qi,{view:0,detail:0}),Dl=Qe(Nr),Dr,Ba,Ci,qa=E({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ci&&(Ci&&n.type==="mousemove"?(Dr=n.screenX-Ci.screenX,Ba=n.screenY-Ci.screenY):Ba=Dr=0,Ci=n),Dr)},movementY:function(n){return"movementY"in n?n.movementY:Ba}}),Vl=Qe(qa),Us=E({},qa,{dataTransfer:0}),Ic=Qe(Us),xc=E({},Nr,{relatedTarget:0}),Ls=Qe(xc),Ol=E({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Rc=Qe(Ol),Fa=E({},Qi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cc=Qe(Fa),Nc=E({},Qi,{data:0}),Ni=Qe(Nc),Dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Oc[n])?!!i[n]:!1}function Vr(){return Mc}var cn=E({},Nr,{key:function(n){if(n.key){var i=Dc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Vc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(n){return n.type==="keypress"?zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pc=Qe(cn),kc=E({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Qe(kc),h=E({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),y=Qe(h),v=E({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Qe(v),L=E({},qa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Qe(L),nt=E({},Qi,{newState:0,oldState:0}),It=Qe(nt),Te=[9,13,27,32],Gt=jn&&"CompositionEvent"in window,ce=null;jn&&"documentMode"in document&&(ce=document.documentMode);var Bn=jn&&"TextEvent"in window&&!ce,Di=jn&&(!Gt||ce&&8<ce&&11>=ce),si=" ",ai=!1;function js(n,i){switch(n){case"keyup":return Te.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ga=!1;function wA(n,i){switch(n){case"compositionend":return Ha(i);case"keypress":return i.which!==32?null:(ai=!0,si);case"textInput":return n=i.data,n===si&&ai?null:n;default:return null}}function IA(n,i){if(Ga)return n==="compositionend"||!Gt&&js(n,i)?(n=Nl(),ks=Cl=xi=null,Ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Di&&i.locale!=="ko"?null:i.data;default:return null}}var xA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!xA[n.type]:i==="textarea"}function xy(n,i,a,l){Rr?Ii?Ii.push(l):Ii=[l]:Rr=l,i=wh(i,"onChange"),0<i.length&&(a=new Ri("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ml=null,Pl=null;function RA(n){u0(n,0)}function zc(n){var i=bn(n);if(Vs(i))return n}function Ry(n,i){if(n==="change")return i}var Cy=!1;if(jn){var Td;if(jn){var Ed="oninput"in document;if(!Ed){var Ny=document.createElement("div");Ny.setAttribute("oninput","return;"),Ed=typeof Ny.oninput=="function"}Td=Ed}else Td=!1;Cy=Td&&(!document.documentMode||9<document.documentMode)}function Dy(){Ml&&(Ml.detachEvent("onpropertychange",Vy),Pl=Ml=null)}function Vy(n){if(n.propertyName==="value"&&zc(Pl)){var i=[];xy(i,Pl,n,Ln(n)),Cr(RA,i)}}function CA(n,i,a){n==="focusin"?(Dy(),Ml=i,Pl=a,Ml.attachEvent("onpropertychange",Vy)):n==="focusout"&&Dy()}function NA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zc(Pl)}function DA(n,i){if(n==="click")return zc(i)}function VA(n,i){if(n==="input"||n==="change")return zc(i)}function OA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var An=typeof Object.is=="function"?Object.is:OA;function kl(n,i){if(An(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!we.call(i,f)||!An(n[f],i[f]))return!1}return!0}function Oy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function My(n,i){var a=Oy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Oy(a)}}function Py(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Py(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ky(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=wi(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=wi(n.document)}return i}function bd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var MA=jn&&"documentMode"in document&&11>=document.documentMode,Ka=null,Sd=null,zl=null,Ad=!1;function zy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ad||Ka==null||Ka!==wi(l)||(l=Ka,"selectionStart"in l&&bd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&kl(zl,l)||(zl=l,l=wh(Sd,"onSelect"),0<l.length&&(i=new Ri("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ka)))}function Bs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Qa={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},wd={},Uy={};jn&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function qs(n){if(wd[n])return wd[n];if(!Qa[n])return n;var i=Qa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Uy)return wd[n]=i[a];return n}var Ly=qs("animationend"),jy=qs("animationiteration"),By=qs("animationstart"),PA=qs("transitionrun"),kA=qs("transitionstart"),zA=qs("transitioncancel"),qy=qs("transitionend"),Fy=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function oi(n,i){Fy.set(n,i),Si(i,[n])}var Uc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qn=[],Ya=0,xd=0;function Lc(){for(var n=Ya,i=xd=Ya=0;i<n;){var a=qn[i];qn[i++]=null;var l=qn[i];qn[i++]=null;var f=qn[i];qn[i++]=null;var d=qn[i];if(qn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Hy(a,f,d)}}function jc(n,i,a,l){qn[Ya++]=n,qn[Ya++]=i,qn[Ya++]=a,qn[Ya++]=l,xd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Rd(n,i,a,l){return jc(n,i,a,l),Bc(n)}function Fs(n,i){return jc(n,null,null,i),Bc(n)}function Hy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-ve(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Bc(n){if(50<su)throw su=0,zm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Xa={};function UA(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,i,a,l){return new UA(n,i,a,l)}function Cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xi(n,i){var a=n.alternate;return a===null?(a=wn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Gy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function qc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")Cd(n)&&(_=1);else if(typeof n=="string")_=Fw(n,a,ut.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case x:return n=wn(31,a,i,f),n.elementType=x,n.lanes=d,n;case G:return Hs(a.children,f,d,i);case Y:_=8,f|=24;break;case lt:return n=wn(12,a,i,f|2),n.elementType=lt,n.lanes=d,n;case Et:return n=wn(13,a,i,f),n.elementType=Et,n.lanes=d,n;case et:return n=wn(19,a,i,f),n.elementType=et,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case at:_=10;break t;case ft:_=9;break t;case vt:_=11;break t;case I:_=14;break t;case A:_=16,l=null;break t}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=wn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Hs(n,i,a,l){return n=wn(7,n,l,i),n.lanes=a,n}function Nd(n,i,a){return n=wn(6,n,null,i),n.lanes=a,n}function Ky(n){var i=wn(18,null,null,0);return i.stateNode=n,i}function Dd(n,i,a){return i=wn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Qy=new WeakMap;function Fn(n,i){if(typeof n=="object"&&n!==null){var a=Qy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:ml(i)},Qy.set(n,i),i)}return{value:n,source:i,stack:ml(i)}}var $a=[],Za=0,Fc=null,Ul=0,Hn=[],Gn=0,Or=null,Vi=1,Oi="";function $i(n,i){$a[Za++]=Ul,$a[Za++]=Fc,Fc=n,Ul=i}function Yy(n,i,a){Hn[Gn++]=Vi,Hn[Gn++]=Oi,Hn[Gn++]=Or,Or=n;var l=Vi;n=Oi;var f=32-ve(l)-1;l&=~(1<<f),a+=1;var d=32-ve(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Vi=1<<32-ve(i)+f|a<<f|l,Oi=d+n}else Vi=1<<d|a<<f|l,Oi=n}function Vd(n){n.return!==null&&($i(n,1),Yy(n,1,0))}function Od(n){for(;n===Fc;)Fc=$a[--Za],$a[Za]=null,Ul=$a[--Za],$a[Za]=null;for(;n===Or;)Or=Hn[--Gn],Hn[Gn]=null,Oi=Hn[--Gn],Hn[Gn]=null,Vi=Hn[--Gn],Hn[Gn]=null}function Xy(n,i){Hn[Gn++]=Vi,Hn[Gn++]=Oi,Hn[Gn++]=Or,Vi=i.id,Oi=i.overflow,Or=n}var Ye=null,oe=null,Ut=!1,Mr=null,Kn=!1,Md=Error(r(519));function Pr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ll(Fn(i,n)),Md}function $y(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[xe]=n,i[qe]=l,a){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(a=0;a<ou.length;a++)Vt(ou[a],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),bc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),Ir(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||d0(i.textContent,a)?(l.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),l.onScroll!=null&&Vt("scroll",i),l.onScrollEnd!=null&&Vt("scrollend",i),l.onClick!=null&&(i.onclick=ni),i=!0):i=!1,i||Pr(n,!0)}function Zy(n){for(Ye=n.return;Ye;)switch(Ye.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Ye=Ye.return}}function Ja(n){if(n!==Ye)return!1;if(!Ut)return Zy(n),Ut=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Jm(n.type,n.memoizedProps)),a=!a),a&&oe&&Pr(n),Zy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));oe=b0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));oe=b0(n)}else i===27?(i=oe,Xr(n.type)?(n=ig,ig=null,oe=n):oe=i):oe=Ye?Yn(n.stateNode.nextSibling):null;return!0}function Gs(){oe=Ye=null,Ut=!1}function Pd(){var n=Mr;return n!==null&&(_n===null?_n=n:_n.push.apply(_n,n),Mr=null),n}function Ll(n){Mr===null?Mr=[n]:Mr.push(n)}var kd=O(null),Ks=null,Zi=null;function kr(n,i,a){rt(kd,i._currentValue),i._currentValue=a}function Ji(n){n._currentValue=kd.current,J(kd)}function zd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Ud(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),zd(d.return,a,n),l||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),zd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Wa(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=f.type;An(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===jt.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(fu):n=[fu])}f=f.return}n!==null&&Ud(i,n,a,l),i.flags|=262144}function Hc(n){for(n=n.firstContext;n!==null;){if(!An(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qs(n){Ks=n,Zi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xe(n){return Jy(Ks,n)}function Gc(n,i){return Ks===null&&Qs(n),Jy(n,i)}function Jy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Zi===null){if(n===null)throw Error(r(308));Zi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Zi=Zi.next=i;return a}var LA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},jA=s.unstable_scheduleCallback,BA=s.unstable_NormalPriority,Ne={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new LA,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&jA(BA,function(){n.controller.abort()})}var Bl=null,jd=0,to=0,eo=null;function qA(n,i){if(Bl===null){var a=Bl=[];jd=0,to=Fm(),eo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jd++,i.then(Wy,Wy),i}function Wy(){if(--jd===0&&Bl!==null){eo!==null&&(eo.status="fulfilled");var n=Bl;Bl=null,to=0,eo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function FA(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var t_=K.S;K.S=function(n,i){zv=un(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&qA(n,i),t_!==null&&t_(n,i)};var Ys=O(null);function Bd(){var n=Ys.current;return n!==null?n:se.pooledCache}function Kc(n,i){i===null?rt(Ys,Ys.current):rt(Ys,i.pool)}function e_(){var n=Bd();return n===null?null:{parent:Ne._currentValue,pool:n}}var no=Error(r(460)),qd=Error(r(474)),Qc=Error(r(542)),Yc={then:function(){}};function n_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function i_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(ni,ni),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,s_(n),n;default:if(typeof i.status=="string")i.then(ni,ni);else{if(n=se,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,s_(n),n}throw $s=i,no}}function Xs(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($s=a,no):a}}var $s=null;function r_(){if($s===null)throw Error(r(459));var n=$s;return $s=null,n}function s_(n){if(n===no||n===Qc)throw Error(r(483))}var io=null,ql=0;function Xc(n){var i=ql;return ql+=1,io===null&&(io=[]),i_(io,n,i)}function Fl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function $c(n,i){throw i.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function a_(n){function i(P,V){if(n){var j=P.deletions;j===null?(P.deletions=[V],P.flags|=16):j.push(V)}}function a(P,V){if(!n)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=Xi(P,V),P.index=0,P.sibling=null,P}function d(P,V,j){return P.index=j,n?(j=P.alternate,j!==null?(j=j.index,j<V?(P.flags|=67108866,V):j):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function b(P,V,j,$){return V===null||V.tag!==6?(V=Nd(j,P.mode,$),V.return=P,V):(V=f(V,j),V.return=P,V)}function N(P,V,j,$){var yt=j.type;return yt===G?Q(P,V,j.props.children,$,j.key):V!==null&&(V.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===A&&Xs(yt)===V.type)?(V=f(V,j.props),Fl(V,j),V.return=P,V):(V=qc(j.type,j.key,j.props,null,P.mode,$),Fl(V,j),V.return=P,V)}function B(P,V,j,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=Dd(j,P.mode,$),V.return=P,V):(V=f(V,j.children||[]),V.return=P,V)}function Q(P,V,j,$,yt){return V===null||V.tag!==7?(V=Hs(j,P.mode,$,yt),V.return=P,V):(V=f(V,j),V.return=P,V)}function Z(P,V,j){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Nd(""+V,P.mode,j),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return j=qc(V.type,V.key,V.props,null,P.mode,j),Fl(j,V),j.return=P,j;case X:return V=Dd(V,P.mode,j),V.return=P,V;case A:return V=Xs(V),Z(P,V,j)}if(ge(V)||k(V))return V=Hs(V,P.mode,j,null),V.return=P,V;if(typeof V.then=="function")return Z(P,Xc(V),j);if(V.$$typeof===at)return Z(P,Gc(P,V),j);$c(P,V)}return null}function q(P,V,j,$){var yt=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return yt!==null?null:b(P,V,""+j,$);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case z:return j.key===yt?N(P,V,j,$):null;case X:return j.key===yt?B(P,V,j,$):null;case A:return j=Xs(j),q(P,V,j,$)}if(ge(j)||k(j))return yt!==null?null:Q(P,V,j,$,null);if(typeof j.then=="function")return q(P,V,Xc(j),$);if(j.$$typeof===at)return q(P,V,Gc(P,j),$);$c(P,j)}return null}function H(P,V,j,$,yt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return P=P.get(j)||null,b(V,P,""+$,yt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case z:return P=P.get($.key===null?j:$.key)||null,N(V,P,$,yt);case X:return P=P.get($.key===null?j:$.key)||null,B(V,P,$,yt);case A:return $=Xs($),H(P,V,j,$,yt)}if(ge($)||k($))return P=P.get(j)||null,Q(V,P,$,yt,null);if(typeof $.then=="function")return H(P,V,j,Xc($),yt);if($.$$typeof===at)return H(P,V,j,Gc(V,$),yt);$c(V,$)}return null}function ht(P,V,j,$){for(var yt=null,qt=null,mt=V,Ct=V=0,Mt=null;mt!==null&&Ct<j.length;Ct++){mt.index>Ct?(Mt=mt,mt=null):Mt=mt.sibling;var Ft=q(P,mt,j[Ct],$);if(Ft===null){mt===null&&(mt=Mt);break}n&&mt&&Ft.alternate===null&&i(P,mt),V=d(Ft,V,Ct),qt===null?yt=Ft:qt.sibling=Ft,qt=Ft,mt=Mt}if(Ct===j.length)return a(P,mt),Ut&&$i(P,Ct),yt;if(mt===null){for(;Ct<j.length;Ct++)mt=Z(P,j[Ct],$),mt!==null&&(V=d(mt,V,Ct),qt===null?yt=mt:qt.sibling=mt,qt=mt);return Ut&&$i(P,Ct),yt}for(mt=l(mt);Ct<j.length;Ct++)Mt=H(mt,P,Ct,j[Ct],$),Mt!==null&&(n&&Mt.alternate!==null&&mt.delete(Mt.key===null?Ct:Mt.key),V=d(Mt,V,Ct),qt===null?yt=Mt:qt.sibling=Mt,qt=Mt);return n&&mt.forEach(function(ts){return i(P,ts)}),Ut&&$i(P,Ct),yt}function Tt(P,V,j,$){if(j==null)throw Error(r(151));for(var yt=null,qt=null,mt=V,Ct=V=0,Mt=null,Ft=j.next();mt!==null&&!Ft.done;Ct++,Ft=j.next()){mt.index>Ct?(Mt=mt,mt=null):Mt=mt.sibling;var ts=q(P,mt,Ft.value,$);if(ts===null){mt===null&&(mt=Mt);break}n&&mt&&ts.alternate===null&&i(P,mt),V=d(ts,V,Ct),qt===null?yt=ts:qt.sibling=ts,qt=ts,mt=Mt}if(Ft.done)return a(P,mt),Ut&&$i(P,Ct),yt;if(mt===null){for(;!Ft.done;Ct++,Ft=j.next())Ft=Z(P,Ft.value,$),Ft!==null&&(V=d(Ft,V,Ct),qt===null?yt=Ft:qt.sibling=Ft,qt=Ft);return Ut&&$i(P,Ct),yt}for(mt=l(mt);!Ft.done;Ct++,Ft=j.next())Ft=H(mt,P,Ct,Ft.value,$),Ft!==null&&(n&&Ft.alternate!==null&&mt.delete(Ft.key===null?Ct:Ft.key),V=d(Ft,V,Ct),qt===null?yt=Ft:qt.sibling=Ft,qt=Ft);return n&&mt.forEach(function(tI){return i(P,tI)}),Ut&&$i(P,Ct),yt}function ne(P,V,j,$){if(typeof j=="object"&&j!==null&&j.type===G&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case z:t:{for(var yt=j.key;V!==null;){if(V.key===yt){if(yt=j.type,yt===G){if(V.tag===7){a(P,V.sibling),$=f(V,j.props.children),$.return=P,P=$;break t}}else if(V.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===A&&Xs(yt)===V.type){a(P,V.sibling),$=f(V,j.props),Fl($,j),$.return=P,P=$;break t}a(P,V);break}else i(P,V);V=V.sibling}j.type===G?($=Hs(j.props.children,P.mode,$,j.key),$.return=P,P=$):($=qc(j.type,j.key,j.props,null,P.mode,$),Fl($,j),$.return=P,P=$)}return _(P);case X:t:{for(yt=j.key;V!==null;){if(V.key===yt)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(P,V.sibling),$=f(V,j.children||[]),$.return=P,P=$;break t}else{a(P,V);break}else i(P,V);V=V.sibling}$=Dd(j,P.mode,$),$.return=P,P=$}return _(P);case A:return j=Xs(j),ne(P,V,j,$)}if(ge(j))return ht(P,V,j,$);if(k(j)){if(yt=k(j),typeof yt!="function")throw Error(r(150));return j=yt.call(j),Tt(P,V,j,$)}if(typeof j.then=="function")return ne(P,V,Xc(j),$);if(j.$$typeof===at)return ne(P,V,Gc(P,j),$);$c(P,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,V!==null&&V.tag===6?(a(P,V.sibling),$=f(V,j),$.return=P,P=$):(a(P,V),$=Nd(j,P.mode,$),$.return=P,P=$),_(P)):a(P,V)}return function(P,V,j,$){try{ql=0;var yt=ne(P,V,j,$);return io=null,yt}catch(mt){if(mt===no||mt===Qc)throw mt;var qt=wn(29,mt,null,P.mode);return qt.lanes=$,qt.return=P,qt}finally{}}}var Zs=a_(!0),o_=a_(!1),zr=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ur(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Bc(n),Hy(n,null,a),i}return jc(n,l,i,a),Bc(n)}function Hl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,yl(n,a)}}function Gd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Kd=!1;function Gl(){if(Kd){var n=eo;if(n!==null)throw n}}function Kl(n,i,a,l){Kd=!1;var f=n.updateQueue;zr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,B=N.next;N.next=null,_===null?d=B:_.next=B,_=N;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==_&&(b===null?Q.firstBaseUpdate=B:b.next=B,Q.lastBaseUpdate=N))}if(d!==null){var Z=f.baseState;_=0,Q=B=N=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(Ot&q)===q:(l&q)===q){q!==0&&q===to&&(Kd=!0),Q!==null&&(Q=Q.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var ht=n,Tt=b;q=i;var ne=a;switch(Tt.tag){case 1:if(ht=Tt.payload,typeof ht=="function"){Z=ht.call(ne,Z,q);break t}Z=ht;break t;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=Tt.payload,q=typeof ht=="function"?ht.call(ne,Z,q):ht,q==null)break t;Z=E({},Z,q);break t;case 2:zr=!0}}q=b.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(B=Q=H,N=Z):Q=Q.next=H,_|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;H=b,b=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);Q===null&&(N=Z),f.baseState=N,f.firstBaseUpdate=B,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),Hr|=_,n.lanes=_,n.memoizedState=Z}}function l_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function u_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)l_(a[n],i)}var ro=O(null),Zc=O(0);function c_(n,i){n=or,rt(Zc,n),rt(ro,i),or=n|i.baseLanes}function Qd(){rt(Zc,or),rt(ro,ro.current)}function Yd(){or=Zc.current,J(ro),J(Zc)}var In=O(null),Qn=null;function jr(n){var i=n.alternate;rt(Ee,Ee.current&1),rt(In,n),Qn===null&&(i===null||ro.current!==null||i.memoizedState!==null)&&(Qn=n)}function Xd(n){rt(Ee,Ee.current),rt(In,n),Qn===null&&(Qn=n)}function h_(n){n.tag===22?(rt(Ee,Ee.current),rt(In,n),Qn===null&&(Qn=n)):Br()}function Br(){rt(Ee,Ee.current),rt(In,In.current)}function xn(n){J(In),Qn===n&&(Qn=null),J(Ee)}var Ee=O(0);function Jc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||eg(a)||ng(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,xt=null,te=null,De=null,Wc=!1,so=!1,Js=!1,th=0,Ql=0,ao=null,HA=0;function pe(){throw Error(r(321))}function $d(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!An(n[a],i[a]))return!1;return!0}function Zd(n,i,a,l,f,d){return Wi=d,xt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?Y_:fm,Js=!1,d=a(l,f),Js=!1,so&&(d=d_(i,a,l,f)),f_(n),d}function f_(n){K.H=$l;var i=te!==null&&te.next!==null;if(Wi=0,De=te=xt=null,Wc=!1,Ql=0,ao=null,i)throw Error(r(300));n===null||Ve||(n=n.dependencies,n!==null&&Hc(n)&&(Ve=!0))}function d_(n,i,a,l){xt=n;var f=0;do{if(so&&(ao=null),Ql=0,so=!1,25<=f)throw Error(r(301));if(f+=1,De=te=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=X_,d=i(a,l)}while(so);return d}function GA(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Yl(i):i,n=n.useState()[0],(te!==null?te.memoizedState:null)!==n&&(xt.flags|=1024),i}function Jd(){var n=th!==0;return th=0,n}function Wd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function tm(n){if(Wc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Wc=!1}Wi=0,De=te=xt=null,so=!1,Ql=th=0,ao=null}function hn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?xt.memoizedState=De=n:De=De.next=n,De}function be(){if(te===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=te.next;var i=De===null?xt.memoizedState:De.next;if(i!==null)De=i,te=n;else{if(n===null)throw xt.alternate===null?Error(r(467)):Error(r(310));te=n,n={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},De===null?xt.memoizedState=De=n:De=De.next=n}return De}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(n){var i=Ql;return Ql+=1,ao===null&&(ao=[]),n=i_(ao,n,i),i=xt,(De===null?i.memoizedState:De.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Y_:fm),n}function nh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yl(n);if(n.$$typeof===at)return Xe(n)}throw Error(r(438,String(n)))}function em(n){var i=null,a=xt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=xt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=eh(),xt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=M;return i.index++,a}function tr(n,i){return typeof i=="function"?i(n):i}function ih(n){var i=be();return nm(i,te,n)}function nm(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,N=null,B=i,Q=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(Ot&Z)===Z:(Wi&Z)===Z){var q=B.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===to&&(Q=!0);else if((Wi&q)===q){B=B.next,q===to&&(Q=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=Z,_=d):N=N.next=Z,xt.lanes|=q,Hr|=q;Z=B.action,Js&&a(d,Z),d=B.hasEagerState?B.eagerState:a(d,Z)}else q={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=q,_=d):N=N.next=q,xt.lanes|=Z,Hr|=Z;B=B.next}while(B!==null&&B!==i);if(N===null?_=d:N.next=b,!An(d,n.memoizedState)&&(Ve=!0,Q&&(a=eo,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function im(n){var i=be(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);An(d,i.memoizedState)||(Ve=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function m_(n,i,a){var l=xt,f=be(),d=Ut;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!An((te||f).memoizedState,a);if(_&&(f.memoizedState=a,Ve=!0),f=f.queue,am(y_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||De!==null&&De.memoizedState.tag&1){if(l.flags|=2048,oo(9,{destroy:void 0},p_.bind(null,l,f,a,i),null),se===null)throw Error(r(349));d||(Wi&127)!==0||g_(l,i,a)}return a}function g_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=xt.updateQueue,i===null?(i=eh(),xt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function p_(n,i,a,l){i.value=a,i.getSnapshot=l,__(i)&&v_(n)}function y_(n,i,a){return a(function(){__(i)&&v_(n)})}function __(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!An(n,a)}catch{return!0}}function v_(n){var i=Fs(n,2);i!==null&&vn(i,n,2)}function rm(n){var i=hn();if(typeof n=="function"){var a=n;if(n=a(),Js){zn(!0);try{a()}finally{zn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:n},i}function T_(n,i,a,l){return n.baseState=a,nm(n,te,typeof l=="function"?l:tr)}function KA(n,i,a,l,f){if(ah(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,E_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function E_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var b=a(f,l),N=K.S;N!==null&&N(_,b),b_(n,i,b)}catch(B){sm(n,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(f,l),b_(n,i,d)}catch(B){sm(n,i,B)}}function b_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){S_(n,i,l)},function(l){return sm(n,i,l)}):S_(n,i,a)}function S_(n,i,a){i.status="fulfilled",i.value=a,A_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,E_(n,a)))}function sm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,A_(i),i=i.next;while(i!==l)}n.action=null}function A_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function w_(n,i){return i}function I_(n,i){if(Ut){var a=se.formState;if(a!==null){t:{var l=xt;if(Ut){if(oe){e:{for(var f=oe,d=Kn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Yn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){oe=Yn(f.nextSibling),l=f.data==="F!";break t}}Pr(l)}l=!1}l&&(i=a[0])}}return a=hn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w_,lastRenderedState:i},a.queue=l,a=G_.bind(null,xt,l),l.dispatch=a,l=rm(!1),d=hm.bind(null,xt,!1,l.queue),l=hn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=KA.bind(null,xt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function x_(n){var i=be();return R_(i,te,n)}function R_(n,i,a){if(i=nm(n,i,w_)[0],n=ih(tr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Yl(i)}catch(_){throw _===no?Qc:_}else l=i;i=be();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(xt.flags|=2048,oo(9,{destroy:void 0},QA.bind(null,f,a),null)),[l,d,n]}function QA(n,i){n.action=i}function C_(n){var i=be(),a=te;if(a!==null)return R_(i,a,n);be(),i=i.memoizedState,a=be();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function oo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=xt.updateQueue,i===null&&(i=eh(),xt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function N_(){return be().memoizedState}function rh(n,i,a,l){var f=hn();xt.flags|=n,f.memoizedState=oo(1|i,{destroy:void 0},a,l===void 0?null:l)}function sh(n,i,a,l){var f=be();l=l===void 0?null:l;var d=f.memoizedState.inst;te!==null&&l!==null&&$d(l,te.memoizedState.deps)?f.memoizedState=oo(i,d,a,l):(xt.flags|=n,f.memoizedState=oo(1|i,d,a,l))}function D_(n,i){rh(8390656,8,n,i)}function am(n,i){sh(2048,8,n,i)}function YA(n){xt.flags|=4;var i=xt.updateQueue;if(i===null)i=eh(),xt.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function V_(n){var i=be().memoizedState;return YA({ref:i,nextImpl:n}),function(){if((Kt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function O_(n,i){return sh(4,2,n,i)}function M_(n,i){return sh(4,4,n,i)}function P_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function k_(n,i,a){a=a!=null?a.concat([n]):null,sh(4,4,P_.bind(null,i,n),a)}function om(){}function z_(n,i){var a=be();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&$d(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function U_(n,i){var a=be();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&$d(i,l[1]))return l[0];if(l=n(),Js){zn(!0);try{n()}finally{zn(!1)}}return a.memoizedState=[l,i],l}function lm(n,i,a){return a===void 0||(Wi&1073741824)!==0&&(Ot&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=Lv(),xt.lanes|=n,Hr|=n,a)}function L_(n,i,a,l){return An(a,i)?a:ro.current!==null?(n=lm(n,a,l),An(n,i)||(Ve=!0),n):(Wi&42)===0||(Wi&1073741824)!==0&&(Ot&261930)===0?(Ve=!0,n.memoizedState=a):(n=Lv(),xt.lanes|=n,Hr|=n,i)}function j_(n,i,a,l,f){var d=it.p;it.p=d!==0&&8>d?d:8;var _=K.T,b={};K.T=b,hm(n,!1,i,a);try{var N=f(),B=K.S;if(B!==null&&B(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=FA(N,l);Xl(n,i,Q,Nn(n))}else Xl(n,i,l,Nn(n))}catch(Z){Xl(n,i,{then:function(){},status:"rejected",reason:Z},Nn())}finally{it.p=d,_!==null&&b.types!==null&&(_.types=b.types),K.T=_}}function XA(){}function um(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=B_(n).queue;j_(n,f,i,pt,a===null?XA:function(){return q_(n),a(l)})}function B_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:pt,baseState:pt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:pt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function q_(n){var i=B_(n);i.next===null&&(i=n.alternate.memoizedState),Xl(n,i.next.queue,{},Nn())}function cm(){return Xe(fu)}function F_(){return be().memoizedState}function H_(){return be().memoizedState}function $A(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();n=Ur(a);var l=Lr(i,n,a);l!==null&&(vn(l,i,a),Hl(l,i,a)),i={cache:Ld()},n.payload=i;return}i=i.return}}function ZA(n,i,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ah(n)?K_(i,a):(a=Rd(n,i,a,l),a!==null&&(vn(a,n,l),Q_(a,i,l)))}function G_(n,i,a){var l=Nn();Xl(n,i,a,l)}function Xl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ah(n))K_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,An(b,_))return jc(n,i,f,0),se===null&&Lc(),!1}catch{}finally{}if(a=Rd(n,i,f,l),a!==null)return vn(a,n,l),Q_(a,i,l),!0}return!1}function hm(n,i,a,l){if(l={lane:2,revertLane:Fm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ah(n)){if(i)throw Error(r(479))}else i=Rd(n,a,l,2),i!==null&&vn(i,n,2)}function ah(n){var i=n.alternate;return n===xt||i!==null&&i===xt}function K_(n,i){so=Wc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Q_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,yl(n,a)}}var $l={readContext:Xe,use:nh,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe};$l.useEffectEvent=pe;var Y_={readContext:Xe,use:nh,useCallback:function(n,i){return hn().memoizedState=[n,i===void 0?null:i],n},useContext:Xe,useEffect:D_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,rh(4194308,4,P_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return rh(4194308,4,n,i)},useInsertionEffect:function(n,i){rh(4,2,n,i)},useMemo:function(n,i){var a=hn();i=i===void 0?null:i;var l=n();if(Js){zn(!0);try{n()}finally{zn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=hn();if(a!==void 0){var f=a(i);if(Js){zn(!0);try{a(i)}finally{zn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=ZA.bind(null,xt,n),[l.memoizedState,n]},useRef:function(n){var i=hn();return n={current:n},i.memoizedState=n},useState:function(n){n=rm(n);var i=n.queue,a=G_.bind(null,xt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:om,useDeferredValue:function(n,i){var a=hn();return lm(a,n,i)},useTransition:function(){var n=rm(!1);return n=j_.bind(null,xt,n.queue,!0,!1),hn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=xt,f=hn();if(Ut){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),se===null)throw Error(r(349));(Ot&127)!==0||g_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,D_(y_.bind(null,l,d,n),[n]),l.flags|=2048,oo(9,{destroy:void 0},p_.bind(null,l,d,a,i),null),a},useId:function(){var n=hn(),i=se.identifierPrefix;if(Ut){var a=Oi,l=Vi;a=(l&~(1<<32-ve(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=th++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=HA++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:cm,useFormState:I_,useActionState:I_,useOptimistic:function(n){var i=hn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=hm.bind(null,xt,!0,a),a.dispatch=i,[n,i]},useMemoCache:em,useCacheRefresh:function(){return hn().memoizedState=$A.bind(null,xt)},useEffectEvent:function(n){var i=hn(),a={impl:n};return i.memoizedState=a,function(){if((Kt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},fm={readContext:Xe,use:nh,useCallback:z_,useContext:Xe,useEffect:am,useImperativeHandle:k_,useInsertionEffect:O_,useLayoutEffect:M_,useMemo:U_,useReducer:ih,useRef:N_,useState:function(){return ih(tr)},useDebugValue:om,useDeferredValue:function(n,i){var a=be();return L_(a,te.memoizedState,n,i)},useTransition:function(){var n=ih(tr)[0],i=be().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:m_,useId:F_,useHostTransitionStatus:cm,useFormState:x_,useActionState:x_,useOptimistic:function(n,i){var a=be();return T_(a,te,n,i)},useMemoCache:em,useCacheRefresh:H_};fm.useEffectEvent=V_;var X_={readContext:Xe,use:nh,useCallback:z_,useContext:Xe,useEffect:am,useImperativeHandle:k_,useInsertionEffect:O_,useLayoutEffect:M_,useMemo:U_,useReducer:im,useRef:N_,useState:function(){return im(tr)},useDebugValue:om,useDeferredValue:function(n,i){var a=be();return te===null?lm(a,n,i):L_(a,te.memoizedState,n,i)},useTransition:function(){var n=im(tr)[0],i=be().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:m_,useId:F_,useHostTransitionStatus:cm,useFormState:C_,useActionState:C_,useOptimistic:function(n,i){var a=be();return te!==null?T_(a,te,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:em,useCacheRefresh:H_};X_.useEffectEvent=V_;function dm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var mm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=Ur(l);f.payload=i,a!=null&&(f.callback=a),i=Lr(n,f,l),i!==null&&(vn(i,n,l),Hl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=Ur(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Lr(n,f,l),i!==null&&(vn(i,n,l),Hl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Nn(),l=Ur(a);l.tag=2,i!=null&&(l.callback=i),i=Lr(n,l,a),i!==null&&(vn(i,n,a),Hl(i,n,a))}};function $_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!kl(a,l)||!kl(f,d):!0}function Z_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&mm.enqueueReplaceState(i,i.state,null)}function Ws(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function J_(n){Uc(n)}function W_(n){console.error(n)}function tv(n){Uc(n)}function oh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function ev(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function gm(n,i,a){return a=Ur(a),a.tag=3,a.payload={element:null},a.callback=function(){oh(n,i)},a}function nv(n){return n=Ur(n),n.tag=3,n}function iv(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){ev(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){ev(i,a,l),typeof f!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function JA(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Wa(i,a,f,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Qn===null?vh():a.alternate===null&&ye===0&&(ye=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Yc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),jm(n,l,f)),!1;case 22:return a.flags|=65536,l===Yc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),jm(n,l,f)),!1}throw Error(r(435,a.tag))}return jm(n,l,f),vh(),!1}if(Ut)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Md&&(n=Error(r(422),{cause:l}),Ll(Fn(n,a)))):(l!==Md&&(i=Error(r(423),{cause:l}),Ll(Fn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Fn(l,a),f=gm(n.stateNode,l,f),Gd(n,f),ye!==4&&(ye=2)),!1;var d=Error(r(520),{cause:l});if(d=Fn(d,a),ru===null?ru=[d]:ru.push(d),ye!==4&&(ye=2),i===null)return!0;l=Fn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=gm(a.stateNode,l,n),Gd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Gr===null||!Gr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=nv(f),iv(f,n,a,l),Gd(a,f),!1}a=a.return}while(a!==null);return!1}var pm=Error(r(461)),Ve=!1;function $e(n,i,a,l){i.child=n===null?o_(i,null,a,l):Zs(i,n.child,a,l)}function rv(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Qs(i),l=Zd(n,i,a,_,d,f),b=Jd(),n!==null&&!Ve?(Wd(n,i,f),er(n,i,f)):(Ut&&b&&Vd(i),i.flags|=1,$e(n,i,l,f),i.child)}function sv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Cd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,av(n,i,d,l,f)):(n=qc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Am(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:kl,a(_,l)&&n.ref===i.ref)return er(n,i,f)}return i.flags|=1,n=Xi(d,l),n.ref=i.ref,n.return=i,i.child=n}function av(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(kl(d,l)&&n.ref===i.ref)if(Ve=!1,i.pendingProps=l=d,Am(n,f))(n.flags&131072)!==0&&(Ve=!0);else return i.lanes=n.lanes,er(n,i,f)}return ym(n,i,a,l,f)}function ov(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return lv(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Kc(i,d!==null?d.cachePool:null),d!==null?c_(i,d):Qd(),h_(i);else return l=i.lanes=536870912,lv(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Kc(i,d.cachePool),c_(i,d),Br(),i.memoizedState=null):(n!==null&&Kc(i,null),Qd(),Br());return $e(n,i,f,a),i.child}function Zl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function lv(n,i,a,l,f){var d=Bd();return d=d===null?null:{parent:Ne._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Kc(i,null),Qd(),h_(i),n!==null&&Wa(n,i,l,!0),i.childLanes=f,null}function lh(n,i){return i=ch({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function uv(n,i,a){return Zs(i,n.child,null,a),n=lh(i,i.pendingProps),n.flags|=2,xn(i),i.memoizedState=null,n}function WA(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ut){if(l.mode==="hidden")return n=lh(i,l),i.lanes=536870912,Zl(null,n);if(Xd(i),(n=oe)?(n=E0(n,Kn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Or!==null?{id:Vi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Ky(n),a.return=i,i.child=a,Ye=i,oe=null)):n=null,n===null)throw Pr(i);return i.lanes=536870912,null}return lh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Xd(i),f)if(i.flags&256)i.flags&=-257,i=uv(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ve||Wa(n,i,a,!1),f=(a&n.childLanes)!==0,Ve||f){if(l=se,l!==null&&(_=_l(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Fs(n,_),vn(l,n,_),pm;vh(),i=uv(n,i,a)}else n=d.treeContext,oe=Yn(_.nextSibling),Ye=i,Ut=!0,Mr=null,Kn=!1,n!==null&&Xy(i,n),i=lh(i,l),i.flags|=4096;return i}return n=Xi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function uh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function ym(n,i,a,l,f){return Qs(i),a=Zd(n,i,a,l,void 0,f),l=Jd(),n!==null&&!Ve?(Wd(n,i,f),er(n,i,f)):(Ut&&l&&Vd(i),i.flags|=1,$e(n,i,a,f),i.child)}function cv(n,i,a,l,f,d){return Qs(i),i.updateQueue=null,a=d_(i,l,a,f),f_(n),l=Jd(),n!==null&&!Ve?(Wd(n,i,d),er(n,i,d)):(Ut&&l&&Vd(i),i.flags|=1,$e(n,i,a,d),i.child)}function hv(n,i,a,l,f){if(Qs(i),i.stateNode===null){var d=Xa,_=a.contextType;typeof _=="object"&&_!==null&&(d=Xe(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=mm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Fd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Xe(_):Xa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(dm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&mm.enqueueReplaceState(d,d.state,null),Kl(i,l,d,f),Gl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,N=Ws(a,b);d.props=N;var B=d.context,Q=a.contextType;_=Xa,typeof Q=="object"&&Q!==null&&(_=Xe(Q));var Z=a.getDerivedStateFromProps;Q=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&Z_(i,d,l,_),zr=!1;var q=i.memoizedState;d.state=q,Kl(i,l,d,f),Gl(),B=i.memoizedState,b||q!==B||zr?(typeof Z=="function"&&(dm(i,a,Z,l),B=i.memoizedState),(N=zr||$_(i,a,N,l,q,B,_))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Hd(n,i),_=i.memoizedProps,Q=Ws(a,_),d.props=Q,Z=i.pendingProps,q=d.context,B=a.contextType,N=Xa,typeof B=="object"&&B!==null&&(N=Xe(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Z||q!==N)&&Z_(i,d,l,N),zr=!1,q=i.memoizedState,d.state=q,Kl(i,l,d,f),Gl();var H=i.memoizedState;_!==Z||q!==H||zr||n!==null&&n.dependencies!==null&&Hc(n.dependencies)?(typeof b=="function"&&(dm(i,a,b,l),H=i.memoizedState),(Q=zr||$_(i,a,Q,l,q,H,N)||n!==null&&n.dependencies!==null&&Hc(n.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=N,l=Q):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,uh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Zs(i,n.child,null,f),i.child=Zs(i,null,a,f)):$e(n,i,a,f),i.memoizedState=d.state,n=i.child):n=er(n,i,f),n}function fv(n,i,a,l){return Gs(),i.flags|=256,$e(n,i,a,l),i.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(n){return{baseLanes:n,cachePool:e_()}}function Tm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Cn),n}function dv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Ee.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ut){if(f?jr(i):Br(),(n=oe)?(n=E0(n,Kn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Or!==null?{id:Vi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Ky(n),a.return=i,i.child=a,Ye=i,oe=null)):n=null,n===null)throw Pr(i);return ng(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Br(),f=i.mode,b=ch({mode:"hidden",children:b},f),l=Hs(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=vm(a),l.childLanes=Tm(n,_,a),i.memoizedState=_m,Zl(null,l)):(jr(i),Em(i,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(jr(i),i.flags&=-257,i=bm(n,i,a)):i.memoizedState!==null?(Br(),i.child=n.child,i.flags|=128,i=null):(Br(),b=l.fallback,f=i.mode,l=ch({mode:"visible",children:l.children},f),b=Hs(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Zs(i,n.child,null,a),l=i.child,l.memoizedState=vm(a),l.childLanes=Tm(n,_,a),i.memoizedState=_m,i=Zl(null,l));else if(jr(i),ng(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,Ll({value:l,source:null,stack:null}),i=bm(n,i,a)}else if(Ve||Wa(n,i,a,!1),_=(a&n.childLanes)!==0,Ve||_){if(_=se,_!==null&&(l=_l(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Fs(n,l),vn(_,n,l),pm;eg(b)||vh(),i=bm(n,i,a)}else eg(b)?(i.flags|=192,i.child=n.child,i=null):(n=N.treeContext,oe=Yn(b.nextSibling),Ye=i,Ut=!0,Mr=null,Kn=!1,n!==null&&Xy(i,n),i=Em(i,l.children),i.flags|=4096);return i}return f?(Br(),b=l.fallback,f=i.mode,N=n.child,B=N.sibling,l=Xi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?b=Xi(B,b):(b=Hs(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Zl(null,l),l=i.child,b=n.child.memoizedState,b===null?b=vm(a):(f=b.cachePool,f!==null?(N=Ne._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=e_(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=Tm(n,_,a),i.memoizedState=_m,Zl(n.child,l)):(jr(i),a=n.child,n=a.sibling,a=Xi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Em(n,i){return i=ch({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function ch(n,i){return n=wn(22,n,null,i),n.lanes=0,n}function bm(n,i,a){return Zs(i,n.child,null,a),n=Em(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function mv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),zd(n.return,i,a)}function Sm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function gv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Ee.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,rt(Ee,_),$e(n,i,l,a),l=Ut?Ul:0,!b&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&mv(n,a,i);else if(n.tag===19)mv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Jc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Sm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Jc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Sm(i,!0,a,null,d,l);break;case"together":Sm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function er(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Hr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Wa(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Xi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Xi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Am(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Hc(n)))}function tw(n,i,a){switch(i.tag){case 3:ze(i,i.stateNode.containerInfo),kr(i,Ne,n.memoizedState.cache),Gs();break;case 27:case 5:ws(i);break;case 4:ze(i,i.stateNode.containerInfo);break;case 10:kr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(jr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?dv(n,i,a):(jr(i),n=er(n,i,a),n!==null?n.sibling:null);jr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Wa(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return gv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Ee,Ee.current),l)break;return null;case 22:return i.lanes=0,ov(n,i,a,i.pendingProps);case 24:kr(i,Ne,n.memoizedState.cache)}return er(n,i,a)}function pv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Am(n,a)&&(i.flags&128)===0)return Ve=!1,tw(n,i,a);Ve=(n.flags&131072)!==0}else Ve=!1,Ut&&(i.flags&1048576)!==0&&Yy(i,Ul,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(n=Xs(i.elementType),i.type=n,typeof n=="function")Cd(n)?(l=Ws(n,l),i.tag=1,i=hv(null,i,n,l,a)):(i.tag=0,i=ym(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===vt){i.tag=11,i=rv(null,i,n,l,a);break t}else if(f===I){i.tag=14,i=sv(null,i,n,l,a);break t}}throw i=re(n)||n,Error(r(306,i,""))}}return i;case 0:return ym(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ws(l,i.pendingProps),hv(n,i,l,f,a);case 3:t:{if(ze(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Hd(n,i),Kl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,kr(i,Ne,l),l!==d.cache&&Ud(i,[Ne],a,!0),Gl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=fv(n,i,l,a);break t}else if(l!==f){f=Fn(Error(r(424)),i),Ll(f),i=fv(n,i,l,a);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(oe=Yn(n.firstChild),Ye=i,Ut=!0,Mr=null,Kn=!0,a=o_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gs(),l===f){i=er(n,i,a);break t}$e(n,i,l,a)}i=i.child}return i;case 26:return uh(n,i),n===null?(a=x0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ut||(a=i.type,n=i.pendingProps,l=Ih(Rt.current).createElement(a),l[xe]=i,l[qe]=n,Ze(l,a,n),Re(l),i.stateNode=l):i.memoizedState=x0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ws(i),n===null&&Ut&&(l=i.stateNode=A0(i.type,i.pendingProps,Rt.current),Ye=i,Kn=!0,f=oe,Xr(i.type)?(ig=f,oe=Yn(l.firstChild)):oe=f),$e(n,i,i.pendingProps.children,a),uh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ut&&((f=l=oe)&&(l=Nw(l,i.type,i.pendingProps,Kn),l!==null?(i.stateNode=l,Ye=i,oe=Yn(l.firstChild),Kn=!1,f=!0):f=!1),f||Pr(i)),ws(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Jm(f,d)?l=null:_!==null&&Jm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Zd(n,i,GA,null,null,a),fu._currentValue=f),uh(n,i),$e(n,i,l,a),i.child;case 6:return n===null&&Ut&&((n=a=oe)&&(a=Dw(a,i.pendingProps,Kn),a!==null?(i.stateNode=a,Ye=i,oe=null,n=!0):n=!1),n||Pr(i)),null;case 13:return dv(n,i,a);case 4:return ze(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Zs(i,null,l,a):$e(n,i,l,a),i.child;case 11:return rv(n,i,i.type,i.pendingProps,a);case 7:return $e(n,i,i.pendingProps,a),i.child;case 8:return $e(n,i,i.pendingProps.children,a),i.child;case 12:return $e(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,kr(i,i.type,l.value),$e(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Qs(i),f=Xe(f),l=l(f),i.flags|=1,$e(n,i,l,a),i.child;case 14:return sv(n,i,i.type,i.pendingProps,a);case 15:return av(n,i,i.type,i.pendingProps,a);case 19:return gv(n,i,a);case 31:return WA(n,i,a);case 22:return ov(n,i,a,i.pendingProps);case 24:return Qs(i),l=Xe(Ne),n===null?(f=Bd(),f===null&&(f=se,d=Ld(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Fd(i),kr(i,Ne,f)):((n.lanes&a)!==0&&(Hd(n,i),Kl(i,null,null,a),Gl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),kr(i,Ne,l)):(l=d.cache,kr(i,Ne,l),l!==f.cache&&Ud(i,[Ne],a,!0))),$e(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function nr(n){n.flags|=4}function wm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Fv())n.flags|=8192;else throw $s=Yc,qd}else n.flags&=-16777217}function yv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!V0(i))if(Fv())n.flags|=8192;else throw $s=Yc,qd}function hh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?yc():536870912,n.lanes|=i,ho|=i)}function Jl(n,i){if(!Ut)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function le(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function ew(n,i,a){var l=i.pendingProps;switch(Od(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(i),null;case 1:return le(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(Ne),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ja(i)?nr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pd())),le(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(nr(i),d!==null?(le(i),yv(i,d)):(le(i),wm(i,f,null,l,a))):d?d!==n.memoizedState?(nr(i),le(i),yv(i,d)):(le(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&nr(i),le(i),wm(i,f,n,l,a)),null;case 27:if(Na(i),a=Rt.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&nr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return le(i),null}n=ut.current,Ja(i)?$y(i):(n=A0(f,l,a),i.stateNode=n,nr(i))}return le(i),null;case 5:if(Na(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&nr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return le(i),null}if(d=ut.current,Ja(i))$y(i);else{var _=Ih(Rt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[xe]=i,d[qe]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(Ze(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&nr(i)}}return le(i),wm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&nr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Rt.current,Ja(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Ye,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[xe]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||d0(n.nodeValue,a)),n||Pr(i,!0)}else n=Ih(n).createTextNode(l),n[xe]=i,i.stateNode=n}return le(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=Ja(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[xe]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;le(i),n=!1}else a=Pd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(xn(i),i):(xn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return le(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ja(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[xe]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;le(i),f=!1}else f=Pd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(xn(i),i):(xn(i),null)}return xn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),hh(i,i.updateQueue),le(i),null);case 4:return ue(),n===null&&Qm(i.stateNode.containerInfo),le(i),null;case 10:return Ji(i.type),le(i),null;case 19:if(J(Ee),l=i.memoizedState,l===null)return le(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Jl(l,!1);else{if(ye!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=Jc(n),d!==null){for(i.flags|=128,Jl(l,!1),n=d.updateQueue,i.updateQueue=n,hh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Gy(a,n),a=a.sibling;return rt(Ee,Ee.current&1|2),Ut&&$i(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&un()>ph&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304)}else{if(!f)if(n=Jc(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,hh(i,n),Jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ut)return le(i),null}else 2*un()-l.renderingStartTime>ph&&a!==536870912&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=un(),n.sibling=null,a=Ee.current,rt(Ee,f?a&1|2:a&1),Ut&&$i(i,l.treeForkCount),n):(le(i),null);case 22:case 23:return xn(i),Yd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(le(i),i.subtreeFlags&6&&(i.flags|=8192)):le(i),a=i.updateQueue,a!==null&&hh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&J(Ys),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(Ne),le(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function nw(n,i){switch(Od(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ji(Ne),ue(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Na(i),null;case 31:if(i.memoizedState!==null){if(xn(i),i.alternate===null)throw Error(r(340));Gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(xn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(Ee),null;case 4:return ue(),null;case 10:return Ji(i.type),null;case 22:case 23:return xn(i),Yd(),n!==null&&J(Ys),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ji(Ne),null;case 25:return null;default:return null}}function _v(n,i){switch(Od(i),i.tag){case 3:Ji(Ne),ue();break;case 26:case 27:case 5:Na(i);break;case 4:ue();break;case 31:i.memoizedState!==null&&xn(i);break;case 13:xn(i);break;case 19:J(Ee);break;case 10:Ji(i.type);break;case 22:case 23:xn(i),Yd(),n!==null&&J(Ys);break;case 24:Ji(Ne)}}function Wl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){$t(i,i.return,b)}}function qr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,B=b;try{B()}catch(Q){$t(f,N,Q)}}}l=l.next}while(l!==d)}}catch(Q){$t(i,i.return,Q)}}function vv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{u_(i,a)}catch(l){$t(n,n.return,l)}}}function Tv(n,i,a){a.props=Ws(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){$t(n,i,l)}}function tu(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){$t(n,i,f)}}function Mi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){$t(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){$t(n,i,f)}else a.current=null}function Ev(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){$t(n,n.return,f)}}function Im(n,i,a){try{var l=n.stateNode;Aw(l,n.type,a,i),l[qe]=i}catch(f){$t(n,n.return,f)}}function bv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xr(n.type)||n.tag===4}function xm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||bv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ni));else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Rm(n,i,a),n=n.sibling;n!==null;)Rm(n,i,a),n=n.sibling}function fh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(fh(n,i,a),n=n.sibling;n!==null;)fh(n,i,a),n=n.sibling}function Sv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Ze(i,l,a),i[xe]=n,i[qe]=a}catch(d){$t(n,n.return,d)}}var ir=!1,Oe=!1,Cm=!1,Av=typeof WeakSet=="function"?WeakSet:Set,He=null;function iw(n,i){if(n=n.containerInfo,$m=Oh,n=ky(n),bd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,b=-1,N=-1,B=0,Q=0,Z=n,q=null;e:for(;;){for(var H;Z!==a||f!==0&&Z.nodeType!==3||(b=_+f),Z!==d||l!==0&&Z.nodeType!==3||(N=_+l),Z.nodeType===3&&(_+=Z.nodeValue.length),(H=Z.firstChild)!==null;)q=Z,Z=H;for(;;){if(Z===n)break e;if(q===a&&++B===f&&(b=_),q===d&&++Q===l&&(N=_),(H=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=H}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zm={focusedElem:n,selectionRange:a},Oh=!1,He=i;He!==null;)if(i=He,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,He=n;else for(;He!==null;){switch(i=He,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ht=Ws(a.type,f);n=l.getSnapshotBeforeUpdate(ht,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Tt){$t(a,a.return,Tt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)tg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":tg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,He=n;break}He=i.return}}function wv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:sr(n,a),l&4&&Wl(5,a);break;case 1:if(sr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){$t(a,a.return,_)}else{var f=Ws(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){$t(a,a.return,_)}}l&64&&vv(a),l&512&&tu(a,a.return);break;case 3:if(sr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{u_(n,i)}catch(_){$t(a,a.return,_)}}break;case 27:i===null&&l&4&&Sv(a);case 26:case 5:sr(n,a),i===null&&l&4&&Ev(a),l&512&&tu(a,a.return);break;case 12:sr(n,a);break;case 31:sr(n,a),l&4&&Rv(n,a);break;case 13:sr(n,a),l&4&&Cv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=fw.bind(null,a),Vw(n,a))));break;case 22:if(l=a.memoizedState!==null||ir,!l){i=i!==null&&i.memoizedState!==null||Oe,f=ir;var d=Oe;ir=l,(Oe=i)&&!d?ar(n,a,(a.subtreeFlags&8772)!==0):sr(n,a),ir=f,Oe=d}break;case 30:break;default:sr(n,a)}}function Iv(n){var i=n.alternate;i!==null&&(n.alternate=null,Iv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Pa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var he=null,gn=!1;function rr(n,i,a){for(a=a.child;a!==null;)xv(n,i,a),a=a.sibling}function xv(n,i,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Jn,a)}catch{}switch(a.tag){case 26:Oe||Mi(a,i),rr(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Oe||Mi(a,i);var l=he,f=gn;Xr(a.type)&&(he=a.stateNode,gn=!1),rr(n,i,a),uu(a.stateNode),he=l,gn=f;break;case 5:Oe||Mi(a,i);case 6:if(l=he,f=gn,he=null,rr(n,i,a),he=l,gn=f,he!==null)if(gn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(d){$t(a,i,d)}else try{he.removeChild(a.stateNode)}catch(d){$t(a,i,d)}break;case 18:he!==null&&(gn?(n=he,v0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),To(n)):v0(he,a.stateNode));break;case 4:l=he,f=gn,he=a.stateNode.containerInfo,gn=!0,rr(n,i,a),he=l,gn=f;break;case 0:case 11:case 14:case 15:qr(2,a,i),Oe||qr(4,a,i),rr(n,i,a);break;case 1:Oe||(Mi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Tv(a,i,l)),rr(n,i,a);break;case 21:rr(n,i,a);break;case 22:Oe=(l=Oe)||a.memoizedState!==null,rr(n,i,a),Oe=l;break;default:rr(n,i,a)}}function Rv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{To(n)}catch(a){$t(i,i.return,a)}}}function Cv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{To(n)}catch(a){$t(i,i.return,a)}}function rw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Av),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Av),i;default:throw Error(r(435,n.tag))}}function dh(n,i){var a=rw(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=dw.bind(null,n,l);l.then(f,f)}})}function pn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Xr(b.type)){he=b.stateNode,gn=!1;break t}break;case 5:he=b.stateNode,gn=!1;break t;case 3:case 4:he=b.stateNode.containerInfo,gn=!0;break t}b=b.return}if(he===null)throw Error(r(160));xv(d,_,f),he=null,gn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Nv(i,n),i=i.sibling}var li=null;function Nv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:pn(i,n),yn(n),l&4&&(qr(3,n,n.return),Wl(3,n),qr(5,n,n.return));break;case 1:pn(i,n),yn(n),l&512&&(Oe||a===null||Mi(a,a.return)),l&64&&ir&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=li;if(pn(i,n),yn(n),l&512&&(Oe||a===null||Mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ti]||d[xe]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Ze(d,l,a),d[xe]=n,Re(d),l=d;break t;case"link":var _=N0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(l),Ze(d,l,a),f.head.appendChild(d);break;case"meta":if(_=N0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break e}}d=f.createElement(l),Ze(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[xe]=n,Re(d),l=d}n.stateNode=l}else D0(f,n.type,n.stateNode);else n.stateNode=C0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?D0(f,n.type,n.stateNode):C0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Im(n,n.memoizedProps,a.memoizedProps)}break;case 27:pn(i,n),yn(n),l&512&&(Oe||a===null||Mi(a,a.return)),a!==null&&l&4&&Im(n,n.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,n),yn(n),l&512&&(Oe||a===null||Mi(a,a.return)),n.flags&32){f=n.stateNode;try{mn(f,"")}catch(ht){$t(n,n.return,ht)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Im(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Cm=!0);break;case 6:if(pn(i,n),yn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ht){$t(n,n.return,ht)}}break;case 3:if(Ch=null,f=li,li=xh(i.containerInfo),pn(i,n),li=f,yn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{To(i.containerInfo)}catch(ht){$t(n,n.return,ht)}Cm&&(Cm=!1,Dv(n));break;case 4:l=li,li=xh(n.stateNode.containerInfo),pn(i,n),yn(n),li=l;break;case 12:pn(i,n),yn(n);break;case 31:pn(i,n),yn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 13:pn(i,n),yn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gh=un()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 22:f=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=ir,Q=Oe;if(ir=B||f,Oe=Q||N,pn(i,n),Oe=Q,ir=B,yn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||ir||Oe||ta(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var Z=N.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ht){$t(N,N.return,ht)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(ht){$t(N,N.return,ht)}}}else if(i.tag===18){if(a===null){N=i;try{var H=N.stateNode;f?T0(H,!0):T0(N.stateNode,!1)}catch(ht){$t(N,N.return,ht)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dh(n,a))));break;case 19:pn(i,n),yn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 30:break;case 21:break;default:pn(i,n),yn(n)}}function yn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(bv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=xm(n);fh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(mn(_,""),a.flags&=-33);var b=xm(n);fh(n,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,B=xm(n);Rm(n,B,N);break;default:throw Error(r(161))}}catch(Q){$t(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Dv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Dv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function sr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)wv(n,i.alternate,i),i=i.sibling}function ta(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:qr(4,i,i.return),ta(i);break;case 1:Mi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Tv(i,i.return,a),ta(i);break;case 27:uu(i.stateNode);case 26:case 5:Mi(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}n=n.sibling}}function ar(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:ar(f,d,a),Wl(4,d);break;case 1:if(ar(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){$t(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)l_(N[f],b)}catch(B){$t(l,l.return,B)}}a&&_&64&&vv(d),tu(d,d.return);break;case 27:Sv(d);case 26:case 5:ar(f,d,a),a&&l===null&&_&4&&Ev(d),tu(d,d.return);break;case 12:ar(f,d,a);break;case 31:ar(f,d,a),a&&_&4&&Rv(f,d);break;case 13:ar(f,d,a),a&&_&4&&Cv(f,d);break;case 22:d.memoizedState===null&&ar(f,d,a),tu(d,d.return);break;case 30:break;default:ar(f,d,a)}i=i.sibling}}function Nm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&jl(a))}function Dm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n))}function ui(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vv(n,i,a,l),i=i.sibling}function Vv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ui(n,i,a,l),f&2048&&Wl(9,i);break;case 1:ui(n,i,a,l);break;case 3:ui(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n)));break;case 12:if(f&2048){ui(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){$t(i,i.return,N)}}else ui(n,i,a,l);break;case 31:ui(n,i,a,l);break;case 13:ui(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ui(n,i,a,l):eu(n,i):d._visibility&2?ui(n,i,a,l):(d._visibility|=2,lo(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Nm(_,i);break;case 24:ui(n,i,a,l),f&2048&&Dm(i.alternate,i);break;default:ui(n,i,a,l)}}function lo(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,N=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:lo(d,_,b,N,f),Wl(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?lo(d,_,b,N,f):eu(d,_):(Q._visibility|=2,lo(d,_,b,N,f)),f&&B&2048&&Nm(_.alternate,_);break;case 24:lo(d,_,b,N,f),f&&B&2048&&Dm(_.alternate,_);break;default:lo(d,_,b,N,f)}i=i.sibling}}function eu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:eu(a,l),f&2048&&Nm(l.alternate,l);break;case 24:eu(a,l),f&2048&&Dm(l.alternate,l);break;default:eu(a,l)}i=i.sibling}}var nu=8192;function uo(n,i,a){if(n.subtreeFlags&nu)for(n=n.child;n!==null;)Ov(n,i,a),n=n.sibling}function Ov(n,i,a){switch(n.tag){case 26:uo(n,i,a),n.flags&nu&&n.memoizedState!==null&&Hw(a,li,n.memoizedState,n.memoizedProps);break;case 5:uo(n,i,a);break;case 3:case 4:var l=li;li=xh(n.stateNode.containerInfo),uo(n,i,a),li=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=nu,nu=16777216,uo(n,i,a),nu=l):uo(n,i,a));break;default:uo(n,i,a)}}function Mv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function iu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,kv(l,n)}Mv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Pv(n),n=n.sibling}function Pv(n){switch(n.tag){case 0:case 11:case 15:iu(n),n.flags&2048&&qr(9,n,n.return);break;case 3:iu(n);break;case 12:iu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,mh(n)):iu(n);break;default:iu(n)}}function mh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,kv(l,n)}Mv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:qr(8,i,i.return),mh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,mh(i));break;default:mh(i)}n=n.sibling}}function kv(n,i){for(;He!==null;){var a=He;switch(a.tag){case 0:case 11:case 15:qr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,He=l;else t:for(a=n;He!==null;){l=He;var f=l.sibling,d=l.return;if(Iv(l),l===a){He=null;break t}if(f!==null){f.return=d,He=f;break t}He=d}}}var sw={getCacheForType:function(n){var i=Xe(Ne),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Xe(Ne).controller.signal}},aw=typeof WeakMap=="function"?WeakMap:Map,Kt=0,se=null,Dt=null,Ot=0,Xt=0,Rn=null,Fr=!1,co=!1,Vm=!1,or=0,ye=0,Hr=0,ea=0,Om=0,Cn=0,ho=0,ru=null,_n=null,Mm=!1,gh=0,zv=0,ph=1/0,yh=null,Gr=null,Le=0,Kr=null,fo=null,lr=0,Pm=0,km=null,Uv=null,su=0,zm=null;function Nn(){return(Kt&2)!==0&&Ot!==0?Ot&-Ot:K.T!==null?Fm():_c()}function Lv(){if(Cn===0)if((Ot&536870912)===0||Ut){var n=Rs;Rs<<=1,(Rs&3932160)===0&&(Rs=262144),Cn=n}else Cn=536870912;return n=In.current,n!==null&&(n.flags|=32),Cn}function vn(n,i,a){(n===se&&(Xt===2||Xt===9)||n.cancelPendingCommit!==null)&&(mo(n,0),Qr(n,Ot,Cn,!1)),Cs(n,a),((Kt&2)===0||n!==se)&&(n===se&&((Kt&2)===0&&(ea|=a),ye===4&&Qr(n,Ot,Cn,!1)),Pi(n))}function jv(n,i,a){if((Kt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Wn(n,i),f=l?uw(n,i):Lm(n,i,!0),d=l;do{if(f===0){co&&!l&&Qr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!ow(a)){f=Lm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var b=n;f=ru;var N=b.current.memoizedState.isDehydrated;if(N&&(mo(b,_).flags|=256),_=Lm(b,_,!1),_!==2){if(Vm&&!N){b.errorRecoveryDisabledLanes|=d,ea|=d,f=4;break t}d=_n,_n=f,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){mo(n,0),Qr(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Qr(l,i,Cn,!Fr);break t;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=gh+300-un(),10<f)){if(Qr(l,i,Cn,!Fr),yi(l,0,!0)!==0)break t;lr=i,l.timeoutHandle=y0(Bv.bind(null,l,a,_n,yh,Mm,i,Cn,ea,ho,Fr,d,"Throttled",-0,0),f);break t}Bv(l,a,_n,yh,Mm,i,Cn,ea,ho,Fr,d,null,-0,0)}}break}while(!0);Pi(n)}function Bv(n,i,a,l,f,d,_,b,N,B,Q,Z,q,H){if(n.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},Ov(i,d,Z);var ht=(d&62914560)===d?gh-un():(d&4194048)===d?zv-un():0;if(ht=Gw(Z,ht),ht!==null){lr=d,n.cancelPendingCommit=ht(Xv.bind(null,n,i,d,a,l,f,_,b,N,Q,Z,null,q,H)),Qr(n,d,_,!B);return}}Xv(n,i,d,a,l,f,_,b,N)}function ow(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!An(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qr(n,i,a,l){i&=~Om,i&=~ea,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-ve(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Ns(n,a,i)}function _h(){return(Kt&6)===0?(au(0),!1):!0}function Um(){if(Dt!==null){if(Xt===0)var n=Dt.return;else n=Dt,Zi=Ks=null,tm(n),io=null,ql=0,n=Dt;for(;n!==null;)_v(n.alternate,n),n=n.return;Dt=null}}function mo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,xw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),lr=0,Um(),se=n,Dt=a=Xi(n.current,null),Ot=i,Xt=0,Rn=null,Fr=!1,co=Wn(n,i),Vm=!1,ho=Cn=Om=ea=Hr=ye=0,_n=ru=null,Mm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-ve(l),d=1<<f;i|=n[f],l&=~d}return or=i,Lc(),a}function qv(n,i){xt=null,K.H=$l,i===no||i===Qc?(i=r_(),Xt=3):i===qd?(i=r_(),Xt=4):Xt=i===pm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Dt===null&&(ye=1,oh(n,Fn(i,n.current)))}function Fv(){var n=In.current;return n===null?!0:(Ot&4194048)===Ot?Qn===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?n===Qn:!1}function Hv(){var n=K.H;return K.H=$l,n===null?$l:n}function Gv(){var n=K.A;return K.A=sw,n}function vh(){ye=4,Fr||(Ot&4194048)!==Ot&&In.current!==null||(co=!0),(Hr&134217727)===0&&(ea&134217727)===0||se===null||Qr(se,Ot,Cn,!1)}function Lm(n,i,a){var l=Kt;Kt|=2;var f=Hv(),d=Gv();(se!==n||Ot!==i)&&(yh=null,mo(n,i)),i=!1;var _=ye;t:do try{if(Xt!==0&&Dt!==null){var b=Dt,N=Rn;switch(Xt){case 8:Um(),_=6;break t;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var B=Xt;if(Xt=0,Rn=null,go(n,b,N,B),a&&co){_=0;break t}break;default:B=Xt,Xt=0,Rn=null,go(n,b,N,B)}}lw(),_=ye;break}catch(Q){qv(n,Q)}while(!0);return i&&n.shellSuspendCounter++,Zi=Ks=null,Kt=l,K.H=f,K.A=d,Dt===null&&(se=null,Ot=0,Lc()),_}function lw(){for(;Dt!==null;)Kv(Dt)}function uw(n,i){var a=Kt;Kt|=2;var l=Hv(),f=Gv();se!==n||Ot!==i?(yh=null,ph=un()+500,mo(n,i)):co=Wn(n,i);t:do try{if(Xt!==0&&Dt!==null){i=Dt;var d=Rn;e:switch(Xt){case 1:Xt=0,Rn=null,go(n,i,d,1);break;case 2:case 9:if(n_(d)){Xt=0,Rn=null,Qv(i);break}i=function(){Xt!==2&&Xt!==9||se!==n||(Xt=7),Pi(n)},d.then(i,i);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:n_(d)?(Xt=0,Rn=null,Qv(i)):(Xt=0,Rn=null,go(n,i,d,7));break;case 5:var _=null;switch(Dt.tag){case 26:_=Dt.memoizedState;case 5:case 27:var b=Dt;if(_?V0(_):b.stateNode.complete){Xt=0,Rn=null;var N=b.sibling;if(N!==null)Dt=N;else{var B=b.return;B!==null?(Dt=B,Th(B)):Dt=null}break e}}Xt=0,Rn=null,go(n,i,d,5);break;case 6:Xt=0,Rn=null,go(n,i,d,6);break;case 8:Um(),ye=6;break t;default:throw Error(r(462))}}cw();break}catch(Q){qv(n,Q)}while(!0);return Zi=Ks=null,K.H=l,K.A=f,Kt=a,Dt!==null?0:(se=null,Ot=0,Lc(),ye)}function cw(){for(;Dt!==null&&!gd();)Kv(Dt)}function Kv(n){var i=pv(n.alternate,n,or);n.memoizedProps=n.pendingProps,i===null?Th(n):Dt=i}function Qv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=cv(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=cv(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:tm(i);default:_v(a,i),i=Dt=Gy(i,or),i=pv(a,i,or)}n.memoizedProps=n.pendingProps,i===null?Th(n):Dt=i}function go(n,i,a,l){Zi=Ks=null,tm(i),io=null,ql=0;var f=i.return;try{if(JA(n,f,i,a,Ot)){ye=1,oh(n,Fn(a,n.current)),Dt=null;return}}catch(d){if(f!==null)throw Dt=f,d;ye=1,oh(n,Fn(a,n.current)),Dt=null;return}i.flags&32768?(Ut||l===1?n=!0:co||(Ot&536870912)!==0?n=!1:(Fr=n=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),Yv(i,n)):Th(i)}function Th(n){var i=n;do{if((i.flags&32768)!==0){Yv(i,Fr);return}n=i.return;var a=ew(i.alternate,i,or);if(a!==null){Dt=a;return}if(i=i.sibling,i!==null){Dt=i;return}Dt=i=n}while(i!==null);ye===0&&(ye=5)}function Yv(n,i){do{var a=nw(n.alternate,n);if(a!==null){a.flags&=32767,Dt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Dt=n;return}Dt=n=a}while(n!==null);ye=6,Dt=null}function Xv(n,i,a,l,f,d,_,b,N){n.cancelPendingCommit=null;do Eh();while(Le!==0);if((Kt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=xd,_d(n,a,d,_,b,N),n===se&&(Dt=se=null,Ot=0),fo=i,Kr=n,lr=a,Pm=d,km=f,Uv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,mw(Sr,function(){return t0(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=it.p,it.p=2,_=Kt,Kt|=4;try{iw(n,i,a)}finally{Kt=_,it.p=f,K.T=l}}Le=1,$v(),Zv(),Jv()}}function $v(){if(Le===1){Le=0;var n=Kr,i=fo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=it.p;it.p=2;var f=Kt;Kt|=4;try{Nv(i,n);var d=Zm,_=ky(n.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Py(b.ownerDocument.documentElement,b)){if(N!==null&&bd(b)){var B=N.start,Q=N.end;if(Q===void 0&&(Q=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(Q,b.value.length);else{var Z=b.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var H=q.getSelection(),ht=b.textContent.length,Tt=Math.min(N.start,ht),ne=N.end===void 0?Tt:Math.min(N.end,ht);!H.extend&&Tt>ne&&(_=ne,ne=Tt,Tt=_);var P=My(b,Tt),V=My(b,ne);if(P&&V&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==V.node||H.focusOffset!==V.offset)){var j=Z.createRange();j.setStart(P.node,P.offset),H.removeAllRanges(),Tt>ne?(H.addRange(j),H.extend(V.node,V.offset)):(j.setEnd(V.node,V.offset),H.addRange(j))}}}}for(Z=[],H=b;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var $=Z[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Oh=!!$m,Zm=$m=null}finally{Kt=f,it.p=l,K.T=a}}n.current=i,Le=2}}function Zv(){if(Le===2){Le=0;var n=Kr,i=fo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=it.p;it.p=2;var f=Kt;Kt|=4;try{wv(n,i.alternate,i)}finally{Kt=f,it.p=l,K.T=a}}Le=3}}function Jv(){if(Le===4||Le===3){Le=0,hc();var n=Kr,i=fo,a=lr,l=Uv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Le=5:(Le=0,fo=Kr=null,Wv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Gr=null),Gi(a),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Jn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=it.p,it.p=2,K.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{K.T=i,it.p=f}}(lr&3)!==0&&Eh(),Pi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===zm?su++:(su=0,zm=n):su=0,au(0)}}function Wv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,jl(i)))}function Eh(){return $v(),Zv(),Jv(),t0()}function t0(){if(Le!==5)return!1;var n=Kr,i=Pm;Pm=0;var a=Gi(lr),l=K.T,f=it.p;try{it.p=32>a?32:a,K.T=null,a=km,km=null;var d=Kr,_=lr;if(Le=0,fo=Kr=null,lr=0,(Kt&6)!==0)throw Error(r(331));var b=Kt;if(Kt|=4,Pv(d.current),Vv(d,d.current,_,a),Kt=b,au(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Jn,d)}catch{}return!0}finally{it.p=f,K.T=l,Wv(n,i)}}function e0(n,i,a){i=Fn(a,i),i=gm(n.stateNode,i,2),n=Lr(n,i,2),n!==null&&(Cs(n,2),Pi(n))}function $t(n,i,a){if(n.tag===3)e0(n,n,a);else for(;i!==null;){if(i.tag===3){e0(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gr===null||!Gr.has(l))){n=Fn(a,n),a=nv(2),l=Lr(i,a,2),l!==null&&(iv(a,l,i,n),Cs(l,2),Pi(l));break}}i=i.return}}function jm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new aw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Vm=!0,f.add(a),n=hw.bind(null,n,i,a),i.then(n,n))}function hw(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,se===n&&(Ot&a)===a&&(ye===4||ye===3&&(Ot&62914560)===Ot&&300>un()-gh?(Kt&2)===0&&mo(n,0):Om|=a,ho===Ot&&(ho=0)),Pi(n)}function n0(n,i){i===0&&(i=yc()),n=Fs(n,i),n!==null&&(Cs(n,i),Pi(n))}function fw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),n0(n,a)}function dw(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),n0(n,a)}function mw(n,i){return Ue(n,i)}var bh=null,po=null,Bm=!1,Sh=!1,qm=!1,Yr=0;function Pi(n){n!==po&&n.next===null&&(po===null?bh=po=n:po=po.next=n),Sh=!0,Bm||(Bm=!0,pw())}function au(n,i){if(!qm&&Sh){qm=!0;do for(var a=!1,l=bh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-ve(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,a0(l,d))}else d=Ot,d=yi(l,l===se?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Wn(l,d)||(a=!0,a0(l,d));l=l.next}while(a);qm=!1}}function gw(){i0()}function i0(){Sh=Bm=!1;var n=0;Yr!==0&&Iw()&&(n=Yr);for(var i=un(),a=null,l=bh;l!==null;){var f=l.next,d=r0(l,i);d===0?(l.next=null,a===null?bh=f:a.next=f,f===null&&(po=a)):(a=l,(n!==0||(d&3)!==0)&&(Sh=!0)),l=f}Le!==0&&Le!==5||au(n),Yr!==0&&(Yr=0)}function r0(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-ve(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=yd(b,i)):N<=i&&(n.expiredLanes|=b),d&=~b}if(i=se,a=Ot,a=yi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Xt===2||Xt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&br(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Wn(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&br(l),Gi(a)){case 2:case 8:a=pl;break;case 32:a=Sr;break;case 268435456:a=fc;break;default:a=Sr}return l=s0.bind(null,n),a=Ue(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&br(l),n.callbackPriority=2,n.callbackNode=null,2}function s0(n,i){if(Le!==0&&Le!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Eh()&&n.callbackNode!==a)return null;var l=Ot;return l=yi(n,n===se?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(jv(n,l,i),r0(n,un()),n.callbackNode!=null&&n.callbackNode===a?s0.bind(null,n):null)}function a0(n,i){if(Eh())return null;jv(n,i,!0)}function pw(){Rw(function(){(Kt&6)!==0?Ue(gl,gw):i0()})}function Fm(){if(Yr===0){var n=to;n===0&&(n=gi,gi<<=1,(gi&261888)===0&&(gi=256)),Yr=n}return Yr}function o0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:La(""+n)}function l0(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function yw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=o0((f[qe]||null).action),_=l.submitter;_&&(i=(i=_[qe]||null)?o0(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Ri("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Yr!==0){var N=_?l0(f,_):new FormData(f);um(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?l0(f,_):new FormData(f),um(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var Hm=0;Hm<Id.length;Hm++){var Gm=Id[Hm],_w=Gm.toLowerCase(),vw=Gm[0].toUpperCase()+Gm.slice(1);oi(_w,"on"+vw)}oi(Ly,"onAnimationEnd"),oi(jy,"onAnimationIteration"),oi(By,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(PA,"onTransitionRun"),oi(kA,"onTransitionStart"),oi(zA,"onTransitionCancel"),oi(qy,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ou));function u0(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,B=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=B;try{d(f)}catch(Q){Uc(Q)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,B=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=B;try{d(f)}catch(Q){Uc(Q)}f.currentTarget=null,d=N}}}}function Vt(n,i){var a=i[Ma];a===void 0&&(a=i[Ma]=new Set);var l=n+"__bubble";a.has(l)||(c0(i,n,2,!1),a.add(l))}function Km(n,i,a){var l=0;i&&(l|=4),c0(a,n,l,i)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Qm(n){if(!n[Ah]){n[Ah]=!0,vl.forEach(function(a){a!=="selectionchange"&&(Tw.has(a)||Km(a,!1,n),Km(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ah]||(i[Ah]=!0,Km("selectionchange",!1,i))}}function c0(n,i,a,l){switch(L0(i)){case 2:var f=Yw;break;case 8:f=Xw;break;default:f=lg}a=f.bind(null,i,a,n),f=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Ym(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Ei(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue t}b=b.parentNode}}l=l.return}Cr(function(){var B=d,Q=Ln(a),Z=[];t:{var q=Fy.get(n);if(q!==void 0){var H=Ri,ht=n;switch(n){case"keypress":if(zs(a)===0)break t;case"keydown":case"keyup":H=Pc;break;case"focusin":ht="focus",H=Ls;break;case"focusout":ht="blur",H=Ls;break;case"beforeblur":case"afterblur":H=Ls;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=y;break;case Ly:case jy:case By:H=Rc;break;case qy:H=S;break;case"scroll":case"scrollend":H=Dl;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Yi;break;case"toggle":case"beforetoggle":H=It}var Tt=(i&4)!==0,ne=!Tt&&(n==="scroll"||n==="scrollend"),P=Tt?q!==null?q+"Capture":null:q;Tt=[];for(var V=B,j;V!==null;){var $=V;if(j=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||j===null||P===null||($=ii(V,P),$!=null&&Tt.push(lu(V,$,j))),ne)break;V=V.return}0<Tt.length&&(q=new H(q,ht,null,a,Q),Z.push({event:q,listeners:Tt}))}}if((i&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==Rl&&(ht=a.relatedTarget||a.fromElement)&&(Ei(ht)||ht[vi]))break t;if((H||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ht=a.relatedTarget||a.toElement,H=B,ht=ht?Ei(ht):null,ht!==null&&(ne=u(ht),Tt=ht.tag,ht!==ne||Tt!==5&&Tt!==27&&Tt!==6)&&(ht=null)):(H=null,ht=B),H!==ht)){if(Tt=Vl,$="onMouseLeave",P="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Tt=Yi,$="onPointerLeave",P="onPointerEnter",V="pointer"),ne=H==null?q:bn(H),j=ht==null?q:bn(ht),q=new Tt($,V+"leave",H,a,Q),q.target=ne,q.relatedTarget=j,$=null,Ei(Q)===B&&(Tt=new Tt(P,V+"enter",ht,a,Q),Tt.target=j,Tt.relatedTarget=ne,$=Tt),ne=$,H&&ht)e:{for(Tt=Ew,P=H,V=ht,j=0,$=P;$;$=Tt($))j++;$=0;for(var yt=V;yt;yt=Tt(yt))$++;for(;0<j-$;)P=Tt(P),j--;for(;0<$-j;)V=Tt(V),$--;for(;j--;){if(P===V||V!==null&&P===V.alternate){Tt=P;break e}P=Tt(P),V=Tt(V)}Tt=null}else Tt=null;H!==null&&h0(Z,q,H,Tt,!1),ht!==null&&ne!==null&&h0(Z,ne,ht,Tt,!0)}}t:{if(q=B?bn(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var qt=Ry;else if(Iy(q))if(Cy)qt=VA;else{qt=NA;var mt=CA}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Ua(B.elementType)&&(qt=Ry):qt=DA;if(qt&&(qt=qt(n,B))){xy(Z,qt,a,Q);break t}mt&&mt(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&wl(q,"number",q.value)}switch(mt=B?bn(B):window,n){case"focusin":(Iy(mt)||mt.contentEditable==="true")&&(Ka=mt,Sd=B,zl=null);break;case"focusout":zl=Sd=Ka=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,zy(Z,a,Q);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":zy(Z,a,Q)}var Ct;if(Gt)t:{switch(n){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Ga?js(n,a)&&(Mt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(Di&&a.locale!=="ko"&&(Ga||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Ga&&(Ct=Nl()):(xi=Q,Cl="value"in xi?xi.value:xi.textContent,Ga=!0)),mt=wh(B,Mt),0<mt.length&&(Mt=new Ni(Mt,n,null,a,Q),Z.push({event:Mt,listeners:mt}),Ct?Mt.data=Ct:(Ct=Ha(a),Ct!==null&&(Mt.data=Ct)))),(Ct=Bn?wA(n,a):IA(n,a))&&(Mt=wh(B,"onBeforeInput"),0<Mt.length&&(mt=new Ni("onBeforeInput","beforeinput",null,a,Q),Z.push({event:mt,listeners:Mt}),mt.data=Ct)),yw(Z,n,B,a,Q)}u0(Z,i)})}function lu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function wh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ii(n,a),f!=null&&l.unshift(lu(n,f,d)),f=ii(n,i),f!=null&&l.push(lu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Ew(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function h0(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,B=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||B===null||(N=B,f?(B=ii(a,d),B!=null&&_.unshift(lu(a,B,N))):f||(B=ii(a,d),B!=null&&_.push(lu(a,B,N)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var bw=/\r\n?/g,Sw=/\u0000|\uFFFD/g;function f0(n){return(typeof n=="string"?n:""+n).replace(bw,`
`).replace(Sw,"")}function d0(n,i){return i=f0(i),f0(n)===i}function ee(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||mn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&mn(n,""+l);break;case"className":Sn(n,"class",l);break;case"tabIndex":Sn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(n,a,l);break;case"style":xl(n,l,d);break;case"data":if(i!=="object"){Sn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ee(n,i,"name",f.name,f,null),ee(n,i,"formEncType",f.formEncType,f,null),ee(n,i,"formMethod",f.formMethod,f,null),ee(n,i,"formTarget",f.formTarget,f,null)):(ee(n,i,"encType",f.encType,f,null),ee(n,i,"method",f.method,f,null),ee(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=ni);break;case"onScroll":l!=null&&Vt("scroll",n);break;case"onScrollEnd":l!=null&&Vt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=La(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Vt("beforetoggle",n),Vt("toggle",n),ka(n,"popover",l);break;case"xlinkActuate":Ce(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ce(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ce(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ce(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ce(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ce(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ce(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ce(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ce(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ka(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wc.get(a)||a,ka(n,a,l))}}function Xm(n,i,a,l,f,d){switch(a){case"style":xl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?mn(n,l):(typeof l=="number"||typeof l=="bigint")&&mn(n,""+l);break;case"onScroll":l!=null&&Vt("scroll",n);break;case"onScrollEnd":l!=null&&Vt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[qe]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):ka(n,a,l)}}}function Ze(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",n),Vt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,d,_,a,null)}}f&&ee(n,i,"srcSet",a.srcSet,a,null),l&&ee(n,i,"src",a.src,a,null);return;case"input":Vt("invalid",n);var b=d=_=f=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":_=Q;break;case"checked":N=Q;break;case"defaultChecked":B=Q;break;case"value":d=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:ee(n,i,l,Q,a,null)}}bc(n,d,b,N,B,_,f,!1);return;case"select":Vt("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:ee(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?wr(n,!!l,i,!1):a!=null&&wr(n,!!l,a,!0);return;case"textarea":Vt("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:ee(n,i,_,b,a,null)}Ir(n,l,f,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ee(n,i,N,l,a,null)}return;case"dialog":Vt("beforetoggle",n),Vt("toggle",n),Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":Vt("load",n);break;case"video":case"audio":for(l=0;l<ou.length;l++)Vt(ou[l],n);break;case"image":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"embed":case"source":case"link":Vt("error",n),Vt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,B,l,a,null)}return;default:if(Ua(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Xm(n,i,Q,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ee(n,i,b,l,a,null))}function Aw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,B=null,Q=null;for(H in a){var Z=a[H];if(a.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=Z;default:l.hasOwnProperty(H)||ee(n,i,H,null,l,Z)}}for(var q in l){var H=l[q];if(Z=a[q],l.hasOwnProperty(q)&&(H!=null||Z!=null))switch(q){case"type":d=H;break;case"name":f=H;break;case"checked":B=H;break;case"defaultChecked":Q=H;break;case"value":_=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==Z&&ee(n,i,q,H,l,Z)}}za(n,_,b,N,B,Q,d,f);return;case"select":H=_=b=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":H=N;default:l.hasOwnProperty(d)||ee(n,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&ee(n,i,f,d,l,N)}i=b,a=_,l=H,q!=null?wr(n,!!a,q,!1):!!l!=!!a&&(i!=null?wr(n,!!a,i,!0):wr(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ee(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ee(n,i,_,f,l,d)}Sc(n,q,H);return;case"option":for(var ht in a)if(q=a[ht],a.hasOwnProperty(ht)&&q!=null&&!l.hasOwnProperty(ht))switch(ht){case"selected":n.selected=!1;break;default:ee(n,i,ht,null,l,q)}for(N in l)if(q=l[N],H=a[N],l.hasOwnProperty(N)&&q!==H&&(q!=null||H!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ee(n,i,N,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in a)q=a[Tt],a.hasOwnProperty(Tt)&&q!=null&&!l.hasOwnProperty(Tt)&&ee(n,i,Tt,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:ee(n,i,B,q,l,H)}return;default:if(Ua(i)){for(var ne in a)q=a[ne],a.hasOwnProperty(ne)&&q!==void 0&&!l.hasOwnProperty(ne)&&Xm(n,i,ne,void 0,l,q);for(Q in l)q=l[Q],H=a[Q],!l.hasOwnProperty(Q)||q===H||q===void 0&&H===void 0||Xm(n,i,Q,q,l,H);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&ee(n,i,P,null,l,q);for(Z in l)q=l[Z],H=a[Z],!l.hasOwnProperty(Z)||q===H||q==null&&H==null||ee(n,i,Z,q,l,H)}function m0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ww(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&m0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],B=N.startTime;if(B>b)break;var Q=N.transferSize,Z=N.initiatorType;Q&&m0(Z)&&(N=N.responseEnd,_+=Q*(N<b?1:(b-B)/(N-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var $m=null,Zm=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function g0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wm=null;function Iw(){var n=window.event;return n&&n.type==="popstate"?n===Wm?!1:(Wm=n,!0):(Wm=null,!1)}var y0=typeof setTimeout=="function"?setTimeout:void 0,xw=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,Rw=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(n){return _0.resolve(null).then(n).catch(Cw)}:y0;function Cw(n){setTimeout(function(){throw n})}function Xr(n){return n==="head"}function v0(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),To(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")uu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,uu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[Ti]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&uu(n.ownerDocument.body);a=f}while(a);To(i)}function T0(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function tg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":tg(a),Pa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Nw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ti])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Yn(n.nextSibling),n===null)break}return null}function Dw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Yn(n.nextSibling),n===null))return null;return n}function E0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Yn(n.nextSibling),n===null))return null;return n}function eg(n){return n.data==="$?"||n.data==="$~"}function ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Vw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Yn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ig=null;function b0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Yn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function S0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function A0(n,i,a){switch(i=Ih(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function uu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Pa(n)}var Xn=new Map,w0=new Set;function xh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ur=it.d;it.d={f:Ow,r:Mw,D:Pw,C:kw,L:zw,m:Uw,X:jw,S:Lw,M:Bw};function Ow(){var n=ur.f(),i=_h();return n||i}function Mw(n){var i=Un(n);i!==null&&i.tag===5&&i.type==="form"?q_(i):ur.r(n)}var yo=typeof document>"u"?null:document;function I0(n,i,a){var l=yo;if(l&&typeof i=="string"&&i){var f=dn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),w0.has(f)||(w0.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Ze(i,"link",n),Re(i),l.head.appendChild(i)))}}function Pw(n){ur.D(n),I0("dns-prefetch",n,null)}function kw(n,i){ur.C(n,i),I0("preconnect",n,i)}function zw(n,i,a){ur.L(n,i,a);var l=yo;if(l&&n&&i){var f='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+dn(a.imageSizes)+'"]')):f+='[href="'+dn(n)+'"]';var d=f;switch(i){case"style":d=_o(n);break;case"script":d=vo(n)}Xn.has(d)||(n=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Xn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(cu(d))||i==="script"&&l.querySelector(hu(d))||(i=l.createElement("link"),Ze(i,"link",n),Re(i),l.head.appendChild(i)))}}function Uw(n,i){ur.m(n,i);var a=yo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+dn(l)+'"][href="'+dn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=vo(n)}if(!Xn.has(d)&&(n=E({rel:"modulepreload",href:n},i),Xn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hu(d)))return}l=a.createElement("link"),Ze(l,"link",n),Re(l),a.head.appendChild(l)}}}function Lw(n,i,a){ur.S(n,i,a);var l=yo;if(l&&n){var f=bi(l).hoistableStyles,d=_o(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(cu(d)))b.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Xn.get(d))&&rg(n,a);var N=_=l.createElement("link");Re(N),Ze(N,"link",n),N._p=new Promise(function(B,Q){N.onload=B,N.onerror=Q}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Rh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function jw(n,i){ur.X(n,i);var a=yo;if(a&&n){var l=bi(a).hoistableScripts,f=vo(n),d=l.get(f);d||(d=a.querySelector(hu(f)),d||(n=E({src:n,async:!0},i),(i=Xn.get(f))&&sg(n,i),d=a.createElement("script"),Re(d),Ze(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Bw(n,i){ur.M(n,i);var a=yo;if(a&&n){var l=bi(a).hoistableScripts,f=vo(n),d=l.get(f);d||(d=a.querySelector(hu(f)),d||(n=E({src:n,async:!0,type:"module"},i),(i=Xn.get(f))&&sg(n,i),d=a.createElement("script"),Re(d),Ze(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function x0(n,i,a,l){var f=(f=Rt.current)?xh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=_o(a.href),a=bi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=_o(a.href);var d=bi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(cu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Xn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(n,a),d||qw(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vo(a),a=bi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function _o(n){return'href="'+dn(n)+'"'}function cu(n){return'link[rel="stylesheet"]['+n+"]"}function R0(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function qw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ze(i,"link",a),Re(i),n.head.appendChild(i))}function vo(n){return'[src="'+dn(n)+'"]'}function hu(n){return"script[async]"+n}function C0(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+dn(a.href)+'"]');if(l)return i.instance=l,Re(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Re(l),Ze(l,"style",f),Rh(l,a.precedence,n),i.instance=l;case"stylesheet":f=_o(a.href);var d=n.querySelector(cu(f));if(d)return i.state.loading|=4,i.instance=d,Re(d),d;l=R0(a),(f=Xn.get(f))&&rg(l,f),d=(n.ownerDocument||n).createElement("link"),Re(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Ze(d,"link",l),i.state.loading|=4,Rh(d,a.precedence,n),i.instance=d;case"script":return d=vo(a.src),(f=n.querySelector(hu(d)))?(i.instance=f,Re(f),f):(l=a,(f=Xn.get(d))&&(l=E({},a),sg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Re(f),Ze(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Rh(l,a.precedence,n));return i.instance}function Rh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function rg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function sg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ch=null;function N0(n,i,a){if(Ch===null){var l=new Map,f=Ch=new Map;f.set(a,l)}else f=Ch,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Ti]||d[xe]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function D0(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Fw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function V0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Hw(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=_o(l.href),d=i.querySelector(cu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Nh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Re(d);return}d=i.ownerDocument||i,l=R0(l),(f=Xn.get(f))&&rg(l,f),d=d.createElement("link"),Re(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Ze(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Nh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var ag=0;function Gw(n,i){return n.stylesheets&&n.count===0&&Vh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Vh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&ag===0&&(ag=62500*ww());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Vh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>ag?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Dh=null;function Vh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Dh=new Map,i.forEach(Kw,n),Dh=null,Nh.call(n))}function Kw(n,i){if(!(i.state.loading&4)){var a=Dh.get(n);if(a)var l=a.get(null);else{a=new Map,Dh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Nh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var fu={$$typeof:at,Provider:null,Consumer:null,_currentValue:pt,_currentValue2:pt,_threadCount:0};function Qw(n,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function O0(n,i,a,l,f,d,_,b,N,B,Q,Z){return n=new Qw(n,i,a,_,N,B,Q,Z,b),i=1,d===!0&&(i|=24),d=wn(3,null,null,i),n.current=d,d.stateNode=n,i=Ld(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Fd(d),n}function M0(n){return n?(n=Xa,n):Xa}function P0(n,i,a,l,f,d){f=M0(f),l.context===null?l.context=f:l.pendingContext=f,l=Ur(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Lr(n,l,i),a!==null&&(vn(a,n,i),Hl(a,n,i))}function k0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function og(n,i){k0(n,i),(n=n.alternate)&&k0(n,i)}function z0(n){if(n.tag===13||n.tag===31){var i=Fs(n,67108864);i!==null&&vn(i,n,67108864),og(n,67108864)}}function U0(n){if(n.tag===13||n.tag===31){var i=Nn();i=Ds(i);var a=Fs(n,i);a!==null&&vn(a,n,i),og(n,i)}}var Oh=!0;function Yw(n,i,a,l){var f=K.T;K.T=null;var d=it.p;try{it.p=2,lg(n,i,a,l)}finally{it.p=d,K.T=f}}function Xw(n,i,a,l){var f=K.T;K.T=null;var d=it.p;try{it.p=8,lg(n,i,a,l)}finally{it.p=d,K.T=f}}function lg(n,i,a,l){if(Oh){var f=ug(l);if(f===null)Ym(n,i,l,Mh,a),j0(n,l);else if(Zw(f,n,i,a,l))l.stopPropagation();else if(j0(n,l),i&4&&-1<$w.indexOf(n)){for(;f!==null;){var d=Un(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=pi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-ve(_);b.entanglements[1]|=N,_&=~N}Pi(d),(Kt&6)===0&&(ph=un()+500,au(0))}}break;case 31:case 13:b=Fs(d,2),b!==null&&vn(b,d,2),_h(),og(d,2)}if(d=ug(l),d===null&&Ym(n,i,l,Mh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Ym(n,i,l,null,a)}}function ug(n){return n=Ln(n),cg(n)}var Mh=null;function cg(n){if(Mh=null,n=Ei(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Mh=n,null}function L0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case gl:return 2;case pl:return 8;case Sr:case pd:return 32;case fc:return 268435456;default:return 32}default:return 32}}var hg=!1,$r=null,Zr=null,Jr=null,du=new Map,mu=new Map,Wr=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j0(n,i){switch(n){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":du.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(i.pointerId)}}function gu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Un(i),i!==null&&z0(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Zw(n,i,a,l,f){switch(i){case"focusin":return $r=gu($r,n,i,a,l,f),!0;case"dragenter":return Zr=gu(Zr,n,i,a,l,f),!0;case"mouseover":return Jr=gu(Jr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return du.set(d,gu(du.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,mu.set(d,gu(mu.get(d)||null,n,i,a,l,f)),!0}return!1}function B0(n){var i=Ei(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,ti(n.priority,function(){U0(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,ti(n.priority,function(){U0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ph(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ug(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Rl=l,a.target.dispatchEvent(l),Rl=null}else return i=Un(a),i!==null&&z0(i),n.blockedOn=a,!1;i.shift()}return!0}function q0(n,i,a){Ph(n)&&a.delete(i)}function Jw(){hg=!1,$r!==null&&Ph($r)&&($r=null),Zr!==null&&Ph(Zr)&&(Zr=null),Jr!==null&&Ph(Jr)&&(Jr=null),du.forEach(q0),mu.forEach(q0)}function kh(n,i){n.blockedOn===i&&(n.blockedOn=null,hg||(hg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jw)))}var zh=null;function F0(n){zh!==n&&(zh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zh===n&&(zh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(cg(l||a)===null)continue;break}var d=Un(a);d!==null&&(n.splice(i,3),i-=3,um(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function To(n){function i(N){return kh(N,n)}$r!==null&&kh($r,n),Zr!==null&&kh(Zr,n),Jr!==null&&kh(Jr,n),du.forEach(i),mu.forEach(i);for(var a=0;a<Wr.length;a++){var l=Wr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Wr.length&&(a=Wr[0],a.blockedOn===null);)B0(a),a.blockedOn===null&&Wr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qe]||null;if(typeof d=="function")_||F0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qe]||null)b=_.formAction;else if(cg(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),F0(a)}}}function H0(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function fg(n){this._internalRoot=n}Uh.prototype.render=fg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Nn();P0(a,l,n,i,null,null)},Uh.prototype.unmount=fg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;P0(n.current,2,null,n,null,null),_h(),i[vi]=null}};function Uh(n){this._internalRoot=n}Uh.prototype.unstable_scheduleHydration=function(n){if(n){var i=_c();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Wr.length&&i!==0&&i<Wr[a].priority;a++);Wr.splice(a,0,n),a===0&&B0(n)}};var G0=t.version;if(G0!=="19.2.3")throw Error(r(527,G0,"19.2.3"));it.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var Ww={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Jn=Lh.inject(Ww),Ke=Lh}catch{}}return yu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=J_,d=W_,_=tv;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=O0(n,1,!1,null,null,a,l,null,f,d,_,H0),n[vi]=i.current,Qm(n),new fg(i)},yu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=J_,_=W_,b=tv,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=O0(n,1,!0,i,a??null,l,f,N,d,_,b,H0),i.context=M0(null),a=i.current,l=Nn(),l=Ds(l),f=Ur(l),f.callback=null,Lr(a,f,l),a=l,i.current.lanes=a,Cs(i,a),Pi(i),n[vi]=i.current,Qm(n),new Uh(i)},yu.version="19.2.3",yu}var eT;function uI(){if(eT)return gg.exports;eT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),gg.exports=lI(),gg.exports}var cI=uI();const hI=()=>{};var nT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},fI=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],c=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],c=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},rb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,T=u>>2,E=(u&3)<<4|m>>4;let w=(m&15)<<2|p>>6,z=p&63;g||(z=64,c||(w=64)),r.push(e[T],e[E],e[w],e[z])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(ib(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):fI(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const p=o<s.length?e[s.charAt(o)]:64;++o;const E=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||E==null)throw new dI;const w=u<<2|m>>4;if(r.push(w),p!==64){const z=m<<4&240|p>>2;if(r.push(z),E!==64){const X=p<<6&192|E;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class dI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mI=function(s){const t=ib(s);return rb.encodeByteArray(t,!0)},sb=function(s){return mI(s).replace(/\./g,"")},ab=function(s){try{return rb.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=()=>ob().__FIREBASE_DEFAULTS__,pI=()=>{if(typeof process>"u"||typeof nT>"u")return;const s=nT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},yI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&ab(s[1]);return t&&JSON.parse(t)},Uf=()=>{try{return hI()||gI()||pI()||yI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},_I=s=>{var t,e;return(e=(t=Uf())==null?void 0:t.emulatorHosts)==null?void 0:e[s]},lb=()=>{var s;return(s=Uf())==null?void 0:s.config},ub=s=>{var t;return(t=Uf())==null?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cb(s){return(await fetch(s,{credentials:"include"})).ok}const Ru={};function TI(){const s={prod:[],emulator:[]};for(const t of Object.keys(Ru))Ru[t]?s.emulator.push(t):s.prod.push(t);return s}function EI(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let iT=!1;function bI(s,t){if(typeof window>"u"||typeof document>"u"||!rl(window.location.host)||Ru[s]===t||Ru[s]||iT)return;Ru[s]=t;function e(w){return`__firebase__banner__${w}`}const r="__firebase__banner",u=TI().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,z){w.setAttribute("width","24"),w.setAttribute("id",z),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{iT=!0,c()},w}function T(w,z){w.setAttribute("id",z),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=EI(r),z=e("text"),X=document.getElementById(z)||document.createElement("span"),G=e("learnmore"),Y=document.getElementById(G)||document.createElement("a"),lt=e("preprendIcon"),ft=document.getElementById(lt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const at=w.element;m(at),T(Y,G);const vt=p();g(ft,lt),at.append(ft,X,Y,vt),document.body.appendChild(at)}u?(X.innerText="Preview backend disconnected.",ft.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ft.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function hb(){var t;const s=(t=Uf())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function II(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xI(){const s=je();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function fb(){return!hb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function db(){return!hb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function mb(){try{return typeof indexedDB=="object"}catch{return!1}}function RI(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="FirebaseError";class vr extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=CI,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?NI(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new vr(o,m,r)}}function NI(s,t){return s.replace(DI,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const DI=/\{\$([^}]+)}/g;function VI(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function _a(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],c=t[o];if(rT(u)&&rT(c)){if(!_a(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function rT(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function OI(s,t){const e=new MI(s,t);return e.subscribe.bind(e)}class MI{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");PI(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=vg),o.error===void 0&&(o.error=vg),o.complete===void 0&&(o.complete=vg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PI(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(s){return s&&s._delegate?s._delegate:s}class va{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new vI;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(UI(t))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ia){return this.instances.has(t)}getOptions(t=ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zI(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ia){return this.component?this.component.multipleInstances?t:ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zI(s){return s===ia?void 0:s}function UI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new kI(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(kt||(kt={}));const jI={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},BI=kt.INFO,qI={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},FI=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=qI[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ep{constructor(t){this.name=t,this._logLevel=BI,this._logHandler=FI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}const HI=(s,t)=>t.some(e=>s instanceof e);let sT,aT;function GI(){return sT||(sT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KI(){return aT||(aT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gb=new WeakMap,kg=new WeakMap,pb=new WeakMap,Tg=new WeakMap,bp=new WeakMap;function QI(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{e(cs(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&gb.set(e,s)}).catch(()=>{}),bp.set(t,s),t}function YI(s){if(kg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});kg.set(s,t)}let zg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return kg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||pb.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return cs(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function XI(s){zg=s(zg)}function $I(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(Eg(this),t,...e);return pb.set(r,t.sort?t.sort():[t]),cs(r)}:KI().includes(s)?function(...t){return s.apply(Eg(this),t),cs(gb.get(this))}:function(...t){return cs(s.apply(Eg(this),t))}}function ZI(s){return typeof s=="function"?$I(s):(s instanceof IDBTransaction&&YI(s),HI(s,GI())?new Proxy(s,zg):s)}function cs(s){if(s instanceof IDBRequest)return QI(s);if(Tg.has(s))return Tg.get(s);const t=ZI(s);return t!==s&&(Tg.set(s,t),bp.set(t,s)),t}const Eg=s=>bp.get(s);function JI(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,t),m=cs(c);return r&&c.addEventListener("upgradeneeded",g=>{r(cs(c.result),g.oldVersion,g.newVersion,cs(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const WI=["get","getKey","getAll","getAllKeys","count"],tx=["put","add","delete","clear"],bg=new Map;function oT(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(bg.get(t))return bg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=tx.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||WI.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[e](...m),o&&g.done]))[0]};return bg.set(t,u),u}XI(s=>({...s,get:(t,e,r)=>oT(t,e)||s.get(t,e,r),has:(t,e)=>!!oT(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(nx(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function nx(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ug="@firebase/app",lT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new Ep("@firebase/app"),ix="@firebase/app-compat",rx="@firebase/analytics-compat",sx="@firebase/analytics",ax="@firebase/app-check-compat",ox="@firebase/app-check",lx="@firebase/auth",ux="@firebase/auth-compat",cx="@firebase/database",hx="@firebase/data-connect",fx="@firebase/database-compat",dx="@firebase/functions",mx="@firebase/functions-compat",gx="@firebase/installations",px="@firebase/installations-compat",yx="@firebase/messaging",_x="@firebase/messaging-compat",vx="@firebase/performance",Tx="@firebase/performance-compat",Ex="@firebase/remote-config",bx="@firebase/remote-config-compat",Sx="@firebase/storage",Ax="@firebase/storage-compat",wx="@firebase/firestore",Ix="@firebase/ai",xx="@firebase/firestore-compat",Rx="firebase",Cx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="[DEFAULT]",Nx={[Ug]:"fire-core",[ix]:"fire-core-compat",[sx]:"fire-analytics",[rx]:"fire-analytics-compat",[ox]:"fire-app-check",[ax]:"fire-app-check-compat",[lx]:"fire-auth",[ux]:"fire-auth-compat",[cx]:"fire-rtdb",[hx]:"fire-data-connect",[fx]:"fire-rtdb-compat",[dx]:"fire-fn",[mx]:"fire-fn-compat",[gx]:"fire-iid",[px]:"fire-iid-compat",[yx]:"fire-fcm",[_x]:"fire-fcm-compat",[vx]:"fire-perf",[Tx]:"fire-perf-compat",[Ex]:"fire-rc",[bx]:"fire-rc-compat",[Sx]:"fire-gcs",[Ax]:"fire-gcs-compat",[wx]:"fire-fst",[xx]:"fire-fst-compat",[Ix]:"fire-vertex","fire-js":"fire-js",[Rx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Map,Dx=new Map,jg=new Map;function uT(s,t){try{s.container.addComponent(t)}catch(e){gr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function Uo(s){const t=s.name;if(jg.has(t))return gr.debug(`There were multiple attempts to register component ${t}.`),!1;jg.set(t,s);for(const e of hf.values())uT(e,s);for(const e of Dx.values())uT(e,s);return!0}function Sp(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function hi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new Wu("app","Firebase",Vx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=Cx;function yb(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r={name:Lg,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw hs.create("bad-app-name",{appName:String(o)});if(e||(e=lb()),!e)throw hs.create("no-options");const u=hf.get(o);if(u){if(_a(e,u.options)&&_a(r,u.config))return u;throw hs.create("duplicate-app",{appName:o})}const c=new LI(o);for(const g of jg.values())c.addComponent(g);const m=new Ox(e,r,c);return hf.set(o,m),m}function Mx(s=Lg){const t=hf.get(s);if(!t&&s===Lg&&lb())return yb();if(!t)throw hs.create("no-app",{appName:s});return t}function fs(s,t,e){let r=Nx[s]??s;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),gr.warn(c.join(" "));return}Uo(new va(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="firebase-heartbeat-database",kx=1,Lu="firebase-heartbeat-store";let Sg=null;function _b(){return Sg||(Sg=JI(Px,kx,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Lu)}catch(e){console.warn(e)}}}}).catch(s=>{throw hs.create("idb-open",{originalErrorMessage:s.message})})),Sg}async function zx(s){try{const e=(await _b()).transaction(Lu),r=await e.objectStore(Lu).get(vb(s));return await e.done,r}catch(t){if(t instanceof vr)gr.warn(t.message);else{const e=hs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});gr.warn(e.message)}}}async function cT(s,t){try{const r=(await _b()).transaction(Lu,"readwrite");await r.objectStore(Lu).put(t,vb(s)),await r.done}catch(e){if(e instanceof vr)gr.warn(e.message);else{const r=hs.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});gr.warn(r.message)}}}function vb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=1024,Lx=30;class jx{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new qx(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=hT();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>Lx){const c=Fx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=hT(),{heartbeatsToSend:r,unsentEntries:o}=Bx(this._heartbeatsCache.heartbeats),u=sb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return gr.warn(e),""}}}function hT(){return new Date().toISOString().substring(0,10)}function Bx(s,t=Ux){const e=[];let r=s.slice();for(const o of s){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),fT(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),fT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class qx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mb()?RI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await zx(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return cT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return cT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function fT(s){return sb(JSON.stringify({version:2,heartbeats:s})).length}function Fx(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(s){Uo(new va("platform-logger",t=>new ex(t),"PRIVATE")),Uo(new va("heartbeat",t=>new jx(t),"PRIVATE")),fs(Ug,lT,s),fs(Ug,lT,"esm2020"),fs("fire-js","")}Hx("");var Gx="firebase",Kx="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(Gx,Kx,"app");function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qx=Tb,Eb=new Wu("auth","Firebase",Tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Ep("@firebase/auth");function Yx(s,...t){ff.logLevel<=kt.WARN&&ff.warn(`Auth (${sl}): ${s}`,...t)}function Yh(s,...t){ff.logLevel<=kt.ERROR&&ff.error(`Auth (${sl}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(s,...t){throw wp(s,...t)}function di(s,...t){return wp(s,...t)}function Ap(s,t,e){const r={...Qx(),[t]:e};return new Wu("auth","Firebase",r).create(t,{appName:s.name})}function da(s){return Ap(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xx(s,t,e){const r=e;if(!(t instanceof r))throw r.name!==t.constructor.name&&Fi(s,"argument-error"),Ap(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wp(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return Eb.create(s,...t)}function bt(s,t,...e){if(!s)throw wp(t,...e)}function hr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Yh(t),new Error(t)}function pr(s,t){s||hr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function $x(){return dT()==="http:"||dT()==="https:"}function dT(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($x()||wI()||"connection"in navigator)?navigator.onLine:!0}function Jx(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,e){this.shortDelay=t,this.longDelay=e,pr(e>t,"Short delay should be less than long delay!"),this.isMobile=SI()||II()}get(){return Zx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(s,t){pr(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eR=new ec(3e4,6e4);function xp(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function al(s,t,e,r,o={}){return Sb(s,o,async()=>{let u={},c={};r&&(t==="GET"?c=r:u={body:JSON.stringify(r)});const m=tc({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:t,headers:g,...u};return AI()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&rl(s.emulatorConfig.host)&&(p.credentials="include"),bb.fetch()(await Ab(s,s.config.apiHost,e,m),p)})}async function Sb(s,t,e){s._canInitEmulator=!1;const r={...Wx,...t};try{const o=new iR(s),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw jh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw jh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw jh(s,"user-disabled",c);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ap(s,T,p);Fi(s,T)}}catch(o){if(o instanceof vr)throw o;Fi(s,"network-request-failed",{message:String(o)})}}async function nR(s,t,e,r,o={}){const u=await al(s,t,e,r,o);return"mfaPendingCredential"in u&&Fi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ab(s,t,e,r){const o=`${t}${e}?${r}`,u=s,c=u.config.emulator?Ip(s.config,o):`${s.config.apiScheme}://${o}`;return tR.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class iR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),eR.get())})}}function jh(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const o=di(s,t,r);return o.customData._tokenResponse=e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(s,t){return al(s,"POST","/v1/accounts:delete",t)}async function df(s,t){return al(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function sR(s,t=!1){const e=We(s),r=await e.getIdToken(t),o=Rp(r);bt(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Cu(Ag(o.auth_time)),issuedAtTime:Cu(Ag(o.iat)),expirationTime:Cu(Ag(o.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Ag(s){return Number(s)*1e3}function Rp(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const o=ab(e);return o?JSON.parse(o):(Yh("Failed to decode base64 JWT payload"),null)}catch(o){return Yh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function mT(s){const t=Rp(s);return bt(t,"internal-error"),bt(typeof t.exp<"u","internal-error"),bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof vr&&aR(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function aR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(s){var E;const t=s.auth,e=await s.getIdToken(),r=await ju(s,df(t,{idToken:e}));bt(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(E=o.providerUserInfo)!=null&&E.length?wb(o.providerUserInfo):[],c=uR(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,T)}async function lR(s){const t=We(s);await mf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function uR(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function wb(s){return s.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(s,t){const e=await Sb(s,{},async()=>{const r=tc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await Ab(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&rl(s.emulatorConfig.host)&&(g.credentials="include"),bb.fetch()(c,g)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function hR(s,t){return al(s,"POST","/v2/accounts:revokeToken",xp(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bt(t.idToken,"internal-error"),bt(typeof t.idToken<"u","internal-error"),bt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){bt(t.length!==0,"internal-error");const e=mT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:o,expiresIn:u}=await cR(t,e);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:o,expirationTime:u}=e,c=new Oo;return r&&(bt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(bt(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(bt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(s,t){bt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class fi{constructor({uid:t,auth:e,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new oR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await ju(this,this.stsTokenManager.getToken(this.auth,t));return bt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return sR(this,t)}reload(){return lR(this)}_assign(t){this!==t&&(bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new fi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await mf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(da(this.auth));const t=await this.getIdToken();return await ju(this,rR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,g=e._redirectEventId??void 0,p=e.createdAt??void 0,T=e.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:z,providerData:X,stsTokenManager:G}=e;bt(E&&G,t,"internal-error");const Y=Oo.fromJSON(this.name,G);bt(typeof E=="string",t,"internal-error"),es(r,t.name),es(o,t.name),bt(typeof w=="boolean",t,"internal-error"),bt(typeof z=="boolean",t,"internal-error"),es(u,t.name),es(c,t.name),es(m,t.name),es(g,t.name),es(p,t.name),es(T,t.name);const lt=new fi({uid:E,auth:t,email:o,emailVerified:w,displayName:r,isAnonymous:z,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:Y,createdAt:p,lastLoginAt:T});return X&&Array.isArray(X)&&(lt.providerData=X.map(ft=>({...ft}))),g&&(lt._redirectEventId=g),lt}static async _fromIdTokenResponse(t,e,r=!1){const o=new Oo;o.updateFromServerResponse(e);const u=new fi({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await mf(u),u}static async _fromGetAccountInfoResponse(t,e,r){const o=e.users[0];bt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?wb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Oo;m.updateFromIdToken(r);const g=new fi({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new Map;function fr(s){pr(s instanceof Function,"Expected a class definition");let t=gT.get(s);return t?(pr(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,gT.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Ib.type="NONE";const pT=Ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(s,t,e){return`firebase:${s}:${t}:${e}`}class Mo{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Xh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xh("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await df(this.auth,{idToken:t}).catch(()=>{});return e?fi._fromGetAccountInfoResponse(this.auth,e,t):null}return fi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Mo(fr(pT),t,r);const o=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||fr(pT);const c=Xh(r,t.config.apiKey,t.name);let m=null;for(const p of e)try{const T=await p._get(c);if(T){let E;if(typeof T=="string"){const w=await df(t,{idToken:T}).catch(()=>{});if(!w)break;E=await fi._fromGetAccountInfoResponse(t,w,T)}else E=fi._fromJSON(t,T);p!==u&&(m=E),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Mo(u,t,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Mo(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Nb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Vb(t))return"Blackberry";if(Ob(t))return"Webos";if(Rb(t))return"Safari";if((t.includes("chrome/")||Cb(t))&&!t.includes("edge/"))return"Chrome";if(Db(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xb(s=je()){return/firefox\//i.test(s)}function Rb(s=je()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Cb(s=je()){return/crios\//i.test(s)}function Nb(s=je()){return/iemobile/i.test(s)}function Db(s=je()){return/android/i.test(s)}function Vb(s=je()){return/blackberry/i.test(s)}function Ob(s=je()){return/webos/i.test(s)}function Cp(s=je()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function fR(s=je()){var t;return Cp(s)&&!!((t=window.navigator)!=null&&t.standalone)}function dR(){return xI()&&document.documentMode===10}function Mb(s=je()){return Cp(s)||Db(s)||Ob(s)||Vb(s)||/windows phone/i.test(s)||Nb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(s,t=[]){let e;switch(s){case"Browser":e=yT(je());break;case"Worker":e=`${yT(je())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${sl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((c,m)=>{try{const g=t(u);c(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(s,t={}){return al(s,"GET","/v2/passwordPolicy",xp(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=6;class yR{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??pR,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(t,e,r,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _T(this),this.idTokenSubscription=new _T(this),this.beforeStateQueue=new mR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=fr(e)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await df(this,{idToken:t}),r=await fi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var u;if(hi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await mf(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Jx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(hi(this.app))return Promise.reject(da(this));const e=t?We(t):null;return e&&bt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return hi(this.app)?Promise.reject(da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gR(this),e=new yR(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Wu("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await hR(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&fr(t)||this._popupRedirectResolver;bt(e,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[fr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,o);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Pb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&Yx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Lf(s){return We(s)}class _T{constructor(t){this.auth=t,this.observer=null,this.addObserver=OI(e=>this.observer=e)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vR(s){Np=s}function TR(s){return Np.loadJS(s)}function ER(){return Np.gapiScript}function bR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(s,t){const e=Sp(s,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(_a(u,t??{}))return o;Fi(o,"already-initialized")}return e.initialize({options:t})}function AR(s,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(fr);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function wR(s,t,e){const r=Lf(s);bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=kb(t),{host:c,port:m}=IR(t),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},T=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bt(_a(p,r.config.emulator)&&_a(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,rl(c)?(cb(`${u}//${c}${g}`),bI("Auth",!0)):xR()}function kb(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function IR(s){const t=kb(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:vT(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:vT(c)}}}function vT(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function xR(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return hr("not implemented")}_getIdTokenResponse(t){return hr("not implemented")}_linkToIdToken(t,e){return hr("not implemented")}_getReauthenticationResolver(t){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(s,t){return nR(s,"POST","/v1/accounts:signInWithIdp",xp(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="http://localhost";class Ta extends zb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ta(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Fi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=e;if(!r||!o)return null;const c=new Ta(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Po(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Po(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Po(t,e)}buildRequest(){const t={requestUri:RR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=tc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Dp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends nc{constructor(){super("facebook.com")}static credential(t){return Ta._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ss.credentialFromTaggedObject(t)}static credentialFromError(t){return ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ss.credential(t.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends nc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ta._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return cr.credentialFromTaggedObject(t)}static credentialFromError(t){return cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return cr.credential(e,r)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends nc{constructor(){super("github.com")}static credential(t){return Ta._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return as.credentialFromTaggedObject(t)}static credentialFromError(t){return as.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return as.credential(t.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends nc{constructor(){super("twitter.com")}static credential(t,e){return Ta._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return os.credentialFromTaggedObject(t)}static credentialFromError(t){return os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return os.credential(e,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,o=!1){const u=await fi._fromIdTokenResponse(t,r,o),c=TT(r);return new Lo({user:u,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const o=TT(r);return new Lo({user:t,providerId:o,_tokenResponse:r,operationType:e})}}function TT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends vr{constructor(t,e,r,o){super(e.code,e.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,o){return new gf(t,e,r,o)}}function Ub(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(s,u,t,r):u})}async function CR(s,t,e=!1){const r=await ju(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return Lo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(s,t,e=!1){const{auth:r}=s;if(hi(r.app))return Promise.reject(da(r));const o="reauthenticate";try{const u=await ju(s,Ub(r,o,t,s),e);bt(u.idToken,r,"internal-error");const c=Rp(u.idToken);bt(c,r,"internal-error");const{sub:m}=c;return bt(s.uid===m,r,"user-mismatch"),Lo._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Fi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(s,t,e=!1){if(hi(s.app))return Promise.reject(da(s));const r="signIn",o=await Ub(s,r,t),u=await Lo._fromIdTokenResponse(s,r,o);return e||await s._updateCurrentUser(u.user),u}function VR(s,t,e,r){return We(s).onIdTokenChanged(t,e,r)}function OR(s,t,e){return We(s).beforeAuthStateChanged(t,e)}function MR(s,t,e,r){return We(s).onAuthStateChanged(t,e,r)}function PR(s){return We(s).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=1e3,zR=10;class jb extends Lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),o=this.localCache[e];r!==o&&t(e,o,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);dR()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,zR):o()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},kR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}jb.type="LOCAL";const UR=jb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Bb.type="SESSION";const qb=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const r=new jf(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(e.origin,u)),g=await LR(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Vp("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return window}function BR(s){ji().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function qR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FR(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function HR(){return Fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firebaseLocalStorageDb",GR=1,yf="firebaseLocalStorage",Gb="fbase_key";class ic{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Bf(s,t){return s.transaction([yf],t?"readwrite":"readonly").objectStore(yf)}function KR(){const s=indexedDB.deleteDatabase(Hb);return new ic(s).toPromise()}function Fg(){const s=indexedDB.open(Hb,GR);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(yf,{keyPath:Gb})}catch(o){e(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(yf)?t(r):(r.close(),await KR(),t(await Fg()))})})}async function ET(s,t,e){const r=Bf(s,!0).put({[Gb]:t,value:e});return new ic(r).toPromise()}async function QR(s,t){const e=Bf(s,!1).get(t),r=await new ic(e).toPromise();return r===void 0?null:r.value}function bT(s,t){const e=Bf(s,!0).delete(t);return new ic(e).toPromise()}const YR=800,XR=3;class Kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fg(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>XR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jf._getInstance(HR()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await qR(),!this.activeServiceWorker)return;this.sender=new jR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||FR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Fg();return await ET(t,pf,"1"),await bT(t,pf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>ET(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>QR(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>bT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Bf(o,!1).getAll();return new ic(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kb.type="LOCAL";const $R=Kb;new ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(s,t){return t?fr(t):(bt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends zb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Po(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Po(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Po(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function ZR(s){return DR(s.auth,new Op(s),s.bypassAuthState)}function JR(s){const{auth:t,user:e}=s;return bt(e,t,"internal-error"),NR(e,new Op(s),s.bypassAuthState)}async function WR(s){const{auth:t,user:e}=s;return bt(e,t,"internal-error"),CR(e,new Op(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t,e,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ZR;case"linkViaPopup":case"linkViaRedirect":return WR;case"reauthViaPopup":case"reauthViaRedirect":return JR;default:Fi(this.auth,"internal-error")}}resolve(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new ec(2e3,1e4);async function e2(s,t,e){if(hi(s.app))return Promise.reject(di(s,"operation-not-supported-in-this-environment"));const r=Lf(s);Xx(s,t,Dp);const o=Qb(r,e);return new ca(r,"signInViaPopup",t,o).executeNotNull()}class ca extends Yb{constructor(t,e,r,o,u){super(t,e,o,u),this.provider=r,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bt(t,this.auth,"internal-error"),t}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const t=Vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,t2.get())};t()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="pendingRedirect",$h=new Map;class i2 extends Yb{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=$h.get(this.auth._key());if(!t){try{const r=await r2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}$h.set(this.auth._key(),t)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r2(s,t){const e=o2(t),r=a2(s);if(!await r._isAvailable())return!1;const o=await r._get(e)==="true";return await r._remove(e),o}function s2(s,t){$h.set(s._key(),t)}function a2(s){return fr(s._redirectPersistence)}function o2(s){return Xh(n2,s.config.apiKey,s.name)}async function l2(s,t,e=!1){if(hi(s.app))return Promise.reject(da(s));const r=Lf(s),o=Qb(r,t),c=await new i2(r,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=600*1e3;class c2{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!h2(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!Xb(t)){const o=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(di(this.auth,o))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=u2&&this.cachedEventUids.clear(),this.cachedEventUids.has(ST(t))}saveEventToCache(t){this.cachedEventUids.add(ST(t)),this.lastProcessedEventTime=Date.now()}}function ST(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function Xb({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function h2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(s,t={}){return al(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m2=/^https?/;async function g2(s){if(s.config.emulator)return;const{authorizedDomains:t}=await f2(s);for(const e of t)try{if(p2(e))return}catch{}Fi(s,"unauthorized-domain")}function p2(s){const t=Bg(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!m2.test(e))return!1;if(d2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new ec(3e4,6e4);function AT(){const s=ji().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function _2(s){return new Promise((t,e)=>{var o,u,c;function r(){AT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{AT(),e(di(s,"network-request-failed"))},timeout:y2.get()})}if((u=(o=ji().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)t(gapi.iframes.getContext());else if((c=ji().gapi)!=null&&c.load)r();else{const m=bR("iframefcb");return ji()[m]=()=>{gapi.load?r():e(di(s,"network-request-failed"))},TR(`${ER()}?onload=${m}`).catch(g=>e(g))}}).catch(t=>{throw Zh=null,t})}let Zh=null;function v2(s){return Zh=Zh||_2(s),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new ec(5e3,15e3),E2="__/auth/iframe",b2="emulator/auth/iframe",S2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function w2(s){const t=s.config;bt(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Ip(t,b2):`https://${s.config.authDomain}/${E2}`,r={apiKey:t.apiKey,appName:s.name,v:sl},o=A2.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${tc(r).slice(1)}`}async function I2(s){const t=await v2(s),e=ji().gapi;return bt(e,s,"internal-error"),t.open({where:document.body,url:w2(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S2,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=di(s,"network-request-failed"),m=ji().setTimeout(()=>{u(c)},T2.get());function g(){ji().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R2=500,C2=600,N2="_blank",D2="http://localhost";class wT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function V2(s,t,e,r=R2,o=C2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...x2,width:r.toString(),height:o.toString(),top:u,left:c},p=je().toLowerCase();e&&(m=Cb(p)?N2:e),xb(p)&&(t=t||D2,g.scrollbars="yes");const T=Object.entries(g).reduce((w,[z,X])=>`${w}${z}=${X},`,"");if(fR(p)&&m!=="_self")return O2(t||"",m),new wT(null);const E=window.open(t||"",m,T);bt(E,s,"popup-blocked");try{E.focus()}catch{}return new wT(E)}function O2(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="__/auth/handler",P2="emulator/auth/handler",k2=encodeURIComponent("fac");async function IT(s,t,e,r,o,u){bt(s.config.authDomain,s,"auth-domain-config-required"),bt(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:sl,eventId:o};if(t instanceof Dp){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",VI(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,E]of Object.entries({}))c[T]=E}if(t instanceof nc){const T=t.getScopes().filter(E=>E!=="");T.length>0&&(c.scopes=T.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),p=g?`#${k2}=${encodeURIComponent(g)}`:"";return`${z2(s)}?${tc(m).slice(1)}${p}`}function z2({config:s}){return s.emulator?Ip(s,P2):`https://${s.authDomain}/${M2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="webStorageSupport";class U2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qb,this._completeRedirectFn=l2,this._overrideRedirectResult=s2}async _openPopup(t,e,r,o){var c;pr((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const u=await IT(t,e,r,Bg(),o);return V2(t,u,Vp())}async _openRedirect(t,e,r,o){await this._originValidation(t);const u=await IT(t,e,r,Bg(),o);return BR(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(pr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await I2(t),r=new c2(t);return e.register("authEvent",o=>(bt(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(wg,{type:wg},o=>{var c;const u=(c=o==null?void 0:o[0])==null?void 0:c[wg];u!==void 0&&e(!!u),Fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=g2(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Mb()||Rb()||Cp()}}const L2=U2;var xT="@firebase/auth",RT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q2(s){Uo(new va("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;bt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pb(s)},p=new _R(r,o,u,g);return AR(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Uo(new va("auth-internal",t=>{const e=Lf(t.getProvider("auth").getImmediate());return(r=>new j2(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(xT,RT,B2(s)),fs(xT,RT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=300,H2=ub("authIdTokenMaxAge")||F2;let CT=null;const G2=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>H2)return;const o=e==null?void 0:e.token;CT!==o&&(CT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function K2(s=Mx()){const t=Sp(s,"auth");if(t.isInitialized())return t.getImmediate();const e=SR(s,{popupRedirectResolver:L2,persistence:[$R,UR,qb]}),r=ub("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=G2(u.toString());OR(e,c,()=>c(e.currentUser)),VR(e,m=>c(m))}}const o=_I("auth");return o&&wR(e,`http://${o}`),e}function Q2(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}vR({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=di("internal-error");u.customData=o,e(u)},r.type="text/javascript",r.charset="UTF-8",Q2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q2("Browser");var NT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,$b;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,A){function x(){}x.prototype=A.prototype,I.F=A.prototype,I.prototype=new x,I.prototype.constructor=I,I.D=function(M,D,k){for(var C=Array(arguments.length-2),re=2;re<arguments.length;re++)C[re-2]=arguments[re];return A.prototype[D].apply(M,C)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,A,x){x||(x=0);const M=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)M[D]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(D=0;D<16;++D)M[D]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=I.g[0],x=I.g[1],D=I.g[2];let k=I.g[3],C;C=A+(k^x&(D^k))+M[0]+3614090360&4294967295,A=x+(C<<7&4294967295|C>>>25),C=k+(D^A&(x^D))+M[1]+3905402710&4294967295,k=A+(C<<12&4294967295|C>>>20),C=D+(x^k&(A^x))+M[2]+606105819&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(A^D&(k^A))+M[3]+3250441966&4294967295,x=D+(C<<22&4294967295|C>>>10),C=A+(k^x&(D^k))+M[4]+4118548399&4294967295,A=x+(C<<7&4294967295|C>>>25),C=k+(D^A&(x^D))+M[5]+1200080426&4294967295,k=A+(C<<12&4294967295|C>>>20),C=D+(x^k&(A^x))+M[6]+2821735955&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(A^D&(k^A))+M[7]+4249261313&4294967295,x=D+(C<<22&4294967295|C>>>10),C=A+(k^x&(D^k))+M[8]+1770035416&4294967295,A=x+(C<<7&4294967295|C>>>25),C=k+(D^A&(x^D))+M[9]+2336552879&4294967295,k=A+(C<<12&4294967295|C>>>20),C=D+(x^k&(A^x))+M[10]+4294925233&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(A^D&(k^A))+M[11]+2304563134&4294967295,x=D+(C<<22&4294967295|C>>>10),C=A+(k^x&(D^k))+M[12]+1804603682&4294967295,A=x+(C<<7&4294967295|C>>>25),C=k+(D^A&(x^D))+M[13]+4254626195&4294967295,k=A+(C<<12&4294967295|C>>>20),C=D+(x^k&(A^x))+M[14]+2792965006&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(A^D&(k^A))+M[15]+1236535329&4294967295,x=D+(C<<22&4294967295|C>>>10),C=A+(D^k&(x^D))+M[1]+4129170786&4294967295,A=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(A^x))+M[6]+3225465664&4294967295,k=A+(C<<9&4294967295|C>>>23),C=D+(A^x&(k^A))+M[11]+643717713&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^A&(D^k))+M[0]+3921069994&4294967295,x=D+(C<<20&4294967295|C>>>12),C=A+(D^k&(x^D))+M[5]+3593408605&4294967295,A=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(A^x))+M[10]+38016083&4294967295,k=A+(C<<9&4294967295|C>>>23),C=D+(A^x&(k^A))+M[15]+3634488961&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^A&(D^k))+M[4]+3889429448&4294967295,x=D+(C<<20&4294967295|C>>>12),C=A+(D^k&(x^D))+M[9]+568446438&4294967295,A=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(A^x))+M[14]+3275163606&4294967295,k=A+(C<<9&4294967295|C>>>23),C=D+(A^x&(k^A))+M[3]+4107603335&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^A&(D^k))+M[8]+1163531501&4294967295,x=D+(C<<20&4294967295|C>>>12),C=A+(D^k&(x^D))+M[13]+2850285829&4294967295,A=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(A^x))+M[2]+4243563512&4294967295,k=A+(C<<9&4294967295|C>>>23),C=D+(A^x&(k^A))+M[7]+1735328473&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^A&(D^k))+M[12]+2368359562&4294967295,x=D+(C<<20&4294967295|C>>>12),C=A+(x^D^k)+M[5]+4294588738&4294967295,A=x+(C<<4&4294967295|C>>>28),C=k+(A^x^D)+M[8]+2272392833&4294967295,k=A+(C<<11&4294967295|C>>>21),C=D+(k^A^x)+M[11]+1839030562&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^A)+M[14]+4259657740&4294967295,x=D+(C<<23&4294967295|C>>>9),C=A+(x^D^k)+M[1]+2763975236&4294967295,A=x+(C<<4&4294967295|C>>>28),C=k+(A^x^D)+M[4]+1272893353&4294967295,k=A+(C<<11&4294967295|C>>>21),C=D+(k^A^x)+M[7]+4139469664&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^A)+M[10]+3200236656&4294967295,x=D+(C<<23&4294967295|C>>>9),C=A+(x^D^k)+M[13]+681279174&4294967295,A=x+(C<<4&4294967295|C>>>28),C=k+(A^x^D)+M[0]+3936430074&4294967295,k=A+(C<<11&4294967295|C>>>21),C=D+(k^A^x)+M[3]+3572445317&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^A)+M[6]+76029189&4294967295,x=D+(C<<23&4294967295|C>>>9),C=A+(x^D^k)+M[9]+3654602809&4294967295,A=x+(C<<4&4294967295|C>>>28),C=k+(A^x^D)+M[12]+3873151461&4294967295,k=A+(C<<11&4294967295|C>>>21),C=D+(k^A^x)+M[15]+530742520&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^A)+M[2]+3299628645&4294967295,x=D+(C<<23&4294967295|C>>>9),C=A+(D^(x|~k))+M[0]+4096336452&4294967295,A=x+(C<<6&4294967295|C>>>26),C=k+(x^(A|~D))+M[7]+1126891415&4294967295,k=A+(C<<10&4294967295|C>>>22),C=D+(A^(k|~x))+M[14]+2878612391&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~A))+M[5]+4237533241&4294967295,x=D+(C<<21&4294967295|C>>>11),C=A+(D^(x|~k))+M[12]+1700485571&4294967295,A=x+(C<<6&4294967295|C>>>26),C=k+(x^(A|~D))+M[3]+2399980690&4294967295,k=A+(C<<10&4294967295|C>>>22),C=D+(A^(k|~x))+M[10]+4293915773&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~A))+M[1]+2240044497&4294967295,x=D+(C<<21&4294967295|C>>>11),C=A+(D^(x|~k))+M[8]+1873313359&4294967295,A=x+(C<<6&4294967295|C>>>26),C=k+(x^(A|~D))+M[15]+4264355552&4294967295,k=A+(C<<10&4294967295|C>>>22),C=D+(A^(k|~x))+M[6]+2734768916&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~A))+M[13]+1309151649&4294967295,x=D+(C<<21&4294967295|C>>>11),C=A+(D^(x|~k))+M[4]+4149444226&4294967295,A=x+(C<<6&4294967295|C>>>26),C=k+(x^(A|~D))+M[11]+3174756917&4294967295,k=A+(C<<10&4294967295|C>>>22),C=D+(A^(k|~x))+M[2]+718787259&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~A))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.v=function(I,A){A===void 0&&(A=I.length);const x=A-this.blockSize,M=this.C;let D=this.h,k=0;for(;k<A;){if(D==0)for(;k<=x;)o(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<A;)if(M[D++]=I.charCodeAt(k++),D==this.blockSize){o(this,M),D=0;break}}else for(;k<A;)if(M[D++]=I[k++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var x=I.length-8;x<I.length;++x)I[x]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,x=0;x<4;++x)for(let M=0;M<32;M+=8)I[A++]=this.g[x]>>>M&255;return I};function u(I,A){var x=m;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=A(I)}function c(I,A){this.h=A;const x=[];let M=!0;for(let D=I.length-1;D>=0;D--){const k=I[D]|0;M&&k==A||(x[D]=k,M=!1)}this.g=x}var m={};function g(I){return-128<=I&&I<128?u(I,function(A){return new c([A|0],A<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return Y(p(-I));const A=[];let x=1;for(let M=0;I>=x;M++)A[M]=I/x|0,x*=4294967296;return new c(A,0)}function T(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return Y(T(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=p(Math.pow(A,8));let M=E;for(let k=0;k<I.length;k+=8){var D=Math.min(8,I.length-k);const C=parseInt(I.substring(k,k+D),A);D<8?(D=p(Math.pow(A,D)),M=M.j(D).add(p(C))):(M=M.j(x),M=M.add(p(C)))}return M}var E=g(0),w=g(1),z=g(16777216);s=c.prototype,s.m=function(){if(G(this))return-Y(this).m();let I=0,A=1;for(let x=0;x<this.g.length;x++){const M=this.i(x);I+=(M>=0?M:4294967296+M)*A,A*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(X(this))return"0";if(G(this))return"-"+Y(this).toString(I);const A=p(Math.pow(I,6));var x=this;let M="";for(;;){const D=vt(x,A).g;x=lt(x,D.j(A));let k=((x.g.length>0?x.g[0]:x.h)>>>0).toString(I);if(x=D,X(x))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function X(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function G(I){return I.h==-1}s.l=function(I){return I=lt(this,I),G(I)?-1:X(I)?0:1};function Y(I){const A=I.g.length,x=[];for(let M=0;M<A;M++)x[M]=~I.g[M];return new c(x,~I.h).add(w)}s.abs=function(){return G(this)?Y(this):this},s.add=function(I){const A=Math.max(this.g.length,I.g.length),x=[];let M=0;for(let D=0;D<=A;D++){let k=M+(this.i(D)&65535)+(I.i(D)&65535),C=(k>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);M=C>>>16,k&=65535,C&=65535,x[D]=C<<16|k}return new c(x,x[x.length-1]&-2147483648?-1:0)};function lt(I,A){return I.add(Y(A))}s.j=function(I){if(X(this)||X(I))return E;if(G(this))return G(I)?Y(this).j(Y(I)):Y(Y(this).j(I));if(G(I))return Y(this.j(Y(I)));if(this.l(z)<0&&I.l(z)<0)return p(this.m()*I.m());const A=this.g.length+I.g.length,x=[];for(var M=0;M<2*A;M++)x[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<I.g.length;D++){const k=this.i(M)>>>16,C=this.i(M)&65535,re=I.i(D)>>>16,ge=I.i(D)&65535;x[2*M+2*D]+=C*ge,ft(x,2*M+2*D),x[2*M+2*D+1]+=k*ge,ft(x,2*M+2*D+1),x[2*M+2*D+1]+=C*re,ft(x,2*M+2*D+1),x[2*M+2*D+2]+=k*re,ft(x,2*M+2*D+2)}for(I=0;I<A;I++)x[I]=x[2*I+1]<<16|x[2*I];for(I=A;I<2*A;I++)x[I]=0;return new c(x,0)};function ft(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function at(I,A){this.g=I,this.h=A}function vt(I,A){if(X(A))throw Error("division by zero");if(X(I))return new at(E,E);if(G(I))return A=vt(Y(I),A),new at(Y(A.g),Y(A.h));if(G(A))return A=vt(I,Y(A)),new at(Y(A.g),A.h);if(I.g.length>30){if(G(I)||G(A))throw Error("slowDivide_ only works with positive integers.");for(var x=w,M=A;M.l(I)<=0;)x=Et(x),M=Et(M);var D=et(x,1),k=et(M,1);for(M=et(M,2),x=et(x,2);!X(M);){var C=k.add(M);C.l(I)<=0&&(D=D.add(x),k=C),M=et(M,1),x=et(x,1)}return A=lt(I,D.j(A)),new at(D,A)}for(D=E;I.l(A)>=0;){for(x=Math.max(1,Math.floor(I.m()/A.m())),M=Math.ceil(Math.log(x)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=p(x),C=k.j(A);G(C)||C.l(I)>0;)x-=M,k=p(x),C=k.j(A);X(k)&&(k=w),D=D.add(k),I=lt(I,C)}return new at(D,I)}s.B=function(I){return vt(this,I).h},s.and=function(I){const A=Math.max(this.g.length,I.g.length),x=[];for(let M=0;M<A;M++)x[M]=this.i(M)&I.i(M);return new c(x,this.h&I.h)},s.or=function(I){const A=Math.max(this.g.length,I.g.length),x=[];for(let M=0;M<A;M++)x[M]=this.i(M)|I.i(M);return new c(x,this.h|I.h)},s.xor=function(I){const A=Math.max(this.g.length,I.g.length),x=[];for(let M=0;M<A;M++)x[M]=this.i(M)^I.i(M);return new c(x,this.h^I.h)};function Et(I){const A=I.g.length+1,x=[];for(let M=0;M<A;M++)x[M]=I.i(M)<<1|I.i(M-1)>>>31;return new c(x,I.h)}function et(I,A){const x=A>>5;A%=32;const M=I.g.length-x,D=[];for(let k=0;k<M;k++)D[k]=A>0?I.i(k+x)>>>A|I.i(k+x+1)<<32-A:I.i(k+x);return new c(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$b=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=T,ds=c}).apply(typeof NT<"u"?NT:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zb,Su,Jb,Jh,Hg,Wb,t1,e1;(function(){var s,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,y){if(y)t:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var L=h[S];if(!(L in v))break t;v=v[L]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function T(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function E(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,L,F){for(var nt=Array(arguments.length-2),It=2;It<arguments.length;It++)nt[It-2]=arguments[It];return y.prototype[L].apply(S,nt)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function z(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function X(h,y){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=h.length||0;const F=L.length||0;h.length=v+F;for(let nt=0;nt<F;nt++)h[v+nt]=L[nt]}else h.push(L)}}class G{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(h){c.setTimeout(()=>{throw h},0)}function lt(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ft{constructor(){this.h=this.g=null}add(y,v){const S=at.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var at=new G(()=>new vt,h=>h.reset());class vt{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Et,et=!1,I=new ft,A=()=>{const h=Promise.resolve(void 0);Et=()=>{h.then(x)}};function x(){for(var h;h=lt();){try{h.h.call(h.g)}catch(v){Y(v)}var y=at;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}et=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function re(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(re,D),re.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),K=0;function it(h,y,v,S,L){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=L,this.key=++K,this.da=this.fa=!1}function pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function zt(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Ht(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function O(h){const y={};for(const v in h)y[v]=h[v];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(h,y){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)h[v]=S[v];for(let F=0;F<J.length;F++)v=J[F],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function ut(h){this.src=h,this.g={},this.h=0}ut.prototype.add=function(h,y,v,S,L){const F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);const nt=Rt(h,y,S,L);return nt>-1?(y=h[nt],v||(y.fa=!1)):(y=new it(y,this.src,F,!!S,L),y.fa=v,h.push(y)),y};function St(h,y){const v=y.type;if(v in h.g){var S=h.g[v],L=Array.prototype.indexOf.call(S,y,void 0),F;(F=L>=0)&&Array.prototype.splice.call(S,L,1),F&&(pt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Rt(h,y,v,S){for(let L=0;L<h.length;++L){const F=h[L];if(!F.da&&F.listener==y&&F.capture==!!v&&F.ha==S)return L}return-1}var jt="closure_lm_"+(Math.random()*1e6|0),ze={};function ue(h,y,v,S,L){if(Array.isArray(y)){for(let F=0;F<y.length;F++)ue(h,y[F],v,S,L);return null}return v=ml(v),h&&h[ge]?h.J(y,v,m(S)?!!S.capture:!1,L):ws(h,y,v,!1,S,L)}function ws(h,y,v,S,L,F){if(!y)throw Error("Invalid event type");const nt=m(L)?!!L.capture:!!L;let It=Is(h);if(It||(h[jt]=It=new ut(h)),v=It.add(y,v,S,nt,F),v.proxy)return v;if(S=Na(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)k||(L=nt),L===void 0&&(L=!1),h.addEventListener(y.toString(),S,L);else if(h.attachEvent)h.attachEvent(mi(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Na(){function h(v){return y.call(h.src,h.listener,v)}const y=fl;return h}function Da(h,y,v,S,L){if(Array.isArray(y))for(var F=0;F<y.length;F++)Da(h,y[F],v,S,L);else S=m(S)?!!S.capture:!!S,v=ml(v),h&&h[ge]?(h=h.i,F=String(y).toString(),F in h.g&&(y=h.g[F],v=Rt(y,v,S,L),v>-1&&(pt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[F],h.h--)))):h&&(h=Is(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Rt(y,v,S,L)),(v=h>-1?y[h]:null)&&Va(v))}function Va(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ge])St(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(mi(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Is(y))?(St(v,h),v.h==0&&(v.src=null,y[jt]=null)):pt(h)}}}function mi(h){return h in ze?ze[h]:ze[h]="on"+h}function fl(h,y){if(h.da)h=!0;else{y=new re(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Va(h),h=v.call(S,y)}return h}function Is(h){return h=h[jt],h instanceof ut?h:null}var dl="__closure_events_fn_"+(Math.random()*1e9>>>0);function ml(h){return typeof h=="function"?h:(h[dl]||(h[dl]=function(y){return h.handleEvent(y)}),h[dl])}function we(){M.call(this),this.i=new ut(this),this.M=this,this.G=null}E(we,M),we.prototype[ge]=!0,we.prototype.removeEventListener=function(h,y,v,S){Da(this,h,y,v,S)};function Ue(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var L=y;y=new D(S,h),rt(y,L)}L=!0;let F,nt;if(v)for(nt=v.length-1;nt>=0;nt--)F=y.g=v[nt],L=br(F,S,!0,y)&&L;if(F=y.g=h,L=br(F,S,!0,y)&&L,L=br(F,S,!1,y)&&L,v)for(nt=0;nt<v.length;nt++)F=y.g=v[nt],L=br(F,S,!1,y)&&L}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)pt(v[S]);delete h.g[y],h.h--}}this.G=null},we.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},we.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function br(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let L=!0;for(let F=0;F<y.length;++F){const nt=y[F];if(nt&&!nt.da&&nt.capture==v){const It=nt.listener,Te=nt.ha||nt.src;nt.fa&&St(h.i,nt),L=It.call(Te,S)!==!1&&L}}return L&&!S.defaultPrevented}function gd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function hc(h){h.g=gd(()=>{h.g=null,h.i&&(h.i=!1,hc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class un extends M{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:hc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(h){M.call(this),this.h=h,this.g={}}E(xs,M);var gl=[];function pl(h){zt(h.g,function(y,v){this.g.hasOwnProperty(v)&&Va(y)},h),h.g={}}xs.prototype.N=function(){xs.Z.N.call(this),pl(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sr=c.JSON.stringify,pd=c.JSON.parse,fc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function dc(){}function mc(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){D.call(this,"d")}E(Ke,D);function zn(){D.call(this,"c")}E(zn,D);var ve={},gc=null;function Oa(){return gc=gc||new we}ve.Ia="serverreachability";function pc(h){D.call(this,ve.Ia,h)}E(pc,D);function gi(h){const y=Oa();Ue(y,new pc(y))}ve.STAT_EVENT="statevent";function Rs(h,y){D.call(this,ve.STAT_EVENT,h),this.stat=y}E(Rs,D);function Ie(h){const y=Oa();Ue(y,new Rs(y,h))}ve.Ja="timingevent";function pi(h,y){D.call(this,ve.Ja,h),this.size=y}E(pi,D);function yi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function yd(h,y,v,S,L,F){h.info(function(){if(h.g)if(F){var nt="",It=F.split("&");for(let Gt=0;Gt<It.length;Gt++){var Te=It[Gt].split("=");if(Te.length>1){const ce=Te[0];Te=Te[1];const Bn=ce.split("_");nt=Bn.length>=2&&Bn[1]=="type"?nt+(ce+"="+Te+"&"):nt+(ce+"=redacted&")}}}else nt=null;else nt=F;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+y+`
`+v+`
`+nt})}function yc(h,y,v,S,L,F,nt){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+y+`
`+v+`
`+F+" "+nt})}function _i(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+_d(h,v)+(S?" "+S:"")})}function Cs(h,y){h.info(function(){return"TIMEOUT: "+y})}Wn.prototype.info=function(){};function _d(h,y){if(!h.g)return y;if(!y)return null;try{const F=JSON.parse(y);if(F){for(h=0;h<F.length;h++)if(Array.isArray(F[h])){var v=F[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let nt=1;nt<S.length;nt++)S[nt]=""}}}}return Sr(F)}catch{return y}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_l;function Ds(){}E(Ds,dc),Ds.prototype.g=function(){return new XMLHttpRequest},_l=new Ds;function Gi(h){return encodeURIComponent(String(h))}function _c(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function ti(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var xe={},qe={};function vi(h,y,v){h.M=1,h.A=Vs(Ce(y)),h.u=v,h.R=!0,Ma(h,null)}function Ma(h,y){h.F=Date.now(),Ti(h),h.B=Ce(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Ua(v.i,"t",S),h.C=0,v=h.j.L,h.h=new ei,h.g=Oc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new un(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var L="readystatechange";Array.isArray(L)||(L&&(gl[0]=L.toString()),L=gl);for(let F=0;F<L.length;F++){const nt=ue(v,L[F],S||y.handleEvent,!1,y.h||y);if(!nt)break;y.g[nt.key]=nt}y=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),gi(),yd(h.i,h.v,h.B,h.l,h.S,h.u)}ti.prototype.ba=function(h){h=h.target;const y=this.O;y&&ri(h)==3?y.j():this.Y(h)},ti.prototype.Y=function(h){try{if(h==this.g)t:{const It=ri(this.g),Te=this.g.ya(),Gt=this.g.ca();if(!(It<3)&&(It!=3||this.g&&(this.h.h||this.g.la()||Qe(this.g)))){this.K||It!=4||Te==7||(Te==8||Gt<=0?gi(3):gi(2)),Ei(this);var y=this.g.ca();this.X=y;var v=vd(this);if(this.o=y==200,yc(this.i,this.v,this.B,this.l,this.S,It,y),this.o){if(this.U&&!this.L){e:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var F=S;break e}}F=null}if(h=F)_i(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bi(this,h);else{this.o=!1,this.m=3,Ie(12),bn(this),Un(this);break t}}if(this.R){h=!0;let ce;for(;!this.K&&this.C<v.length;)if(ce=Tc(this,v),ce==qe){It==4&&(this.m=4,Ie(14),h=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==xe){this.m=4,Ie(15),_i(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else _i(this.i,this.l,ce,null),bi(this,ce);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||v.length!=0||this.h.h||(this.m=1,Ie(16),h=!1),this.o=this.o&&h,!h)_i(this.i,this.l,v,"[Invalid Chunked Response]"),bn(this),Un(this);else if(v.length>0&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.aa&&!nt.P&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ol(nt),nt.P=!0,Ie(11))}}else _i(this.i,this.l,v,null),bi(this,v);It==4&&bn(this),this.o&&!this.K&&(It==4?Cc(this.j,this):(this.o=!1,Ti(this)))}else Qi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),bn(this),Un(this)}}}catch{}finally{}};function vd(h){if(!vc(h))return h.g.la();const y=Qe(h.g);if(y==="")return"";let v="";const S=y.length,L=ri(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bn(h),Un(h),"";h.h.i=new c.TextDecoder}for(let F=0;F<S;F++)h.h.h=!0,v+=h.h.i.decode(y[F],{stream:!(L&&F==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function vc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Tc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?qe:(v=Number(y.substring(v,S)),isNaN(v)?xe:(S+=1,S+v>y.length?qe:(y=y.slice(S,S+v),h.C=S+v,y)))}ti.prototype.cancel=function(){this.K=!0,bn(this)};function Ti(h){h.T=Date.now()+h.H,Pa(h,h.H)}function Pa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yi(p(h.aa,h),y)}function Ei(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ti.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Cs(this.i,this.B),this.M!=2&&(gi(),Ie(17)),bn(this),this.m=2,Un(this)):Pa(this,this.T-h)};function Un(h){h.j.I==0||h.K||Cc(h.j,h)}function bn(h){Ei(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,pl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function bi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ai(v.h,h))){if(!h.L&&Ai(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Fa(v),Dr(v);else break t;Ls(v),Ie(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=yi(p(v.Va,v),6e3));Si(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ni(v,11)}else if((h.L||v.g==h)&&Fa(v),!C(y))for(L=v.Ba.g.parse(y),y=0;y<L.length;y++){let Gt=L[y];const ce=Gt[0];if(!(ce<=v.K))if(v.K=ce,Gt=Gt[1],v.I==2)if(Gt[0]=="c"){v.M=Gt[1],v.ba=Gt[2];const Bn=Gt[3];Bn!=null&&(v.ka=Bn,v.j.info("VER="+v.ka));const Di=Gt[4];Di!=null&&(v.za=Di,v.j.info("SVER="+v.za));const si=Gt[5];si!=null&&typeof si=="number"&&si>0&&(S=1.5*si,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ai=h.g;if(ai){const js=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(js){var F=S.h;F.g||js.indexOf("spdy")==-1&&js.indexOf("quic")==-1&&js.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(El(F,F.h),F.h=null))}if(S.G){const Ha=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(S.wa=Ha,Yt(S.J,S.G,Ha))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var nt=h;if(S.na=Vc(S,S.L?S.ba:null,S.W),nt.L){bl(S.h,nt);var It=nt,Te=S.O;Te&&(It.H=Te),It.D&&(Ei(It),Ti(It)),S.g=nt}else xc(S);v.i.length>0&&Ci(v)}else Gt[0]!="stop"&&Gt[0]!="close"||Ni(v,7);else v.I==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?Ni(v,7):Dl(v):Gt[0]!="noop"&&v.l&&v.l.qa(Gt),v.A=0)}}gi(4)}catch{}}var Re=class{constructor(h,y){this.g=h,this.map=y}};function vl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Si(h){return h.h?1:h.g?h.g.size:0}function Ai(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function El(h,y){h.g?h.g.add(y):h.h=y}function bl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}vl.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return z(h.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ka(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let L,F=null;S>=0?(L=h[v].substring(0,S),F=h[v].substring(S+1)):L=h[v],y(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Sn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Sn?(this.l=h.l,Fe(this,h.j),this.o=h.o,this.g=h.g,Ar(this,h.u),this.h=h.h,Al(this,wc(h.i)),this.m=h.m):h&&(y=String(h).match(Ec))?(this.l=!1,Fe(this,y[1]||"",!0),this.o=wi(y[2]||""),this.g=wi(y[3]||"",!0),Ar(this,y[4]),this.h=wi(y[5]||"",!0),Al(this,y[6]||"",!0),this.m=wi(y[7]||"")):(this.l=!1,this.i=new Ir(null,this.l))}Sn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Os(y,za,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Os(y,za,!0),"@"),h.push(Gi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Os(v,v.charAt(0)=="/"?wl:bc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Os(v,Sc)),h.join("")},Sn.prototype.resolve=function(h){const y=Ce(this);let v=!!h.j;v?Fe(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Ar(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=y.h.lastIndexOf("/");L!=-1&&(S=y.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let nt=0;nt<L.length;){const It=L[nt++];It=="."?S&&nt==L.length&&F.push(""):It==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),S&&nt==L.length&&F.push("")):(F.push(It),S=!0)}S=F.join("/")}else S=L}return v?y.h=S:v=h.i.toString()!=="",v?Al(y,wc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Ce(h){return new Sn(h)}function Fe(h,y,v){h.j=v?wi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ar(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Al(h,y,v){y instanceof Ir?(h.i=y,La(h.i,h.l)):(v||(y=Os(y,wr)),h.i=new Ir(y,h.l))}function Yt(h,y,v){h.i.set(y,v)}function Vs(h){return Yt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function wi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Os(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,dn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var za=/[#\/\?@]/g,bc=/[#\?:]/g,wl=/[#\?]/g,wr=/[#\?@]/g,Sc=/#/g;function Ir(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&ka(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Ir.prototype,s.add=function(h,y){mn(this),this.i=null,h=xr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ac(h,y){mn(h),y=xr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Il(h,y){return mn(h),y=xr(h,y),h.g.has(y)}s.forEach=function(h,y){mn(this),this.g.forEach(function(v,S){v.forEach(function(L){h.call(y,L,S,this)},this)},this)};function xl(h,y){mn(h);let v=[];if(typeof y=="string")Il(h,y)&&(v=v.concat(h.g.get(xr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return mn(this),this.i=null,h=xr(this,h),Il(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=xl(this,h),h.length>0?String(h[0]):y):y};function Ua(h,y,v){Ac(h,y),v.length>0&&(h.i=null,h.g.set(xr(h,y),z(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const L=Gi(v);v=xl(this,v);for(let F=0;F<v.length;F++){let nt=L;v[F]!==""&&(nt+="="+Gi(v[F])),h.push(nt)}}return this.i=h.join("&")};function wc(h){const y=new Ir;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function xr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function La(h,y){y&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(Ac(this,S),Ua(this,L,v))},h)),h.j=y}function ni(h,y){const v=new Wn;if(c.Image){const S=new Image;S.onload=T(Ln,v,"TestLoadImage: loaded",!0,y,S),S.onerror=T(Ln,v,"TestLoadImage: error",!1,y,S),S.onabort=T(Ln,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=T(Ln,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Rl(h,y){const v=new Wn,S=new AbortController,L=setTimeout(()=>{S.abort(),Ln(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(F=>{clearTimeout(L),F.ok?Ln(v,"TestPingServer: ok",!0,y):Ln(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),Ln(v,"TestPingServer: error",!1,y)})}function Ln(h,y,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function Rr(){this.g=new fc}function Ii(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ii,dc),Ii.prototype.g=function(){return new Ms(this.i,this.h)};function Ms(h,y){we.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ms,we),s=Ms.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ii(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Cr(this):ii(this),this.readyState==3&&ja(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Cr(this))},s.Na=function(h){this.g&&(this.response=h,Cr(this))},s.ga=function(){this.g&&Cr(this)};function Cr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ii(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ii(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ms.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function jn(h){let y="";return zt(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ps(h,y,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=jn(v),typeof h=="string"?v!=null&&Gi(v):Yt(h,y,v))}function Wt(h){we.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Wt,we);var xi=/^https?$/i,Cl=["POST","PUT"];s=Wt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_l.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(F){ks(this,F);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())v.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),L=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Cl,y,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,nt]of v)this.g.setRequestHeader(F,nt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(F){ks(this,F)}};function ks(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Nl(h),Ki(h)}function Nl(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ue(this,"complete"),Ue(this,"abort"),Ki(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),Wt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zs(this):this.Xa())},s.Xa=function(){zs(this)};function zs(h){if(h.h&&typeof u<"u"){if(h.v&&ri(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ue(h,"readystatechange"),ri(h)==4){h.h=!1;try{const F=h.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var S;if(S=F===0){let nt=String(h.D).match(Ec)[1]||null;!nt&&c.self&&c.self.location&&(nt=c.self.location.protocol.slice(0,-1)),S=!xi.test(nt?nt.toLowerCase():"")}v=S}if(v)Ue(h,"complete"),Ue(h,"success");else{h.o=6;try{var L=ri(h)>2?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.ca()+"]",Nl(h)}}finally{Ki(h)}}}}function Ki(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ue(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ri(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),pd(y)}};function Qe(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(h){const y={};h=(h.g&&ri(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(C(h[S]))continue;var v=_c(h[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=y[L]||[];y[L]=F,F.push(v)}Ht(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Nr(h){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,h),this.Za=Ri("retryDelaySeedMs",1e4,h),this.Ta=Ri("forwardChannelMaxRetries",2,h),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new vl(h&&h.concurrentRequestLimit),this.Ba=new Rr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Nr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){Ie(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Vc(this,null,this.W),Ci(this)};function Dl(h){if(Ba(h),h.I==3){var y=h.V++,v=Ce(h.J);if(Yt(v,"SID",h.M),Yt(v,"RID",y),Yt(v,"TYPE","terminate"),Us(h,v),y=new ti(h,h.j,y),y.M=2,y.A=Vs(Ce(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Oc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ti(y)}Dc(h)}function Dr(h){h.g&&(Ol(h),h.g.cancel(),h.g=null)}function Ba(h){Dr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Fa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ci(h){if(!Tl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Et||A(),et||(Et(),et=!0),I.add(y,h),h.D=0}}function qa(h,y){return Si(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yi(p(h.Ea,h,y),Nc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const L=new ti(this,this.j,h);let F=this.o;if(this.U&&(F?(F=O(F),rt(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Ic(this,L,y),v=Ce(this.J),Yt(v,"RID",h),Yt(v,"CVER",22),this.G&&Yt(v,"X-HTTP-Session-Id",this.G),Us(this,v),F&&(this.R?y="headers="+Gi(jn(F))+"&"+y:this.u&&Ps(v,this.u,F)),El(this.h,L),this.Ra&&Yt(v,"TYPE","init"),this.S?(Yt(v,"$req",y),Yt(v,"SID","null"),L.U=!0,vi(L,v,null)):vi(L,v,y),this.I=2}}else this.I==3&&(h?Vl(this,h):this.i.length==0||Tl(this.h)||Vl(this))};function Vl(h,y){var v;y?v=y.l:v=h.V++;const S=Ce(h.J);Yt(S,"SID",h.M),Yt(S,"RID",v),Yt(S,"AID",h.K),Us(h,S),h.u&&h.o&&Ps(S,h.u,h.o),v=new ti(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ic(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),El(h.h,v),vi(v,S,y)}function Us(h,y){h.H&&zt(h.H,function(v,S){Yt(y,S,v)}),h.l&&zt({},function(v,S){Yt(y,S,v)})}function Ic(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;t:{var L=h.i;let It=-1;for(;;){const Te=["count="+v];It==-1?v>0?(It=L[0].g,Te.push("ofs="+It)):It=0:Te.push("ofs="+It);let Gt=!0;for(let ce=0;ce<v;ce++){var F=L[ce].g;const Bn=L[ce].map;if(F-=It,F<0)It=Math.max(0,L[ce].g-100),Gt=!1;else try{F="req"+F+"_"||"";try{var nt=Bn instanceof Map?Bn:Object.entries(Bn);for(const[Di,si]of nt){let ai=si;m(si)&&(ai=Sr(si)),Te.push(F+Di+"="+encodeURIComponent(ai))}}catch(Di){throw Te.push(F+"type="+encodeURIComponent("_badmap")),Di}}catch{S&&S(Bn)}}if(Gt){nt=Te.join("&");break t}}nt=void 0}return h=h.i.splice(0,v),y.G=h,nt}function xc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Et||A(),et||(Et(),et=!0),I.add(y,h),h.A=0}}function Ls(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yi(p(h.Da,h),Nc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Rc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yi(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),Dr(this),Rc(this))};function Ol(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Rc(h){h.g=new ti(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ce(h.na);Yt(y,"RID","rpc"),Yt(y,"SID",h.M),Yt(y,"AID",h.K),Yt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Yt(y,"TO",h.ia),Yt(y,"TYPE","xmlhttp"),Us(h,y),h.u&&h.o&&Ps(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Vs(Ce(y)),v.u=null,v.R=!0,Ma(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Dr(this),Ls(this),Ie(19))};function Fa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Cc(h,y){var v=null;if(h.g==y){Fa(h),Ol(h),h.g=null;var S=2}else if(Ai(h.h,y))v=y.G,bl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var L=h.D;S=Oa(),Ue(S,new pi(S,v)),Ci(h)}else xc(h);else if(L=y.m,L==3||L==0&&y.X>0||!(S==1&&qa(h,y)||S==2&&Ls(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),L){case 1:Ni(h,5);break;case 4:Ni(h,10);break;case 3:Ni(h,6);break;default:Ni(h,2)}}}function Nc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ni(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const L=!S;S=new Sn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Fe(S,"https"),Vs(S),L?ni(S.toString(),v):Rl(S.toString(),v)}else Ie(2);h.I=0,h.l&&h.l.pa(y),Dc(h),Ba(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function Dc(h){if(h.I=0,h.ja=[],h.l){const y=Sl(h.h);(y.length!=0||h.i.length!=0)&&(X(h.ja,y),X(h.ja,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.oa()}}function Vc(h,y,v){var S=v instanceof Sn?Ce(v):new Sn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ar(S,S.u);else{var L=c.location;S=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;const F=new Sn(null);S&&Fe(F,S),y&&(F.g=y),L&&Ar(F,L),v&&(F.h=v),S=F}return v=h.G,y=h.wa,v&&y&&Yt(S,v,y),Yt(S,"VER",h.ka),Us(h,S),S}function Oc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Wt(new Ii({ab:v})):new Wt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}s=Mc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Vr(){}Vr.prototype.g=function(h,y){return new cn(h,y)};function cn(h,y){we.call(this),this.g=new Nr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Yi(this)}E(cn,we),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Dl(this.g)},cn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Sr(h),h=v);y.i.push(new Re(y.Ya++,h)),y.I==3&&Ci(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,Dl(this.g),delete this.g,cn.Z.N.call(this)};function Pc(h){Ke.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Pc,Ke);function kc(){zn.call(this),this.status=1}E(kc,zn);function Yi(h){this.g=h}E(Yi,Mc),Yi.prototype.ra=function(){Ue(this.g,"a")},Yi.prototype.qa=function(h){Ue(this.g,new Pc(h))},Yi.prototype.pa=function(h){Ue(this.g,new kc)},Yi.prototype.oa=function(){Ue(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,e1=function(){return new Vr},t1=function(){return Oa()},Wb=ve,Hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Jh=Ns,yl.COMPLETE="complete",Jb=yl,mc.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",we.prototype.listen=we.prototype.J,Su=mc,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Zb=Wt}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const DT="@firebase/firestore",VT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Ep("@firebase/firestore");function xo(){return Ea.logLevel}function tt(s,...t){if(Ea.logLevel<=kt.DEBUG){const e=t.map(Mp);Ea.debug(`Firestore (${ol}): ${s}`,...e)}}function Se(s,...t){if(Ea.logLevel<=kt.ERROR){const e=t.map(Mp);Ea.error(`Firestore (${ol}): ${s}`,...e)}}function Bu(s,...t){if(Ea.logLevel<=kt.WARN){const e=t.map(Mp);Ea.warn(`Firestore (${ol}): ${s}`,...e)}}function Mp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(s,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,n1(s,r,e)}function n1(s,t,e){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Se(r),new Error(r)}function gt(s,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,s||n1(t,o,r)}function dt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends vr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(nn.UNAUTHENTICATED)))}shutdown(){}}class $2{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){gt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ms,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ms)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string",31837,{l:r}),new Y2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class Z2{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class J2{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new Z2(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W2{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){gt(this.o===void 0,3512);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(gt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new OT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=tC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function At(s,t){return s<t?-1:s>t?1:0}function Gg(s,t){const e=Math.min(s.length,t.length);for(let r=0;r<e;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return Ig(o)===Ig(u)?At(o,u):Ig(o)?1:-1}return At(s.length,t.length)}const eC=55296,nC=57343;function Ig(s){const t=s.charCodeAt(0);return t>=eC&&t<=nC}function jo(s,t,e){return s.length===t.length&&s.every(((r,o)=>e(r,t[o])))}function i1(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__name__";class ki{constructor(t,e,r){e===void 0?e=0:e>t.length&&ct(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&ct(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return ki.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ki?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=ki.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return At(t.length,e.length)}static compareSegments(t,e){const r=ki.isNumericId(t),o=ki.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?ki.extractNumericId(t).compare(ki.extractNumericId(e)):Gg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ds.fromString(t.substring(4,t.length-2))}}class Qt extends ki{construct(t,e,r){return new Qt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new ot(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Qt(e)}static emptyPath(){return new Qt([])}}const iC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class me extends ki{construct(t,e,r){return new me(t,e,r)}static isValidIdentifier(t){return iC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),me.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MT}static keyField(){return new me([MT])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ot(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new ot(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ot(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new ot(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new me(e)}static emptyPath(){return new me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.path=t}static fromPath(t){return new st(Qt.fromString(t))}static fromName(t){return new st(Qt.fromString(t).popFirst(5))}static empty(){return new st(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Qt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new st(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(s,t,e){if(!e)throw new ot(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function rC(s,t,e,r){if(t===!0&&r===!0)throw new ot(W.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function PT(s){if(!st.isDocumentKey(s))throw new ot(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function kT(s){if(st.isDocumentKey(s))throw new ot(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function s1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function kp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ct(12329,{type:typeof s})}function mr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ot(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=kp(s);throw new ot(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(s,t){const e={typeString:s};return t&&(e.value=t),e}function rc(s,t){if(!s1(s))throw new ot(W.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){e=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new ot(W.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=-62135596800,UT=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(t){return Zt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*UT);return new Zt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ot(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ot(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<zT)throw new ot(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UT}_compareTo(t){return this.seconds===t.seconds?At(this.nanoseconds,t.nanoseconds):At(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(rc(t,Zt._jsonSchema))return new Zt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-zT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:Pe("string",Zt._jsonSchemaVersion),seconds:Pe("number"),nanoseconds:Pe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(t){return new _t(t)}static min(){return new _t(new Zt(0,0))}static max(){return new _t(new Zt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=-1;class _f{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Kg(s){return s.fields.find((t=>t.kind===2))}function ra(s){return s.fields.filter((t=>t.kind!==2))}_f.UNKNOWN_ID=-1;class Wh{constructor(t,e){this.fieldPath=t,this.kind=e}}class qu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new qu(0,kn.min())}}function a1(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(r===1e9?new Zt(e+1,0):new Zt(e,r));return new kn(o,st.empty(),t)}function o1(s){return new kn(s.readTime,s.key,Bo)}class kn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new kn(_t.min(),st.empty(),Bo)}static max(){return new kn(_t.max(),st.empty(),Bo)}}function zp(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=st.comparator(s.documentKey,t.documentKey),e!==0?e:At(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Es(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==l1)throw s;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new U(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof U?e:U.resolve(e)}catch(e){return U.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):U.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):U.reject(e)}static resolve(t){return new U(((e,r)=>{e(t)}))}static reject(t){return new U(((e,r)=>{r(t)}))}static waitFor(t){return new U(((e,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(g=>r(g)))})),c=!0,u===o&&e()}))}static or(t){let e=U.resolve(!1);for(const r of t)e=e.next((o=>o?U.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new U(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;e(t[p]).next((T=>{c[p]=T,++m,m===u&&r(c)}),(T=>o(T)))}}))}static doWhile(t,e){return new U(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="SimpleDb";class qf{static open(t,e,r,o){try{return new qf(e,t.transaction(o,r))}catch(u){throw new Nu(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new ms,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Nu(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Up(r.target.error);this.S.reject(new Nu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(tt(Dn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new aC(e)}}class gs{static delete(t){return tt(Dn,"Removing database:",t),aa(ob().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!mb())return!1;if(gs.F())return!0;const t=je(),e=gs.M(t),r=0<e&&e<10,o=c1(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,gs.M(je())===12.2&&Se("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(tt(Dn,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;e(c)},o.onblocked=()=>{r(new Nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new ot(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ot(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Nu(t,c))},o.onupgradeneeded=u=>{tt(Dn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{tt(Dn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=qf.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),U.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(tt(Dn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function c1(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class sC{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return aa(this.U.delete())}}class Nu extends ot{constructor(t,e){super(W.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function bs(s){return s.name==="IndexedDbTransactionError"}class aC{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(Dn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(Dn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),aa(r)}add(t){return tt(Dn,"ADD",this.store.name,t,t),aa(this.store.add(t))}get(t){return aa(this.store.get(t)).next((e=>(e===void 0&&(e=null),tt(Dn,"GET",this.store.name,t,e),e)))}delete(t){return tt(Dn,"DELETE",this.store.name,t),aa(this.store.delete(t))}count(){return tt(Dn,"COUNT",this.store.name),aa(this.store.count())}J(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new U(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new U(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(t,e){tt(Dn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.H(o,e)}te(t){const e=this.cursor({});return new U(((r,o)=>{e.onerror=u=>{const c=Up(u.target.error);o(c)},e.onsuccess=u=>{const c=u.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(t,e){const r=[];return new U(((o,u)=>{t.onerror=c=>{u(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new sC(m),p=e(m.primaryKey,m.value,g);if(p instanceof U){const T=p.catch((E=>(g.done(),U.reject(E))));r.push(T)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>U.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function aa(s){return new U(((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=Up(r.target.error);e(o)}}))}let LT=!1;function Up(s){const t=gs.M(je());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LT||(LT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Du="IndexBackfiller";class oC{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){tt(Du,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();tt(Du,`Documents written: ${e}`)}catch(e){bs(e)?tt(Du,"Ignoring IndexedDB error during index backfill: ",e):await Es(e)}await this.re(6e4)}))}}class lC{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let o=e,u=!0;return U.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!r.has(c))return tt(Du,`Processing collection: ${c}`),this.oe(t,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>e-o))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(o,u))).next((m=>(tt(Du,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((o,u)=>{const c=o1(u);zp(c,r)>0&&(r=c)})),new kn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Tn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=-1;function Ff(s){return s==null}function Fu(s){return s===0&&1/s==-1/0}function h1(s){return typeof s=="number"&&Number.isInteger(s)&&!Fu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="";function on(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=jT(t)),t=uC(s.get(e),t);return jT(t)}function uC(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case vf:e+="";break;default:e+=u}}return e}function jT(s){return s+vf+""}function Ui(s){const t=s.length;if(gt(t>=2,64408,{path:s}),t===2)return gt(s.charAt(0)===vf&&s.charAt(1)==="",56145,{path:s}),Qt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const c=s.indexOf(vf,u);switch((c<0||c>e)&&ct(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:ct(61167,{path:s})}u=c+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="remoteDocuments",sc="owner",Eo="owner",Hu="mutationQueues",cC="userId",ci="mutations",BT="batchId",ha="userMutationsIndex",qT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(s,t){return[s,on(t)]}function f1(s,t,e){return[s,on(t),e]}const hC={},qo="documentMutations",Tf="remoteDocumentsV14",fC=["prefixPath","collectionGroup","readTime","documentId"],ef="documentKeyIndex",dC=["prefixPath","collectionGroup","documentId"],d1="collectionGroupIndex",mC=["collectionGroup","readTime","prefixPath","documentId"],Gu="remoteDocumentGlobal",Qg="remoteDocumentGlobalKey",Fo="targets",m1="queryTargetsIndex",gC=["canonicalId","targetId"],Ho="targetDocuments",pC=["targetId","path"],Lp="documentTargetsIndex",yC=["path","targetId"],Ef="targetGlobalKey",ga="targetGlobal",Ku="collectionParents",_C=["collectionId","parent"],Go="clientMetadata",vC="clientId",Hf="bundles",TC="bundleId",Gf="namedQueries",EC="name",jp="indexConfiguration",bC="indexId",Yg="collectionGroupIndex",SC="collectionGroup",Vu="indexState",AC=["indexId","uid"],g1="sequenceNumberIndex",wC=["uid","sequenceNumber"],Ou="indexEntries",IC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],p1="documentKeyIndex",xC=["indexId","uid","orderedDocumentKey"],Kf="documentOverlays",RC=["userId","collectionPath","documentId"],Xg="collectionPathOverlayIndex",CC=["userId","collectionPath","largestBatchId"],y1="collectionGroupOverlayIndex",NC=["userId","collectionGroup","largestBatchId"],Bp="globals",DC="name",_1=[Hu,ci,qo,sa,Fo,sc,ga,Ho,Go,Gu,Ku,Hf,Gf],VC=[..._1,Kf],v1=[Hu,ci,qo,Tf,Fo,sc,ga,Ho,Go,Gu,Ku,Hf,Gf,Kf],T1=v1,qp=[...T1,jp,Vu,Ou],OC=qp,E1=[...qp,Bp],MC=E1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends u1{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Be(s,t){const e=dt(s);return gs.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function Ss(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function b1(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,e){this.comparator=t,this.root=e||Je.EMPTY}insert(t,e){return new ae(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(t){return new ae(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Je.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qh(this.root,t,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qh(this.root,t,this.comparator,!0)}}class qh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Je{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Je.RED,this.left=o??Je.EMPTY,this.right=u??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Je(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Je.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ct(27949);return t+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw ct(57766)}get value(){throw ct(16141)}get color(){throw ct(16727)}get left(){throw ct(29726)}get right(){throw ct(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Je(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.comparator=t,this.data=new ae(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new HT(this.data.getIterator())}getIteratorFrom(t){return new HT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof Jt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Jt(this.comparator);return e.data=t,e}}class HT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.fields=t,t.sort(me.comparator)}static empty(){return new En([])}unionWith(t){let e=new Jt(me.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new En(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return jo(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new S1("Invalid base64 string: "+u):u}})(t);return new Ae(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new Ae(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return At(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const PC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(s){if(gt(!!s,39018),typeof s=="string"){let t=0;const e=PC.exec(s);if(gt(!!e,46558,{timestamp:s}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:de(s.seconds),nanos:de(s.nanos)}}function de(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function _r(s){return typeof s=="string"?Ae.fromBase64String(s):Ae.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="server_timestamp",w1="__type__",I1="__previous_value__",x1="__local_write_time__";function Fp(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[w1])==null?void 0:r.stringValue)===A1}function Qf(s){const t=s.mapValue.fields[I1];return Fp(t)?Qf(t):t}function Qu(s){const t=yr(s.mapValue.fields[x1].timestampValue);return new Zt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,e,r,o,u,c,m,g,p,T){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=T}}const bf="(default)";class ba{constructor(t,e){this.projectId=t,this.database=e||bf}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===bf}isEqual(t){return t instanceof ba&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="__type__",R1="__max__",us={mapValue:{fields:{__type__:{stringValue:R1}}}},Gp="__vector__",Ko="value",nf={nullValue:"NULL_VALUE"};function ys(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Fp(s)?4:C1(s)?9007199254740991:Yf(s)?10:11:ct(28295,{value:s})}function Hi(s,t){if(s===t)return!0;const e=ys(s);if(e!==ys(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Qu(s).isEqual(Qu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=yr(o.timestampValue),m=yr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return _r(o.bytesValue).isEqual(_r(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return de(o.geoPointValue.latitude)===de(u.geoPointValue.latitude)&&de(o.geoPointValue.longitude)===de(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return de(o.integerValue)===de(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=de(o.doubleValue),m=de(u.doubleValue);return c===m?Fu(c)===Fu(m):isNaN(c)&&isNaN(m)}return!1})(s,t);case 9:return jo(s.arrayValue.values||[],t.arrayValue.values||[],Hi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(FT(c)!==FT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Hi(c[g],m[g])))return!1;return!0})(s,t);default:return ct(52216,{left:s})}}function Yu(s,t){return(s.values||[]).find((e=>Hi(e,t)))!==void 0}function _s(s,t){if(s===t)return 0;const e=ys(s),r=ys(t);if(e!==r)return At(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return At(s.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=de(u.integerValue||u.doubleValue),g=de(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return GT(s.timestampValue,t.timestampValue);case 4:return GT(Qu(s),Qu(t));case 5:return Gg(s.stringValue,t.stringValue);case 6:return(function(u,c){const m=_r(u),g=_r(c);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const T=At(m[p],g[p]);if(T!==0)return T}return At(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=At(de(u.latitude),de(c.latitude));return m!==0?m:At(de(u.longitude),de(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return KT(s.arrayValue,t.arrayValue);case 10:return(function(u,c){var w,z,X,G;const m=u.fields||{},g=c.fields||{},p=(w=m[Ko])==null?void 0:w.arrayValue,T=(z=g[Ko])==null?void 0:z.arrayValue,E=At(((X=p==null?void 0:p.values)==null?void 0:X.length)||0,((G=T==null?void 0:T.values)==null?void 0:G.length)||0);return E!==0?E:KT(p,T)})(s.mapValue,t.mapValue);case 11:return(function(u,c){if(u===us.mapValue&&c===us.mapValue)return 0;if(u===us.mapValue)return 1;if(c===us.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},T=Object.keys(p);g.sort(),T.sort();for(let E=0;E<g.length&&E<T.length;++E){const w=Gg(g[E],T[E]);if(w!==0)return w;const z=_s(m[g[E]],p[T[E]]);if(z!==0)return z}return At(g.length,T.length)})(s.mapValue,t.mapValue);default:throw ct(23264,{he:e})}}function GT(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return At(s,t);const e=yr(s),r=yr(t),o=At(e.seconds,r.seconds);return o!==0?o:At(e.nanos,r.nanos)}function KT(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=_s(e[o],r[o]);if(u)return u}return At(e.length,r.length)}function Qo(s){return Zg(s)}function Zg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const r=yr(e);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return _r(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return st.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Zg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Zg(e.fields[c])}`;return o+"}"})(s.mapValue):ct(61005,{value:s})}function rf(s){switch(ys(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qf(s);return t?16+rf(t):16;case 5:return 2*s.stringValue.length;case 6:return _r(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+rf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Ss(r.fields,((u,c)=>{o+=u.length+rf(c)})),o})(s.mapValue);default:throw ct(13486,{value:s})}}function Kp(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Jg(s){return!!s&&"integerValue"in s}function Xu(s){return!!s&&"arrayValue"in s}function QT(s){return!!s&&"nullValue"in s}function YT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function sf(s){return!!s&&"mapValue"in s}function Yf(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[Hp])==null?void 0:r.stringValue)===Gp}function Mu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Ss(s.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Mu(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Mu(s.arrayValue.values[e]);return t}return{...s}}function C1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===R1}const N1={mapValue:{fields:{[Hp]:{stringValue:Gp},[Ko]:{arrayValue:{}}}}};function zC(s){return"nullValue"in s?nf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Kp(ba.empty(),st.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Yf(s)?N1:{mapValue:{}}:ct(35942,{value:s})}function UC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Kp(ba.empty(),st.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?N1:"mapValue"in s?Yf(s)?{mapValue:{}}:us:ct(61959,{value:s})}function XT(s,t){const e=_s(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function $T(s,t){const e=_s(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.value=t}static empty(){return new sn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!sf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Mu(e)}setAll(t){let e=me.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}c?r[m.lastSegment()]=Mu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());sf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Hi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];sf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){Ss(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new sn(Mu(this.value))}}function D1(s){const t=[];return Ss(s.fields,((e,r)=>{const o=new me([e]);if(sf(r)){const u=D1(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new En(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t,e,r,o,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new _e(t,0,_t.min(),_t.min(),_t.min(),sn.empty(),0)}static newFoundDocument(t,e,r,o){return new _e(t,1,e,_t.min(),r,o,0)}static newNoDocument(t,e){return new _e(t,2,e,_t.min(),_t.min(),sn.empty(),0)}static newUnknownDocument(t,e){return new _e(t,3,e,_t.min(),_t.min(),sn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof _e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new _e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(t,e){this.position=t,this.inclusive=e}}function ZT(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],c=s.position[o];if(u.field.isKeyField()?r=st.comparator(st.fromName(c.referenceValue),e.key):r=_s(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function JT(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Hi(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,e="asc"){this.field=t,this.dir=e}}function LC(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{}class Lt extends V1{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new jC(t,e,r):e==="array-contains"?new FC(t,r):e==="in"?new U1(t,r):e==="not-in"?new HC(t,r):e==="array-contains-any"?new GC(t,r):new Lt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new BC(t,r):new qC(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(_s(e,this.value)):e!==null&&ys(this.value)===ys(e)&&this.matchesComparison(_s(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ie extends V1{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ie(t,e)}matches(t){return Xo(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xo(s){return s.op==="and"}function Wg(s){return s.op==="or"}function Qp(s){return O1(s)&&Xo(s)}function O1(s){for(const t of s.filters)if(t instanceof ie)return!1;return!0}function tp(s){if(s instanceof Lt)return s.field.canonicalString()+s.op.toString()+Qo(s.value);if(Qp(s))return s.filters.map((t=>tp(t))).join(",");{const t=s.filters.map((e=>tp(e))).join(",");return`${s.op}(${t})`}}function M1(s,t){return s instanceof Lt?(function(r,o){return o instanceof Lt&&r.op===o.op&&r.field.isEqual(o.field)&&Hi(r.value,o.value)})(s,t):s instanceof ie?(function(r,o){return o instanceof ie&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&M1(c,o.filters[m])),!0):!1})(s,t):void ct(19439)}function P1(s,t){const e=s.filters.concat(t);return ie.create(e,s.op)}function k1(s){return s instanceof Lt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Qo(e.value)}`})(s):s instanceof ie?(function(e){return e.op.toString()+" {"+e.getFilters().map(k1).join(" ,")+"}"})(s):"Filter"}class jC extends Lt{constructor(t,e,r){super(t,e,r),this.key=st.fromName(r.referenceValue)}matches(t){const e=st.comparator(t.key,this.key);return this.matchesComparison(e)}}class BC extends Lt{constructor(t,e){super(t,"in",e),this.keys=z1("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class qC extends Lt{constructor(t,e){super(t,"not-in",e),this.keys=z1("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function z1(s,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((r=>st.fromName(r.referenceValue)))}class FC extends Lt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Xu(e)&&Yu(e.arrayValue,this.value)}}class U1 extends Lt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Yu(this.value.arrayValue,e)}}class HC extends Lt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Yu(this.value.arrayValue,e)}}class GC extends Lt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Xu(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,e=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function ep(s,t=null,e=[],r=[],o=null,u=null,c=null){return new KC(s,t,e,r,o,u,c)}function Sa(s){const t=dt(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>tp(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Ff(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Qo(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Qo(r))).join(",")),t.Te=e}return t.Te}function ac(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!LC(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!M1(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!JT(s.startAt,t.startAt)&&JT(s.endAt,t.endAt)}function Af(s){return st.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function wf(s,t){return s.filters.filter((e=>e instanceof Lt&&e.field.isEqual(t)))}function WT(s,t,e){let r=nf,o=!0;for(const u of wf(s,t)){let c=nf,m=!0;switch(u.op){case"<":case"<=":c=zC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=nf}XT({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];XT({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}function tE(s,t,e){let r=us,o=!0;for(const u of wf(s,t)){let c=us,m=!0;switch(u.op){case">=":case">":c=UC(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=us}$T({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];$T({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t,e=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L1(s,t,e,r,o,u,c,m){return new Xf(s,t,e,r,o,u,c,m)}function $f(s){return new Xf(s)}function eE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function QC(s){return s.collectionGroup!==null}function Pu(s){const t=dt(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Jt(me.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Sf(u,r))})),e.has(me.keyField().canonicalString())||t.Ie.push(new Sf(me.keyField(),r))}return t.Ie}function Pn(s){const t=dt(s);return t.Ee||(t.Ee=YC(t,Pu(s))),t.Ee}function YC(s,t){if(s.limitType==="F")return ep(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sf(o.field,u)}));const e=s.endAt?new Yo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Yo(s.startAt.position,s.startAt.inclusive):null;return ep(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function np(s,t,e){return new Xf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function Zf(s,t){return ac(Pn(s),Pn(t))&&s.limitType===t.limitType}function j1(s){return`${Sa(Pn(s))}|lt:${s.limitType}`}function Ro(s){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>k1(o))).join(", ")}]`),Ff(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>Qo(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>Qo(o))).join(",")),`Target(${r})`})(Pn(s))}; limitType=${s.limitType})`}function oc(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):st.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of Pu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=ZT(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Pu(r),o)||r.endAt&&!(function(c,m,g){const p=ZT(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Pu(r),o))})(s,t)}function B1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function q1(s){return(t,e)=>{let r=!1;for(const o of Pu(s)){const u=XC(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function XC(s,t,e){const r=s.field.isKeyField()?st.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?_s(g,p):ct(42886)})(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ct(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Ss(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return b1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new ae(st.comparator);function Mn(){return $C}const F1=new ae(st.comparator);function Au(...s){let t=F1;for(const e of s)t=t.insert(e.key,e);return t}function H1(s){let t=F1;return s.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Li(){return ku()}function G1(){return ku()}function ku(){return new Tr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const ZC=new ae(st.comparator),JC=new Jt(st.comparator);function Nt(...s){let t=JC;for(const e of s)t=t.add(e);return t}const WC=new Jt(At);function Yp(){return WC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(t)?"-0":t}}function K1(s){return{integerValue:""+s}}function tN(s,t){return h1(t)?K1(t):Xp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function eN(s,t,e){return s instanceof $o?(function(o,u){const c={fields:{[w1]:{stringValue:A1},[x1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Fp(u)&&(u=Qf(u)),u&&(c.fields[I1]=u),{mapValue:c}})(e,t):s instanceof Zo?Y1(s,t):s instanceof Jo?X1(s,t):(function(o,u){const c=Q1(o,u),m=nE(c)+nE(o.Ae);return Jg(c)&&Jg(o.Ae)?K1(m):Xp(o.serializer,m)})(s,t)}function nN(s,t,e){return s instanceof Zo?Y1(s,t):s instanceof Jo?X1(s,t):e}function Q1(s,t){return s instanceof $u?(function(r){return Jg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class $o extends Jf{}class Zo extends Jf{constructor(t){super(),this.elements=t}}function Y1(s,t){const e=$1(t);for(const r of s.elements)e.some((o=>Hi(o,r)))||e.push(r);return{arrayValue:{values:e}}}class Jo extends Jf{constructor(t){super(),this.elements=t}}function X1(s,t){let e=$1(t);for(const r of s.elements)e=e.filter((o=>!Hi(o,r)));return{arrayValue:{values:e}}}class $u extends Jf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function nE(s){return de(s.integerValue||s.doubleValue)}function $1(s){return Xu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,e){this.field=t,this.transform=e}}function iN(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Zo&&o instanceof Zo||r instanceof Jo&&o instanceof Jo?jo(r.elements,o.elements,Hi):r instanceof $u&&o instanceof $u?Hi(r.Ae,o.Ae):r instanceof $o&&o instanceof $o})(s.transform,t.transform)}class rN{constructor(t,e){this.version=t,this.transformResults=e}}class an{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new an}static exists(t){return new an(void 0,t)}static updateTime(t){return new an(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function af(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Wf{}function J1(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new td(s.key,an.none()):new ll(s.key,s.data,an.none());{const e=s.data,r=sn.empty();let o=new Jt(me.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Er(s.key,r,new En(o.toArray()),an.none())}}function sN(s,t,e){s instanceof ll?(function(o,u,c){const m=o.value.clone(),g=rE(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,e):s instanceof Er?(function(o,u,c){if(!af(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=rE(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(W1(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function zu(s,t,e,r){return s instanceof ll?(function(u,c,m,g){if(!af(u.precondition,c))return m;const p=u.value.clone(),T=sE(u.fieldTransforms,g,c);return p.setAll(T),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,t,e,r):s instanceof Er?(function(u,c,m,g){if(!af(u.precondition,c))return m;const p=sE(u.fieldTransforms,g,c),T=c.data;return T.setAll(W1(u)),T.setAll(p),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,t,e,r):(function(u,c,m){return af(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,t,e)}function aN(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=Q1(r.transform,o||null);u!=null&&(e===null&&(e=sn.empty()),e.set(r.field,u))}return e||null}function iE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jo(r,o,((u,c)=>iN(u,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class ll extends Wf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Er extends Wf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function W1(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}})),t}function rE(s,t,e){const r=new Map;gt(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let o=0;o<e.length;o++){const u=s[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,nN(c,m,e[o]))}return r}function sE(s,t,e){const r=new Map;for(const o of s){const u=o.transform,c=e.data.field(o.field);r.set(o.field,eN(u,c,t))}return r}class td extends Wf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tS extends Wf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&sN(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=zu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=zu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=G1();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const g=J1(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(_t.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Nt())}isEqual(t){return this.batchId===t.batchId&&jo(this.mutations,t.mutations,((e,r)=>iE(e,r)))&&jo(this.baseMutations,t.baseMutations,((e,r)=>iE(e,r)))}}class Zp{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){gt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return ZC})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Zp(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,Bt;function lN(s){switch(s){case W.OK:return ct(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ct(15467,{code:s})}}function eS(s){if(s===void 0)return Se("GRPC error has no .code"),W.UNKNOWN;switch(s){case Me.OK:return W.OK;case Me.CANCELLED:return W.CANCELLED;case Me.UNKNOWN:return W.UNKNOWN;case Me.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Me.INTERNAL:return W.INTERNAL;case Me.UNAVAILABLE:return W.UNAVAILABLE;case Me.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Me.NOT_FOUND:return W.NOT_FOUND;case Me.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Me.ABORTED:return W.ABORTED;case Me.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Me.DATA_LOSS:return W.DATA_LOSS;default:return ct(39323,{code:s})}}(Bt=Me||(Me={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new ds([4294967295,4294967295],0);function aE(s){const t=uN().encode(s),e=new $b;return e.update(t),new Uint8Array(e.digest())}function oE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new ds([e,r],0),new ds([o,u],0)]}class Wp{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new wu(`Invalid padding: ${e}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new wu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=ds.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(ds.fromNumber(r)));return o.compare(cN)===1&&(o=new ds([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=aE(t),[r,o]=oE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Wp(u,o,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=aE(t),[r,o]=oE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,uc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new lc(_t.min(),o,new ae(At),Mn(),Nt())}}class uc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new uc(r,e,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class nS{constructor(t,e){this.targetId=t,this.Ce=e}}class iS{constructor(t,e,r=Ae.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class lE{constructor(){this.ve=0,this.Fe=uE(),this.Me=Ae.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Nt(),e=Nt(),r=Nt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ct(38017,{changeType:u})}})),new uc(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=uE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hN{constructor(t){this.Ge=t,this.ze=new Map,this.je=Mn(),this.Je=Fh(),this.He=Fh(),this.Ye=new ae(At)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:ct(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(Af(u))if(r===0){const c=new st(u.path);this.et(e,c,_e.newNoDocument(c,_t.min()))}else gt(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,p)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=_r(r).toUint8Array()}catch(g){if(g instanceof S1)return Bu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Wp(c,o,u)}catch(g){return Bu(g instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Af(m.target)){const g=new st(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,_e.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=Nt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new lc(t,e,this.Ye,this.je,r);return this.je=Mn(),this.Je=Fh(),this.He=Fh(),this.Ye=new ae(At),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new lE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Jt(At),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Jt(At),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new lE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Fh(){return new ae(st.comparator)}function uE(){return new ae(st.comparator)}const fN={asc:"ASCENDING",desc:"DESCENDING"},dN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mN={and:"AND",or:"OR"};class gN{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ip(s,t){return s.useProto3Json||Ff(t)?t:{value:t}}function Wo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function rS(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function pN(s,t){return Wo(s,t.toTimestamp())}function fn(s){return gt(!!s,49232),_t.fromTimestamp((function(e){const r=yr(e);return new Zt(r.seconds,r.nanos)})(s))}function ty(s,t){return rp(s,t).canonicalString()}function rp(s,t){const e=(function(o){return new Qt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?e:e.child(t)}function sS(s){const t=Qt.fromString(s);return gt(mS(t),10190,{key:t.toString()}),t}function If(s,t){return ty(s.databaseId,t.path)}function pa(s,t){const e=sS(t);if(e.get(1)!==s.databaseId.projectId)throw new ot(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new ot(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new st(lS(e))}function aS(s,t){return ty(s.databaseId,t)}function oS(s){const t=sS(s);return t.length===4?Qt.emptyPath():lS(t)}function sp(s){return new Qt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function lS(s){return gt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function cE(s,t,e){return{name:If(s,t),fields:e.value.mapValue.fields}}function yN(s,t,e){const r=pa(s,t.name),o=fn(t.updateTime),u=t.createTime?fn(t.createTime):_t.min(),c=new sn({mapValue:{fields:t.fields}}),m=_e.newFoundDocument(r,o,u,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function _N(s,t){let e;if("targetChange"in t){t.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ct(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,T){return p.useProto3Json?(gt(T===void 0||typeof T=="string",58123),Ae.fromBase64String(T||"")):(gt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ae.fromUint8Array(T||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(p){const T=p.code===void 0?W.UNKNOWN:eS(p.code);return new ot(T,p.message||"")})(c);e=new iS(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=pa(s,r.document.name),u=fn(r.document.updateTime),c=r.document.createTime?fn(r.document.createTime):_t.min(),m=new sn({mapValue:{fields:r.document.fields}}),g=_e.newFoundDocument(o,u,c,m),p=r.targetIds||[],T=r.removedTargetIds||[];e=new of(p,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=pa(s,r.document),u=r.readTime?fn(r.readTime):_t.min(),c=_e.newNoDocument(o,u),m=r.removedTargetIds||[];e=new of([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=pa(s,r.document),u=r.removedTargetIds||[];e=new of([],u,o,null)}else{if(!("filter"in t))return ct(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new oN(o,u),m=r.targetId;e=new nS(m,c)}}return e}function xf(s,t){let e;if(t instanceof ll)e={update:cE(s,t.key,t.value)};else if(t instanceof td)e={delete:If(s,t.key)};else if(t instanceof Er)e={update:cE(s,t.key,t.data),updateMask:AN(t.fieldMask)};else{if(!(t instanceof tS))return ct(16599,{Vt:t.type});e={verify:If(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof $o)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Zo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Jo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $u)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ct(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:pN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ct(27497)})(s,t.precondition)),e}function ap(s,t){const e=t.currentDocument?(function(u){return u.updateTime!==void 0?an.updateTime(fn(u.updateTime)):u.exists!==void 0?an.exists(u.exists):an.none()})(t.currentDocument):an.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)gt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new $o;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];g=new Zo(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];g=new Jo(T)}else"increment"in m?g=new $u(c,m.increment):ct(16584,{proto:m});const p=me.fromServerFormat(m.fieldPath);return new Z1(p,g)})(s,o))):[];if(t.update){t.update.name;const o=pa(s,t.update.name),u=new sn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new En(p.map((T=>me.fromServerFormat(T))))})(t.updateMask);return new Er(o,u,c,e,r)}return new ll(o,u,e,r)}if(t.delete){const o=pa(s,t.delete);return new td(o,e)}if(t.verify){const o=pa(s,t.verify);return new tS(o,e)}return ct(1463,{proto:t})}function vN(s,t){return s&&s.length>0?(gt(t!==void 0,14353),s.map((e=>(function(o,u){let c=o.updateTime?fn(o.updateTime):fn(u);return c.isEqual(_t.min())&&(c=fn(u)),new rN(c,o.transformResults||[])})(e,t)))):[]}function uS(s,t){return{documents:[aS(s,t.path)]}}function cS(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=aS(s,o);const u=(function(p){if(p.length!==0)return dS(ie.create(p,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((T=>(function(w){return{field:Co(w.field),direction:EN(w.dir)}})(T)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=ip(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:e,parent:o}}function hS(s){let t=oS(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){gt(r===1,65062);const T=e.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];e.where&&(u=(function(E){const w=fS(E);return w instanceof ie&&Qp(w)?w.getFilters():[w]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((w=>(function(X){return new Sf(No(X.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(w)))})(e.orderBy));let m=null;e.limit&&(m=(function(E){let w;return w=typeof E=="object"?E.value:E,Ff(w)?null:w})(e.limit));let g=null;e.startAt&&(g=(function(E){const w=!!E.before,z=E.values||[];return new Yo(z,w)})(e.startAt));let p=null;return e.endAt&&(p=(function(E){const w=!E.before,z=E.values||[];return new Yo(z,w)})(e.endAt)),L1(t,o,c,u,m,"F",g,p)}function TN(s,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function fS(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=No(e.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=No(e.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=No(e.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(e.unaryFilter.field);return Lt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ct(61313);default:return ct(60726)}})(s):s.fieldFilter!==void 0?(function(e){return Lt.create(No(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ct(58110);default:return ct(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return ie.create(e.compositeFilter.filters.map((r=>fS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ct(1026)}})(e.compositeFilter.op))})(s):ct(30097,{filter:s})}function EN(s){return fN[s]}function bN(s){return dN[s]}function SN(s){return mN[s]}function Co(s){return{fieldPath:s.canonicalString()}}function No(s){return me.fromServerFormat(s.fieldPath)}function dS(s){return s instanceof Lt?(function(e){if(e.op==="=="){if(YT(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NAN"}};if(QT(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(YT(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NOT_NAN"}};if(QT(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(e.field),op:bN(e.op),value:e.value}}})(s):s instanceof ie?(function(e){const r=e.getFilters().map((o=>dS(o)));return r.length===1?r[0]:{compositeFilter:{op:SN(e.op),filters:r}}})(s):ct(54877,{filter:s})}function AN(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function mS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t,e,r,o,u=_t.min(),c=_t.min(),m=Ae.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new dr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t){this.yt=t}}function wN(s,t){let e;if(t.document)e=yN(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=st.fromSegments(t.noDocument.path),o=wa(t.noDocument.readTime);e=_e.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ct(56709);{const r=st.fromSegments(t.unknownDocument.path),o=wa(t.unknownDocument.version);e=_e.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime((function(o){const u=new Zt(o[0],o[1]);return _t.fromTimestamp(u)})(t.readTime)),e}function hE(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Rf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,c){return{name:If(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Wo(u,c.version.toTimestamp()),createTime:Wo(u,c.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Aa(t.version)};else{if(!t.isUnknownDocument())return ct(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Aa(t.version)}}return r}function Rf(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function Aa(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wa(s){const t=new Zt(s.seconds,s.nanoseconds);return _t.fromTimestamp(t)}function oa(s,t){const e=(t.baseMutations||[]).map((u=>ap(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const c=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>ap(s.yt,u))),o=Zt.fromMillis(t.localWriteTimeMs);return new $p(t.batchId,o,e,r)}function Iu(s){const t=wa(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?wa(s.lastLimboFreeSnapshotVersion):_t.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return gt(c===1,1966,{count:c}),Pn($f(oS(u.documents[0])))})(s.query):(function(u){return Pn(hS(u))})(s.query),new dr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Ae.fromBase64String(s.resumeToken))}function pS(s,t){const e=Aa(t.snapshotVersion),r=Aa(t.lastLimboFreeSnapshotVersion);let o;o=Af(t.target)?uS(s.yt,t.target):cS(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sa(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function yS(s){const t=hS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?np(t,t.limit,"L"):t}function xg(s,t){return new Jp(t.largestBatchId,ap(s.yt,t.overlayMutation))}function fE(s,t){const e=t.path.lastSegment();return[s,on(t.path.popLast()),e]}function dE(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:Aa(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{getBundleMetadata(t,e){return mE(t).get(e).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:wa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,e){return mE(t).put((function(o){return{bundleId:o.id,createTime:Aa(fn(o.createTime)),version:o.version}})(e))}getNamedQuery(t,e){return gE(t).get(e).next((r=>{if(r)return(function(u){return{name:u.name,query:yS(u.bundledQuery),readTime:wa(u.readTime)}})(r)}))}saveNamedQuery(t,e){return gE(t).put((function(o){return{name:o.name,readTime:Aa(fn(o.readTime)),bundledQuery:o.bundledQuery}})(e))}}function mE(s){return Be(s,Hf)}function gE(s){return Be(s,Gf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new ed(t,r)}getOverlay(t,e){return _u(t).get(fE(this.userId,e)).next((r=>r?xg(this.serializer,r):null))}getOverlays(t,e){const r=Li();return U.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){const o=[];return r.forEach(((u,c)=>{const m=new Jp(e,c);o.push(this.St(t,m))})),U.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach((c=>o.add(on(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(_u(t).Z(Xg,m))})),U.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Li(),u=on(e),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return _u(t).J(Xg,c).next((m=>{for(const g of m){const p=xg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(t,e,r,o){const u=Li();let c;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return _u(t).ee({index:y1,range:m},((g,p,T)=>{const E=xg(this.serializer,p);u.size()<o||E.largestBatchId===c?(u.set(E.getKey(),E),c=E.largestBatchId):T.done()})).next((()=>u))}St(t,e){return _u(t).put((function(o,u,c){const[m,g,p]=fE(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:xf(o.yt,c.mutation)}})(this.serializer,this.userId,e))}}function _u(s){return Be(s,Kf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{bt(t){return Be(t,Bp)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e==null?void 0:e.value;return r?Ae.fromUint8Array(r):Ae.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(de(t.integerValue));else if("doubleValue"in t){const r=de(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Fu(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=yr(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(_r(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?C1(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Yf(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):ct(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const o of Object.keys(r))this.Ot(o,e),this.Ct(r[o],e)}kt(t,e){var c,m;const r=t.fields||{};this.Ft(e,53);const o=Ko,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(e,15),e.Mt(de(u)),this.Ot(o,e),this.Ct(r[o],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const o of r)this.Ct(o,e)}Lt(t,e){this.Ft(e,37),st.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}la.Kt=new la;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=255;function RN(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function pE(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=RN(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(t/8)}class CN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=e.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=e.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const e=this.en(t),r=pE(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}nn(t){const e=this.en(t),r=pE(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}rn(){this.sn(So),this.sn(255)}_n(){this.an(So),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===So?(this.sn(So),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===So?(this.an(So),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class NN{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class DN{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class vu{constructor(){this.cn=new CN,this.ln=new NN(this.cn),this.hn=new DN(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,e,r,o){this.Tn=t,this.In=e,this.En=r,this.dn=o}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new ua(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:lf(this.En),directionalValue:lf(this.dn),orderedDocumentKey:lf(e),documentKey:r.path.toArray()}}Vn(t,e,r){const o=this.Rn(t,e,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function ns(s,t){let e=s.Tn-t.Tn;return e!==0?e:(e=yE(s.En,t.En),e!==0?e:(e=yE(s.dn,t.dn),e!==0?e:st.comparator(s.In,t.In)))}function yE(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}function lf(s){return db()?(function(e){let r="";for(let o=0;o<e.length;o++)r+=String.fromCharCode(e[o]);return r})(s):s}function _E(s){return typeof s!="string"?s:(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(s)}class vE{constructor(t){this.mn=new Jt(((e,r)=>me.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(gt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Kg(t);if(e!==void 0&&!this.wn(e))return!1;const r=ra(t);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new Jt(me.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new Wh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new Wh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new Wh(r.field,r.dir==="asc"?0:1)));return new _f(_f.UNKNOWN_ID,this.collectionId,e,qu.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(s){var e,r;if(gt(s instanceof Lt||s instanceof ie,20012),s instanceof Lt){if(s instanceof U1){const o=((r=(e=s.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map((u=>Lt.create(s.field,"==",u))))||[];return ie.create(o,"or")}return s}const t=s.filters.map((o=>_S(o)));return ie.create(t,s.op)}function VN(s){if(s.getFilters().length===0)return[];const t=up(_S(s));return gt(vS(t),7391),op(t)||lp(t)?[t]:t.getFilters()}function op(s){return s instanceof Lt}function lp(s){return s instanceof ie&&Qp(s)}function vS(s){return op(s)||lp(s)||(function(e){if(e instanceof ie&&Wg(e)){for(const r of e.getFilters())if(!op(r)&&!lp(r))return!1;return!0}return!1})(s)}function up(s){if(gt(s instanceof Lt||s instanceof ie,34018),s instanceof Lt)return s;if(s.filters.length===1)return up(s.filters[0]);const t=s.filters.map((r=>up(r)));let e=ie.create(t,s.op);return e=Cf(e),vS(e)?e:(gt(e instanceof ie,64498),gt(Xo(e),40251),gt(e.filters.length>1,57927),e.filters.reduce(((r,o)=>ey(r,o))))}function ey(s,t){let e;return gt(s instanceof Lt||s instanceof ie,38388),gt(t instanceof Lt||t instanceof ie,25473),e=s instanceof Lt?t instanceof Lt?(function(o,u){return ie.create([o,u],"and")})(s,t):TE(s,t):t instanceof Lt?TE(t,s):(function(o,u){if(gt(o.filters.length>0&&u.filters.length>0,48005),Xo(o)&&Xo(u))return P1(o,u.getFilters());const c=Wg(o)?o:u,m=Wg(o)?u:o,g=c.filters.map((p=>ey(p,m)));return ie.create(g,"or")})(s,t),Cf(e)}function TE(s,t){if(Xo(t))return P1(t,s.getFilters());{const e=t.filters.map((r=>ey(s,r)));return ie.create(e,"or")}}function Cf(s){if(gt(s instanceof Lt||s instanceof ie,11850),s instanceof Lt)return s;const t=s.getFilters();if(t.length===1)return Cf(t[0]);if(O1(s))return s;const e=t.map((o=>Cf(o))),r=[];return e.forEach((o=>{o instanceof Lt?r.push(o):o instanceof ie&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:ie.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.Cn=new ny}addToCollectionParentIndex(t,e){return this.Cn.add(e),U.resolve()}getCollectionParents(t,e){return U.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return U.resolve()}deleteFieldIndex(t,e){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,e){return U.resolve()}getDocumentsMatchingTarget(t,e){return U.resolve(null)}getIndexType(t,e){return U.resolve(0)}getFieldIndexes(t,e){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,e){return U.resolve(kn.min())}getMinOffsetFromCollectionGroup(t,e){return U.resolve(kn.min())}updateCollectionGroup(t,e,r){return U.resolve()}updateIndexEntries(t,e){return U.resolve()}}class ny{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Jt(Qt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Jt(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="IndexedDbIndexManager",Hh=new Uint8Array(0);class MN{constructor(t,e){this.databaseId=e,this.vn=new ny,this.Fn=new Tr((r=>Sa(r)),((r,o)=>ac(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const u={collectionId:r,parent:on(o)};return bE(t).put(u)}return U.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[i1(e),""],!1,!0);return bE(t).J(o).next((u=>{for(const c of u){if(c.collectionId!==e)break;r.push(Ui(c.parent))}return r}))}addFieldIndex(t,e){const r=Tu(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(e);delete o.indexId;const u=r.add(o);if(e.indexState){const c=wo(t);return u.next((m=>{c.put(dE(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return u.next()}deleteFieldIndex(t,e){const r=Tu(t),o=wo(t),u=Ao(t);return r.delete(e.indexId).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Tu(t),r=Ao(t),o=wo(t);return e.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,e){return U.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new vE(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,e){const r=Ao(t);let o=!0;const u=new Map;return U.forEach(this.Mn(e),(c=>this.xn(t,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Nt();const m=[];return U.forEach(u,((g,p)=>{tt(EE,`Using index ${(function(at){return`id=${at.indexId}|cg=${at.collectionGroup}|f=${at.fields.map((vt=>`${vt.fieldPath}:${vt.kind}`)).join(",")}`})(g)} to execute ${Sa(e)}`);const T=(function(at,vt){const Et=Kg(vt);if(Et===void 0)return null;for(const et of wf(at,Et.fieldPath))switch(et.op){case"array-contains-any":return et.value.arrayValue.values||[];case"array-contains":return[et.value]}return null})(p,g),E=(function(at,vt){const Et=new Map;for(const et of ra(vt))for(const I of wf(at,et.fieldPath))switch(I.op){case"==":case"in":Et.set(et.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Et.set(et.fieldPath.canonicalString(),I.value),Array.from(Et.values())}return null})(p,g),w=(function(at,vt){const Et=[];let et=!0;for(const I of ra(vt)){const A=I.kind===0?WT(at,I.fieldPath,at.startAt):tE(at,I.fieldPath,at.startAt);Et.push(A.value),et&&(et=A.inclusive)}return new Yo(Et,et)})(p,g),z=(function(at,vt){const Et=[];let et=!0;for(const I of ra(vt)){const A=I.kind===0?tE(at,I.fieldPath,at.endAt):WT(at,I.fieldPath,at.endAt);Et.push(A.value),et&&(et=A.inclusive)}return new Yo(Et,et)})(p,g),X=this.On(g,p,w),G=this.On(g,p,z),Y=this.Nn(g,p,E),lt=this.Bn(g.indexId,T,X,w.inclusive,G,z.inclusive,Y);return U.forEach(lt,(ft=>r.Y(ft,e.limit).next((at=>{at.forEach((vt=>{const Et=st.fromSegments(vt.documentKey);c.has(Et)||(c=c.add(Et),m.push(Et))}))}))))})).next((()=>m))}return U.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=VN(ie.create(t.filters,"and")).map((r=>ep(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,o,u,c,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),p=g/(e!=null?e.length:1),T=[];for(let E=0;E<g;++E){const w=e?this.Ln(e[E/p]):Hh,z=this.kn(t,w,r[E%p],o),X=this.qn(t,w,u[E%p],c),G=m.map((Y=>this.kn(t,w,Y,!0)));T.push(...this.createRange(z,X,G))}return T}kn(t,e,r,o){const u=new ua(t,st.empty(),e,r);return o?u:u.An()}qn(t,e,r,o){const u=new ua(t,st.empty(),e,r);return o?u.An():u}xn(t,e){const r=new vE(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let r=2;const o=this.Mn(e);return U.forEach(o,(u=>this.xn(t,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new Jt(me.comparator),T=!1;for(const E of g.filters)for(const w of E.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?T=!0:p=p.add(w.field));for(const E of g.orderBy)E.field.isKeyField()||(p=p.add(E.field));return p.size+(T?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(e)&&o.length>1&&r===2?1:r))}Qn(t,e){const r=new vu;for(const o of ra(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);la.Kt.Dt(u,c)}return r.un()}Ln(t){const e=new vu;return la.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new vu;return la.Kt.Dt(Kp(this.databaseId,e),r.Pn((function(u){const c=ra(u);return c.length===0?0:c[c.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let o=[];o.push(new vu);let u=0;for(const c of ra(t)){const m=r[u++];for(const g of o)if(this.Un(e,c.fieldPath)&&Xu(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);la.Kt.Dt(m,p)}}return this.Wn(o)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const o=[...t],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new vu;g.seed(m.un()),la.Kt.Dt(c,g.Pn(e.kind)),u.push(g)}return u}Un(t,e){return!!t.filters.find((r=>r instanceof Lt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=Tu(t),o=wo(t);return(e?r.J(Yg,IDBKeyRange.bound(e,e)):r.J()).next((u=>{const c=[];return U.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(T,E){const w=E?new qu(E.sequenceNumber,new kn(wa(E.readTime),new st(Ui(E.documentKey)),E.largestBatchId)):qu.empty(),z=T.fields.map((([X,G])=>new Wh(me.fromServerFormat(X),G)));return new _f(T.indexId,T.collectionGroup,z,w)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:At(r.collectionGroup,o.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const o=Tu(t),u=wo(t);return this.Gn(t).next((c=>o.J(Yg,IDBKeyRange.bound(e,e)).next((m=>U.forEach(m,(g=>u.put(dE(g.indexId,this.uid,c,r))))))))}updateIndexEntries(t,e){const r=new Map;return U.forEach(e,((o,u)=>{const c=r.get(o.collectionGroup);return(c?U.resolve(c):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),U.forEach(m,(g=>this.zn(t,o,g).next((p=>{const T=this.jn(u,g);return p.isEqual(T)?U.resolve():this.Jn(t,u,g,p,T)})))))))}))}Hn(t,e,r,o){return Ao(t).put(o.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,o){return Ao(t).delete(o.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const o=Ao(t);let u=new Jt(ns);return o.ee({index:p1,range:IDBKeyRange.only([r.indexId,this.uid,lf(this.$n(r,e))])},((c,m)=>{u=u.add(new ua(r.indexId,e,_E(m.arrayValue),_E(m.directionalValue)))})).next((()=>u))}jn(t,e){let r=new Jt(ns);const o=this.Qn(e,t);if(o==null)return r;const u=Kg(e);if(u!=null){const c=t.data.field(u.fieldPath);if(Xu(c))for(const m of c.arrayValue.values||[])r=r.add(new ua(e.indexId,t.key,this.Ln(m),o))}else r=r.add(new ua(e.indexId,t.key,Hh,o));return r}Jn(t,e,r,o,u){tt(EE,"Updating index entries for document '%s'",e.key);const c=[];return(function(g,p,T,E,w){const z=g.getIterator(),X=p.getIterator();let G=bo(z),Y=bo(X);for(;G||Y;){let lt=!1,ft=!1;if(G&&Y){const at=T(G,Y);at<0?ft=!0:at>0&&(lt=!0)}else G!=null?ft=!0:lt=!0;lt?(E(Y),Y=bo(X)):ft?(w(G),G=bo(z)):(G=bo(z),Y=bo(X))}})(o,u,ns,(m=>{c.push(this.Hn(t,e,r,m))}),(m=>{c.push(this.Yn(t,e,r,m))})),U.waitFor(c)}Gn(t){let e=1;return wo(t).ee({index:g1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),e=o.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((c,m)=>ns(c,m))).filter(((c,m,g)=>!m||ns(c,g[m-1])!==0));const o=[];o.push(t);for(const c of r){const m=ns(c,t),g=ns(c,e);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(e);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Hh,st.empty()),g=o[c+1].Vn(this.uid,Hh,st.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,e){return ns(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(SE)}getMinOffset(t,e){return U.mapArray(this.Mn(e),(r=>this.xn(t,r).next((o=>o||ct(44426))))).next(SE)}}function bE(s){return Be(s,Ku)}function Ao(s){return Be(s,Ou)}function Tu(s){return Be(s,jp)}function wo(s){return Be(s,Vu)}function SE(s){gt(s.length!==0,28825);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;zp(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new kn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TS=41943040;class rn{static withCacheSize(t){return new rn(t,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(s,t,e){const r=s.store(ci),o=s.store(qo),u=[],c=IDBKeyRange.only(e.batchId);let m=0;const g=r.ee({range:c},((T,E,w)=>(m++,w.delete())));u.push(g.next((()=>{gt(m===1,47070,{batchId:e.batchId})})));const p=[];for(const T of e.mutations){const E=f1(t,T.key.path,e.batchId);u.push(o.delete(E)),p.push(T.key)}return U.waitFor(u).next((()=>p))}function Nf(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ct(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(TS,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class nd{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,e,r,o){gt(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new nd(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return is(t).ee({index:ha,range:r},((o,u,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,r,o){const u=Do(t),c=is(t);return c.add({}).next((m=>{gt(typeof m=="number",49019);const g=new $p(m,e,r,o),p=(function(z,X,G){const Y=G.baseMutations.map((ft=>xf(z.yt,ft))),lt=G.mutations.map((ft=>xf(z.yt,ft)));return{userId:X,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:Y,mutations:lt}})(this.serializer,this.userId,g),T=[];let E=new Jt(((w,z)=>At(w.canonicalString(),z.canonicalString())));for(const w of o){const z=f1(this.userId,w.key.path,m);E=E.add(w.key.path.popLast()),T.push(c.put(p)),T.push(u.put(z,hC))}return E.forEach((w=>{T.push(this.indexManager.addToCollectionParentIndex(t,w))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),U.waitFor(T).next((()=>g))}))}lookupMutationBatch(t,e){return is(t).get(e).next((r=>r?(gt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),oa(this.serializer,r)):null))}er(t,e){return this.Xn[e]?U.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const o=r.keys();return this.Xn[e]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return is(t).ee({index:ha,range:o},((c,m,g)=>{m.userId===this.userId&&(gt(m.batchId>=r,47524,{tr:r}),u=oa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ma;return is(t).ee({index:ha,range:e,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,ma],[this.userId,Number.POSITIVE_INFINITY]);return is(t).J(ha,e).next((r=>r.map((o=>oa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=tf(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Do(t).ee({range:o},((c,m,g)=>{const[p,T,E]=c,w=Ui(T);if(p===this.userId&&e.path.isEqual(w))return is(t).get(E).next((z=>{if(!z)throw ct(61480,{nr:c,batchId:E});gt(z.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:z.userId,batchId:E}),u.push(oa(this.serializer,z))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Jt(At);const o=[];return e.forEach((u=>{const c=tf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Do(t).ee({range:m},((p,T,E)=>{const[w,z,X]=p,G=Ui(z);w===this.userId&&u.path.isEqual(G)?r=r.add(X):E.done()}));o.push(g)})),U.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=tf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Jt(At);return Do(t).ee({range:c},((g,p,T)=>{const[E,w,z]=g,X=Ui(w);E===this.userId&&r.isPrefixOf(X)?X.length===o&&(m=m.add(z)):T.done()})).next((()=>this.rr(t,m)))}rr(t,e){const r=[],o=[];return e.forEach((u=>{o.push(is(t).get(u).next((c=>{if(c===null)throw ct(35274,{batchId:u});gt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(oa(this.serializer,c))})))})),U.waitFor(o).next((()=>r))}removeMutationBatch(t,e){return ES(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),U.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return U.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Do(t).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Ui(u[1]);o.push(g)}else m.done()})).next((()=>{gt(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,e){return bS(t,this.userId,e)}_r(t){return SS(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:ma,lastStreamToken:""}))}}function bS(s,t,e){const r=tf(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Do(s).ee({range:u,X:!0},((m,g,p)=>{const[T,E,w]=m;T===t&&E===o&&(c=!0),p.done()})).next((()=>c))}function is(s){return Be(s,ci)}function Do(s){return Be(s,qo)}function SS(s){return Be(s,Hu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ia(0)}static cr(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new Ia(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>_t.fromTimestamp(new Zt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.hr(t,o))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Io(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(gt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let o=0;const u=[];return Io(t).ee(((c,m)=>{const g=Iu(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>U.waitFor(u))).next((()=>o))}forEachTarget(t,e){return Io(t).ee(((r,o)=>{const u=Iu(o);e(u)}))}lr(t){return wE(t).get(Ef).next((e=>(gt(e!==null,2888),e)))}hr(t,e){return wE(t).put(Ef,e)}Pr(t,e){return Io(t).put(pS(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=Sa(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Io(t).ee({range:o,index:m1},((c,m,g)=>{const p=Iu(m);ac(e,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(t,e,r){const o=[],u=ls(t);return e.forEach((c=>{const m=on(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,c))})),U.waitFor(o)}removeMatchingKeys(t,e,r){const o=ls(t);return U.forEach(e,(u=>{const c=on(u.path);return U.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,e){const r=ls(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=ls(t);let u=Nt();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Ui(c[1]),T=new st(p);u=u.add(T)})).next((()=>u))}containsKey(t,e){const r=on(e.path),o=IDBKeyRange.bound([r],[i1(r)],!1,!0);let u=0;return ls(t).ee({index:Lp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(t,e){return Io(t).get(e).next((r=>r?Iu(r):null))}}function Io(s){return Be(s,Fo)}function wE(s){return Be(s,ga)}function ls(s){return Be(s,Ho)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="LruGarbageCollector",AS=1048576;function xE([s,t],[e,r]){const o=At(s,e);return o===0?At(t,r):o}class kN{constructor(t){this.Ir=t,this.buffer=new Jt(xE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();xE(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class wS{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(IE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){bs(e)?tt(IE,"Ignoring IndexedDB error during garbage collection: ",e):await Es(e)}await this.Vr(3e5)}))}}class zN{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return U.resolve(Tn.ce);const r=new kN(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(AE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,m,g,p;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(t,o)))).next((E=>(r=E,m=Date.now(),this.removeTargets(t,r,e)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((E=>(p=Date.now(),xo()<=kt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-T}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function IS(s,t){return new zN(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(t,e){this.db=t,this.garbageCollector=IS(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,o)=>e(o)))}addReference(t,e,r){return Gh(t,r)}removeReference(t,e,r){return Gh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Gh(t,e)}br(t,e){return(function(o,u){let c=!1;return SS(o).te((m=>bS(o,m,u).next((g=>(g&&(c=!0),U.resolve(!g)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((c,m)=>{if(m<=e){const g=this.br(t,c).next((p=>{if(!p)return u++,r.getEntry(t,c).next((()=>(r.removeEntry(c,_t.min()),ls(t).delete((function(E){return[0,on(E.path)]})(c)))))}));o.push(g)}})).next((()=>U.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Gh(t,e)}Sr(t,e){const r=ls(t);let o,u=Tn.ce;return r.ee({index:Lp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==Tn.ce&&e(new st(Ui(o)),u),u=p,o=g):u=Tn.ce})).next((()=>{u!==Tn.ce&&e(new st(Ui(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Gh(s,t){return ls(s).put((function(r,o){return{targetId:0,path:on(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.changes=new Tr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,_e.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?U.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return na(t).put(r)}removeEntry(t,e,r){return na(t).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Rf(c),m[m.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=_e.newInvalidDocument(e);return na(t).ee({index:ef,range:IDBKeyRange.only(Eu(e))},((o,u)=>{r=this.Cr(e,u)})).next((()=>r))}vr(t,e){let r={size:0,document:_e.newInvalidDocument(e)};return na(t).ee({index:ef,range:IDBKeyRange.only(Eu(e))},((o,u)=>{r={document:this.Cr(e,u),size:Nf(u)}})).next((()=>r))}getEntries(t,e){let r=Mn();return this.Fr(t,e,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(t,e){let r=Mn(),o=new ae(st.comparator);return this.Fr(t,e,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Nf(c))})).next((()=>({documents:r,Or:o})))}Fr(t,e,r){if(e.isEmpty())return U.resolve();let o=new Jt(NE);e.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Eu(o.first()),Eu(o.last())),c=o.getIterator();let m=c.getNext();return na(t).ee({index:ef,range:u},((g,p,T)=>{const E=st.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&NE(m,E)<0;)r(m,null),m=c.getNext();m&&m.isEqual(E)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?T.j(Eu(m)):T.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,r,o,u){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),Rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return na(t).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let T=Mn();for(const E of p){const w=this.Cr(st.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);w.isFoundDocument()&&(oc(e,w)||o.has(w.key))&&(T=T.insert(w.key,w))}return T}))}getAllFromCollectionGroup(t,e,r,o){let u=Mn();const c=CE(e,r),m=CE(e,kn.max());return na(t).ee({index:d1,range:IDBKeyRange.bound(c,m,!0)},((g,p,T)=>{const E=this.Cr(st.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(E.key,E),u.size===o&&T.done()})).next((()=>u))}newChangeBuffer(t){return new jN(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return RE(t).get(Qg).next((e=>(gt(!!e,20021),e)))}Dr(t,e){return RE(t).put(Qg,e)}Cr(t,e){if(e){const r=wN(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(_t.min())))return r}return _e.newInvalidDocument(t)}}function RS(s){return new LN(s)}class jN extends xS{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new Tr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const e=[];let r=0,o=new Jt(((u,c)=>At(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(e.push(this.Nr.removeEntry(t,u,m.readTime)),c.isValidDocument()){const g=hE(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Nf(g);r+=p-m.size,e.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=hE(this.Nr.serializer,c.convertToNoDocument(_t.min()));e.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),e.push(this.Nr.updateMetadata(t,r)),U.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function RE(s){return Be(s,Gu)}function na(s){return Be(s,Tf)}function Eu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function CE(s,t){const e=t.documentKey.path.toArray();return[s,Rf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function NE(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=At(e[u],r[u]),o)return o;return o=At(e.length,r.length),o||(o=At(e[e.length-2],r[r.length-2]),o||At(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&zu(r.mutation,o,En.empty(),Zt.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Nt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Nt()){const o=Li();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=Au();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Li();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Nt())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,o){let u=Mn();const c=ku(),m=(function(){return ku()})();return e.forEach(((g,p)=>{const T=r.get(p.key);o.has(p.key)&&(T===void 0||T.mutation instanceof Er)?u=u.insert(p.key,p):T!==void 0?(c.set(p.key,T.mutation.getFieldMask()),zu(T.mutation,p,T.mutation.getFieldMask(),Zt.now())):c.set(p.key,En.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,T)=>c.set(p,T))),e.forEach(((p,T)=>m.set(p,new BN(T,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=ku();let o=new ae(((c,m)=>c-m)),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=e.get(g);if(p===null)return;let T=r.get(g)||En.empty();T=m.applyToLocalView(p,T),r.set(g,T);const E=(o.get(m.batchId)||Nt()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,T=g.value,E=G1();T.forEach((w=>{if(!u.has(w)){const z=J1(e.get(w),r.get(w));z!==null&&E.set(w,z),u=u.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,E))}return U.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return st.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):QC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):U.resolve(Li());let m=Bo,g=u;return c.next((p=>U.forEach(p,((T,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(T)?U.resolve():this.remoteDocumentCache.getEntry(t,T).next((w=>{g=g.insert(T,w)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Nt()))).next((T=>({batchId:m,changes:H1(T)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new st(e)).next((r=>{let o=Au();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=Au();return this.indexManager.getCollectionParents(t,u).next((m=>U.forEach(m,(g=>{const p=(function(E,w){return new Xf(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,r,o).next((T=>{T.forEach(((E,w)=>{c=c.insert(E,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const T=p.getKey();c.get(T)===null&&(c=c.insert(T,_e.newInvalidDocument(T)))}));let m=Au();return c.forEach(((g,p)=>{const T=u.get(g);T!==void 0&&zu(T.mutation,p,En.empty(),Zt.now()),oc(e,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return U.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:fn(o.createTime)}})(e)),U.resolve()}getNamedQuery(t,e){return U.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:yS(o.bundledQuery),readTime:fn(o.readTime)}})(e)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.overlays=new ae(st.comparator),this.qr=new Map}getOverlay(t,e){return U.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Li();return U.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),U.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(t,e,r){const o=Li(),u=e.length+1,c=new st(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return U.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new ae(((p,T)=>p-T));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let T=u.get(p.largestBatchId);T===null&&(T=Li(),u=u.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const m=Li(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,T)=>m.set(p,T))),!(m.size()>=o)););return U.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Jp(e,r));let u=this.qr.get(e);u===void 0&&(u=Nt(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.Qr=new Jt(Ge.$r),this.Ur=new Jt(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new Ge(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new Ge(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new st(new Qt([])),r=new Ge(e,t),o=new Ge(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new st(new Qt([])),r=new Ge(e,t),o=new Ge(e,t+1);let u=Nt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new Ge(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return st.comparator(t.key,e.key)||At(t.Yr,e.Yr)}static Kr(t,e){return At(t.Yr,e.Yr)||st.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(Ge.$r)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new $p(u,e,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Ge(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return U.resolve(c)}lookupMutationBatch(t,e){return U.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return U.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ma:this.tr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Ge(e,0),o=new Ge(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),U.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Jt(At);return e.forEach((o=>{const u=new Ge(o,0),c=new Ge(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;st.isDocumentKey(u)||(u=u.child(""));const c=new Ge(new st(u),0);let m=new Jt(At);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),U.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){gt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(e.mutations,(o=>{const u=new Ge(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new Ge(e,0),o=this.Zr.firstAfterOrEqual(r);return U.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(t){this.ri=t,this.docs=(function(){return new ae(st.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return U.resolve(r?r.document.mutableCopy():_e.newInvalidDocument(e))}getEntries(t,e){let r=Mn();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():_e.newInvalidDocument(o))})),U.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=Mn();const c=e.path,m=new st(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:T}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||zp(o1(T),r)<=0||(o.has(T.key)||oc(e,T))&&(u=u.insert(T.key,T.mutableCopy()))}return U.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ct(9500)}ii(t,e){return U.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new QN(this)}getSize(t){return U.resolve(this.size)}}class QN extends xS{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),U.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t){this.persistence=t,this.si=new Tr((e=>Sa(e)),ac),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.oi=0,this._i=new iy,this.targetCount=0,this.ai=Ia.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),U.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ia(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,U.resolve()}updateTargetData(t,e){return this.Pr(e),U.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),U.waitFor(u).next((()=>o))}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return U.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),U.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),U.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),U.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return U.resolve(r)}containsKey(t,e){return U.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t,e){this.ui={},this.overlays={},this.ci=new Tn(0),this.li=!1,this.li=!0,this.hi=new HN,this.referenceDelegate=t(this),this.Pi=new YN(this),this.indexManager=new ON,this.remoteDocumentCache=(function(o){return new KN(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new gS(e),this.Ii=new qN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new FN,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new GN(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new XN(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class XN extends u1{constructor(t){super(),this.currentSequenceNumber=t}}class id{constructor(t){this.persistence=t,this.Ri=new iy,this.Vi=null}static mi(t){return new id(t)}get fi(){if(this.Vi)return this.Vi;throw ct(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),U.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),U.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const o=st.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,_t.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return U.or([()=>U.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Df{constructor(t,e){this.persistence=t,this.pi=new Tr((r=>on(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=IS(this,e)}static mi(t,e){return new Df(t,e)}Ei(){}di(t){return U.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return U.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?U.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,_t.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),U.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),U.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),U.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=rf(t.data.value)),e}br(t,e,r){return U.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return U.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(t){this.serializer=t}k(t,e,r,o){const u=new qf("createOrUpgrade",e);r<1&&o>=1&&((function(g){g.createObjectStore(sc)})(t),(function(g){g.createObjectStore(Hu,{keyPath:cC}),g.createObjectStore(ci,{keyPath:BT,autoIncrement:!0}).createIndex(ha,qT,{unique:!0}),g.createObjectStore(qo)})(t),DE(t),(function(g){g.createObjectStore(sa)})(t));let c=U.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Ho),g.deleteObjectStore(Fo),g.deleteObjectStore(ga)})(t),DE(t)),c=c.next((()=>(function(g){const p=g.store(ga),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return p.put(Ef,T)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(ci).J().next((E=>{g.deleteObjectStore(ci),g.createObjectStore(ci,{keyPath:BT,autoIncrement:!0}).createIndex(ha,qT,{unique:!0});const w=p.store(ci),z=E.map((X=>w.put(X)));return U.waitFor(z)}))})(t,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Go,{keyPath:vC})})(t)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Gu)})(t),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(t,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Hf,{keyPath:TC})})(t),(function(g){g.createObjectStore(Gf,{keyPath:EC})})(t)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Kf,{keyPath:RC});p.createIndex(Xg,CC,{unique:!1}),p.createIndex(y1,NC,{unique:!1})})(t)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Tf,{keyPath:fC});p.createIndex(ef,dC),p.createIndex(d1,mC)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(sa)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(jp,{keyPath:bC,autoIncrement:!0}).createIndex(Yg,SC,{unique:!1}),g.createObjectStore(Vu,{keyPath:AC}).createIndex(g1,wC,{unique:!1}),g.createObjectStore(Ou,{keyPath:IC}).createIndex(p1,xC,{unique:!1})})(t)))),r<16&&o>=16&&(c=c.next((()=>{e.objectStore(Vu).clear()})).next((()=>{e.objectStore(Ou).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Bp,{keyPath:DC})})(t)}))),r<18&&o>=18&&db()&&(c=c.next((()=>{e.objectStore(Vu).clear()})).next((()=>{e.objectStore(Ou).clear()}))),c}wi(t){let e=0;return t.store(sa).ee(((r,o)=>{e+=Nf(o)})).next((()=>{const r={byteSize:e};return t.store(Gu).put(Qg,r)}))}yi(t){const e=t.store(Hu),r=t.store(ci);return e.J().next((o=>U.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ma],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ha,c).next((m=>U.forEach(m,(g=>{gt(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=oa(this.serializer,g);return ES(t,u.userId,p).next((()=>{}))}))))}))))}Si(t){const e=t.store(Ho),r=t.store(sa);return t.store(ga).get(Ef).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Qt(c),p=(function(E){return[0,on(E)]})(g);u.push(e.get(p).next((T=>T?U.resolve():(E=>e.put({targetId:0,path:on(E),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>U.waitFor(u)))}))}bi(t,e){t.createObjectStore(Ku,{keyPath:_C});const r=e.store(Ku),o=new ny,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:on(g)})}};return e.store(sa).ee({X:!0},((c,m)=>{const g=new Qt(c);return u(g.popLast())})).next((()=>e.store(qo).ee({X:!0},(([c,m,g],p)=>{const T=Ui(m);return u(T.popLast())}))))}Di(t){const e=t.store(Fo);return e.ee(((r,o)=>{const u=Iu(o),c=pS(this.serializer,u);return e.put(c)}))}Ci(t,e){const r=e.store(sa),o=[];return r.ee(((u,c)=>{const m=e.store(Tf),g=(function(E){return E.document?new st(Qt.fromString(E.document.name).popFirst(5)):E.noDocument?st.fromSegments(E.noDocument.path):E.unknownDocument?st.fromSegments(E.unknownDocument.path):ct(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>U.waitFor(o)))}Fi(t,e){const r=e.store(ci),o=RS(this.serializer),u=new ry(id.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Nt();oa(this.serializer,g).keys().forEach((T=>p=p.add(T))),m.set(g.userId,p)})),U.forEach(m,((g,p)=>{const T=new nn(p),E=ed.wt(this.serializer,T),w=u.getIndexManager(T),z=nd.wt(T,this.serializer,w,u.referenceDelegate);return new CS(o,z,E,w).recalculateAndSaveOverlaysForDocumentKeys(new $g(e,Tn.ce),g).next()}))}))}}function DE(s){s.createObjectStore(Ho,{keyPath:pC}).createIndex(Lp,yC,{unique:!0}),s.createObjectStore(Fo,{keyPath:"targetId"}).createIndex(m1,gC,{unique:!0}),s.createObjectStore(ga)}const rs="IndexedDbPersistence",Rg=18e5,Cg=5e3,Ng="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ZN="main";class sy{constructor(t,e,r,o,u,c,m,g,p,T,E=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=T,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!sy.v())throw new ot(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UN(this,o),this.$i=e+ZN,this.serializer=new gS(g),this.Ui=new gs(this.$i,this.Ni,new $N(this.serializer)),this.hi=new xN,this.Pi=new PN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RS(this.serializer),this.Ii=new IN,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,T===!1&&Se(rs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ot(W.FAILED_PRECONDITION,Ng);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new Tn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Kh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(bs(t))return tt(rs,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(rs,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return bu(t).get(Eo).next((e=>U.resolve(this.es(e))))}ts(t){return Kh(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Rg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=Be(e,Go);return r.J().next((o=>{const u=this.ss(o,Rg),c=o.filter((m=>u.indexOf(m)===-1));return U.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?U.resolve(!0):bu(t).get(Eo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Cg)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new ot(W.FAILED_PRECONDITION,Ng);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kh(t).J().next((r=>this.ss(r,Cg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&tt(rs,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[sc,Go],(t=>{const e=new $g(t,Tn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Kh(t).J().next((e=>this.ss(e,Rg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return nd.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new MN(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return ed.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt(rs,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?MC:g===17?E1:g===16?OC:g===15?qp:g===14?T1:g===13?v1:g===12?VC:g===11?_1:void ct(60245)})(this.Ni);let c;return this.Ui.runTransaction(t,o,u,(m=>(c=new $g(m,this.ci?this.ci.next():Tn.ce),e==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Se(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ot(W.FAILED_PRECONDITION,l1);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(t){return bu(t).get(Eo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Cg)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ot(W.FAILED_PRECONDITION,Ng)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bu(t).put(Eo,e)}static v(){return gs.v()}Zi(t){const e=bu(t);return e.get(Eo).next((r=>this.es(r)?(tt(rs,"Releasing primary lease."),e.delete(Eo)):U.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Se(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;fb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return tt(rs,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Se(rs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Se("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function bu(s){return Be(s,sc)}function Kh(s){return Be(s,Go)}function NS(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=Nt(),o=Nt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ay(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fb()?8:c1(je())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new JN;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(xo()<=kt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Ro(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(xo()<=kt.DEBUG&&tt("QueryEngine","Query:",Ro(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(xo()<=kt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Ro(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pn(e))):U.resolve())}ys(t,e){if(eE(e))return U.resolve(null);let r=Pn(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=np(e,null,"F"),r=Pn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Nt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const p=this.Ds(e,m);return this.Cs(e,p,c,g.readTime)?this.ys(t,np(e,null,"F")):this.vs(t,p,e,g)}))))})))))}ws(t,e,r,o){return eE(e)||o.isEqual(_t.min())?U.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?U.resolve(null):(xo()<=kt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(e)),this.vs(t,c,e,a1(o,Bo)).next((m=>m)))}))}Ds(t,e){let r=new Jt(q1(t));return e.forEach(((o,u)=>{oc(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return xo()<=kt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Ro(e)),this.ps.getDocumentsMatchingQuery(t,e,kn.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LocalStore",WN=3e8;class tD{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new ae(At),this.xs=new Tr((u=>Sa(u)),ac),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new CS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function VS(s,t,e,r){return new tD(s,t,e,r)}async function OS(s,t){const e=dt(s);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Nt();for(const p of o){c.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}for(const p of u){m.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}return e.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function eD(s,t){const e=dt(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,T){const E=p.batch,w=E.keys();let z=U.resolve();return w.forEach((X=>{z=z.next((()=>T.getEntry(g,X))).next((G=>{const Y=p.docVersions.get(X);gt(Y!==null,48541),G.version.compareTo(Y)<0&&(E.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),T.addEntry(G)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Nt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function MS(s){const t=dt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function nD(s,t){const e=dt(s),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((T,E)=>{const w=o.get(E);if(!w)return;m.push(e.Pi.removeMatchingKeys(u,T.removedDocuments,E).next((()=>e.Pi.addMatchingKeys(u,T.addedDocuments,E))));let z=w.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(E)!==null?z=z.withResumeToken(Ae.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,r)),o=o.insert(E,z),(function(G,Y,lt){return G.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=WN?!0:lt.addedDocuments.size+lt.modifiedDocuments.size+lt.removedDocuments.size>0})(w,z,T)&&m.push(e.Pi.updateTargetData(u,z))}));let g=Mn(),p=Nt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(iD(u,c,t.documentUpdates).next((T=>{g=T.ks,p=T.qs}))),!r.isEqual(_t.min())){const T=e.Pi.getLastRemoteSnapshotVersion(u).next((E=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return U.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(e.Ms=o,u)))}function iD(s,t,e){let r=Nt(),o=Nt();return e.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let c=Mn();return e.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(_t.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):tt(oy,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function rD(s,t){const e=dt(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=ma),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Vf(s,t){const e=dt(s);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,U.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new dr(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function tl(s,t,e){const r=dt(s),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!bs(c))throw c;tt(oy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function cp(s,t,e){const r=dt(s);let o=_t.min(),u=Nt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,T){const E=dt(g),w=E.xs.get(T);return w!==void 0?U.resolve(E.Ms.get(w)):E.Pi.getTargetData(p,T)})(r,c,Pn(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:_t.min(),e?u:Nt()))).next((m=>(zS(r,B1(t),m),{documents:m,Qs:u})))))}function PS(s,t){const e=dt(s),r=dt(e.Pi),o=e.Ms.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,t).next((c=>c?c.target:null))))}function kS(s,t){const e=dt(s),r=e.Os.get(t)||_t.min();return e.persistence.runTransaction("Get new document changes","readonly",(o=>e.Ns.getAllFromCollectionGroup(o,t,a1(r,Bo),Number.MAX_SAFE_INTEGER))).then((o=>(zS(e,t,o),o)))}function zS(s,t,e){let r=s.Os.get(t)||_t.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firestore_clients";function VE(s,t){return`${US}_${s}_${t}`}const LS="firestore_mutations";function OE(s,t,e){let r=`${LS}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const jS="firestore_targets";function Dg(s,t){return`${jS}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="SharedClientState";class Of{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static Ws(t,e,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new ot(o.error.code,o.error.message))),c?new Of(t,e,o.state,u):(Se(zi,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Uu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new ot(r.error.code,r.error.message))),u?new Uu(t,r.state,o):(Se(zi,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Mf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Yp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=h1(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Mf(t,u):(Se(zi,`Failed to parse client data for instance '${t}': ${e}`),null)}}class ly{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new ly(e.clientId,e.onlineState):(Se(zi,`Failed to parse online state: ${t}`),null)}}class hp{constructor(){this.activeTargetIds=Yp()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Vg{constructor(t,e,r,o,u){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ae(At),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=VE(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new hp),this.ro=new RegExp(`^${US}_${c}_([^_]*)$`),this.io=new RegExp(`^${LS}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${jS}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const o=this.getItem(VE(this.persistenceKey,r));if(o){const u=Mf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(Dg(this.persistenceKey,t));if(o){const u=Uu.Ws(t,o);u&&(r=u.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Dg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach((o=>{this.Po(o)})),this.currentUser=t,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return tt(zi,"READ",t,e),e}setItem(t,e){tt(zi,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){tt(zi,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(tt(zi,"EVENT",e.key,e.newValue),e.key===this.eo)return void Se("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=(function(u){let c=Tn.ce;if(u!=null)try{const m=JSON.parse(u);gt(typeof m=="number",30636,{So:u}),c=m}catch(m){Se(zi,"Failed to read sequence number from WebStorage",m)}return c})(e.newValue);r!==Tn.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const o=new Of(this.currentUser,t,e,r),u=OE(this.persistenceKey,this.currentUser,t);this.setItem(u,o.Gs())}Po(t){const e=OE(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const o=Dg(this.persistenceKey,t),u=new Uu(t,e,r);this.setItem(o,u.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return Mf.Ws(r,e)}fo(t,e){const r=this.io.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Of.Ws(new nn(u),o,e)}yo(t,e){const r=this.so.exec(t),o=Number(r[1]);return Uu.Ws(o,e)}uo(t){return ly.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);tt(zi,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Yp();return t.forEach(((r,o)=>{e=e.unionWith(o.activeTargetIds)})),e}}class BS{constructor(){this.Mo=new hp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new hp,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="ConnectivityMonitor";class PE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(ME,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(ME,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function fp(){return Qh===null?Qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="RestConnection",aD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=fp(),m=this.zo(t,e.toUriEncodedString());tt(Og,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),T=rl(p);return this.Jo(t,m,g,r,T).then((E=>(tt(Og,`Received RPC '${t}' ${c}: `,E),E)),(E=>{throw Bu(Og,`RPC '${t}' ${c} failed with error: `,E,"url: ",m,"request:",r),E}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=aD[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class uD extends oD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=fp();return new Promise(((m,g)=>{const p=new Zb;p.setWithCredentials(!0),p.listenOnce(Jb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Jh.NO_ERROR:const E=p.getResponseJson();tt(en,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),m(E);break;case Jh.TIMEOUT:tt(en,`RPC '${t}' ${c} timed out`),g(new ot(W.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const w=p.getStatus();if(tt(en,`RPC '${t}' ${c} failed with status:`,w,"response text:",p.getResponseText()),w>0){let z=p.getResponseJson();Array.isArray(z)&&(z=z[0]);const X=z==null?void 0:z.error;if(X&&X.status&&X.message){const G=(function(lt){const ft=lt.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ft)>=0?ft:W.UNKNOWN})(X.status);g(new ot(G,X.message))}else g(new ot(W.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ot(W.UNAVAILABLE,"Connection failed."));break;default:ct(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{tt(en,`RPC '${t}' ${c} completed.`)}}));const T=JSON.stringify(o);tt(en,`RPC '${t}' ${c} sending request:`,o),p.send(e,"POST",T,r,15)}))}T_(t,e,r){const o=fp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=e1(),m=t1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const T=u.join("");tt(en,`Creating RPC '${t}' stream ${o}: ${T}`,g);const E=c.createWebChannel(T,g);this.I_(E);let w=!1,z=!1;const X=new lD({Yo:Y=>{z?tt(en,`Not sending because RPC '${t}' stream ${o} is closed:`,Y):(w||(tt(en,`Opening RPC '${t}' stream ${o} transport.`),E.open(),w=!0),tt(en,`RPC '${t}' stream ${o} sending:`,Y),E.send(Y))},Zo:()=>E.close()}),G=(Y,lt,ft)=>{Y.listen(lt,(at=>{try{ft(at)}catch(vt){setTimeout((()=>{throw vt}),0)}}))};return G(E,Su.EventType.OPEN,(()=>{z||(tt(en,`RPC '${t}' stream ${o} transport opened.`),X.o_())})),G(E,Su.EventType.CLOSE,(()=>{z||(z=!0,tt(en,`RPC '${t}' stream ${o} transport closed`),X.a_(),this.E_(E))})),G(E,Su.EventType.ERROR,(Y=>{z||(z=!0,Bu(en,`RPC '${t}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),X.a_(new ot(W.UNAVAILABLE,"The operation could not be completed")))})),G(E,Su.EventType.MESSAGE,(Y=>{var lt;if(!z){const ft=Y.data[0];gt(!!ft,16349);const at=ft,vt=(at==null?void 0:at.error)||((lt=at[0])==null?void 0:lt.error);if(vt){tt(en,`RPC '${t}' stream ${o} received error:`,vt);const Et=vt.status;let et=(function(x){const M=Me[x];if(M!==void 0)return eS(M)})(Et),I=vt.message;et===void 0&&(et=W.INTERNAL,I="Unknown error status: "+Et+" with message "+vt.message),z=!0,X.a_(new ot(et,I)),E.close()}else tt(en,`RPC '${t}' stream ${o} received:`,ft),X.u_(ft)}})),G(m,Wb.STAT_EVENT,(Y=>{Y.stat===Hg.PROXY?tt(en,`RPC '${t}' stream ${o} detected buffering proxy`):Y.stat===Hg.NOPROXY&&tt(en,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return typeof window<"u"?window:null}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(s){return new gN(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="PersistentStream";class HS{constructor(t,e,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FS(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===W.RESOURCE_EXHAUSTED?(Se(e.toString()),Se("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new ot(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(kE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(tt(kE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cD extends HS{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=_N(this.serializer,t),r=(function(u){if(!("targetChange"in u))return _t.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?_t.min():c.readTime?fn(c.readTime):_t.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=sp(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=Af(g)?{documents:uS(u,g)}:{query:cS(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=rS(u,c.resumeToken);const p=ip(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(_t.min())>0){m.readTime=Wo(u,c.snapshotVersion.toTimestamp());const p=ip(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const r=TN(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=sp(this.serializer),e.removeTarget=t,this.q_(e)}}class hD extends HS{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=vN(t.writeResults,t.commitTime),r=fn(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=sp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>xf(this.serializer,r)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{}class dD extends fD{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ot(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,rp(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ot(W.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,rp(e,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ot(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class mD{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Se(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="RemoteStore";class gD{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ca(this)&&(tt(xa,"Restarting streams for network reachability change."),await(async function(g){const p=dt(g);p.Ea.add(4),await cc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await sd(p)})(this))}))})),this.Ra=new mD(r,o)}}async function sd(s){if(Ca(s))for(const t of s.da)await t(!0)}async function cc(s){for(const t of s.da)await t(!1)}function ad(s,t){const e=dt(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),hy(e)?cy(e):cl(e).O_()&&uy(e,t))}function el(s,t){const e=dt(s),r=cl(e);e.Ia.delete(t),r.O_()&&GS(e,t),e.Ia.size===0&&(r.O_()?r.L_():Ca(e)&&e.Ra.set("Unknown"))}function uy(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_t.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}cl(s).Y_(t)}function GS(s,t){s.Va.Ue(t),cl(s).Z_(t)}function cy(s){s.Va=new hN({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),cl(s).start(),s.Ra.ua()}function hy(s){return Ca(s)&&!cl(s).x_()&&s.Ia.size>0}function Ca(s){return dt(s).Ea.size===0}function KS(s){s.Va=void 0}async function pD(s){s.Ra.set("Online")}async function yD(s){s.Ia.forEach(((t,e)=>{uy(s,t)}))}async function _D(s,t){KS(s),hy(s)?(s.Ra.ha(t),cy(s)):s.Ra.set("Unknown")}async function vD(s,t,e){if(s.Ra.set("Online"),t instanceof iS&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){tt(xa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Pf(s,r)}else if(t instanceof of?s.Va.Ze(t):t instanceof nS?s.Va.st(t):s.Va.tt(t),!e.isEqual(_t.min()))try{const r=await MS(s.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(p);T&&u.Ia.set(p,T.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(Ae.EMPTY_BYTE_STRING,T.snapshotVersion)),GS(u,g);const E=new dr(T.target,g,p,T.sequenceNumber);uy(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(s,e)}catch(r){tt(xa,"Failed to raise snapshot:",r),await Pf(s,r)}}async function Pf(s,t,e){if(!bs(t))throw t;s.Ea.add(1),await cc(s),s.Ra.set("Offline"),e||(e=()=>MS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{tt(xa,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await sd(s)}))}function QS(s,t){return t().catch((e=>Pf(s,e,t)))}async function ul(s){const t=dt(s),e=vs(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ma;for(;TD(t);)try{const o=await rD(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,ED(t,o)}catch(o){await Pf(t,o)}YS(t)&&XS(t)}function TD(s){return Ca(s)&&s.Ta.length<10}function ED(s,t){s.Ta.push(t);const e=vs(s);e.O_()&&e.X_&&e.ea(t.mutations)}function YS(s){return Ca(s)&&!vs(s).x_()&&s.Ta.length>0}function XS(s){vs(s).start()}async function bD(s){vs(s).ra()}async function SD(s){const t=vs(s);for(const e of s.Ta)t.ea(e.mutations)}async function AD(s,t,e){const r=s.Ta.shift(),o=Zp.from(r,t,e);await QS(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ul(s)}async function wD(s,t){t&&vs(s).X_&&await(async function(r,o){if((function(c){return lN(c)&&c!==W.ABORTED})(o.code)){const u=r.Ta.shift();vs(r).B_(),await QS(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ul(r)}})(s,t),YS(s)&&XS(s)}async function zE(s,t){const e=dt(s);e.asyncQueue.verifyOperationInProgress(),tt(xa,"RemoteStore received new credentials");const r=Ca(e);e.Ea.add(3),await cc(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await sd(e)}async function dp(s,t){const e=dt(s);t?(e.Ea.delete(2),await sd(e)):t||(e.Ea.add(2),await cc(e),e.Ra.set("Unknown"))}function cl(s){return s.ma||(s.ma=(function(e,r,o){const u=dt(e);return u.sa(),new cD(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:pD.bind(null,s),t_:yD.bind(null,s),r_:_D.bind(null,s),H_:vD.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),hy(s)?cy(s):s.Ra.set("Unknown")):(await s.ma.stop(),KS(s))}))),s.ma}function vs(s){return s.fa||(s.fa=(function(e,r,o){const u=dt(e);return u.sa(),new hD(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:bD.bind(null,s),r_:wD.bind(null,s),ta:SD.bind(null,s),na:AD.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await ul(s)):(await s.fa.stop(),s.Ta.length>0&&(tt(xa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,m=new fy(t,e,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(s,t){if(Se("AsyncQueue",`${t}: ${s}`),bs(s))return new ot(W.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static emptySet(t){return new ko(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||st.comparator(e.key,r.key):(e,r)=>st.comparator(e.key,r.key),this.keyedMap=Au(),this.sortedSet=new ae(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ko)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new ko;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.ga=new ae(st.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ct(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class nl{constructor(t,e,r,o,u,c,m,g,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new nl(t,e,ko.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class xD{constructor(){this.queries=LE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=dt(e),u=o.queries;o.queries=LE(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ot(W.ABORTED,"Firestore shutting down"))}}function LE(){return new Tr((s=>j1(s)),Zf)}async function RD(s,t){const e=dt(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new ID,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=dy(c,`Initialization of query '${Ro(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&my(e)}async function CD(s,t){const e=dt(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function ND(s,t){const e=dt(s);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&my(e)}function DD(s,t,e){const r=dt(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function my(s){s.Ca.forEach((t=>{t.next()}))}var mp,jE;(jE=mp||(mp={})).Ma="default",jE.Cache="cache";class VD{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new nl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=nl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t){this.key=t}}class ZS{constructor(t){this.key=t}}class OD{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nt(),this.mutatedKeys=Nt(),this.eu=q1(t),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new UE,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((T,E)=>{const w=o.get(T),z=oc(this.query,E)?E:null,X=!!w&&this.mutatedKeys.has(w.key),G=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Y=!1;w&&z?w.data.isEqual(z.data)?X!==G&&(r.track({type:3,doc:z}),Y=!0):this.su(w,z)||(r.track({type:2,doc:z}),Y=!0,(g&&this.eu(z,g)>0||p&&this.eu(z,p)<0)&&(m=!0)):!w&&z?(r.track({type:0,doc:z}),Y=!0):w&&!z&&(r.track({type:1,doc:w}),Y=!0,(g||p)&&(m=!0)),Y&&(z?(c=c.add(z),u=G?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((T,E)=>(function(z,X){const G=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct(20277,{Rt:Y})}};return G(z)-G(X)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new nl(this.query,t.tu,u,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new UE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new ZS(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new $S(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=Nt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hl="SyncEngine";class MD{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class PD{constructor(t){this.key=t,this.hu=!1}}class kD{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Tr((m=>j1(m)),Zf),this.Iu=new Map,this.Eu=new Set,this.du=new ae(st.comparator),this.Au=new Map,this.Ru=new iy,this.Vu={},this.mu=new Map,this.fu=Ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zD(s,t,e=!0){const r=od(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await JS(r,t,e,!0),o}async function UD(s,t){const e=od(s);await JS(e,t,!0,!1)}async function JS(s,t,e,r){const o=await Vf(s.localStore,Pn(t)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await gy(s,t,u,c==="current",o.resumeToken)),s.isPrimaryClient&&e&&ad(s.remoteStore,o),m}async function gy(s,t,e,r,o){s.pu=(E,w,z)=>(async function(G,Y,lt,ft){let at=Y.view.ru(lt);at.Cs&&(at=await cp(G.localStore,Y.query,!1).then((({documents:I})=>Y.view.ru(I,at))));const vt=ft&&ft.targetChanges.get(Y.targetId),Et=ft&&ft.targetMismatches.get(Y.targetId)!=null,et=Y.view.applyChanges(at,G.isPrimaryClient,vt,Et);return gp(G,Y.targetId,et.au),et.snapshot})(s,E,w,z);const u=await cp(s.localStore,t,!0),c=new OD(t,u.Qs),m=c.ru(u.documents),g=uc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);gp(s,e,p.au);const T=new MD(t,e,c);return s.Tu.set(t,T),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),p.snapshot}async function LD(s,t,e){const r=dt(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!Zf(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await tl(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&el(r.remoteStore,o.targetId),il(r,o.targetId)})).catch(Es)):(il(r,o.targetId),await tl(r.localStore,o.targetId,!0))}async function jD(s,t){const e=dt(s),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),el(e.remoteStore,r.targetId))}async function BD(s,t,e){const r=vy(s);try{const o=await(function(c,m){const g=dt(c),p=Zt.now(),T=m.reduce(((z,X)=>z.add(X.key)),Nt());let E,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let X=Mn(),G=Nt();return g.Ns.getEntries(z,T).next((Y=>{X=Y,X.forEach(((lt,ft)=>{ft.isValidDocument()||(G=G.add(lt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,X))).next((Y=>{E=Y;const lt=[];for(const ft of m){const at=aN(ft,E.get(ft.key).overlayedDocument);at!=null&&lt.push(new Er(ft.key,at,D1(at.value.mapValue),an.exists(!0)))}return g.mutationQueue.addMutationBatch(z,p,lt,m)})).next((Y=>{w=Y;const lt=Y.applyToLocalDocumentSet(E,G);return g.documentOverlayCache.saveOverlays(z,Y.batchId,lt)}))})).then((()=>({batchId:w.batchId,changes:H1(E)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new ae(At)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,e),await As(r,o.changes),await ul(r.remoteStore)}catch(o){const u=dy(o,"Failed to persist write");e.reject(u)}}async function WS(s,t){const e=dt(s);try{const r=await nD(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?gt(c.hu,14607):o.removedDocuments.size>0&&(gt(c.hu,42227),c.hu=!1))})),await As(e,r,t)}catch(r){await Es(r)}}function BE(s,t,e){const r=dt(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=dt(c);g.onlineState=m;let p=!1;g.queries.forEach(((T,E)=>{for(const w of E.Sa)w.va(m)&&(p=!0)})),p&&my(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function qD(s,t,e){const r=dt(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new ae(st.comparator);c=c.insert(u,_e.newNoDocument(u,_t.min()));const m=Nt().add(u),g=new lc(_t.min(),new Map,new ae(At),c,m);await WS(r,g),r.du=r.du.remove(u),r.Au.delete(t),_y(r)}else await tl(r.localStore,t,!1).then((()=>il(r,t,e))).catch(Es)}async function FD(s,t){const e=dt(s),r=t.batch.batchId;try{const o=await eD(e.localStore,t);yy(e,r,null),py(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await As(e,o)}catch(o){await Es(o)}}async function HD(s,t,e){const r=dt(s);try{const o=await(function(c,m){const g=dt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let T;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(gt(E!==null,37113),T=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T))).next((()=>g.localDocuments.getDocuments(p,T)))}))})(r.localStore,t);yy(r,t,e),py(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await As(r,o)}catch(o){await Es(o)}}function py(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function yy(s,t,e){const r=dt(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function il(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),e&&s.Pu.yu(r,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||tA(s,r)}))}function tA(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(el(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),_y(s))}function gp(s,t,e){for(const r of e)r instanceof $S?(s.Ru.addReference(r.key,t),GD(s,r)):r instanceof ZS?(tt(hl,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||tA(s,r.key)):ct(19791,{wu:r})}function GD(s,t){const e=t.key,r=e.path.canonicalString();s.du.get(e)||s.Eu.has(r)||(tt(hl,"New document in limbo: "+e),s.Eu.add(r),_y(s))}function _y(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new st(Qt.fromString(t)),r=s.fu.next();s.Au.set(r,new PD(e)),s.du=s.du.insert(e,r),ad(s.remoteStore,new dr(Pn($f(e.path)),r,"TargetPurposeLimboResolution",Tn.ce))}}async function As(s,t,e){const r=dt(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((p=>{var T;if((p||e)&&r.isPrimaryClient){const E=p?!p.fromCache:(T=e==null?void 0:e.targetChanges.get(g.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=ay.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const T=dt(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>U.forEach(p,(w=>U.forEach(w.Es,(z=>T.persistence.referenceDelegate.addReference(E,w.targetId,z))).next((()=>U.forEach(w.ds,(z=>T.persistence.referenceDelegate.removeReference(E,w.targetId,z)))))))))}catch(E){if(!bs(E))throw E;tt(oy,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const z=T.Ms.get(w),X=z.snapshotVersion,G=z.withLastLimboFreeSnapshotVersion(X);T.Ms=T.Ms.insert(w,G)}}})(r.localStore,u))}async function KD(s,t){const e=dt(s);if(!e.currentUser.isEqual(t)){tt(hl,"User change. New user:",t.toKey());const r=await OS(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ot(W.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await As(e,r.Ls)}}function QD(s,t){const e=dt(s),r=e.Au.get(t);if(r&&r.hu)return Nt().add(r.key);{let o=Nt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function YD(s,t){const e=dt(s),r=await cp(e.localStore,t.query,!0),o=t.view.cu(r);return e.isPrimaryClient&&gp(e,t.targetId,o.au),o}async function XD(s,t){const e=dt(s);return kS(e.localStore,t).then((r=>As(e,r)))}async function $D(s,t,e,r){const o=dt(s),u=await(function(m,g){const p=dt(m),T=dt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(E=>T.er(E,g).next((w=>w?p.localDocuments.getDocuments(E,w):U.resolve(null)))))})(o.localStore,t);u!==null?(e==="pending"?await ul(o.remoteStore):e==="acknowledged"||e==="rejected"?(yy(o,t,r||null),py(o,t),(function(m,g){dt(dt(m).mutationQueue).ir(g)})(o.localStore,t)):ct(6720,"Unknown batchState",{Su:e}),await As(o,u)):tt(hl,"Cannot apply mutation batch with id: "+t)}async function ZD(s,t){const e=dt(s);if(od(e),vy(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await qE(e,r.toArray());e.gu=!0,await dp(e.remoteStore,!0);for(const u of o)ad(e.remoteStore,u)}else if(t===!1&&e.gu!==!1){const r=[];let o=Promise.resolve();e.Iu.forEach(((u,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(il(e,c),tl(e.localStore,c,!0)))),el(e.remoteStore,c)})),await o,await qE(e,r),(function(c){const m=dt(c);m.Au.forEach(((g,p)=>{el(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new ae(st.comparator)})(e),e.gu=!1,await dp(e.remoteStore,!1)}}async function qE(s,t,e){const r=dt(s),o=[],u=[];for(const c of t){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await Vf(r.localStore,Pn(g[0]));for(const p of g){const T=r.Tu.get(p),E=await YD(r,T);E.snapshot&&u.push(E.snapshot)}}else{const p=await PS(r.localStore,c);m=await Vf(r.localStore,p),await gy(r,eA(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function eA(s){return L1(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function JD(s){return(function(e){return dt(dt(e).persistence).Ts()})(dt(s).localStore)}async function WD(s,t,e,r){const o=dt(s);if(o.gu)return void tt(hl,"Ignoring unexpected query state notification.");const u=o.Iu.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const c=await kS(o.localStore,B1(u[0])),m=lc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Ae.EMPTY_BYTE_STRING);await As(o,c,m);break}case"rejected":await tl(o.localStore,t,!0),il(o,t,r);break;default:ct(64155,e)}}async function tV(s,t,e){const r=od(s);if(r.gu){for(const o of t){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){tt(hl,"Adding an already active target "+o);continue}const u=await PS(r.localStore,o),c=await Vf(r.localStore,u);await gy(r,eA(u),c.targetId,!1,c.resumeToken),ad(r.remoteStore,c)}for(const o of e)r.Iu.has(o)&&await tl(r.localStore,o,!1).then((()=>{el(r.remoteStore,o),il(r,o)})).catch(Es)}}function od(s){const t=dt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=WS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qD.bind(null,t),t.Pu.H_=ND.bind(null,t.eventManager),t.Pu.yu=DD.bind(null,t.eventManager),t}function vy(s){const t=dt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=FD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HD.bind(null,t),t}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=rd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return VS(this.persistence,new DS,t.initialUser,this.serializer)}Cu(t){return new ry(id.mi,this.serializer)}Du(t){return new BS}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class eV extends Zu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){gt(this.persistence.referenceDelegate instanceof Df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wS(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ry((r=>Df.mi(r,e)),this.serializer)}}class nA extends Zu{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await vy(this.xu.syncEngine),await ul(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return VS(this.persistence,new DS,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new wS(r,t.asyncQueue,e)}Mu(t,e){const r=new lC(e,this.persistence);return new oC(t.asyncQueue,r)}Cu(t){const e=NS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new sy(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,qS(),uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new BS}}class nV extends nA{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Vg&&(this.sharedClientState.syncEngine={Co:$D.bind(null,e),vo:WD.bind(null,e),Fo:tV.bind(null,e),Ts:JD.bind(null,e),Do:XD.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await ZD(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const e=qS();if(!Vg.v(e))throw new ot(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=NS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Vg(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Ju{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>BE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KD.bind(null,this.syncEngine),await dp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new xD})()}createDatastore(t){const e=rd(t.databaseInfo.databaseId),r=(function(u){return new uD(u)})(t.databaseInfo);return(function(u,c,m,g){return new dD(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,m){return new gD(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>BE(this.syncEngine,e,0)),(function(){return PE.v()?new PE:new sD})())}createSyncEngine(t,e){return(function(o,u,c,m,g,p,T){const E=new kD(o,u,c,m,g,p);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(o){const u=dt(o);tt(xa,"RemoteStore shutting down."),u.Ea.add(5),await cc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Ju.provider={build:()=>new Ju};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Se("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="FirestoreClient";class rV{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{tt(Ts,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(tt(Ts,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=dy(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Mg(s,t){s.asyncQueue.verifyOperationInProgress(),tt(Ts,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await OS(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function FE(s,t){s.asyncQueue.verifyOperationInProgress();const e=await sV(s);tt(Ts,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((r=>zE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>zE(t.remoteStore,o))),s._onlineComponents=t}async function sV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(Ts,"Using user provided OfflineComponentProvider");try{await Mg(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Bu("Error using user provided cache. Falling back to memory cache: "+e),await Mg(s,new Zu)}}else tt(Ts,"Using default OfflineComponentProvider"),await Mg(s,new eV(void 0));return s._offlineComponents}async function iA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(Ts,"Using user provided OnlineComponentProvider"),await FE(s,s._uninitializedComponentsProvider._online)):(tt(Ts,"Using default OnlineComponentProvider"),await FE(s,new Ju))),s._onlineComponents}function aV(s){return iA(s).then((t=>t.syncEngine))}async function HE(s){const t=await iA(s),e=t.eventManager;return e.onListen=zD.bind(null,t.syncEngine),e.onUnlisten=LD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=UD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=jD.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV="firestore.googleapis.com",KE=!0;class QE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oV,this.ssl=KE}else this.host=t.host,this.ssl=t.ssl??KE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=TS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<AS)throw new ot(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}rC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rA(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ot(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ot(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ot(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ty{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new X2;switch(r.type){case"firstParty":return new J2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ot(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=GE.get(e);r&&(tt("ComponentProvider","Removing Datastore"),GE.delete(e),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ld(this.firestore,t,this._query)}}class ke{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ke(this.firestore,t,this._key)}toJSON(){return{type:ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(rc(e,ke._jsonSchema))return new ke(t,r||null,new st(Qt.fromString(e.referencePath)))}}ke._jsonSchemaVersion="firestore/documentReference/1.0",ke._jsonSchema={type:Pe("string",ke._jsonSchemaVersion),referencePath:Pe("string")};class ps extends ld{constructor(t,e,r){super(t,e,$f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ke(this.firestore,null,new st(t))}withConverter(t){return new ps(this.firestore,t,this._path)}}function YE(s,t,...e){if(s=We(s),r1("collection","path",t),s instanceof Ty){const r=Qt.fromString(t,...e);return kT(r),new ps(s,null,r)}{if(!(s instanceof ke||s instanceof ps))throw new ot(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Qt.fromString(t,...e));return kT(r),new ps(s.firestore,null,r)}}function $n(s,t,...e){if(s=We(s),arguments.length===1&&(t=Pp.newId()),r1("doc","path",t),s instanceof Ty){const r=Qt.fromString(t,...e);return PT(r),new ke(s,null,new st(r))}{if(!(s instanceof ke||s instanceof ps))throw new ot(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Qt.fromString(t,...e));return PT(r),new ke(s.firestore,s instanceof ps?s.converter:null,new st(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="AsyncQueue";class $E{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FS(this,"async_queue_retry"),this._c=()=>{const r=uf();r&&tt(XE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=uf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=uf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new ms;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!bs(t))throw t;tt(XE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Se("INTERNAL UNHANDLED ERROR: ",ZE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=fy.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ct(47125,{Pc:ZE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function ZE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(s){return(function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Ra extends Ty{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new $E,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new $E(t),this._firestoreClient=void 0,await t}}}function lV(s,t,e){e||(e=bf);const r=Sp(s,"firestore");if(r.isInitialized(e)){const o=r.getImmediate({identifier:e}),u=r.getOptions(e);if(_a(u,t))return o;throw new ot(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ot(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<AS)throw new ot(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&rl(t.host)&&cb(t.host),r.initialize({options:t,instanceIdentifier:e})}function sA(s){if(s._terminated)throw new ot(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||uV(s),s._firestoreClient}function uV(s){var r,o,u;const t=s._freezeSettings(),e=(function(m,g,p,T){return new kC(m,g,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,rA(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new rV(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zn(Ae.fromBase64String(t))}catch(e){throw new ot(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Zn(Ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(rc(t,Zn._jsonSchema))return Zn.fromBase64String(t.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Pe("string",Zn._jsonSchemaVersion),bytes:Pe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ot(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ot(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ot(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return At(this._lat,t._lat)||At(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(t){if(rc(t,Bi._jsonSchema))return new Bi(t.latitude,t.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Pe("string",Bi._jsonSchemaVersion),latitude:Pe("number"),longitude:Pe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(rc(t,qi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new qi(t.vectorValues);throw new ot(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qi._jsonSchemaVersion="firestore/vectorValue/1.0",qi._jsonSchema={type:Pe("string",qi._jsonSchemaVersion),vectorValues:Pe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=/^__.*__$/;class hV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Er(t,this.data,this.fieldMask,e,this.fieldTransforms):new ll(t,this.data,e,this.fieldTransforms)}}class aA{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Er(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function oA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct(40011,{Ac:s})}}class Ey{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ey({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return kf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(oA(this.Ac)&&cV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class fV{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||rd(t)}Cc(t,e,r,o=!1){return new Ey({Ac:t,methodName:e,Dc:r,path:me.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function by(s){const t=s._freezeSettings(),e=rd(s._databaseId);return new fV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function lA(s,t,e,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,t,e,o);Ay("Data must be an object, but it was:",c,r);const m=uA(r,c);let g,p;if(u.merge)g=new En(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const E of u.mergeFields){const w=pp(t,E,e);if(!c.contains(w))throw new ot(W.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);hA(T,w)||T.push(w)}g=new En(T),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new hV(new sn(m),g,p)}class hd extends cd{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hd}}class Sy extends cd{_toFieldTransform(t){return new Z1(t.path,new $o)}isEqual(t){return t instanceof Sy}}function dV(s,t,e,r){const o=s.Cc(1,t,e);Ay("Data must be an object, but it was:",o,r);const u=[],c=sn.empty();Ss(r,((g,p)=>{const T=wy(t,g,e);p=We(p);const E=o.yc(T);if(p instanceof hd)u.push(T);else{const w=fd(p,E);w!=null&&(u.push(T),c.set(T,w))}}));const m=new En(u);return new aA(c,m,o.fieldTransforms)}function mV(s,t,e,r,o,u){const c=s.Cc(1,t,e),m=[pp(t,r,e)],g=[o];if(u.length%2!=0)throw new ot(W.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(pp(t,u[w])),g.push(u[w+1]);const p=[],T=sn.empty();for(let w=m.length-1;w>=0;--w)if(!hA(p,m[w])){const z=m[w];let X=g[w];X=We(X);const G=c.yc(z);if(X instanceof hd)p.push(z);else{const Y=fd(X,G);Y!=null&&(p.push(z),T.set(z,Y))}}const E=new En(p);return new aA(T,E,c.fieldTransforms)}function fd(s,t){if(cA(s=We(s)))return Ay("Unsupported field value:",t,s),uA(s,t);if(s instanceof cd)return(function(r,o){if(!oA(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=fd(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Zt.fromDate(r);return{timestampValue:Wo(o.serializer,u)}}if(r instanceof Zt){const u=new Zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wo(o.serializer,u)}}if(r instanceof Bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zn)return{bytesValue:rS(o.serializer,r._byteString)};if(r instanceof ke){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ty(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof qi)return(function(c,m){return{mapValue:{fields:{[Hp]:{stringValue:Gp},[Ko]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Xp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${kp(r)}`)})(s,t)}function uA(s,t){const e={};return b1(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ss(s,((r,o)=>{const u=fd(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function cA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Zt||s instanceof Bi||s instanceof Zn||s instanceof ke||s instanceof cd||s instanceof qi)}function Ay(s,t,e){if(!cA(e)||!s1(e)){const r=kp(e);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function pp(s,t,e){if((t=We(t))instanceof ud)return t._internalPath;if(typeof t=="string")return wy(s,t);throw kf("Field path arguments must be of type string or ",s,!1,void 0,e)}const gV=new RegExp("[~\\*/\\[\\]]");function wy(s,t,e){if(t.search(gV)>=0)throw kf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new ud(...t.split("."))._internalPath}catch{throw kf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function kf(s,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new ot(W.INVALID_ARGUMENT,m+s+g)}function hA(s,t){return s.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new pV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(dA("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class pV extends fA{data(){return super.data()}}function dA(s,t){return typeof t=="string"?wy(s,t):t instanceof ud?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ot(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _V{convertValue(t,e="none"){switch(ys(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(_r(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ct(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Ss(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){var r,o,u;const e=(u=(o=(r=t.fields)==null?void 0:r[Ko].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>de(c.doubleValue)));return new qi(e)}convertGeoPoint(t){return new Bi(de(t.latitude),de(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Qf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Qu(t));default:return null}}convertTimestamp(t){const e=yr(t);return new Zt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Qt.fromString(t);gt(mS(r),9688,{name:t});const o=new ba(r.get(1),r.get(3)),u=new st(r.popFirst(5));return o.isEqual(e)||Se(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(s,t,e){let r;return r=s?s.toFirestore(t):t,r}class xu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ya extends fA{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(dA("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ya._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Pe("string",ya._jsonSchemaVersion),bundleSource:Pe("string","DocumentSnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class cf extends ya{data(t={}){return super.data(t)}}class zo{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new xu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new cf(this._firestore,this._userDataWriter,r.key,r,new xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ot(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,T=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:vV(m.type),doc:g,oldIndex:p,newIndex:T}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=zo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function vV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct(61501,{type:s})}}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:Pe("string",zo._jsonSchemaVersion),bundleSource:Pe("string","QuerySnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class gA extends _V{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ke(this.firestore,null,e)}}function WE(s,t,e){s=mr(s,ke);const r=mr(s.firestore,Ra),o=mA(s.converter,t);return dd(r,[lA(by(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,an.none())])}function fa(s,t,e,...r){s=mr(s,ke);const o=mr(s.firestore,Ra),u=by(o);let c;return c=typeof(t=We(t))=="string"||t instanceof ud?mV(u,"updateDoc",s._key,t,e,r):dV(u,"updateDoc",s._key,t),dd(o,[c.toMutation(s._key,an.exists(!0))])}function pA(s){return dd(mr(s.firestore,Ra),[new td(s._key,an.none())])}function TV(s,t){const e=mr(s.firestore,Ra),r=$n(s),o=mA(s.converter,t);return dd(e,[lA(by(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function yA(s,...t){var g,p,T;s=We(s);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||JE(t[r])||(e=t[r++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(JE(t[r])){const E=t[r];t[r]=(g=E.next)==null?void 0:g.bind(E),t[r+1]=(p=E.error)==null?void 0:p.bind(E),t[r+2]=(T=E.complete)==null?void 0:T.bind(E)}let u,c,m;if(s instanceof ke)c=mr(s.firestore,Ra),m=$f(s._key.path),u={next:E=>{t[r]&&t[r](EV(c,s,E))},error:t[r+1],complete:t[r+2]};else{const E=mr(s,ld);c=mr(E.firestore,Ra),m=E._query;const w=new gA(c);u={next:z=>{t[r]&&t[r](new zo(c,w,E,z))},error:t[r+1],complete:t[r+2]},yV(s._query)}return(function(w,z,X,G){const Y=new iV(G),lt=new VD(z,Y,X);return w.asyncQueue.enqueueAndForget((async()=>RD(await HE(w),lt))),()=>{Y.Nu(),w.asyncQueue.enqueueAndForget((async()=>CD(await HE(w),lt)))}})(sA(c),m,o,u)}function dd(s,t){return(function(r,o){const u=new ms;return r.asyncQueue.enqueueAndForget((async()=>BD(await aV(r),o,u))),u.promise})(sA(s),t)}function EV(s,t,e){const r=e.docs.get(t._key),o=new gA(s);return new ya(s,o,t._key,r,new xu(e.hasPendingWrites,e.fromCache),t.converter)}class bV{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=IV(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function SV(s){return new bV(s)}class AV{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Ju.provider,this._offlineComponentProvider={build:e=>new nA(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class wV{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Ju.provider,this._offlineComponentProvider={build:e=>new nV(e,t==null?void 0:t.cacheSizeBytes)}}}function IV(s){return new AV(s==null?void 0:s.forceOwnership)}function xV(){return new wV}function Vo(){return new Sy("serverTimestamp")}(function(t,e=!0){(function(o){ol=o})(sl),Uo(new va("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Ra(new $2(r.getProvider("auth-internal")),new W2(c,r.getProvider("app-check-internal")),(function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ot(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(p.options.projectId,T)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),fs(DT,VT,t),fs(DT,VT,"esm2020")})();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CV=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),tb=s=>{const t=CV(s);return t.charAt(0).toUpperCase()+t.slice(1)},_A=(...s)=>s.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),NV=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=Pt.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>Pt.createElement("svg",{ref:g,...DV,width:t,height:t,stroke:s,strokeWidth:r?Number(e)*24/Number(t):e,className:_A("lucide",o),...!u&&!NV(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,T])=>Pt.createElement(p,T)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=(s,t)=>{const e=Pt.forwardRef(({className:r,...o},u)=>Pt.createElement(VV,{ref:u,iconNode:t,className:_A(`lucide-${RV(tb(s))}`,`lucide-${s}`,r),...o}));return e.displayName=tb(s),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vA=ln("circle-check",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],TA=ln("circle-x",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],kV=ln("grip-vertical",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],zf=ln("hand",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],EA=ln("image",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],yp=ln("keyboard",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],BV=ln("loader-circle",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],FV=ln("lock",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],GV=ln("mouse-pointer-2",HV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],bA=ln("play",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_p=ln("plus",QV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],XV=ln("sparkles",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],eb=ln("trash-2",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],vp=ln("trophy",ZV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],WV=ln("user",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],eO=ln("users",tO),nO={apiKey:"AIzaSyAYtsSzPBLdZ6gnsFJZvyXEwBvq5xxsahY",authDomain:"mohoot-007.firebaseapp.com",projectId:"mohoot-007",storageBucket:"mohoot-007.firebasestorage.app",messagingSenderId:"277114765994",appId:"1:277114765994:web:5d5beff3bb4be86d8dc6d3"},iO=typeof __firebase_config<"u"?JSON.parse(__firebase_config):nO,SA=yb(iO),Pg=K2(SA),Vn=lV(SA,{localCache:SV({tabManager:xV()})}),On=typeof __app_id<"u"?__app_id:"mohoot-prod",fe={bg:"bg-[#020617]",glassCard:"bg-[#0F172A]/60 backdrop-blur-xl border border-white/10 shadow-2xl",primaryGradient:"bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white shadow-violet-500/20",textGradient:"text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-fuchsia-400",input:"bg-[#020617] border border-white/10 text-white focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all",danger:"text-rose-400 hover:bg-rose-500/10"},AA=[{id:0,color:"bg-gradient-to-br from-rose-700 to-rose-900 border-rose-600/50"},{id:1,color:"bg-gradient-to-br from-blue-700 to-blue-900 border-blue-600/50"},{id:2,color:"bg-gradient-to-br from-amber-700 to-amber-900 border-amber-600/50"},{id:3,color:"bg-gradient-to-br from-emerald-700 to-emerald-900 border-emerald-600/50"}],nb=[{bg:"bg-slate-900",border:"border-violet-500/30",glow:"shadow-violet-900/20"},{bg:"bg-slate-900",border:"border-fuchsia-500/30",glow:"shadow-fuchsia-900/20"},{bg:"bg-slate-900",border:"border-cyan-500/30",glow:"shadow-cyan-900/20"}],rO=()=>{const s=Array.from({length:50}).map((t,e)=>({left:Math.random()*100+"%",animationDelay:Math.random()*5+"s",backgroundColor:["#f43f5e","#3b82f6","#10b981","#f59e0b","#8b5cf6"][Math.floor(Math.random()*5)]}));return R.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[s.map((t,e)=>R.jsx("div",{className:"absolute top-0 w-3 h-3 rounded-full animate-[fall_5s_linear_infinite]",style:{left:t.left,animationDelay:t.animationDelay,backgroundColor:t.backgroundColor,opacity:.7}},e)),R.jsx("style",{children:`
        @keyframes fall {
          0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
          100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }
      `})]})},sO=({quiz:s,index:t,onHost:e,onEdit:r})=>{var u;const o=nb[t%nb.length];return R.jsxs("div",{onClick:()=>r(s),className:`${o.bg} border ${o.border} ${o.glow} h-64 rounded-3xl p-6 relative flex flex-col justify-between shadow-lg cursor-pointer hover:scale-[1.02] hover:shadow-2xl transition-all duration-300 select-none group overflow-hidden`,children:[R.jsx("div",{className:"flex-1 flex items-center justify-center w-full text-center px-2",children:R.jsx("h3",{className:"font-bold text-2xl text-white leading-tight break-words line-clamp-3 group-hover:text-violet-200 transition-colors",children:s.title||"Untitled"})}),R.jsxs("div",{className:"w-full flex items-center justify-between pt-4 border-t border-white/5 mt-2 relative z-10",children:[R.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest group-hover:text-slate-200 transition-colors",children:[((u=s.questions)==null?void 0:u.length)||0," Questions"]}),R.jsx("button",{onClick:c=>{c.stopPropagation(),e(s)},className:`
            opacity-0 group-hover:opacity-100 
            translate-y-4 group-hover:translate-y-0
            transition-all duration-300 ease-out
            p-3 rounded-xl shadow-lg hover:scale-110 active:scale-95 
            ${fe.primaryGradient} shadow-violet-500/30
          `,title:"Host Live",children:R.jsx(bA,{size:20,fill:"currentColor",className:"ml-0.5"})})]})]})},aO=({user:s,onSignOut:t})=>R.jsxs("nav",{className:"bg-[#020617]/80 backdrop-blur-xl border-b border-white/5 px-8 py-5 flex justify-between items-center sticky top-0 z-20",children:[R.jsxs("div",{className:"font-black text-2xl tracking-tighter",children:[R.jsx("span",{className:"text-violet-500",children:"M"}),R.jsx("span",{className:fe.textGradient,children:"ohoot"}),R.jsx("span",{className:"text-white",children:"!"})]}),R.jsx("div",{className:"flex items-center gap-4",children:R.jsxs("button",{onClick:t,className:"relative group rounded-full transition-all focus:outline-none",title:"Sign Out",children:[R.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-full opacity-0 group-hover:opacity-100 blur transition duration-500"}),R.jsx("div",{className:"relative rounded-full ring-2 ring-white/10 group-hover:ring-transparent bg-[#020617] p-0.5 transition-all",children:s!=null&&s.photoURL?R.jsx("img",{src:s.photoURL,className:"w-9 h-9 rounded-full object-cover",alt:"Profile"}):R.jsx("div",{className:"w-9 h-9 bg-slate-800 rounded-full flex items-center justify-center text-violet-400",children:R.jsx(WV,{size:18})})})]})})]}),md=({onClose:s})=>R.jsxs("div",{className:"fixed top-0 left-0 right-0 p-6 flex justify-between items-center z-50 pointer-events-none",children:[R.jsxs("div",{className:"font-black text-xl tracking-tighter text-white/20 pointer-events-auto select-none",children:["M",R.jsx("span",{className:"text-white/10",children:"ohoot"}),R.jsx("span",{className:"text-white/30",children:"!"})]}),R.jsx("div",{className:"pointer-events-auto group relative",children:R.jsx("button",{onClick:s,className:"bg-black/40 backdrop-blur border border-white/10 p-3 rounded-full text-slate-400 hover:bg-rose-500/20 hover:text-rose-400 hover:border-rose-500/50 transition-all",children:R.jsx(TA,{size:24})})})]}),oO=({pin:s,players:t,onStart:e,onClose:r})=>R.jsxs("div",{className:`min-h-screen ${fe.bg} flex flex-col items-center justify-center relative overflow-hidden`,children:[R.jsx(md,{onClose:r}),R.jsx("div",{className:"absolute top-0 -left-40 w-96 h-96 bg-violet-600/20 rounded-full blur-[128px]"}),R.jsx("div",{className:"absolute bottom-0 -right-40 w-96 h-96 bg-fuchsia-600/20 rounded-full blur-[128px]"}),R.jsxs("div",{className:`${fe.glassCard} p-12 rounded-[2.5rem] flex flex-col items-center text-center relative z-10 mb-10 animate-in fade-in zoom-in duration-500`,children:[R.jsx("div",{className:"text-xs font-bold text-violet-400 uppercase tracking-[0.4em] mb-6",children:"Join at mohoot.sbs"}),R.jsx("div",{className:"text-[7rem] md:text-[9rem] font-black leading-none text-white tabular-nums tracking-tighter drop-shadow-[0_0_30px_rgba(139,92,246,0.3)]",children:s}),R.jsxs("div",{className:"mt-8 flex items-center gap-3 text-slate-400 font-bold bg-white/5 px-6 py-2 rounded-full border border-white/5",children:[R.jsx(eO,{size:18})," ",t.length," Players Ready"]})]}),R.jsx("div",{className:"flex flex-wrap gap-3 justify-center max-w-5xl mb-24 relative z-10 px-4",children:t.map((o,u)=>R.jsx("div",{className:"bg-[#1e293b]/80 border border-violet-500/20 px-5 py-2.5 rounded-xl shadow-lg font-bold text-base text-violet-200 animate-in zoom-in duration-300",children:o.nickname},u))}),R.jsx("div",{className:"fixed bottom-10 z-20",children:R.jsx("button",{disabled:t.length===0,onClick:e,className:`px-16 py-5 rounded-2xl font-black text-xl tracking-wide shadow-2xl transition-all ${t.length>0?fe.primaryGradient+" hover:scale-105 hover:shadow-violet-500/40":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:"START GAME"})})]}),lO=({snap:s,players:t,timeLeft:e,onSkip:r,onClose:o})=>{var I;const u=s.quizSnapshot.questions[s.currentQuestionIndex],c=u.type||"CHOICE",m=u.images&&u.images.length>0?u.images:u.image?[u.image]:[],[g,p]=Pt.useState(0),[T,E]=Pt.useState(!1),[w,z]=Pt.useState(!1),[X,G]=Pt.useState(!1),[Y,lt]=Pt.useState(""),ft=Pt.useRef(0),at=Pt.useRef(new Set),vt=t.filter(A=>A.lastAnsweredRoundId===s.roundId),Et=c==="BUZZER"?0:vt.length;Pt.useEffect(()=>{E(!1),p(0)},[u]),Pt.useEffect(()=>{if(m.length>1){const A=setInterval(()=>p(x=>(x+1)%m.length),4e3);return()=>clearInterval(A)}},[m.length]),Pt.useEffect(()=>{if(c!=="BUZZER"){if(Et>ft.current&&Et>0){const A=vt.find(x=>!at.current.has(x.uid||x.nickname));if(A){lt(`${A.nickname} answered!`),G(!0);const x=setTimeout(()=>G(!1),3e3);return()=>clearTimeout(x)}}ft.current=Et,at.current=new Set(vt.map(A=>A.uid||A.nickname))}},[Et,vt,c]),Pt.useEffect(()=>{c!=="BUZZER"&&t.length>0&&Et===t.length&&!w&&z(!0)},[Et,t.length,w,c]),Pt.useEffect(()=>{if(w&&c!=="BUZZER"){const A=setTimeout(()=>{fa($n(Vn,"artifacts",On,"sessions",s.pin),{endTime:Date.now()})},1500);return()=>clearTimeout(A)}},[w,s.pin,c]);const et=async A=>{var ge,K;if(!s.buzzedPlayer)return;const x=s.buzzedPlayer.uid,M=$n(Vn,"artifacts",On,"sessions",s.pin),D=Math.max(1e3,(u.duration||1)*1e3),k=Math.max(0,(s.endTime||Date.now())-Date.now()),C=Number.isFinite(k/D)?k/D:0;let re=0;if(A){re=Math.round(500+500*C);const it=(((ge=s.players[x])==null?void 0:ge.score)||0)+re;await fa(M,{[`players.${x}.score`]:it,[`players.${x}.lastAnsweredRoundId`]:s.roundId,status:"LEADERBOARD",lastUpdated:Vo()})}else{const pt=Math.max(0,1-C),zt=Math.round(500*pt),Ht=Math.max(0,(((K=s.players[x])==null?void 0:K.score)||0)-zt),O=s.lockedPlayers||[];await fa(M,{[`players.${x}.score`]:Ht,buzzedPlayer:null,lockedPlayers:[...O,x]})}};return R.jsxs("div",{className:`min-h-screen ${fe.bg} relative flex flex-col`,children:[R.jsx(md,{onClose:o}),R.jsxs("div",{className:"flex-1 flex flex-col items-center pt-20 px-6 animate-in fade-in",children:[R.jsxs("div",{className:"w-full flex justify-between items-center max-w-6xl mb-8",children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsxs("div",{className:"text-white/30 font-black text-2xl tracking-widest drop-shadow-sm",children:["Q",s.currentQuestionIndex+1]}),c==="BUZZER"&&R.jsxs("div",{className:"bg-rose-500/20 text-rose-400 px-3 py-1 rounded-full text-xs font-bold border border-rose-500/30 flex items-center gap-2",children:[R.jsx(zf,{size:14})," BUZZER MODE"]}),c==="TYPING"&&R.jsxs("div",{className:"bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-xs font-bold border border-blue-500/30 flex items-center gap-2",children:[R.jsx(yp,{size:14})," TYPING MODE"]})]}),R.jsxs("div",{className:"relative group",children:[R.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-2xl opacity-50 blur group-hover:opacity-75 transition duration-1000"}),R.jsx("div",{className:"relative text-5xl font-black text-white bg-[#020617] px-8 py-3 rounded-xl border border-white/10",children:e})]}),R.jsx("div",{className:"w-10"})]}),R.jsxs("div",{className:"flex-1 w-full max-w-5xl flex flex-col items-center justify-center text-center pb-20",children:[m.length>0&&R.jsxs("div",{className:"relative mb-8 w-full h-[35vh] flex items-center justify-center z-10",children:[R.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-2xl opacity-20 blur z-0"}),T?R.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center rounded-2xl border border-white/10 bg-black/40 z-20 text-slate-500",children:[R.jsx(EA,{size:48,className:"mb-2 opacity-50"}),R.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Image Unavailable"})]}):R.jsx("img",{src:m[g],onError:()=>E(!0),className:"relative max-h-full max-w-full object-contain rounded-2xl shadow-2xl border border-white/10 bg-black/40 z-20",alt:"Question Visual"},m[g]),m.length>1&&!T&&R.jsxs("div",{className:"absolute bottom-4 bg-black/60 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold text-white border border-white/10 shadow-lg z-30",children:[g+1," / ",m.length]})]},s.currentQuestionIndex),R.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white leading-tight mb-12 drop-shadow-lg max-w-4xl",children:u.text}),c==="CHOICE"&&R.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:u.answers.map((A,x)=>R.jsx("div",{className:`${AA[x].color} p-8 rounded-2xl text-white text-2xl font-black flex items-center justify-center shadow-lg border-2 border-white/10 transform transition-transform`,children:A},x))}),c==="TYPING"&&R.jsxs("div",{className:"w-full max-w-2xl bg-[#0F172A] border border-blue-500/30 p-8 rounded-3xl flex flex-col items-center gap-4 animate-in slide-in-from-bottom-5",children:[R.jsx(yp,{size:48,className:"text-blue-500 mb-2"}),R.jsx("div",{className:"text-xl text-slate-400 font-bold",children:"Answer:"}),R.jsx("div",{className:"text-3xl font-black text-white bg-black/30 px-6 py-3 rounded-xl border border-white/5 w-full",children:u.correctText||"Any valid match"})]}),c==="BUZZER"&&R.jsx("div",{className:"w-full flex flex-col items-center justify-center min-h-[200px]",children:s.buzzedPlayer?R.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 border border-violet-500/50 p-10 rounded-3xl flex flex-col items-center gap-8 animate-in zoom-in duration-300 shadow-[0_0_50px_rgba(139,92,246,0.2)]",children:[R.jsxs("div",{className:"flex flex-col items-center",children:[R.jsx("span",{className:"text-slate-400 text-sm font-bold uppercase tracking-[0.2em] mb-2",children:"Buzzed In By"}),R.jsx("div",{className:"text-5xl font-black text-white",children:(I=s.players[s.buzzedPlayer.uid])==null?void 0:I.nickname})]}),R.jsxs("div",{className:"flex gap-4 w-full",children:[R.jsxs("button",{onClick:()=>et(!1),className:"flex-1 bg-rose-600 hover:bg-rose-500 text-white py-6 rounded-2xl font-black text-2xl flex items-center justify-center gap-3 transition-transform hover:scale-[1.02] active:scale-95",children:[R.jsx(TA,{size:32})," WRONG"]}),R.jsxs("button",{onClick:()=>et(!0),className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white py-6 rounded-2xl font-black text-2xl flex items-center justify-center gap-3 transition-transform hover:scale-[1.02] active:scale-95",children:[R.jsx(vA,{size:32})," CORRECT"]})]})]}):R.jsxs("div",{className:"flex flex-col items-center animate-pulse",children:[R.jsx("div",{className:"w-24 h-24 rounded-full bg-rose-600/20 border-4 border-rose-500/50 flex items-center justify-center mb-4",children:R.jsx(zf,{size:40,className:"text-rose-500"})}),R.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-wider",children:"Waiting for Buzzer..."})]})})]}),X&&R.jsx("div",{className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-5 fade-in duration-300",children:R.jsx("div",{className:"bg-[#0f172a]/90 backdrop-blur-xl border border-violet-500/30 text-white pl-6 pr-6 py-3 rounded-full shadow-[0_0_30px_rgba(124,58,237,0.3)] flex items-center gap-3",children:R.jsx("span",{className:"font-bold text-sm tracking-wide",children:Y})})}),R.jsx("div",{className:"fixed bottom-6 right-6",children:R.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white px-6 py-3 font-bold text-sm uppercase tracking-wider transition-colors",children:"Skip "})})]})]})},uO=({snap:s,sortedPlayers:t,onNext:e,onClose:r})=>{const o=s.quizSnapshot.questions.length-(s.currentQuestionIndex+1),u=o<3&&o>=0,[c,m]=Pt.useState(5),[g,p]=Pt.useState(!1);return Pt.useEffect(()=>{if(c>0&&!g){const T=setTimeout(()=>m(E=>E-1),1e3);return()=>clearTimeout(T)}else c===0&&!g&&e()},[c,g]),R.jsxs("div",{className:`min-h-screen ${fe.bg} pt-20 px-6 relative`,children:[R.jsx(md,{onClose:r}),R.jsxs("div",{className:"max-w-3xl mx-auto pt-10 animate-in slide-in-from-bottom-8",children:[R.jsxs("div",{className:"text-center mb-12",children:[R.jsx(vp,{size:56,className:"mx-auto text-yellow-500 mb-6 drop-shadow-[0_0_25px_rgba(234,179,8,0.4)]"}),R.jsx("h2",{className:"text-5xl font-black text-white tracking-tight",children:"Leaderboard"})]}),u&&R.jsxs("div",{className:"bg-violet-900/20 border border-violet-500/50 p-4 rounded-xl mb-6 text-center text-violet-300 font-bold uppercase tracking-widest animate-pulse",children:[R.jsx(FV,{size:16,className:"inline mr-2 mb-1"})," The Podium is Hidden..."]}),R.jsx("div",{className:"space-y-3 mb-20",children:t.slice(0,5).map((T,E)=>u&&E<3?R.jsx("div",{className:"p-4 rounded-xl flex justify-between items-center bg-[#020617] border border-white/5 opacity-50",children:R.jsxs("div",{className:"flex items-center gap-6",children:[R.jsx("span",{className:"font-black text-xl w-10 text-center text-slate-700",children:"?"}),R.jsx("span",{className:"font-bold text-xl text-slate-700",children:"----------------"})]})},E):R.jsxs("div",{className:`p-4 rounded-xl flex justify-between items-center border transition-all ${E===0?"bg-gradient-to-r from-yellow-500/10 to-transparent border-yellow-500/30":"bg-slate-900/50 border-white/5"}`,children:[R.jsxs("div",{className:"flex items-center gap-6",children:[R.jsx("span",{className:`font-black text-xl w-10 text-center ${E===0?"text-yellow-400":"text-slate-600"}`,children:E===0?R.jsx(vp,{size:20,className:"mx-auto"}):E+1}),R.jsx("span",{className:"font-bold text-xl text-white",children:T.nickname})]}),R.jsx("span",{className:`font-mono font-black text-xl ${E===0?"text-yellow-400":"text-violet-400"}`,children:T.score})]},E))}),R.jsx("div",{className:"fixed bottom-10 inset-x-0 flex justify-center",children:R.jsxs("button",{onClick:()=>g?e():p(!0),className:`group relative ${fe.primaryGradient} pl-8 pr-10 py-4 rounded-2xl font-black text-lg shadow-2xl hover:scale-105 active:scale-95 transition-all flex items-center gap-3 overflow-hidden`,children:[R.jsx("span",{className:"relative z-10",children:!g&&c>0?`Auto Next (${c}s)`:"Next Round"}),R.jsx(bA,{size:18,fill:"currentColor",className:"relative z-10"}),!g&&c>0&&R.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-white/40 transition-all duration-1000 ease-linear w-full",style:{width:`${c/5*100}%`}})]})})]})]})},cO=({sortedPlayers:s,onClose:t})=>{const e=s.slice(0,3);return R.jsxs("div",{className:`min-h-screen ${fe.bg} flex flex-col items-center justify-center pt-10 overflow-hidden relative`,children:[R.jsx(md,{onClose:t}),R.jsx(rO,{}),R.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-violet-900/20 via-slate-950 to-slate-950 pointer-events-none"}),R.jsxs("div",{className:"flex items-end justify-center gap-4 md:gap-8 w-full max-w-5xl px-4 mb-20 relative z-10",children:[e[1]&&R.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-20 duration-[1500ms]",children:[R.jsx("div",{className:"text-xl font-black text-slate-400 mb-4",children:e[1].nickname}),R.jsxs("div",{className:"w-full h-44 bg-slate-800 rounded-t-2xl flex items-end justify-center pb-4 border-t border-slate-600 relative shadow-2xl",children:[R.jsx("span",{className:"text-5xl font-black text-white/10",children:"2"}),R.jsx("div",{className:"absolute top-0 inset-x-0 h-1 bg-slate-500 shadow-[0_0_20px_rgba(100,116,139,0.5)]"})]}),R.jsxs("div",{className:"mt-4 font-bold text-slate-500",children:[e[1].score," pts"]})]}),e[0]&&R.jsxs("div",{className:"flex flex-col items-center w-1/3 -mt-10 z-10 animate-in slide-in-from-bottom-32 duration-[2000ms]",children:[R.jsxs("div",{className:"relative",children:[R.jsx(vp,{size:80,className:"text-yellow-400 mb-6 drop-shadow-[0_0_50px_rgba(250,204,21,0.6)] animate-bounce",fill:"currentColor"}),R.jsx("div",{className:"absolute -top-10 -right-10 bg-yellow-500 text-black font-black text-xs px-2 py-1 rounded rotate-12",children:"MVP!"})]}),R.jsx("div",{className:"text-4xl font-black text-white mb-4 tracking-tight drop-shadow-md",children:e[0].nickname}),R.jsxs("div",{className:"w-full h-72 bg-gradient-to-b from-yellow-500 to-yellow-700 rounded-t-3xl flex items-end justify-center pb-6 border-t-4 border-yellow-300 shadow-[0_0_80px_rgba(234,179,8,0.4)] relative overflow-hidden",children:[R.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20 mix-blend-overlay"}),R.jsx("span",{className:"text-8xl font-black text-white drop-shadow-xl relative z-10",children:"1"})]}),R.jsx("div",{className:"mt-6 font-black text-3xl text-yellow-400 bg-yellow-900/10 px-8 py-3 rounded-2xl border border-yellow-500/20 backdrop-blur-md shadow-[0_0_30px_rgba(234,179,8,0.2)]",children:e[0].score})]}),e[2]&&R.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-16 duration-[1200ms]",children:[R.jsx("div",{className:"text-xl font-black text-amber-700 mb-4",children:e[2].nickname}),R.jsx("div",{className:"w-full h-36 bg-amber-900/20 rounded-t-2xl flex items-end justify-center pb-4 border-t border-amber-800 relative shadow-xl",children:R.jsx("span",{className:"text-5xl font-black text-white/10",children:"3"})}),R.jsxs("div",{className:"mt-4 font-bold text-slate-500",children:[e[2].score," pts"]})]})]})]})};function hO(){const[s,t]=Pt.useState(null),[e,r]=Pt.useState("DASHBOARD"),[o,u]=Pt.useState(null),[c,m]=Pt.useState([]),[g,p]=Pt.useState(null);Pt.useEffect(()=>{const G=MR(Pg,Y=>{t(Y),Y&&T(Y.uid)});return()=>G()},[]);const T=G=>{yA(YE(Vn,"artifacts",On,"users",G,"quizzes"),Y=>{m(Y.docs.map(lt=>({id:lt.id,...lt.data()})))})},E=async()=>{try{await e2(Pg,new cr)}catch(G){console.error(G)}},w=()=>{u({title:"New Quiz",questions:[{text:"",image:"",images:[],answers:["","","",""],correct:0,duration:20,type:"CHOICE"}]}),r("EDITOR")},z=async G=>{const Y=s.uid;G.id?await WE($n(Vn,"artifacts",On,"users",Y,"quizzes",G.id),G):await TV(YE(Vn,"artifacts",On,"users",Y,"quizzes"),G),r("DASHBOARD")},X=async G=>{const Y=Math.floor(1e5+Math.random()*9e5).toString(),lt={pin:Y,hostId:s.uid,quizId:G.id,quizSnapshot:G,currentQuestionIndex:-1,status:"LOBBY",players:{},createdAt:Vo(),buzzedPlayer:null,lockedPlayers:[]};await WE($n(Vn,"artifacts",On,"sessions",Y),lt),p(lt),r("GAME")};return s?e==="GAME"?R.jsx(dO,{user:s,sessionData:g,onExit:()=>r("DASHBOARD")}):e==="EDITOR"?R.jsx(fO,{user:s,quiz:o,onSave:z,onCancel:()=>r("DASHBOARD")}):R.jsxs("div",{className:`min-h-screen ${fe.bg} font-sans pb-20`,children:[R.jsx(aO,{user:s,onSignOut:()=>PR(Pg)}),R.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-10",children:[R.jsxs("div",{className:"flex justify-between items-end mb-10",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-4xl font-black text-white tracking-tight mb-2",children:"My Library"}),R.jsx("p",{className:"text-slate-400 font-medium",children:"Create, edit, and host your masterpieces."})]}),R.jsxs("button",{onClick:w,className:`${fe.primaryGradient} pl-6 pr-8 py-3 rounded-2xl font-bold flex items-center gap-2 transition-transform hover:scale-105 active:scale-95 shadow-lg shadow-violet-500/20`,children:[R.jsx(_p,{size:24})," Create Quiz"]})]}),c.length===0?R.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 border-2 border-dashed border-white/10 rounded-3xl",children:[R.jsx(XV,{size:48,className:"text-violet-500 mb-4"}),R.jsx("div",{className:"text-xl font-bold text-slate-500",children:"No quizzes yet"}),R.jsx("div",{className:"text-sm text-slate-600",children:'Click "Create Quiz" to get started'})]}):R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((G,Y)=>R.jsx(sO,{quiz:G,index:Y,onHost:X,onEdit:lt=>{u(lt),r("EDITOR")}},G.id||Y))})]})]}):R.jsx("div",{className:`h-screen ${fe.bg} flex items-center justify-center p-6 text-center`,children:R.jsxs("div",{className:`${fe.glassCard} p-10 rounded-3xl max-w-md`,children:[R.jsx("h1",{className:"text-5xl font-black text-white mb-2 tracking-tighter",children:"Mohoot!"}),R.jsx("p",{className:"text-slate-400 mb-8 font-medium",children:"The Ultimate Quiz Platform"}),R.jsx("button",{onClick:E,className:`${fe.primaryGradient} w-full py-4 rounded-xl font-bold text-lg`,children:"Login with Google"})]})})}const fO=({user:s,quiz:t,onSave:e,onCancel:r})=>{const[o,u]=Pt.useState(t),[c,m]=Pt.useState(0),[g,p]=Pt.useState(""),[T,E]=Pt.useState(null),w=o.questions[c],z=w.images||(w.image?[w.image]:[]),X=(et,I)=>{const A=[...o.questions];et==="images"?A[c]={...w,images:I,image:""}:A[c]={...w,[et]:I},u({...o,questions:A})},G=()=>{g.trim()&&(X("images",[...z,g.trim()]),p(""))},Y=et=>{const I=z.filter((A,x)=>x!==et);X("images",I)},lt=()=>{var x;const et=((x=o.questions[c])==null?void 0:x.type)||"CHOICE",I={text:"",image:"",images:[],answers:["","","",""],correct:0,duration:20,type:et,correctText:""},A=[...o.questions,I];u({...o,questions:A}),m(A.length-1)},ft=(et,I)=>{E(I),et.dataTransfer.effectAllowed="move",et.dataTransfer.setData("text/plain",I)},at=(et,I)=>{et.preventDefault(),et.dataTransfer.dropEffect="move"},vt=(et,I)=>{if(et.preventDefault(),T===null||T===I)return;const A=[...o.questions],[x]=A.splice(T,1);A.splice(I,0,x),u({...o,questions:A}),T===c?m(I):I===c&&T<c&&m(c-1),E(null)},Et=et=>{switch(et){case"BUZZER":return R.jsx(zf,{size:14,className:"text-rose-400"});case"TYPING":return R.jsx(yp,{size:14,className:"text-blue-400"});default:return R.jsx(GV,{size:14,className:"text-violet-400"})}};return R.jsxs("div",{className:"flex gap-6 h-screen p-6 bg-[#020617]",children:[R.jsxs("div",{className:"w-80 flex flex-col gap-2",children:[R.jsx("h2",{className:"text-slate-500 font-bold mb-4 px-2 uppercase text-xs tracking-widest",children:"Outline"}),R.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-2",children:[o.questions.map((et,I)=>R.jsxs("div",{draggable:!0,onDragStart:A=>ft(A,I),onDragOver:A=>at(A),onDrop:A=>vt(A,I),onClick:()=>m(I),className:`
                group w-full text-left p-4 rounded-xl border transition-all cursor-pointer relative flex items-center gap-3
                ${I===c?"border-violet-500/50 bg-violet-500/10 shadow-[0_0_15px_rgba(139,92,246,0.1)]":"border-white/5 hover:bg-white/5 hover:border-white/10"}
              `,children:[R.jsx("div",{className:"text-slate-600 group-hover:text-slate-400 cursor-grab active:cursor-grabbing",children:R.jsx(kV,{size:14})}),R.jsx("div",{className:"bg-black/20 p-2 rounded-lg border border-white/5",children:Et(et.type)}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsxs("div",{className:`text-xs font-bold uppercase tracking-wider mb-0.5 ${I===c?"text-violet-300":"text-slate-500"}`,children:["Question ",I+1]}),R.jsx("div",{className:`text-sm font-bold truncate ${I===c?"text-white":"text-slate-400"}`,children:et.text||R.jsx("span",{className:"italic opacity-50",children:"Empty Question"})})]})]},I)),R.jsxs("button",{onClick:lt,className:"w-full py-4 border border-dashed border-slate-800 rounded-xl text-slate-600 font-bold text-sm hover:border-violet-500/50 hover:text-violet-400 transition-all flex items-center justify-center gap-2 mt-2",children:[R.jsx(_p,{size:16})," Add New"]})]})]}),R.jsxs("div",{className:`${fe.glassCard} flex-1 rounded-3xl p-10 flex flex-col overflow-y-auto`,children:[R.jsx("div",{className:"mb-8 border-b border-white/5 pb-8",children:R.jsx("input",{className:"w-full text-4xl font-black bg-transparent border-none focus:ring-0 outline-none text-white placeholder-slate-700",value:o.title,onChange:et=>u({...o,title:et.target.value}),placeholder:"Enter Quiz Title..."})}),R.jsxs("div",{className:"flex-1 space-y-8",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block tracking-wider",children:"Question Text"}),R.jsx("textarea",{className:`${fe.input} w-full p-6 rounded-2xl text-xl font-bold resize-none`,rows:"2",value:w.text,onChange:et=>X("text",et.target.value),placeholder:"What is the meaning of..."})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[R.jsxs("div",{className:"space-y-4",children:[R.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block tracking-wider",children:"Settings"}),R.jsxs("div",{className:`${fe.input} p-4 rounded-xl flex items-center justify-between`,children:[R.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Question Type"}),R.jsxs("select",{value:w.type||"CHOICE",onChange:et=>X("type",et.target.value),className:"bg-black/30 text-white text-sm font-bold p-2 rounded-lg outline-none border border-white/10",children:[R.jsx("option",{value:"CHOICE",children:"Multiple Choice"}),R.jsx("option",{value:"BUZZER",children:"Buzzer Mode"}),R.jsx("option",{value:"TYPING",children:"Typing Mode"})]})]}),R.jsxs("div",{className:`${fe.input} flex flex-col gap-3 p-4 rounded-xl`,children:[R.jsx("div",{className:"flex justify-between items-center mb-2",children:R.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[R.jsx(EA,{size:16})," Image Links"]})}),R.jsxs("div",{className:"flex gap-2 mb-2",children:[R.jsx("input",{className:"bg-black/20 w-full outline-none text-sm text-white placeholder-slate-600 px-3 py-2 rounded-lg border border-white/5 focus:border-violet-500/50 transition-colors",value:g,onChange:et=>p(et.target.value),onKeyDown:et=>et.key==="Enter"&&G(),placeholder:"Paste image URL here..."}),R.jsx("button",{onClick:G,className:"bg-white/10 hover:bg-white/20 text-white p-2 rounded-lg transition-colors",children:R.jsx(_p,{size:18})})]}),z.length===0?R.jsx("div",{className:"text-center py-4 text-slate-700 text-xs font-bold italic",children:"No images linked."}):R.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:z.map((et,I)=>R.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden group border border-white/10 bg-black/20",children:[R.jsx("img",{src:et,className:"w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity"}),R.jsx("button",{onClick:()=>Y(I),className:"absolute top-1 right-1 bg-rose-500/90 p-1 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-rose-600 shadow-md",title:"Remove Link",children:R.jsx(eb,{size:12})}),R.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/60 px-2 py-1 text-[9px] text-white/70 truncate",children:et})]},I))})]}),R.jsxs("div",{className:`${fe.input} p-4 rounded-xl`,children:[R.jsx("span",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Duration (Seconds)"}),R.jsx("input",{type:"number",className:"bg-transparent w-full font-black text-xl outline-none text-white",value:w.duration,onChange:et=>X("duration",parseInt(et.target.value)||0)})]})]}),R.jsxs("div",{className:"space-y-3",children:[R.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block tracking-wider",children:w.type==="TYPING"?"Acceptable Answer":"Answer Options"}),(w.type==="CHOICE"||!w.type)&&R.jsx("div",{className:"grid gap-3",children:w.answers.map((et,I)=>R.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-xl border transition-all ${w.correct===I?"bg-violet-500/10 border-violet-500/50":"bg-[#020617] border-white/5"}`,children:[R.jsx("button",{onClick:()=>X("correct",I),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${w.correct===I?AA[I].color:"bg-slate-800 text-slate-600 hover:text-slate-400"}`,children:R.jsx(vA,{size:20,className:w.correct===I?"text-white":"text-current"})}),R.jsx("input",{className:"bg-transparent flex-1 font-bold text-sm py-2 outline-none text-white placeholder-slate-700",value:et,onChange:A=>{const x=[...w.answers];x[I]=A.target.value,X("answers",x)},placeholder:`Option ${I+1}`})]},I))}),w.type==="TYPING"&&R.jsxs("div",{className:`${fe.input} p-4 rounded-xl`,children:[R.jsx("span",{className:"text-xs font-bold text-slate-500 block mb-2",children:"Exact Match Text (Case Insensitive)"}),R.jsx("input",{className:"bg-black/30 w-full p-4 rounded-lg font-bold text-lg text-white border border-white/10 focus:border-blue-500 outline-none",value:w.correctText||"",onChange:et=>X("correctText",et.target.value),placeholder:"e.g. Paris"})]}),w.type==="BUZZER"&&R.jsxs("div",{className:`${fe.input} p-8 rounded-xl flex flex-col items-center justify-center text-center opacity-75`,children:[R.jsx(zf,{size:48,className:"text-slate-600 mb-4"}),R.jsx("h4",{className:"text-white font-bold mb-2",children:"Buzzer Mode"}),R.jsx("p",{className:"text-slate-500 text-sm",children:"No options needed. You will verbally confirm if the buzzed player is correct."})]})]})]})]}),R.jsxs("div",{className:"mt-8 flex justify-between items-center pt-6 border-t border-white/5",children:[o.id&&R.jsxs("button",{onClick:async()=>{confirm("Delete?")&&(await pA($n(Vn,"artifacts",On,"users",s.uid,"quizzes",o.id)),r())},className:fe.danger+" font-bold px-4 py-2 rounded-lg transition flex items-center gap-2",children:[R.jsx(eb,{size:18})," Delete"]}),R.jsxs("div",{className:"flex gap-4 ml-auto",children:[R.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:text-white transition",children:"Discard"}),R.jsx("button",{onClick:()=>e(o),className:`${fe.primaryGradient} px-8 py-3 rounded-xl font-bold`,children:"Save Quiz"})]})]})]})]})},dO=({user:s,sessionData:t,onExit:e})=>{const[r,o]=Pt.useState(null),[u,c]=Pt.useState(0),m=t.pin;Pt.useEffect(()=>yA($n(Vn,"artifacts",On,"sessions",m),E=>E.exists()?o({...E.data(),pin:m}):e()),[m]),Pt.useEffect(()=>{if((r==null?void 0:r.status)==="QUESTION"){const E=setInterval(()=>{var z,X;const w=Math.ceil((r.endTime-Date.now())/1e3);if(c(Math.max(0,w)),w<=0)try{const G=(X=(z=r.quizSnapshot)==null?void 0:z.questions)==null?void 0:X[r.currentQuestionIndex];((G==null?void 0:G.type)||"CHOICE")==="BUZZER"&&r.buzzedPlayer?r.endTime&&r.endTime>Date.now()&&fa($n(Vn,"artifacts",On,"sessions",m),{endTime:Date.now(),lastUpdated:Vo()}):fa($n(Vn,"artifacts",On,"sessions",m),{status:"LEADERBOARD",lastUpdated:Vo()})}catch(G){console.error("Timer update error",G)}},100);return()=>clearInterval(E)}},[r==null?void 0:r.status,r==null?void 0:r.endTime]);const g=()=>{const E=r.currentQuestionIndex+1,w=r.quizSnapshot.questions[E],z=w?{status:"QUESTION",currentQuestionIndex:E,roundId:Date.now(),startTime:Date.now()+2e3,endTime:Date.now()+2e3+w.duration*1e3,buzzedPlayer:null,lockedPlayers:[]}:{status:"FINISHED"};fa($n(Vn,"artifacts",On,"sessions",m),{...z,lastUpdated:Vo()})};if(!r)return R.jsx("div",{className:`h-screen flex items-center justify-center ${fe.bg}`,children:R.jsx(BV,{className:"animate-spin text-violet-500"})});const p=Object.values(r.players||{}),T=[...p].sort((E,w)=>(w.score||0)-(E.score||0));return r.status==="LOBBY"?R.jsx(oO,{pin:m,players:p,onStart:()=>g(),onClose:()=>pA($n(Vn,"artifacts",On,"sessions",m))}):r.status==="QUESTION"?R.jsx(lO,{snap:r,players:p,timeLeft:u,onSkip:()=>fa($n(Vn,"artifacts",On,"sessions",m),{status:"LEADERBOARD",lastUpdated:Vo()}),onClose:()=>e()}):r.status==="LEADERBOARD"?R.jsx(uO,{snap:r,sortedPlayers:T,onNext:g,onClose:()=>e()}):r.status==="FINISHED"?R.jsx(cO,{sortedPlayers:T,onClose:()=>e()}):null};class mO extends Pt.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("Uncaught error:",t,e)}render(){var t;return this.state.hasError?R.jsxs("div",{style:{padding:20,color:"white",background:"#0f172a",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[R.jsx("h1",{children:"Something went wrong."}),R.jsx("p",{style:{color:"#f87171"},children:(t=this.state.error)==null?void 0:t.toString()}),R.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:20,padding:"10px 20px",borderRadius:8,border:"none",background:"#4f46e5",color:"white",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}cI.createRoot(document.getElementById("root")).render(R.jsx(Pt.StrictMode,{children:R.jsx(mO,{children:R.jsx(hO,{})})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();var fg={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Xw(){if(F0)return du;F0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return du.Fragment=t,du.jsx=e,du.jsxs=e,du}var H0;function $w(){return H0||(H0=1,fg.exports=Xw()),fg.exports}var P=$w(),dg={exports:{}},At={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function Jw(){if(G0)return At;G0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function L(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,X={};function ct(V,Z,it){this.props=V,this.context=Z,this.refs=X,this.updater=it||$}ct.prototype.isReactComponent={},ct.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},ct.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function dt(){}dt.prototype=ct.prototype;function at(V,Z,it){this.props=V,this.context=Z,this.refs=X,this.updater=it||$}var St=at.prototype=new dt;St.constructor=at,Q(St,ct.prototype),St.isPureReactComponent=!0;var Rt=Array.isArray;function vt(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(V,Z,it){var ot=it.ref;return{$$typeof:s,type:V,key:Z,ref:ot!==void 0?ot:null,props:it}}function O(V,Z){return C(V.type,Z,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function k(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(it){return Z[it]})}var R=/\/+/g;function le(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):Z.toString(36)}function ke(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(vt,vt):(V.status="pending",V.then(function(Z){V.status==="pending"&&(V.status="fulfilled",V.value=Z)},function(Z){V.status==="pending"&&(V.status="rejected",V.reason=Z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function K(V,Z,it,ot,Et){var xt=typeof V;(xt==="undefined"||xt==="boolean")&&(V=null);var Ut=!1;if(V===null)Ut=!0;else switch(xt){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(V.$$typeof){case s:case t:Ut=!0;break;case E:return Ut=V._init,K(Ut(V._payload),Z,it,ot,Et)}}if(Ut)return Et=Et(V),Ut=ot===""?"."+le(V,0):ot,Rt(Et)?(it="",Ut!=null&&(it=Ut.replace(R,"$&/")+"/"),K(Et,Z,it,"",function(As){return As})):Et!=null&&(N(Et)&&(Et=O(Et,it+(Et.key==null||V&&V.key===Et.key?"":(""+Et.key).replace(R,"$&/")+"/")+Ut)),Z.push(Et)),1;Ut=0;var Le=ot===""?".":ot+":";if(Rt(V))for(var ue=0;ue<V.length;ue++)ot=V[ue],xt=Le+le(ot,ue),Ut+=K(ot,Z,it,xt,Et);else if(ue=L(V),typeof ue=="function")for(V=ue.call(V),ue=0;!(ot=V.next()).done;)ot=ot.value,xt=Le+le(ot,ue++),Ut+=K(ot,Z,it,xt,Et);else if(xt==="object"){if(typeof V.then=="function")return K(ke(V),Z,it,ot,Et);throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function nt(V,Z,it){if(V==null)return V;var ot=[],Et=0;return K(V,ot,"","",function(xt){return Z.call(it,xt,Et++)}),ot}function yt(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(it){(V._status===0||V._status===-1)&&(V._status=1,V._result=it)},function(it){(V._status===0||V._status===-1)&&(V._status=2,V._result=it)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var Bt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Qt={map:nt,forEach:function(V,Z,it){nt(V,function(){Z.apply(this,arguments)},it)},count:function(V){var Z=0;return nt(V,function(){Z++}),Z},toArray:function(V){return nt(V,function(Z){return Z})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return At.Activity=T,At.Children=Qt,At.Component=ct,At.Fragment=e,At.Profiler=o,At.PureComponent=at,At.StrictMode=r,At.Suspense=g,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,At.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},At.cache=function(V){return function(){return V.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(V,Z,it){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ot=Q({},V.props),Et=V.key;if(Z!=null)for(xt in Z.key!==void 0&&(Et=""+Z.key),Z)!w.call(Z,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&Z.ref===void 0||(ot[xt]=Z[xt]);var xt=arguments.length-2;if(xt===1)ot.children=it;else if(1<xt){for(var Ut=Array(xt),Le=0;Le<xt;Le++)Ut[Le]=arguments[Le+2];ot.children=Ut}return C(V.type,Et,ot)},At.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},At.createElement=function(V,Z,it){var ot,Et={},xt=null;if(Z!=null)for(ot in Z.key!==void 0&&(xt=""+Z.key),Z)w.call(Z,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(Et[ot]=Z[ot]);var Ut=arguments.length-2;if(Ut===1)Et.children=it;else if(1<Ut){for(var Le=Array(Ut),ue=0;ue<Ut;ue++)Le[ue]=arguments[ue+2];Et.children=Le}if(V&&V.defaultProps)for(ot in Ut=V.defaultProps,Ut)Et[ot]===void 0&&(Et[ot]=Ut[ot]);return C(V,xt,Et)},At.createRef=function(){return{current:null}},At.forwardRef=function(V){return{$$typeof:m,render:V}},At.isValidElement=N,At.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:yt}},At.memo=function(V,Z){return{$$typeof:p,type:V,compare:Z===void 0?null:Z}},At.startTransition=function(V){var Z=I.T,it={};I.T=it;try{var ot=V(),Et=I.S;Et!==null&&Et(it,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(vt,Bt)}catch(xt){Bt(xt)}finally{Z!==null&&it.types!==null&&(Z.types=it.types),I.T=Z}},At.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},At.use=function(V){return I.H.use(V)},At.useActionState=function(V,Z,it){return I.H.useActionState(V,Z,it)},At.useCallback=function(V,Z){return I.H.useCallback(V,Z)},At.useContext=function(V){return I.H.useContext(V)},At.useDebugValue=function(){},At.useDeferredValue=function(V,Z){return I.H.useDeferredValue(V,Z)},At.useEffect=function(V,Z){return I.H.useEffect(V,Z)},At.useEffectEvent=function(V){return I.H.useEffectEvent(V)},At.useId=function(){return I.H.useId()},At.useImperativeHandle=function(V,Z,it){return I.H.useImperativeHandle(V,Z,it)},At.useInsertionEffect=function(V,Z){return I.H.useInsertionEffect(V,Z)},At.useLayoutEffect=function(V,Z){return I.H.useLayoutEffect(V,Z)},At.useMemo=function(V,Z){return I.H.useMemo(V,Z)},At.useOptimistic=function(V,Z){return I.H.useOptimistic(V,Z)},At.useReducer=function(V,Z,it){return I.H.useReducer(V,Z,it)},At.useRef=function(V){return I.H.useRef(V)},At.useState=function(V){return I.H.useState(V)},At.useSyncExternalStore=function(V,Z,it){return I.H.useSyncExternalStore(V,Z,it)},At.useTransition=function(){return I.H.useTransition()},At.version="19.2.3",At}var K0;function yp(){return K0||(K0=1,dg.exports=Jw()),dg.exports}var Ft=yp(),mg={exports:{}},mu={},gg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function Zw(){return Q0||(Q0=1,(function(s){function t(K,nt){var yt=K.length;K.push(nt);t:for(;0<yt;){var Bt=yt-1>>>1,Qt=K[Bt];if(0<o(Qt,nt))K[Bt]=nt,K[yt]=Qt,yt=Bt;else break t}}function e(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var nt=K[0],yt=K.pop();if(yt!==nt){K[0]=yt;t:for(var Bt=0,Qt=K.length,V=Qt>>>1;Bt<V;){var Z=2*(Bt+1)-1,it=K[Z],ot=Z+1,Et=K[ot];if(0>o(it,yt))ot<Qt&&0>o(Et,it)?(K[Bt]=Et,K[ot]=yt,Bt=ot):(K[Bt]=it,K[Z]=yt,Bt=Z);else if(ot<Qt&&0>o(Et,yt))K[Bt]=Et,K[ot]=yt,Bt=ot;else break t}}return nt}function o(K,nt){var yt=K.sortIndex-nt.sortIndex;return yt!==0?yt:K.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,T=null,A=3,L=!1,$=!1,Q=!1,X=!1,ct=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function St(K){for(var nt=e(p);nt!==null;){if(nt.callback===null)r(p);else if(nt.startTime<=K)r(p),nt.sortIndex=nt.expirationTime,t(g,nt);else break;nt=e(p)}}function Rt(K){if(Q=!1,St(K),!$)if(e(g)!==null)$=!0,vt||(vt=!0,k());else{var nt=e(p);nt!==null&&ke(Rt,nt.startTime-K)}}var vt=!1,I=-1,w=5,C=-1;function O(){return X?!0:!(s.unstable_now()-C<w)}function N(){if(X=!1,vt){var K=s.unstable_now();C=K;var nt=!0;try{t:{$=!1,Q&&(Q=!1,dt(I),I=-1),L=!0;var yt=A;try{e:{for(St(K),T=e(g);T!==null&&!(T.expirationTime>K&&O());){var Bt=T.callback;if(typeof Bt=="function"){T.callback=null,A=T.priorityLevel;var Qt=Bt(T.expirationTime<=K);if(K=s.unstable_now(),typeof Qt=="function"){T.callback=Qt,St(K),nt=!0;break e}T===e(g)&&r(g),St(K)}else r(g);T=e(g)}if(T!==null)nt=!0;else{var V=e(p);V!==null&&ke(Rt,V.startTime-K),nt=!1}}break t}finally{T=null,A=yt,L=!1}nt=void 0}}finally{nt?k():vt=!1}}}var k;if(typeof at=="function")k=function(){at(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,le=R.port2;R.port1.onmessage=N,k=function(){le.postMessage(null)}}else k=function(){ct(N,0)};function ke(K,nt){I=ct(function(){K(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(K){switch(A){case 1:case 2:case 3:var nt=3;break;default:nt=A}var yt=A;A=nt;try{return K()}finally{A=yt}},s.unstable_requestPaint=function(){X=!0},s.unstable_runWithPriority=function(K,nt){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var yt=A;A=K;try{return nt()}finally{A=yt}},s.unstable_scheduleCallback=function(K,nt,yt){var Bt=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Bt+yt:Bt):yt=Bt,K){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=yt+Qt,K={id:E++,callback:nt,priorityLevel:K,startTime:yt,expirationTime:Qt,sortIndex:-1},yt>Bt?(K.sortIndex=yt,t(p,K),e(g)===null&&K===e(p)&&(Q?(dt(I),I=-1):Q=!0,ke(Rt,yt-Bt))):(K.sortIndex=Qt,t(g,K),$||L||($=!0,vt||(vt=!0,k()))),K},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(K){var nt=A;return function(){var yt=A;A=nt;try{return K.apply(this,arguments)}finally{A=yt}}}})(pg)),pg}var Y0;function Ww(){return Y0||(Y0=1,gg.exports=Zw()),gg.exports}var yg={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function tI(){if(X0)return tn;X0=1;var s=yp();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,E)},tn.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,L=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:L}):E==="script"&&r.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:L,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},tn.requestFormReset=function(g){r.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var $0;function eI(){if($0)return yg.exports;$0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),yg.exports=tI(),yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function nI(){if(J0)return mu;J0=1;var s=Ww(),t=yp(),e=eI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ct=Symbol.for("react.profiler"),dt=Symbol.for("react.consumer"),at=Symbol.for("react.context"),St=Symbol.for("react.forward_ref"),Rt=Symbol.for("react.suspense"),vt=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function le(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case ct:return"Profiler";case X:return"StrictMode";case Rt:return"Suspense";case vt:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case $:return"Portal";case at:return n.displayName||"Context";case dt:return(n._context.displayName||"Context")+".Consumer";case St:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:le(n.type)||"Memo";case w:i=n._payload,n=n._init;try{return le(n(i))}catch{}}return null}var ke=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},Bt=[],Qt=-1;function V(n){return{current:n}}function Z(n){0>Qt||(n.current=Bt[Qt],Bt[Qt]=null,Qt--)}function it(n,i){Qt++,Bt[Qt]=n.current,n.current=i}var ot=V(null),Et=V(null),xt=V(null),Ut=V(null);function Le(n,i){switch(it(xt,i),it(Et,n),it(ot,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?f0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=f0(i),n=d0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(ot),it(ot,n)}function ue(){Z(ot),Z(Et),Z(xt)}function As(n){n.memoizedState!==null&&it(Ut,n);var i=ot.current,a=d0(i,n.type);i!==a&&(it(Et,n),it(ot,a))}function xa(n){Et.current===n&&(Z(ot),Z(Et)),Ut.current===n&&(Z(Ut),uu._currentValue=yt)}var Ca,Da;function hi(n){if(Ca===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ca=i&&i[1]||"",Da=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ca+n+Da}var ul=!1;function ws(n,i){if(!n||ul)return"";ul=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var q=H}Reflect.construct(n,[],J)}else{try{J.call()}catch(H){q=H}n.call(J.prototype)}}else{try{throw Error()}catch(H){q=H}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var x=_.split(`
`),j=b.split(`
`);for(f=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(l===x.length||f===j.length)for(l=x.length-1,f=j.length-1;1<=l&&0<=f&&x[l]!==j[f];)f--;for(;1<=l&&0<=f;l--,f--)if(x[l]!==j[f]){if(l!==1||f!==1)do if(l--,f--,0>f||x[l]!==j[f]){var G=`
`+x[l].replace(" at new "," at ");return n.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",n.displayName)),G}while(1<=l&&0<=f);break}}}finally{ul=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?hi(a):""}function cl(n,i){switch(n.tag){case 26:case 27:case 5:return hi(n.type);case 16:return hi("Lazy");case 13:return n.child!==i&&i!==null?hi("Suspense Fallback"):hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return ws(n.type,!1);case 11:return ws(n.type.render,!1);case 1:return ws(n.type,!0);case 31:return hi("Activity");default:return""}}function hl(n){try{var i="",a=null;do i+=cl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ae=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,Er=s.unstable_cancelCallback,md=s.unstable_shouldYield,hc=s.unstable_requestPaint,ln=s.unstable_now,Is=s.unstable_getCurrentPriorityLevel,fl=s.unstable_ImmediatePriority,dl=s.unstable_UserBlockingPriority,br=s.unstable_NormalPriority,gd=s.unstable_LowPriority,fc=s.unstable_IdlePriority,dc=s.log,mc=s.unstable_setDisableYieldValue,Xn=null,Ke=null;function Mn(n){if(typeof dc=="function"&&mc(n),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Xn,n)}catch{}}var _e=Math.clz32?Math.clz32:pc,gc=Math.log,Na=Math.LN2;function pc(n){return n>>>=0,n===0?32:31-(gc(n)/Na|0)|0}var fi=256,Rs=262144,we=4194304;function di(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function mi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=di(l):(_&=b,_!==0?f=di(_):a||(a=b&~n,a!==0&&(f=di(a))))):(b=l&~d,b!==0?f=di(b):_!==0?f=di(_):a||(a=l&~n,a!==0&&(f=di(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function $n(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function pd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var n=we;return we<<=1,(we&62914560)===0&&(we=4194304),n}function gi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function xs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,x=n.expirationTimes,j=n.hiddenUpdates;for(a=_&~a;0<a;){var G=31-_e(a),J=1<<G;b[G]=0,x[G]=-1;var q=j[G];if(q!==null)for(j[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~J}l!==0&&Cs(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Cs(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-_e(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function ml(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-_e(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function gl(n,i){var a=i&-i;return a=(a&42)!==0?1:Ds(a),(a&(n.suspendedLanes|i))!==0?0:a}function Ds(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Hi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function _c(){var n=nt.p;return n!==0?n:(n=window.event,n===void 0?32:k0(n.type))}function Jn(n,i){var a=nt.p;try{return nt.p=n,i()}finally{nt.p=a}}var Zn=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Zn,qe="__reactProps$"+Zn,pi="__reactContainer$"+Zn,Va="__reactEvents$"+Zn,_d="__reactListeners$"+Zn,vc="__reactHandles$"+Zn,Tc="__reactResources$"+Zn,yi="__reactMarker$"+Zn;function Oa(n){delete n[Ie],delete n[qe],delete n[Va],delete n[_d],delete n[vc]}function _i(n){var i=n[Ie];if(i)return i;for(var a=n.parentNode;a;){if(i=a[pi]||a[Ie]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=T0(n);n!==null;){if(a=n[Ie])return a;n=T0(n)}return i}n=a,a=n.parentNode}return null}function Pn(n){if(n=n[Ie]||n[pi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function En(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function vi(n){var i=n[Tc];return i||(i=n[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Re(n){n[yi]=!0}var pl=new Set,yl={};function Ti(n,i){Ei(n,i),Ei(n+"Capture",i)}function Ei(n,i){for(yl[n]=i,n=0;n<i.length;n++)pl.add(i[n])}var _l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},Tl={};function Ec(n){return Ae.call(Tl,n)?!0:Ae.call(vl,n)?!1:_l.test(n)?Tl[n]=!0:(vl[n]=!0,!1)}function Ma(n,i,a){if(Ec(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function bn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function xe(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Fe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function El(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Yt(n){if(!n._valueTracker){var i=Sr(n)?"checked":"value";n._valueTracker=El(n,i,""+n[i])}}function Ns(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Sr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function bi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vs=/[\n"\\]/g;function fn(n){return n.replace(Vs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Pa(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Fe(i)):n.value!==""+Fe(i)&&(n.value=""+Fe(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?bl(n,_,Fe(i)):a!=null?bl(n,_,Fe(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Fe(b):n.removeAttribute("name")}function bc(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Yt(n);return}a=a!=null?""+Fe(a):"",i=i!=null?""+Fe(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Yt(n)}function bl(n,i,a){i==="number"&&bi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ar(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Sc(n,i,a){if(i!=null&&(i=""+Fe(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Fe(a):""}function wr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ke(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Fe(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Yt(n)}function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Ac.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Al(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Sl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Sl(n,d,i[d])}function ka(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(n){return Ir.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Wn(){}var wl=null;function kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rr=null,Si=null;function Os(n){var i=Pn(n);if(i&&(n=i.stateNode)){var a=n[qe]||null;t:switch(n=i.stateNode,i.type){case"input":if(Pa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[qe]||null;if(!f)throw Error(r(90));Pa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Ns(l)}break t;case"textarea":Sc(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ar(n,!!a.multiple,i,!1)}}}var Ua=!1;function xr(n,i,a){if(Ua)return n(i,a);Ua=!0;try{var l=n(i);return l}finally{if(Ua=!1,(Rr!==null||Si!==null)&&(_h(),Rr&&(i=Rr,n=Si,Si=Rr=null,Os(i),n)))for(i=0;i<n.length;i++)Os(n[i])}}function ti(n,i){var a=n.stateNode;if(a===null)return null;var l=a[qe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(Ln)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Ms=!1}var Ai=null,Il=null,Ps=null;function Rl(){if(Ps)return Ps;var n,i=Il,a=i.length,l,f="value"in Ai?Ai.value:Ai.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Ps=f.slice(n,1<l?1-l:void 0)}function ks(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Gi(){return!0}function ei(){return!1}function Qe(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Gi:ei,this.isPropagationStopped=ei,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),i}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=Qe(Ki),Cr=T({},Ki,{view:0,detail:0}),xl=Qe(Cr),Dr,za,Ii,Ba=T({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ii&&(Ii&&n.type==="mousemove"?(Dr=n.screenX-Ii.screenX,za=n.screenY-Ii.screenY):za=Dr=0,Ii=n),Dr)},movementY:function(n){return"movementY"in n?n.movementY:za}}),Cl=Qe(Ba),Ls=T({},Ba,{dataTransfer:0}),Ic=Qe(Ls),Rc=T({},Cr,{relatedTarget:0}),Us=Qe(Rc),Dl=T({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),xc=Qe(Dl),ja=T({},Ki,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cc=Qe(ja),Dc=T({},Ki,{data:0}),Ri=Qe(Dc),Nc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Oc[n])?!!i[n]:!1}function Nr(){return Mc}var un=T({},Cr,{key:function(n){if(n.key){var i=Nc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Vc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(n){return n.type==="keypress"?ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pc=Qe(un),kc=T({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Qe(kc),h=T({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr}),y=Qe(h),v=T({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Qe(v),z=T({},Ba,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Qe(z),et=T({},Ki,{newState:0,oldState:0}),wt=Qe(et),ve=[9,13,27,32],Ht=Ln&&"CompositionEvent"in window,ce=null;Ln&&"documentMode"in document&&(ce=document.documentMode);var Un=Ln&&"TextEvent"in window&&!ce,xi=Ln&&(!Ht||ce&&8<ce&&11>=ce),ni=" ",ii=!1;function zs(n,i){switch(n){case"keyup":return ve.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fa=!1;function v1(n,i){switch(n){case"compositionend":return qa(i);case"keypress":return i.which!==32?null:(ii=!0,ni);case"textInput":return n=i.data,n===ni&&ii?null:n;default:return null}}function T1(n,i){if(Fa)return n==="compositionend"||!Ht&&zs(n,i)?(n=Rl(),Ps=Il=Ai=null,Fa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xi&&i.locale!=="ko"?null:i.data;default:return null}}var E1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!E1[n.type]:i==="textarea"}function Ay(n,i,a,l){Rr?Si?Si.push(l):Si=[l]:Rr=l,i=wh(i,"onChange"),0<i.length&&(a=new wi("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Nl=null,Vl=null;function b1(n){a0(n,0)}function Lc(n){var i=En(n);if(Ns(i))return n}function wy(n,i){if(n==="change")return i}var Iy=!1;if(Ln){var vd;if(Ln){var Td="oninput"in document;if(!Td){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),Td=typeof Ry.oninput=="function"}vd=Td}else vd=!1;Iy=vd&&(!document.documentMode||9<document.documentMode)}function xy(){Nl&&(Nl.detachEvent("onpropertychange",Cy),Vl=Nl=null)}function Cy(n){if(n.propertyName==="value"&&Lc(Vl)){var i=[];Ay(i,Vl,n,kn(n)),xr(b1,i)}}function S1(n,i,a){n==="focusin"?(xy(),Nl=i,Vl=a,Nl.attachEvent("onpropertychange",Cy)):n==="focusout"&&xy()}function A1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lc(Vl)}function w1(n,i){if(n==="click")return Lc(i)}function I1(n,i){if(n==="input"||n==="change")return Lc(i)}function R1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:R1;function Ol(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ae.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function Dy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ny(n,i){var a=Dy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Dy(a)}}function Vy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Vy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Oy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=bi(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=bi(n.document)}return i}function Ed(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var x1=Ln&&"documentMode"in document&&11>=document.documentMode,Ha=null,bd=null,Ml=null,Sd=!1;function My(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sd||Ha==null||Ha!==bi(l)||(l=Ha,"selectionStart"in l&&Ed(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ml&&Ol(Ml,l)||(Ml=l,l=wh(bd,"onSelect"),0<l.length&&(i=new wi("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ha)))}function Bs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ga={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},Ad={},Py={};Ln&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function js(n){if(Ad[n])return Ad[n];if(!Ga[n])return n;var i=Ga[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Py)return Ad[n]=i[a];return n}var ky=js("animationend"),Ly=js("animationiteration"),Uy=js("animationstart"),C1=js("transitionrun"),D1=js("transitionstart"),N1=js("transitioncancel"),zy=js("transitionend"),By=new Map,wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wd.push("scrollEnd");function ri(n,i){By.set(n,i),Ti(i,[n])}var Uc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],Ka=0,Id=0;function zc(){for(var n=Ka,i=Id=Ka=0;i<n;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var d=zn[i];if(zn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&jy(a,f,d)}}function Bc(n,i,a,l){zn[Ka++]=n,zn[Ka++]=i,zn[Ka++]=a,zn[Ka++]=l,Id|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Rd(n,i,a,l){return Bc(n,i,a,l),jc(n)}function qs(n,i){return Bc(n,null,null,i),jc(n)}function jy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-_e(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function jc(n){if(50<nu)throw nu=0,km=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Qa={};function V1(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,a,l){return new V1(n,i,a,l)}function xd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Yi(n,i){var a=n.alternate;return a===null?(a=An(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function qy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function qc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")xd(n)&&(_=1);else if(typeof n=="string")_=Lw(n,a,ot.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case C:return n=An(31,a,i,f),n.elementType=C,n.lanes=d,n;case Q:return Fs(a.children,f,d,i);case X:_=8,f|=24;break;case ct:return n=An(12,a,i,f|2),n.elementType=ct,n.lanes=d,n;case Rt:return n=An(13,a,i,f),n.elementType=Rt,n.lanes=d,n;case vt:return n=An(19,a,i,f),n.elementType=vt,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case at:_=10;break t;case dt:_=9;break t;case St:_=11;break t;case I:_=14;break t;case w:_=16,l=null;break t}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=An(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Fs(n,i,a,l){return n=An(7,n,l,i),n.lanes=a,n}function Cd(n,i,a){return n=An(6,n,null,i),n.lanes=a,n}function Fy(n){var i=An(18,null,null,0);return i.stateNode=n,i}function Dd(n,i,a){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Hy=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var a=Hy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:hl(i)},Hy.set(n,i),i)}return{value:n,source:i,stack:hl(i)}}var Ya=[],Xa=0,Fc=null,Pl=0,jn=[],qn=0,Vr=null,Ci=1,Di="";function Xi(n,i){Ya[Xa++]=Pl,Ya[Xa++]=Fc,Fc=n,Pl=i}function Gy(n,i,a){jn[qn++]=Ci,jn[qn++]=Di,jn[qn++]=Vr,Vr=n;var l=Ci;n=Di;var f=32-_e(l)-1;l&=~(1<<f),a+=1;var d=32-_e(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Ci=1<<32-_e(i)+f|a<<f|l,Di=d+n}else Ci=1<<d|a<<f|l,Di=n}function Nd(n){n.return!==null&&(Xi(n,1),Gy(n,1,0))}function Vd(n){for(;n===Fc;)Fc=Ya[--Xa],Ya[Xa]=null,Pl=Ya[--Xa],Ya[Xa]=null;for(;n===Vr;)Vr=jn[--qn],jn[qn]=null,Di=jn[--qn],jn[qn]=null,Ci=jn[--qn],jn[qn]=null}function Ky(n,i){jn[qn++]=Ci,jn[qn++]=Di,jn[qn++]=Vr,Ci=i.id,Di=i.overflow,Vr=n}var Ye=null,ae=null,kt=!1,Or=null,Fn=!1,Od=Error(r(519));function Mr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(Bn(i,n)),Od}function Qy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ie]=n,i[qe]=l,a){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(a=0;a<ru.length;a++)Vt(ru[a],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),bc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),wr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||c0(i.textContent,a)?(l.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),l.onScroll!=null&&Vt("scroll",i),l.onScrollEnd!=null&&Vt("scrollend",i),l.onClick!=null&&(i.onclick=Wn),i=!0):i=!1,i||Mr(n,!0)}function Yy(n){for(Ye=n.return;Ye;)switch(Ye.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Ye=Ye.return}}function $a(n){if(n!==Ye)return!1;if(!kt)return Yy(n),kt=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Jm(n.type,n.memoizedProps)),a=!a),a&&ae&&Mr(n),Yy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ae=v0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ae=v0(n)}else i===27?(i=ae,Yr(n.type)?(n=ng,ng=null,ae=n):ae=i):ae=Ye?Gn(n.stateNode.nextSibling):null;return!0}function Hs(){ae=Ye=null,kt=!1}function Md(){var n=Or;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),Or=null),n}function kl(n){Or===null?Or=[n]:Or.push(n)}var Pd=V(null),Gs=null,$i=null;function Pr(n,i,a){it(Pd,i._currentValue),i._currentValue=a}function Ji(n){n._currentValue=Pd.current,Z(Pd)}function kd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Ld(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var x=0;x<i.length;x++)if(b.context===i[x]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),kd(d.return,a,n),l||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),kd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ja(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=f.type;Sn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===Ut.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(uu):n=[uu])}f=f.return}n!==null&&Ld(i,n,a,l),i.flags|=262144}function Hc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ks(n){Gs=n,$i=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xe(n){return Xy(Gs,n)}function Gc(n,i){return Gs===null&&Ks(n),Xy(n,i)}function Xy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$i===null){if(n===null)throw Error(r(308));$i=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else $i=$i.next=i;return a}var O1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},M1=s.unstable_scheduleCallback,P1=s.unstable_NormalPriority,Ce={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ud(){return{controller:new O1,data:new Map,refCount:0}}function Ll(n){n.refCount--,n.refCount===0&&M1(P1,function(){n.controller.abort()})}var Ul=null,zd=0,Za=0,Wa=null;function k1(n,i){if(Ul===null){var a=Ul=[];zd=0,Za=qm(),Wa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return zd++,i.then($y,$y),i}function $y(){if(--zd===0&&Ul!==null){Wa!==null&&(Wa.status="fulfilled");var n=Ul;Ul=null,Za=0,Wa=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function L1(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Jy=K.S;K.S=function(n,i){Mv=ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&k1(n,i),Jy!==null&&Jy(n,i)};var Qs=V(null);function Bd(){var n=Qs.current;return n!==null?n:re.pooledCache}function Kc(n,i){i===null?it(Qs,Qs.current):it(Qs,i.pool)}function Zy(){var n=Bd();return n===null?null:{parent:Ce._currentValue,pool:n}}var to=Error(r(460)),jd=Error(r(474)),Qc=Error(r(542)),Yc={then:function(){}};function Wy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function t_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Wn,Wn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n_(n),n;default:if(typeof i.status=="string")i.then(Wn,Wn);else{if(n=re,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n_(n),n}throw Xs=i,to}}function Ys(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xs=a,to):a}}var Xs=null;function e_(){if(Xs===null)throw Error(r(459));var n=Xs;return Xs=null,n}function n_(n){if(n===to||n===Qc)throw Error(r(483))}var eo=null,zl=0;function Xc(n){var i=zl;return zl+=1,eo===null&&(eo=[]),t_(eo,n,i)}function Bl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function $c(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function i_(n){function i(M,D){if(n){var B=M.deletions;B===null?(M.deletions=[D],M.flags|=16):B.push(D)}}function a(M,D){if(!n)return null;for(;D!==null;)i(M,D),D=D.sibling;return null}function l(M){for(var D=new Map;M!==null;)M.key!==null?D.set(M.key,M):D.set(M.index,M),M=M.sibling;return D}function f(M,D){return M=Yi(M,D),M.index=0,M.sibling=null,M}function d(M,D,B){return M.index=B,n?(B=M.alternate,B!==null?(B=B.index,B<D?(M.flags|=67108866,D):B):(M.flags|=67108866,D)):(M.flags|=1048576,D)}function _(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function b(M,D,B,Y){return D===null||D.tag!==6?(D=Cd(B,M.mode,Y),D.return=M,D):(D=f(D,B),D.return=M,D)}function x(M,D,B,Y){var gt=B.type;return gt===Q?G(M,D,B.props.children,Y,B.key):D!==null&&(D.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===w&&Ys(gt)===D.type)?(D=f(D,B.props),Bl(D,B),D.return=M,D):(D=qc(B.type,B.key,B.props,null,M.mode,Y),Bl(D,B),D.return=M,D)}function j(M,D,B,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=Dd(B,M.mode,Y),D.return=M,D):(D=f(D,B.children||[]),D.return=M,D)}function G(M,D,B,Y,gt){return D===null||D.tag!==7?(D=Fs(B,M.mode,Y,gt),D.return=M,D):(D=f(D,B),D.return=M,D)}function J(M,D,B){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Cd(""+D,M.mode,B),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case L:return B=qc(D.type,D.key,D.props,null,M.mode,B),Bl(B,D),B.return=M,B;case $:return D=Dd(D,M.mode,B),D.return=M,D;case w:return D=Ys(D),J(M,D,B)}if(ke(D)||k(D))return D=Fs(D,M.mode,B,null),D.return=M,D;if(typeof D.then=="function")return J(M,Xc(D),B);if(D.$$typeof===at)return J(M,Gc(M,D),B);$c(M,D)}return null}function q(M,D,B,Y){var gt=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return gt!==null?null:b(M,D,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case L:return B.key===gt?x(M,D,B,Y):null;case $:return B.key===gt?j(M,D,B,Y):null;case w:return B=Ys(B),q(M,D,B,Y)}if(ke(B)||k(B))return gt!==null?null:G(M,D,B,Y,null);if(typeof B.then=="function")return q(M,D,Xc(B),Y);if(B.$$typeof===at)return q(M,D,Gc(M,B),Y);$c(M,B)}return null}function H(M,D,B,Y,gt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return M=M.get(B)||null,b(D,M,""+Y,gt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case L:return M=M.get(Y.key===null?B:Y.key)||null,x(D,M,Y,gt);case $:return M=M.get(Y.key===null?B:Y.key)||null,j(D,M,Y,gt);case w:return Y=Ys(Y),H(M,D,B,Y,gt)}if(ke(Y)||k(Y))return M=M.get(B)||null,G(D,M,Y,gt,null);if(typeof Y.then=="function")return H(M,D,B,Xc(Y),gt);if(Y.$$typeof===at)return H(M,D,B,Gc(D,Y),gt);$c(D,Y)}return null}function ut(M,D,B,Y){for(var gt=null,jt=null,ft=D,Ct=D=0,Mt=null;ft!==null&&Ct<B.length;Ct++){ft.index>Ct?(Mt=ft,ft=null):Mt=ft.sibling;var qt=q(M,ft,B[Ct],Y);if(qt===null){ft===null&&(ft=Mt);break}n&&ft&&qt.alternate===null&&i(M,ft),D=d(qt,D,Ct),jt===null?gt=qt:jt.sibling=qt,jt=qt,ft=Mt}if(Ct===B.length)return a(M,ft),kt&&Xi(M,Ct),gt;if(ft===null){for(;Ct<B.length;Ct++)ft=J(M,B[Ct],Y),ft!==null&&(D=d(ft,D,Ct),jt===null?gt=ft:jt.sibling=ft,jt=ft);return kt&&Xi(M,Ct),gt}for(ft=l(ft);Ct<B.length;Ct++)Mt=H(ft,M,Ct,B[Ct],Y),Mt!==null&&(n&&Mt.alternate!==null&&ft.delete(Mt.key===null?Ct:Mt.key),D=d(Mt,D,Ct),jt===null?gt=Mt:jt.sibling=Mt,jt=Mt);return n&&ft.forEach(function(Wr){return i(M,Wr)}),kt&&Xi(M,Ct),gt}function _t(M,D,B,Y){if(B==null)throw Error(r(151));for(var gt=null,jt=null,ft=D,Ct=D=0,Mt=null,qt=B.next();ft!==null&&!qt.done;Ct++,qt=B.next()){ft.index>Ct?(Mt=ft,ft=null):Mt=ft.sibling;var Wr=q(M,ft,qt.value,Y);if(Wr===null){ft===null&&(ft=Mt);break}n&&ft&&Wr.alternate===null&&i(M,ft),D=d(Wr,D,Ct),jt===null?gt=Wr:jt.sibling=Wr,jt=Wr,ft=Mt}if(qt.done)return a(M,ft),kt&&Xi(M,Ct),gt;if(ft===null){for(;!qt.done;Ct++,qt=B.next())qt=J(M,qt.value,Y),qt!==null&&(D=d(qt,D,Ct),jt===null?gt=qt:jt.sibling=qt,jt=qt);return kt&&Xi(M,Ct),gt}for(ft=l(ft);!qt.done;Ct++,qt=B.next())qt=H(ft,M,Ct,qt.value,Y),qt!==null&&(n&&qt.alternate!==null&&ft.delete(qt.key===null?Ct:qt.key),D=d(qt,D,Ct),jt===null?gt=qt:jt.sibling=qt,jt=qt);return n&&ft.forEach(function(Yw){return i(M,Yw)}),kt&&Xi(M,Ct),gt}function ne(M,D,B,Y){if(typeof B=="object"&&B!==null&&B.type===Q&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case L:t:{for(var gt=B.key;D!==null;){if(D.key===gt){if(gt=B.type,gt===Q){if(D.tag===7){a(M,D.sibling),Y=f(D,B.props.children),Y.return=M,M=Y;break t}}else if(D.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===w&&Ys(gt)===D.type){a(M,D.sibling),Y=f(D,B.props),Bl(Y,B),Y.return=M,M=Y;break t}a(M,D);break}else i(M,D);D=D.sibling}B.type===Q?(Y=Fs(B.props.children,M.mode,Y,B.key),Y.return=M,M=Y):(Y=qc(B.type,B.key,B.props,null,M.mode,Y),Bl(Y,B),Y.return=M,M=Y)}return _(M);case $:t:{for(gt=B.key;D!==null;){if(D.key===gt)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){a(M,D.sibling),Y=f(D,B.children||[]),Y.return=M,M=Y;break t}else{a(M,D);break}else i(M,D);D=D.sibling}Y=Dd(B,M.mode,Y),Y.return=M,M=Y}return _(M);case w:return B=Ys(B),ne(M,D,B,Y)}if(ke(B))return ut(M,D,B,Y);if(k(B)){if(gt=k(B),typeof gt!="function")throw Error(r(150));return B=gt.call(B),_t(M,D,B,Y)}if(typeof B.then=="function")return ne(M,D,Xc(B),Y);if(B.$$typeof===at)return ne(M,D,Gc(M,B),Y);$c(M,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,D!==null&&D.tag===6?(a(M,D.sibling),Y=f(D,B),Y.return=M,M=Y):(a(M,D),Y=Cd(B,M.mode,Y),Y.return=M,M=Y),_(M)):a(M,D)}return function(M,D,B,Y){try{zl=0;var gt=ne(M,D,B,Y);return eo=null,gt}catch(ft){if(ft===to||ft===Qc)throw ft;var jt=An(29,ft,null,M.mode);return jt.lanes=Y,jt.return=M,jt}finally{}}}var $s=i_(!0),r_=i_(!1),kr=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Lr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ur(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Gt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=jc(n),jy(n,null,a),i}return Bc(n,l,i,a),jc(n)}function jl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}function Hd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Gd=!1;function ql(){if(Gd){var n=Wa;if(n!==null)throw n}}function Fl(n,i,a,l){Gd=!1;var f=n.updateQueue;kr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var x=b,j=x.next;x.next=null,_===null?d=j:_.next=j,_=x;var G=n.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==_&&(b===null?G.firstBaseUpdate=j:b.next=j,G.lastBaseUpdate=x))}if(d!==null){var J=f.baseState;_=0,G=j=x=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(Ot&q)===q:(l&q)===q){q!==0&&q===Za&&(Gd=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var ut=n,_t=b;q=i;var ne=a;switch(_t.tag){case 1:if(ut=_t.payload,typeof ut=="function"){J=ut.call(ne,J,q);break t}J=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=_t.payload,q=typeof ut=="function"?ut.call(ne,J,q):ut,q==null)break t;J=T({},J,q);break t;case 2:kr=!0}}q=b.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(j=G=H,x=J):G=G.next=H,_|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;H=b,b=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);G===null&&(x=J),f.baseState=x,f.firstBaseUpdate=j,f.lastBaseUpdate=G,d===null&&(f.shared.lanes=0),Fr|=_,n.lanes=_,n.memoizedState=J}}function s_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function a_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)s_(a[n],i)}var no=V(null),Jc=V(0);function o_(n,i){n=ar,it(Jc,n),it(no,i),ar=n|i.baseLanes}function Kd(){it(Jc,ar),it(no,no.current)}function Qd(){ar=Jc.current,Z(no),Z(Jc)}var wn=V(null),Hn=null;function zr(n){var i=n.alternate;it(Te,Te.current&1),it(wn,n),Hn===null&&(i===null||no.current!==null||i.memoizedState!==null)&&(Hn=n)}function Yd(n){it(Te,Te.current),it(wn,n),Hn===null&&(Hn=n)}function l_(n){n.tag===22?(it(Te,Te.current),it(wn,n),Hn===null&&(Hn=n)):Br()}function Br(){it(Te,Te.current),it(wn,wn.current)}function In(n){Z(wn),Hn===n&&(Hn=null),Z(Te)}var Te=V(0);function Zc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||tg(a)||eg(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zi=0,It=null,te=null,De=null,Wc=!1,io=!1,Js=!1,th=0,Hl=0,ro=null,U1=0;function ge(){throw Error(r(321))}function Xd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function $d(n,i,a,l,f,d){return Zi=d,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?G_:hm,Js=!1,d=a(l,f),Js=!1,io&&(d=c_(i,a,l,f)),u_(n),d}function u_(n){K.H=Ql;var i=te!==null&&te.next!==null;if(Zi=0,De=te=It=null,Wc=!1,Hl=0,ro=null,i)throw Error(r(300));n===null||Ne||(n=n.dependencies,n!==null&&Hc(n)&&(Ne=!0))}function c_(n,i,a,l){It=n;var f=0;do{if(io&&(ro=null),Hl=0,io=!1,25<=f)throw Error(r(301));if(f+=1,De=te=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=K_,d=i(a,l)}while(io);return d}function z1(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Gl(i):i,n=n.useState()[0],(te!==null?te.memoizedState:null)!==n&&(It.flags|=1024),i}function Jd(){var n=th!==0;return th=0,n}function Zd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Wd(n){if(Wc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Wc=!1}Zi=0,De=te=It=null,io=!1,Hl=th=0,ro=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?It.memoizedState=De=n:De=De.next=n,De}function Ee(){if(te===null){var n=It.alternate;n=n!==null?n.memoizedState:null}else n=te.next;var i=De===null?It.memoizedState:De.next;if(i!==null)De=i,te=n;else{if(n===null)throw It.alternate===null?Error(r(467)):Error(r(310));te=n,n={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},De===null?It.memoizedState=De=n:De=De.next=n}return De}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(n){var i=Hl;return Hl+=1,ro===null&&(ro=[]),n=t_(ro,n,i),i=It,(De===null?i.memoizedState:De.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?G_:hm),n}function nh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Gl(n);if(n.$$typeof===at)return Xe(n)}throw Error(r(438,String(n)))}function tm(n){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=It.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=eh(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function Wi(n,i){return typeof i=="function"?i(n):i}function ih(n){var i=Ee();return em(i,te,n)}function em(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,x=null,j=i,G=!1;do{var J=j.lane&-536870913;if(J!==j.lane?(Ot&J)===J:(Zi&J)===J){var q=j.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),J===Za&&(G=!0);else if((Zi&q)===q){j=j.next,q===Za&&(G=!0);continue}else J={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},x===null?(b=x=J,_=d):x=x.next=J,It.lanes|=q,Fr|=q;J=j.action,Js&&a(d,J),d=j.hasEagerState?j.eagerState:a(d,J)}else q={lane:J,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},x===null?(b=x=q,_=d):x=x.next=q,It.lanes|=J,Fr|=J;j=j.next}while(j!==null&&j!==i);if(x===null?_=d:x.next=b,!Sn(d,n.memoizedState)&&(Ne=!0,G&&(a=Wa,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=x,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function nm(n){var i=Ee(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Sn(d,i.memoizedState)||(Ne=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function h_(n,i,a){var l=It,f=Ee(),d=kt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Sn((te||f).memoizedState,a);if(_&&(f.memoizedState=a,Ne=!0),f=f.queue,sm(m_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||De!==null&&De.memoizedState.tag&1){if(l.flags|=2048,so(9,{destroy:void 0},d_.bind(null,l,f,a,i),null),re===null)throw Error(r(349));d||(Zi&127)!==0||f_(l,i,a)}return a}function f_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=eh(),It.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function d_(n,i,a,l){i.value=a,i.getSnapshot=l,g_(i)&&p_(n)}function m_(n,i,a){return a(function(){g_(i)&&p_(n)})}function g_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function p_(n){var i=qs(n,2);i!==null&&_n(i,n,2)}function im(n){var i=cn();if(typeof n=="function"){var a=n;if(n=a(),Js){Mn(!0);try{a()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:n},i}function y_(n,i,a,l){return n.baseState=a,em(n,te,typeof l=="function"?l:Wi)}function B1(n,i,a,l,f){if(ah(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,__(i,d)):(d.next=a.next,i.pending=a.next=d)}}function __(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var b=a(f,l),x=K.S;x!==null&&x(_,b),v_(n,i,b)}catch(j){rm(n,i,j)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(f,l),v_(n,i,d)}catch(j){rm(n,i,j)}}function v_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){T_(n,i,l)},function(l){return rm(n,i,l)}):T_(n,i,a)}function T_(n,i,a){i.status="fulfilled",i.value=a,E_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,__(n,a)))}function rm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,E_(i),i=i.next;while(i!==l)}n.action=null}function E_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function b_(n,i){return i}function S_(n,i){if(kt){var a=re.formState;if(a!==null){t:{var l=It;if(kt){if(ae){e:{for(var f=ae,d=Fn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Gn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ae=Gn(f.nextSibling),l=f.data==="F!";break t}}Mr(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:b_,lastRenderedState:i},a.queue=l,a=q_.bind(null,It,l),l.dispatch=a,l=im(!1),d=cm.bind(null,It,!1,l.queue),l=cn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=B1.bind(null,It,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function A_(n){var i=Ee();return w_(i,te,n)}function w_(n,i,a){if(i=em(n,i,b_)[0],n=ih(Wi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Gl(i)}catch(_){throw _===to?Qc:_}else l=i;i=Ee();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(It.flags|=2048,so(9,{destroy:void 0},j1.bind(null,f,a),null)),[l,d,n]}function j1(n,i){n.action=i}function I_(n){var i=Ee(),a=te;if(a!==null)return w_(i,a,n);Ee(),i=i.memoizedState,a=Ee();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function so(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=It.updateQueue,i===null&&(i=eh(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function R_(){return Ee().memoizedState}function rh(n,i,a,l){var f=cn();It.flags|=n,f.memoizedState=so(1|i,{destroy:void 0},a,l===void 0?null:l)}function sh(n,i,a,l){var f=Ee();l=l===void 0?null:l;var d=f.memoizedState.inst;te!==null&&l!==null&&Xd(l,te.memoizedState.deps)?f.memoizedState=so(i,d,a,l):(It.flags|=n,f.memoizedState=so(1|i,d,a,l))}function x_(n,i){rh(8390656,8,n,i)}function sm(n,i){sh(2048,8,n,i)}function q1(n){It.flags|=4;var i=It.updateQueue;if(i===null)i=eh(),It.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function C_(n){var i=Ee().memoizedState;return q1({ref:i,nextImpl:n}),function(){if((Gt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function D_(n,i){return sh(4,2,n,i)}function N_(n,i){return sh(4,4,n,i)}function V_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function O_(n,i,a){a=a!=null?a.concat([n]):null,sh(4,4,V_.bind(null,i,n),a)}function am(){}function M_(n,i){var a=Ee();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Xd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function P_(n,i){var a=Ee();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Xd(i,l[1]))return l[0];if(l=n(),Js){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l}function om(n,i,a){return a===void 0||(Zi&1073741824)!==0&&(Ot&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=kv(),It.lanes|=n,Fr|=n,a)}function k_(n,i,a,l){return Sn(a,i)?a:no.current!==null?(n=om(n,a,l),Sn(n,i)||(Ne=!0),n):(Zi&42)===0||(Zi&1073741824)!==0&&(Ot&261930)===0?(Ne=!0,n.memoizedState=a):(n=kv(),It.lanes|=n,Fr|=n,i)}function L_(n,i,a,l,f){var d=nt.p;nt.p=d!==0&&8>d?d:8;var _=K.T,b={};K.T=b,cm(n,!1,i,a);try{var x=f(),j=K.S;if(j!==null&&j(b,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var G=L1(x,l);Kl(n,i,G,Cn(n))}else Kl(n,i,l,Cn(n))}catch(J){Kl(n,i,{then:function(){},status:"rejected",reason:J},Cn())}finally{nt.p=d,_!==null&&b.types!==null&&(_.types=b.types),K.T=_}}function F1(){}function lm(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=U_(n).queue;L_(n,f,i,yt,a===null?F1:function(){return z_(n),a(l)})}function U_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:yt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function z_(n){var i=U_(n);i.next===null&&(i=n.alternate.memoizedState),Kl(n,i.next.queue,{},Cn())}function um(){return Xe(uu)}function B_(){return Ee().memoizedState}function j_(){return Ee().memoizedState}function H1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Cn();n=Lr(a);var l=Ur(i,n,a);l!==null&&(_n(l,i,a),jl(l,i,a)),i={cache:Ud()},n.payload=i;return}i=i.return}}function G1(n,i,a){var l=Cn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ah(n)?F_(i,a):(a=Rd(n,i,a,l),a!==null&&(_n(a,n,l),H_(a,i,l)))}function q_(n,i,a){var l=Cn();Kl(n,i,a,l)}function Kl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ah(n))F_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,Sn(b,_))return Bc(n,i,f,0),re===null&&zc(),!1}catch{}finally{}if(a=Rd(n,i,f,l),a!==null)return _n(a,n,l),H_(a,i,l),!0}return!1}function cm(n,i,a,l){if(l={lane:2,revertLane:qm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ah(n)){if(i)throw Error(r(479))}else i=Rd(n,a,l,2),i!==null&&_n(i,n,2)}function ah(n){var i=n.alternate;return n===It||i!==null&&i===It}function F_(n,i){io=Wc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function H_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}var Ql={readContext:Xe,use:nh,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge};Ql.useEffectEvent=ge;var G_={readContext:Xe,use:nh,useCallback:function(n,i){return cn().memoizedState=[n,i===void 0?null:i],n},useContext:Xe,useEffect:x_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,rh(4194308,4,V_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return rh(4194308,4,n,i)},useInsertionEffect:function(n,i){rh(4,2,n,i)},useMemo:function(n,i){var a=cn();i=i===void 0?null:i;var l=n();if(Js){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=cn();if(a!==void 0){var f=a(i);if(Js){Mn(!0);try{a(i)}finally{Mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=G1.bind(null,It,n),[l.memoizedState,n]},useRef:function(n){var i=cn();return n={current:n},i.memoizedState=n},useState:function(n){n=im(n);var i=n.queue,a=q_.bind(null,It,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:am,useDeferredValue:function(n,i){var a=cn();return om(a,n,i)},useTransition:function(){var n=im(!1);return n=L_.bind(null,It,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=It,f=cn();if(kt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),re===null)throw Error(r(349));(Ot&127)!==0||f_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,x_(m_.bind(null,l,d,n),[n]),l.flags|=2048,so(9,{destroy:void 0},d_.bind(null,l,d,a,i),null),a},useId:function(){var n=cn(),i=re.identifierPrefix;if(kt){var a=Di,l=Ci;a=(l&~(1<<32-_e(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=th++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=U1++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:um,useFormState:S_,useActionState:S_,useOptimistic:function(n){var i=cn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=cm.bind(null,It,!0,a),a.dispatch=i,[n,i]},useMemoCache:tm,useCacheRefresh:function(){return cn().memoizedState=H1.bind(null,It)},useEffectEvent:function(n){var i=cn(),a={impl:n};return i.memoizedState=a,function(){if((Gt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},hm={readContext:Xe,use:nh,useCallback:M_,useContext:Xe,useEffect:sm,useImperativeHandle:O_,useInsertionEffect:D_,useLayoutEffect:N_,useMemo:P_,useReducer:ih,useRef:R_,useState:function(){return ih(Wi)},useDebugValue:am,useDeferredValue:function(n,i){var a=Ee();return k_(a,te.memoizedState,n,i)},useTransition:function(){var n=ih(Wi)[0],i=Ee().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:h_,useId:B_,useHostTransitionStatus:um,useFormState:A_,useActionState:A_,useOptimistic:function(n,i){var a=Ee();return y_(a,te,n,i)},useMemoCache:tm,useCacheRefresh:j_};hm.useEffectEvent=C_;var K_={readContext:Xe,use:nh,useCallback:M_,useContext:Xe,useEffect:sm,useImperativeHandle:O_,useInsertionEffect:D_,useLayoutEffect:N_,useMemo:P_,useReducer:nm,useRef:R_,useState:function(){return nm(Wi)},useDebugValue:am,useDeferredValue:function(n,i){var a=Ee();return te===null?om(a,n,i):k_(a,te.memoizedState,n,i)},useTransition:function(){var n=nm(Wi)[0],i=Ee().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:h_,useId:B_,useHostTransitionStatus:um,useFormState:I_,useActionState:I_,useOptimistic:function(n,i){var a=Ee();return te!==null?y_(a,te,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:tm,useCacheRefresh:j_};K_.useEffectEvent=C_;function fm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var dm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Cn(),f=Lr(l);f.payload=i,a!=null&&(f.callback=a),i=Ur(n,f,l),i!==null&&(_n(i,n,l),jl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Cn(),f=Lr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ur(n,f,l),i!==null&&(_n(i,n,l),jl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Cn(),l=Lr(a);l.tag=2,i!=null&&(l.callback=i),i=Ur(n,l,a),i!==null&&(_n(i,n,a),jl(i,n,a))}};function Q_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Ol(a,l)||!Ol(f,d):!0}function Y_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&dm.enqueueReplaceState(i,i.state,null)}function Zs(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function X_(n){Uc(n)}function $_(n){console.error(n)}function J_(n){Uc(n)}function oh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Z_(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mm(n,i,a){return a=Lr(a),a.tag=3,a.payload={element:null},a.callback=function(){oh(n,i)},a}function W_(n){return n=Lr(n),n.tag=3,n}function tv(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Z_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Z_(i,a,l),typeof f!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function K1(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ja(i,a,f,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?vh():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Yc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),zm(n,l,f)),!1;case 22:return a.flags|=65536,l===Yc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),zm(n,l,f)),!1}throw Error(r(435,a.tag))}return zm(n,l,f),vh(),!1}if(kt)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Od&&(n=Error(r(422),{cause:l}),kl(Bn(n,a)))):(l!==Od&&(i=Error(r(423),{cause:l}),kl(Bn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Bn(l,a),f=mm(n.stateNode,l,f),Hd(n,f),pe!==4&&(pe=2)),!1;var d=Error(r(520),{cause:l});if(d=Bn(d,a),eu===null?eu=[d]:eu.push(d),pe!==4&&(pe=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=mm(a.stateNode,l,n),Hd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hr===null||!Hr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=W_(f),tv(f,n,a,l),Hd(a,f),!1}a=a.return}while(a!==null);return!1}var gm=Error(r(461)),Ne=!1;function $e(n,i,a,l){i.child=n===null?r_(i,null,a,l):$s(i,n.child,a,l)}function ev(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Ks(i),l=$d(n,i,a,_,d,f),b=Jd(),n!==null&&!Ne?(Zd(n,i,f),tr(n,i,f)):(kt&&b&&Nd(i),i.flags|=1,$e(n,i,l,f),i.child)}function nv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!xd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,iv(n,i,d,l,f)):(n=qc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Sm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ol,a(_,l)&&n.ref===i.ref)return tr(n,i,f)}return i.flags|=1,n=Yi(d,l),n.ref=i.ref,n.return=i,i.child=n}function iv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Ol(d,l)&&n.ref===i.ref)if(Ne=!1,i.pendingProps=l=d,Sm(n,f))(n.flags&131072)!==0&&(Ne=!0);else return i.lanes=n.lanes,tr(n,i,f)}return pm(n,i,a,l,f)}function rv(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return sv(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Kc(i,d!==null?d.cachePool:null),d!==null?o_(i,d):Kd(),l_(i);else return l=i.lanes=536870912,sv(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Kc(i,d.cachePool),o_(i,d),Br(),i.memoizedState=null):(n!==null&&Kc(i,null),Kd(),Br());return $e(n,i,f,a),i.child}function Yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function sv(n,i,a,l,f){var d=Bd();return d=d===null?null:{parent:Ce._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Kc(i,null),Kd(),l_(i),n!==null&&Ja(n,i,l,!0),i.childLanes=f,null}function lh(n,i){return i=ch({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function av(n,i,a){return $s(i,n.child,null,a),n=lh(i,i.pendingProps),n.flags|=2,In(i),i.memoizedState=null,n}function Q1(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(kt){if(l.mode==="hidden")return n=lh(i,l),i.lanes=536870912,Yl(null,n);if(Yd(i),(n=ae)?(n=_0(n,Fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Vr!==null?{id:Ci,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=Fy(n),a.return=i,i.child=a,Ye=i,ae=null)):n=null,n===null)throw Mr(i);return i.lanes=536870912,null}return lh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Yd(i),f)if(i.flags&256)i.flags&=-257,i=av(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ne||Ja(n,i,a,!1),f=(a&n.childLanes)!==0,Ne||f){if(l=re,l!==null&&(_=gl(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,qs(n,_),_n(l,n,_),gm;vh(),i=av(n,i,a)}else n=d.treeContext,ae=Gn(_.nextSibling),Ye=i,kt=!0,Or=null,Fn=!1,n!==null&&Ky(i,n),i=lh(i,l),i.flags|=4096;return i}return n=Yi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function uh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function pm(n,i,a,l,f){return Ks(i),a=$d(n,i,a,l,void 0,f),l=Jd(),n!==null&&!Ne?(Zd(n,i,f),tr(n,i,f)):(kt&&l&&Nd(i),i.flags|=1,$e(n,i,a,f),i.child)}function ov(n,i,a,l,f,d){return Ks(i),i.updateQueue=null,a=c_(i,l,a,f),u_(n),l=Jd(),n!==null&&!Ne?(Zd(n,i,d),tr(n,i,d)):(kt&&l&&Nd(i),i.flags|=1,$e(n,i,a,d),i.child)}function lv(n,i,a,l,f){if(Ks(i),i.stateNode===null){var d=Qa,_=a.contextType;typeof _=="object"&&_!==null&&(d=Xe(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=dm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},qd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Xe(_):Qa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(fm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&dm.enqueueReplaceState(d,d.state,null),Fl(i,l,d,f),ql(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,x=Zs(a,b);d.props=x;var j=d.context,G=a.contextType;_=Qa,typeof G=="object"&&G!==null&&(_=Xe(G));var J=a.getDerivedStateFromProps;G=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||j!==_)&&Y_(i,d,l,_),kr=!1;var q=i.memoizedState;d.state=q,Fl(i,l,d,f),ql(),j=i.memoizedState,b||q!==j||kr?(typeof J=="function"&&(fm(i,a,J,l),j=i.memoizedState),(x=kr||Q_(i,a,x,l,q,j,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=j),d.props=l,d.state=j,d.context=_,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Fd(n,i),_=i.memoizedProps,G=Zs(a,_),d.props=G,J=i.pendingProps,q=d.context,j=a.contextType,x=Qa,typeof j=="object"&&j!==null&&(x=Xe(j)),b=a.getDerivedStateFromProps,(j=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==J||q!==x)&&Y_(i,d,l,x),kr=!1,q=i.memoizedState,d.state=q,Fl(i,l,d,f),ql();var H=i.memoizedState;_!==J||q!==H||kr||n!==null&&n.dependencies!==null&&Hc(n.dependencies)?(typeof b=="function"&&(fm(i,a,b,l),H=i.memoizedState),(G=kr||Q_(i,a,G,l,q,H,x)||n!==null&&n.dependencies!==null&&Hc(n.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=x,l=G):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,uh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=$s(i,n.child,null,f),i.child=$s(i,null,a,f)):$e(n,i,a,f),i.memoizedState=d.state,n=i.child):n=tr(n,i,f),n}function uv(n,i,a,l){return Hs(),i.flags|=256,$e(n,i,a,l),i.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _m(n){return{baseLanes:n,cachePool:Zy()}}function vm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=xn),n}function cv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Te.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(kt){if(f?zr(i):Br(),(n=ae)?(n=_0(n,Fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Vr!==null?{id:Ci,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=Fy(n),a.return=i,i.child=a,Ye=i,ae=null)):n=null,n===null)throw Mr(i);return eg(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Br(),f=i.mode,b=ch({mode:"hidden",children:b},f),l=Fs(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=_m(a),l.childLanes=vm(n,_,a),i.memoizedState=ym,Yl(null,l)):(zr(i),Tm(i,b))}var x=n.memoizedState;if(x!==null&&(b=x.dehydrated,b!==null)){if(d)i.flags&256?(zr(i),i.flags&=-257,i=Em(n,i,a)):i.memoizedState!==null?(Br(),i.child=n.child,i.flags|=128,i=null):(Br(),b=l.fallback,f=i.mode,l=ch({mode:"visible",children:l.children},f),b=Fs(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,$s(i,n.child,null,a),l=i.child,l.memoizedState=_m(a),l.childLanes=vm(n,_,a),i.memoizedState=ym,i=Yl(null,l));else if(zr(i),eg(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var j=_.dgst;_=j,l=Error(r(419)),l.stack="",l.digest=_,kl({value:l,source:null,stack:null}),i=Em(n,i,a)}else if(Ne||Ja(n,i,a,!1),_=(a&n.childLanes)!==0,Ne||_){if(_=re,_!==null&&(l=gl(_,a),l!==0&&l!==x.retryLane))throw x.retryLane=l,qs(n,l),_n(_,n,l),gm;tg(b)||vh(),i=Em(n,i,a)}else tg(b)?(i.flags|=192,i.child=n.child,i=null):(n=x.treeContext,ae=Gn(b.nextSibling),Ye=i,kt=!0,Or=null,Fn=!1,n!==null&&Ky(i,n),i=Tm(i,l.children),i.flags|=4096);return i}return f?(Br(),b=l.fallback,f=i.mode,x=n.child,j=x.sibling,l=Yi(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,j!==null?b=Yi(j,b):(b=Fs(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Yl(null,l),l=i.child,b=n.child.memoizedState,b===null?b=_m(a):(f=b.cachePool,f!==null?(x=Ce._currentValue,f=f.parent!==x?{parent:x,pool:x}:f):f=Zy(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=vm(n,_,a),i.memoizedState=ym,Yl(n.child,l)):(zr(i),a=n.child,n=a.sibling,a=Yi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Tm(n,i){return i=ch({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function ch(n,i){return n=An(22,n,null,i),n.lanes=0,n}function Em(n,i,a){return $s(i,n.child,null,a),n=Tm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function hv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),kd(n.return,i,a)}function bm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function fv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Te.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,it(Te,_),$e(n,i,l,a),l=kt?Pl:0,!b&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hv(n,a,i);else if(n.tag===19)hv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Zc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),bm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Zc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}bm(i,!0,a,null,d,l);break;case"together":bm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function tr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Fr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Ja(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Yi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Yi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Sm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Hc(n)))}function Y1(n,i,a){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),Pr(i,Ce,n.memoizedState.cache),Hs();break;case 27:case 5:As(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:Pr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Yd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(zr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?cv(n,i,a):(zr(i),n=tr(n,i,a),n!==null?n.sibling:null);zr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ja(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return fv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),it(Te,Te.current),l)break;return null;case 22:return i.lanes=0,rv(n,i,a,i.pendingProps);case 24:Pr(i,Ce,n.memoizedState.cache)}return tr(n,i,a)}function dv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ne=!0;else{if(!Sm(n,a)&&(i.flags&128)===0)return Ne=!1,Y1(n,i,a);Ne=(n.flags&131072)!==0}else Ne=!1,kt&&(i.flags&1048576)!==0&&Gy(i,Pl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(n=Ys(i.elementType),i.type=n,typeof n=="function")xd(n)?(l=Zs(n,l),i.tag=1,i=lv(null,i,n,l,a)):(i.tag=0,i=pm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===St){i.tag=11,i=ev(null,i,n,l,a);break t}else if(f===I){i.tag=14,i=nv(null,i,n,l,a);break t}}throw i=le(n)||n,Error(r(306,i,""))}}return i;case 0:return pm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Zs(l,i.pendingProps),lv(n,i,l,f,a);case 3:t:{if(Le(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Fd(n,i),Fl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Pr(i,Ce,l),l!==d.cache&&Ld(i,[Ce],a,!0),ql(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=uv(n,i,l,a);break t}else if(l!==f){f=Bn(Error(r(424)),i),kl(f),i=uv(n,i,l,a);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ae=Gn(n.firstChild),Ye=i,kt=!0,Or=null,Fn=!0,a=r_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Hs(),l===f){i=tr(n,i,a);break t}$e(n,i,l,a)}i=i.child}return i;case 26:return uh(n,i),n===null?(a=A0(i.type,null,i.pendingProps,null))?i.memoizedState=a:kt||(a=i.type,n=i.pendingProps,l=Ih(xt.current).createElement(a),l[Ie]=i,l[qe]=n,Je(l,a,n),Re(l),i.stateNode=l):i.memoizedState=A0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return As(i),n===null&&kt&&(l=i.stateNode=E0(i.type,i.pendingProps,xt.current),Ye=i,Fn=!0,f=ae,Yr(i.type)?(ng=f,ae=Gn(l.firstChild)):ae=f),$e(n,i,i.pendingProps.children,a),uh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&kt&&((f=l=ae)&&(l=Aw(l,i.type,i.pendingProps,Fn),l!==null?(i.stateNode=l,Ye=i,ae=Gn(l.firstChild),Fn=!1,f=!0):f=!1),f||Mr(i)),As(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Jm(f,d)?l=null:_!==null&&Jm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=$d(n,i,z1,null,null,a),uu._currentValue=f),uh(n,i),$e(n,i,l,a),i.child;case 6:return n===null&&kt&&((n=a=ae)&&(a=ww(a,i.pendingProps,Fn),a!==null?(i.stateNode=a,Ye=i,ae=null,n=!0):n=!1),n||Mr(i)),null;case 13:return cv(n,i,a);case 4:return Le(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=$s(i,null,l,a):$e(n,i,l,a),i.child;case 11:return ev(n,i,i.type,i.pendingProps,a);case 7:return $e(n,i,i.pendingProps,a),i.child;case 8:return $e(n,i,i.pendingProps.children,a),i.child;case 12:return $e(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Pr(i,i.type,l.value),$e(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ks(i),f=Xe(f),l=l(f),i.flags|=1,$e(n,i,l,a),i.child;case 14:return nv(n,i,i.type,i.pendingProps,a);case 15:return iv(n,i,i.type,i.pendingProps,a);case 19:return fv(n,i,a);case 31:return Q1(n,i,a);case 22:return rv(n,i,a,i.pendingProps);case 24:return Ks(i),l=Xe(Ce),n===null?(f=Bd(),f===null&&(f=re,d=Ud(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},qd(i),Pr(i,Ce,f)):((n.lanes&a)!==0&&(Fd(n,i),Fl(i,null,null,a),ql()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Pr(i,Ce,l)):(l=d.cache,Pr(i,Ce,l),l!==f.cache&&Ld(i,[Ce],a,!0))),$e(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function er(n){n.flags|=4}function Am(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Bv())n.flags|=8192;else throw Xs=Yc,jd}else n.flags&=-16777217}function mv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!C0(i))if(Bv())n.flags|=8192;else throw Xs=Yc,jd}function hh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?yc():536870912,n.lanes|=i,uo|=i)}function Xl(n,i){if(!kt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function oe(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function X1(n,i,a){var l=i.pendingProps;switch(Vd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(i),null;case 1:return oe(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(Ce),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&($a(i)?er(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Md())),oe(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(er(i),d!==null?(oe(i),mv(i,d)):(oe(i),Am(i,f,null,l,a))):d?d!==n.memoizedState?(er(i),oe(i),mv(i,d)):(oe(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&er(i),oe(i),Am(i,f,n,l,a)),null;case 27:if(xa(i),a=xt.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}n=ot.current,$a(i)?Qy(i):(n=E0(f,l,a),i.stateNode=n,er(i))}return oe(i),null;case 5:if(xa(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}if(d=ot.current,$a(i))Qy(i);else{var _=Ih(xt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Ie]=i,d[qe]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(Je(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&er(i)}}return oe(i),Am(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=xt.current,$a(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Ye,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ie]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||c0(n.nodeValue,a)),n||Mr(i,!0)}else n=Ih(n).createTextNode(l),n[Ie]=i,i.stateNode=n}return oe(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=$a(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ie]=i}else Hs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),n=!1}else a=Md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(r(558))}return oe(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=$a(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ie]=i}else Hs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),f=!1}else f=Md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),hh(i,i.updateQueue),oe(i),null);case 4:return ue(),n===null&&Km(i.stateNode.containerInfo),oe(i),null;case 10:return Ji(i.type),oe(i),null;case 19:if(Z(Te),l=i.memoizedState,l===null)return oe(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Xl(l,!1);else{if(pe!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=Zc(n),d!==null){for(i.flags|=128,Xl(l,!1),n=d.updateQueue,i.updateQueue=n,hh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)qy(a,n),a=a.sibling;return it(Te,Te.current&1|2),kt&&Xi(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&ln()>ph&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304)}else{if(!f)if(n=Zc(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,hh(i,n),Xl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!kt)return oe(i),null}else 2*ln()-l.renderingStartTime>ph&&a!==536870912&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=ln(),n.sibling=null,a=Te.current,it(Te,f?a&1|2:a&1),kt&&Xi(i,l.treeForkCount),n):(oe(i),null);case 22:case 23:return In(i),Qd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(oe(i),i.subtreeFlags&6&&(i.flags|=8192)):oe(i),a=i.updateQueue,a!==null&&hh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&Z(Qs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(Ce),oe(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function $1(n,i){switch(Vd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ji(Ce),ue(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return xa(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(r(340));Hs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(In(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Hs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Z(Te),null;case 4:return ue(),null;case 10:return Ji(i.type),null;case 22:case 23:return In(i),Qd(),n!==null&&Z(Qs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ji(Ce),null;case 25:return null;default:return null}}function gv(n,i){switch(Vd(i),i.tag){case 3:Ji(Ce),ue();break;case 26:case 27:case 5:xa(i);break;case 4:ue();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:Z(Te);break;case 10:Ji(i.type);break;case 22:case 23:In(i),Qd(),n!==null&&Z(Qs);break;case 24:Ji(Ce)}}function $l(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){$t(i,i.return,b)}}function jr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var x=a,j=b;try{j()}catch(G){$t(f,x,G)}}}l=l.next}while(l!==d)}}catch(G){$t(i,i.return,G)}}function pv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{a_(i,a)}catch(l){$t(n,n.return,l)}}}function yv(n,i,a){a.props=Zs(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){$t(n,i,l)}}function Jl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){$t(n,i,f)}}function Ni(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){$t(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){$t(n,i,f)}else a.current=null}function _v(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){$t(n,n.return,f)}}function wm(n,i,a){try{var l=n.stateNode;_w(l,n.type,a,i),l[qe]=i}catch(f){$t(n,n.return,f)}}function vv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Yr(n.type)||n.tag===4}function Im(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||vv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Yr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wn));else if(l!==4&&(l===27&&Yr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Rm(n,i,a),n=n.sibling;n!==null;)Rm(n,i,a),n=n.sibling}function fh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Yr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(fh(n,i,a),n=n.sibling;n!==null;)fh(n,i,a),n=n.sibling}function Tv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Je(i,l,a),i[Ie]=n,i[qe]=a}catch(d){$t(n,n.return,d)}}var nr=!1,Ve=!1,xm=!1,Ev=typeof WeakSet=="function"?WeakSet:Set,He=null;function J1(n,i){if(n=n.containerInfo,Xm=Oh,n=Oy(n),Ed(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,b=-1,x=-1,j=0,G=0,J=n,q=null;e:for(;;){for(var H;J!==a||f!==0&&J.nodeType!==3||(b=_+f),J!==d||l!==0&&J.nodeType!==3||(x=_+l),J.nodeType===3&&(_+=J.nodeValue.length),(H=J.firstChild)!==null;)q=J,J=H;for(;;){if(J===n)break e;if(q===a&&++j===f&&(b=_),q===d&&++G===l&&(x=_),(H=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=H}a=b===-1||x===-1?null:{start:b,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for($m={focusedElem:n,selectionRange:a},Oh=!1,He=i;He!==null;)if(i=He,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,He=n;else for(;He!==null;){switch(i=He,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ut=Zs(a.type,f);n=l.getSnapshotBeforeUpdate(ut,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(_t){$t(a,a.return,_t)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Wm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,He=n;break}He=i.return}}function bv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rr(n,a),l&4&&$l(5,a);break;case 1:if(rr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){$t(a,a.return,_)}else{var f=Zs(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){$t(a,a.return,_)}}l&64&&pv(a),l&512&&Jl(a,a.return);break;case 3:if(rr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{a_(n,i)}catch(_){$t(a,a.return,_)}}break;case 27:i===null&&l&4&&Tv(a);case 26:case 5:rr(n,a),i===null&&l&4&&_v(a),l&512&&Jl(a,a.return);break;case 12:rr(n,a);break;case 31:rr(n,a),l&4&&wv(n,a);break;case 13:rr(n,a),l&4&&Iv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=aw.bind(null,a),Iw(n,a))));break;case 22:if(l=a.memoizedState!==null||nr,!l){i=i!==null&&i.memoizedState!==null||Ve,f=nr;var d=Ve;nr=l,(Ve=i)&&!d?sr(n,a,(a.subtreeFlags&8772)!==0):rr(n,a),nr=f,Ve=d}break;case 30:break;default:rr(n,a)}}function Sv(n){var i=n.alternate;i!==null&&(n.alternate=null,Sv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Oa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var he=null,mn=!1;function ir(n,i,a){for(a=a.child;a!==null;)Av(n,i,a),a=a.sibling}function Av(n,i,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:Ve||Ni(a,i),ir(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ve||Ni(a,i);var l=he,f=mn;Yr(a.type)&&(he=a.stateNode,mn=!1),ir(n,i,a),au(a.stateNode),he=l,mn=f;break;case 5:Ve||Ni(a,i);case 6:if(l=he,f=mn,he=null,ir(n,i,a),he=l,mn=f,he!==null)if(mn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(d){$t(a,i,d)}else try{he.removeChild(a.stateNode)}catch(d){$t(a,i,d)}break;case 18:he!==null&&(mn?(n=he,p0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),_o(n)):p0(he,a.stateNode));break;case 4:l=he,f=mn,he=a.stateNode.containerInfo,mn=!0,ir(n,i,a),he=l,mn=f;break;case 0:case 11:case 14:case 15:jr(2,a,i),Ve||jr(4,a,i),ir(n,i,a);break;case 1:Ve||(Ni(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&yv(a,i,l)),ir(n,i,a);break;case 21:ir(n,i,a);break;case 22:Ve=(l=Ve)||a.memoizedState!==null,ir(n,i,a),Ve=l;break;default:ir(n,i,a)}}function wv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_o(n)}catch(a){$t(i,i.return,a)}}}function Iv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_o(n)}catch(a){$t(i,i.return,a)}}function Z1(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Ev),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Ev),i;default:throw Error(r(435,n.tag))}}function dh(n,i){var a=Z1(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=ow.bind(null,n,l);l.then(f,f)}})}function gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Yr(b.type)){he=b.stateNode,mn=!1;break t}break;case 5:he=b.stateNode,mn=!1;break t;case 3:case 4:he=b.stateNode.containerInfo,mn=!0;break t}b=b.return}if(he===null)throw Error(r(160));Av(d,_,f),he=null,mn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Rv(i,n),i=i.sibling}var si=null;function Rv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),l&4&&(jr(3,n,n.return),$l(3,n),jr(5,n,n.return));break;case 1:gn(i,n),pn(n),l&512&&(Ve||a===null||Ni(a,a.return)),l&64&&nr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=si;if(gn(i,n),pn(n),l&512&&(Ve||a===null||Ni(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[yi]||d[Ie]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Je(d,l,a),d[Ie]=n,Re(d),l=d;break t;case"link":var _=R0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(l),Je(d,l,a),f.head.appendChild(d);break;case"meta":if(_=R0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break e}}d=f.createElement(l),Je(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ie]=n,Re(d),l=d}n.stateNode=l}else x0(f,n.type,n.stateNode);else n.stateNode=I0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?x0(f,n.type,n.stateNode):I0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&wm(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(i,n),pn(n),l&512&&(Ve||a===null||Ni(a,a.return)),a!==null&&l&4&&wm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,n),pn(n),l&512&&(Ve||a===null||Ni(a,a.return)),n.flags&32){f=n.stateNode;try{dn(f,"")}catch(ut){$t(n,n.return,ut)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,wm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(xm=!0);break;case 6:if(gn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ut){$t(n,n.return,ut)}}break;case 3:if(Ch=null,f=si,si=Rh(i.containerInfo),gn(i,n),si=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{_o(i.containerInfo)}catch(ut){$t(n,n.return,ut)}xm&&(xm=!1,xv(n));break;case 4:l=si,si=Rh(n.stateNode.containerInfo),gn(i,n),pn(n),si=l;break;case 12:gn(i,n),pn(n);break;case 31:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gh=ln()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 22:f=n.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,j=nr,G=Ve;if(nr=j||f,Ve=G||x,gn(i,n),Ve=G,nr=j,pn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||x||nr||Ve||Ws(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=x.stateNode;var J=x.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ut){$t(x,x.return,ut)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(ut){$t(x,x.return,ut)}}}else if(i.tag===18){if(a===null){x=i;try{var H=x.stateNode;f?y0(H,!0):y0(x.stateNode,!1)}catch(ut){$t(x,x.return,ut)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dh(n,a))));break;case 19:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(vv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Im(n);fh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(dn(_,""),a.flags&=-33);var b=Im(n);fh(n,b,_);break;case 3:case 4:var x=a.stateNode.containerInfo,j=Im(n);Rm(n,j,x);break;default:throw Error(r(161))}}catch(G){$t(n,n.return,G)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function xv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;xv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function rr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)bv(n,i.alternate,i),i=i.sibling}function Ws(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:jr(4,i,i.return),Ws(i);break;case 1:Ni(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&yv(i,i.return,a),Ws(i);break;case 27:au(i.stateNode);case 26:case 5:Ni(i,i.return),Ws(i);break;case 22:i.memoizedState===null&&Ws(i);break;case 30:Ws(i);break;default:Ws(i)}n=n.sibling}}function sr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:sr(f,d,a),$l(4,d);break;case 1:if(sr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){$t(l,l.return,j)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)s_(x[f],b)}catch(j){$t(l,l.return,j)}}a&&_&64&&pv(d),Jl(d,d.return);break;case 27:Tv(d);case 26:case 5:sr(f,d,a),a&&l===null&&_&4&&_v(d),Jl(d,d.return);break;case 12:sr(f,d,a);break;case 31:sr(f,d,a),a&&_&4&&wv(f,d);break;case 13:sr(f,d,a),a&&_&4&&Iv(f,d);break;case 22:d.memoizedState===null&&sr(f,d,a),Jl(d,d.return);break;case 30:break;default:sr(f,d,a)}i=i.sibling}}function Cm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ll(a))}function Dm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n))}function ai(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Cv(n,i,a,l),i=i.sibling}function Cv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ai(n,i,a,l),f&2048&&$l(9,i);break;case 1:ai(n,i,a,l);break;case 3:ai(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n)));break;case 12:if(f&2048){ai(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){$t(i,i.return,x)}}else ai(n,i,a,l);break;case 31:ai(n,i,a,l);break;case 13:ai(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ai(n,i,a,l):Zl(n,i):d._visibility&2?ai(n,i,a,l):(d._visibility|=2,ao(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Cm(_,i);break;case 24:ai(n,i,a,l),f&2048&&Dm(i.alternate,i);break;default:ai(n,i,a,l)}}function ao(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,x=l,j=_.flags;switch(_.tag){case 0:case 11:case 15:ao(d,_,b,x,f),$l(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?ao(d,_,b,x,f):Zl(d,_):(G._visibility|=2,ao(d,_,b,x,f)),f&&j&2048&&Cm(_.alternate,_);break;case 24:ao(d,_,b,x,f),f&&j&2048&&Dm(_.alternate,_);break;default:ao(d,_,b,x,f)}i=i.sibling}}function Zl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Zl(a,l),f&2048&&Cm(l.alternate,l);break;case 24:Zl(a,l),f&2048&&Dm(l.alternate,l);break;default:Zl(a,l)}i=i.sibling}}var Wl=8192;function oo(n,i,a){if(n.subtreeFlags&Wl)for(n=n.child;n!==null;)Dv(n,i,a),n=n.sibling}function Dv(n,i,a){switch(n.tag){case 26:oo(n,i,a),n.flags&Wl&&n.memoizedState!==null&&Uw(a,si,n.memoizedState,n.memoizedProps);break;case 5:oo(n,i,a);break;case 3:case 4:var l=si;si=Rh(n.stateNode.containerInfo),oo(n,i,a),si=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Wl,Wl=16777216,oo(n,i,a),Wl=l):oo(n,i,a));break;default:oo(n,i,a)}}function Nv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function tu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,Ov(l,n)}Nv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Vv(n),n=n.sibling}function Vv(n){switch(n.tag){case 0:case 11:case 15:tu(n),n.flags&2048&&jr(9,n,n.return);break;case 3:tu(n);break;case 12:tu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,mh(n)):tu(n);break;default:tu(n)}}function mh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,Ov(l,n)}Nv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:jr(8,i,i.return),mh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,mh(i));break;default:mh(i)}n=n.sibling}}function Ov(n,i){for(;He!==null;){var a=He;switch(a.tag){case 0:case 11:case 15:jr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,He=l;else t:for(a=n;He!==null;){l=He;var f=l.sibling,d=l.return;if(Sv(l),l===a){He=null;break t}if(f!==null){f.return=d,He=f;break t}He=d}}}var W1={getCacheForType:function(n){var i=Xe(Ce),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Xe(Ce).controller.signal}},tw=typeof WeakMap=="function"?WeakMap:Map,Gt=0,re=null,Nt=null,Ot=0,Xt=0,Rn=null,qr=!1,lo=!1,Nm=!1,ar=0,pe=0,Fr=0,ta=0,Vm=0,xn=0,uo=0,eu=null,yn=null,Om=!1,gh=0,Mv=0,ph=1/0,yh=null,Hr=null,ze=0,Gr=null,co=null,or=0,Mm=0,Pm=null,Pv=null,nu=0,km=null;function Cn(){return(Gt&2)!==0&&Ot!==0?Ot&-Ot:K.T!==null?qm():_c()}function kv(){if(xn===0)if((Ot&536870912)===0||kt){var n=Rs;Rs<<=1,(Rs&3932160)===0&&(Rs=262144),xn=n}else xn=536870912;return n=wn.current,n!==null&&(n.flags|=32),xn}function _n(n,i,a){(n===re&&(Xt===2||Xt===9)||n.cancelPendingCommit!==null)&&(ho(n,0),Kr(n,Ot,xn,!1)),xs(n,a),((Gt&2)===0||n!==re)&&(n===re&&((Gt&2)===0&&(ta|=a),pe===4&&Kr(n,Ot,xn,!1)),Vi(n))}function Lv(n,i,a){if((Gt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||$n(n,i),f=l?iw(n,i):Um(n,i,!0),d=l;do{if(f===0){lo&&!l&&Kr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!ew(a)){f=Um(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var b=n;f=eu;var x=b.current.memoizedState.isDehydrated;if(x&&(ho(b,_).flags|=256),_=Um(b,_,!1),_!==2){if(Nm&&!x){b.errorRecoveryDisabledLanes|=d,ta|=d,f=4;break t}d=yn,yn=f,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){ho(n,0),Kr(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Kr(l,i,xn,!qr);break t;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=gh+300-ln(),10<f)){if(Kr(l,i,xn,!qr),mi(l,0,!0)!==0)break t;or=i,l.timeoutHandle=m0(Uv.bind(null,l,a,yn,yh,Om,i,xn,ta,uo,qr,d,"Throttled",-0,0),f);break t}Uv(l,a,yn,yh,Om,i,xn,ta,uo,qr,d,null,-0,0)}}break}while(!0);Vi(n)}function Uv(n,i,a,l,f,d,_,b,x,j,G,J,q,H){if(n.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},Dv(i,d,J);var ut=(d&62914560)===d?gh-ln():(d&4194048)===d?Mv-ln():0;if(ut=zw(J,ut),ut!==null){or=d,n.cancelPendingCommit=ut(Kv.bind(null,n,i,d,a,l,f,_,b,x,G,J,null,q,H)),Kr(n,d,_,!j);return}}Kv(n,i,d,a,l,f,_,b,x)}function ew(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Kr(n,i,a,l){i&=~Vm,i&=~ta,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-_e(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Cs(n,a,i)}function _h(){return(Gt&6)===0?(iu(0),!1):!0}function Lm(){if(Nt!==null){if(Xt===0)var n=Nt.return;else n=Nt,$i=Gs=null,Wd(n),eo=null,zl=0,n=Nt;for(;n!==null;)gv(n.alternate,n),n=n.return;Nt=null}}function ho(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Ew(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),or=0,Lm(),re=n,Nt=a=Yi(n.current,null),Ot=i,Xt=0,Rn=null,qr=!1,lo=$n(n,i),Nm=!1,uo=xn=Vm=ta=Fr=pe=0,yn=eu=null,Om=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-_e(l),d=1<<f;i|=n[f],l&=~d}return ar=i,zc(),a}function zv(n,i){It=null,K.H=Ql,i===to||i===Qc?(i=e_(),Xt=3):i===jd?(i=e_(),Xt=4):Xt=i===gm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Nt===null&&(pe=1,oh(n,Bn(i,n.current)))}function Bv(){var n=wn.current;return n===null?!0:(Ot&4194048)===Ot?Hn===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?n===Hn:!1}function jv(){var n=K.H;return K.H=Ql,n===null?Ql:n}function qv(){var n=K.A;return K.A=W1,n}function vh(){pe=4,qr||(Ot&4194048)!==Ot&&wn.current!==null||(lo=!0),(Fr&134217727)===0&&(ta&134217727)===0||re===null||Kr(re,Ot,xn,!1)}function Um(n,i,a){var l=Gt;Gt|=2;var f=jv(),d=qv();(re!==n||Ot!==i)&&(yh=null,ho(n,i)),i=!1;var _=pe;t:do try{if(Xt!==0&&Nt!==null){var b=Nt,x=Rn;switch(Xt){case 8:Lm(),_=6;break t;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var j=Xt;if(Xt=0,Rn=null,fo(n,b,x,j),a&&lo){_=0;break t}break;default:j=Xt,Xt=0,Rn=null,fo(n,b,x,j)}}nw(),_=pe;break}catch(G){zv(n,G)}while(!0);return i&&n.shellSuspendCounter++,$i=Gs=null,Gt=l,K.H=f,K.A=d,Nt===null&&(re=null,Ot=0,zc()),_}function nw(){for(;Nt!==null;)Fv(Nt)}function iw(n,i){var a=Gt;Gt|=2;var l=jv(),f=qv();re!==n||Ot!==i?(yh=null,ph=ln()+500,ho(n,i)):lo=$n(n,i);t:do try{if(Xt!==0&&Nt!==null){i=Nt;var d=Rn;e:switch(Xt){case 1:Xt=0,Rn=null,fo(n,i,d,1);break;case 2:case 9:if(Wy(d)){Xt=0,Rn=null,Hv(i);break}i=function(){Xt!==2&&Xt!==9||re!==n||(Xt=7),Vi(n)},d.then(i,i);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:Wy(d)?(Xt=0,Rn=null,Hv(i)):(Xt=0,Rn=null,fo(n,i,d,7));break;case 5:var _=null;switch(Nt.tag){case 26:_=Nt.memoizedState;case 5:case 27:var b=Nt;if(_?C0(_):b.stateNode.complete){Xt=0,Rn=null;var x=b.sibling;if(x!==null)Nt=x;else{var j=b.return;j!==null?(Nt=j,Th(j)):Nt=null}break e}}Xt=0,Rn=null,fo(n,i,d,5);break;case 6:Xt=0,Rn=null,fo(n,i,d,6);break;case 8:Lm(),pe=6;break t;default:throw Error(r(462))}}rw();break}catch(G){zv(n,G)}while(!0);return $i=Gs=null,K.H=l,K.A=f,Gt=a,Nt!==null?0:(re=null,Ot=0,zc(),pe)}function rw(){for(;Nt!==null&&!md();)Fv(Nt)}function Fv(n){var i=dv(n.alternate,n,ar);n.memoizedProps=n.pendingProps,i===null?Th(n):Nt=i}function Hv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=ov(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=ov(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:Wd(i);default:gv(a,i),i=Nt=qy(i,ar),i=dv(a,i,ar)}n.memoizedProps=n.pendingProps,i===null?Th(n):Nt=i}function fo(n,i,a,l){$i=Gs=null,Wd(i),eo=null,zl=0;var f=i.return;try{if(K1(n,f,i,a,Ot)){pe=1,oh(n,Bn(a,n.current)),Nt=null;return}}catch(d){if(f!==null)throw Nt=f,d;pe=1,oh(n,Bn(a,n.current)),Nt=null;return}i.flags&32768?(kt||l===1?n=!0:lo||(Ot&536870912)!==0?n=!1:(qr=n=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Gv(i,n)):Th(i)}function Th(n){var i=n;do{if((i.flags&32768)!==0){Gv(i,qr);return}n=i.return;var a=X1(i.alternate,i,ar);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);pe===0&&(pe=5)}function Gv(n,i){do{var a=$1(n.alternate,n);if(a!==null){a.flags&=32767,Nt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Nt=n;return}Nt=n=a}while(n!==null);pe=6,Nt=null}function Kv(n,i,a,l,f,d,_,b,x){n.cancelPendingCommit=null;do Eh();while(ze!==0);if((Gt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Id,yd(n,a,d,_,b,x),n===re&&(Nt=re=null,Ot=0),co=i,Gr=n,or=a,Mm=d,Pm=f,Pv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,lw(br,function(){return Jv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=nt.p,nt.p=2,_=Gt,Gt|=4;try{J1(n,i,a)}finally{Gt=_,nt.p=f,K.T=l}}ze=1,Qv(),Yv(),Xv()}}function Qv(){if(ze===1){ze=0;var n=Gr,i=co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=nt.p;nt.p=2;var f=Gt;Gt|=4;try{Rv(i,n);var d=$m,_=Oy(n.containerInfo),b=d.focusedElem,x=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Vy(b.ownerDocument.documentElement,b)){if(x!==null&&Ed(b)){var j=x.start,G=x.end;if(G===void 0&&(G=j),"selectionStart"in b)b.selectionStart=j,b.selectionEnd=Math.min(G,b.value.length);else{var J=b.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var H=q.getSelection(),ut=b.textContent.length,_t=Math.min(x.start,ut),ne=x.end===void 0?_t:Math.min(x.end,ut);!H.extend&&_t>ne&&(_=ne,ne=_t,_t=_);var M=Ny(b,_t),D=Ny(b,ne);if(M&&D&&(H.rangeCount!==1||H.anchorNode!==M.node||H.anchorOffset!==M.offset||H.focusNode!==D.node||H.focusOffset!==D.offset)){var B=J.createRange();B.setStart(M.node,M.offset),H.removeAllRanges(),_t>ne?(H.addRange(B),H.extend(D.node,D.offset)):(B.setEnd(D.node,D.offset),H.addRange(B))}}}}for(J=[],H=b;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var Y=J[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Oh=!!Xm,$m=Xm=null}finally{Gt=f,nt.p=l,K.T=a}}n.current=i,ze=2}}function Yv(){if(ze===2){ze=0;var n=Gr,i=co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=nt.p;nt.p=2;var f=Gt;Gt|=4;try{bv(n,i.alternate,i)}finally{Gt=f,nt.p=l,K.T=a}}ze=3}}function Xv(){if(ze===4||ze===3){ze=0,hc();var n=Gr,i=co,a=or,l=Pv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,co=Gr=null,$v(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Hr=null),Hi(a),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=nt.p,nt.p=2,K.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{K.T=i,nt.p=f}}(or&3)!==0&&Eh(),Vi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===km?nu++:(nu=0,km=n):nu=0,iu(0)}}function $v(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ll(i)))}function Eh(){return Qv(),Yv(),Xv(),Jv()}function Jv(){if(ze!==5)return!1;var n=Gr,i=Mm;Mm=0;var a=Hi(or),l=K.T,f=nt.p;try{nt.p=32>a?32:a,K.T=null,a=Pm,Pm=null;var d=Gr,_=or;if(ze=0,co=Gr=null,or=0,(Gt&6)!==0)throw Error(r(331));var b=Gt;if(Gt|=4,Vv(d.current),Cv(d,d.current,_,a),Gt=b,iu(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Xn,d)}catch{}return!0}finally{nt.p=f,K.T=l,$v(n,i)}}function Zv(n,i,a){i=Bn(a,i),i=mm(n.stateNode,i,2),n=Ur(n,i,2),n!==null&&(xs(n,2),Vi(n))}function $t(n,i,a){if(n.tag===3)Zv(n,n,a);else for(;i!==null;){if(i.tag===3){Zv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Hr===null||!Hr.has(l))){n=Bn(a,n),a=W_(2),l=Ur(i,a,2),l!==null&&(tv(a,l,i,n),xs(l,2),Vi(l));break}}i=i.return}}function zm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new tw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Nm=!0,f.add(a),n=sw.bind(null,n,i,a),i.then(n,n))}function sw(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,re===n&&(Ot&a)===a&&(pe===4||pe===3&&(Ot&62914560)===Ot&&300>ln()-gh?(Gt&2)===0&&ho(n,0):Vm|=a,uo===Ot&&(uo=0)),Vi(n)}function Wv(n,i){i===0&&(i=yc()),n=qs(n,i),n!==null&&(xs(n,i),Vi(n))}function aw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Wv(n,a)}function ow(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Wv(n,a)}function lw(n,i){return Ue(n,i)}var bh=null,mo=null,Bm=!1,Sh=!1,jm=!1,Qr=0;function Vi(n){n!==mo&&n.next===null&&(mo===null?bh=mo=n:mo=mo.next=n),Sh=!0,Bm||(Bm=!0,cw())}function iu(n,i){if(!jm&&Sh){jm=!0;do for(var a=!1,l=bh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-_e(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,i0(l,d))}else d=Ot,d=mi(l,l===re?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(a=!0,i0(l,d));l=l.next}while(a);jm=!1}}function uw(){t0()}function t0(){Sh=Bm=!1;var n=0;Qr!==0&&Tw()&&(n=Qr);for(var i=ln(),a=null,l=bh;l!==null;){var f=l.next,d=e0(l,i);d===0?(l.next=null,a===null?bh=f:a.next=f,f===null&&(mo=a)):(a=l,(n!==0||(d&3)!==0)&&(Sh=!0)),l=f}ze!==0&&ze!==5||iu(n),Qr!==0&&(Qr=0)}function e0(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-_e(d),b=1<<_,x=f[_];x===-1?((b&a)===0||(b&l)!==0)&&(f[_]=pd(b,i)):x<=i&&(n.expiredLanes|=b),d&=~b}if(i=re,a=Ot,a=mi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Xt===2||Xt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Er(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||$n(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Er(l),Hi(a)){case 2:case 8:a=dl;break;case 32:a=br;break;case 268435456:a=fc;break;default:a=br}return l=n0.bind(null,n),a=Ue(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Er(l),n.callbackPriority=2,n.callbackNode=null,2}function n0(n,i){if(ze!==0&&ze!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Eh()&&n.callbackNode!==a)return null;var l=Ot;return l=mi(n,n===re?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Lv(n,l,i),e0(n,ln()),n.callbackNode!=null&&n.callbackNode===a?n0.bind(null,n):null)}function i0(n,i){if(Eh())return null;Lv(n,i,!0)}function cw(){bw(function(){(Gt&6)!==0?Ue(fl,uw):t0()})}function qm(){if(Qr===0){var n=Za;n===0&&(n=fi,fi<<=1,(fi&261888)===0&&(fi=256)),Qr=n}return Qr}function r0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:La(""+n)}function s0(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function hw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=r0((f[qe]||null).action),_=l.submitter;_&&(i=(i=_[qe]||null)?r0(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new wi("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qr!==0){var x=_?s0(f,_):new FormData(f);lm(a,{pending:!0,data:x,method:f.method,action:d},null,x)}}else typeof d=="function"&&(b.preventDefault(),x=_?s0(f,_):new FormData(f),lm(a,{pending:!0,data:x,method:f.method,action:d},d,x))},currentTarget:f}]})}}for(var Fm=0;Fm<wd.length;Fm++){var Hm=wd[Fm],fw=Hm.toLowerCase(),dw=Hm[0].toUpperCase()+Hm.slice(1);ri(fw,"on"+dw)}ri(ky,"onAnimationEnd"),ri(Ly,"onAnimationIteration"),ri(Uy,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(C1,"onTransitionRun"),ri(D1,"onTransitionStart"),ri(N1,"onTransitionCancel"),ri(zy,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function a0(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],x=b.instance,j=b.currentTarget;if(b=b.listener,x!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=j;try{d(f)}catch(G){Uc(G)}f.currentTarget=null,d=x}else for(_=0;_<l.length;_++){if(b=l[_],x=b.instance,j=b.currentTarget,b=b.listener,x!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=j;try{d(f)}catch(G){Uc(G)}f.currentTarget=null,d=x}}}}function Vt(n,i){var a=i[Va];a===void 0&&(a=i[Va]=new Set);var l=n+"__bubble";a.has(l)||(o0(i,n,2,!1),a.add(l))}function Gm(n,i,a){var l=0;i&&(l|=4),o0(a,n,l,i)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Km(n){if(!n[Ah]){n[Ah]=!0,pl.forEach(function(a){a!=="selectionchange"&&(mw.has(a)||Gm(a,!1,n),Gm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ah]||(i[Ah]=!0,Gm("selectionchange",!1,i))}}function o0(n,i,a,l){switch(k0(i)){case 2:var f=qw;break;case 8:f=Fw;break;default:f=og}a=f.bind(null,i,a,n),f=void 0,!Ms||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Qm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=_i(b),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){l=d=_;continue t}b=b.parentNode}}l=l.return}xr(function(){var j=d,G=kn(a),J=[];t:{var q=By.get(n);if(q!==void 0){var H=wi,ut=n;switch(n){case"keypress":if(ks(a)===0)break t;case"keydown":case"keyup":H=Pc;break;case"focusin":ut="focus",H=Us;break;case"focusout":ut="blur",H=Us;break;case"beforeblur":case"afterblur":H=Us;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=y;break;case ky:case Ly:case Uy:H=xc;break;case zy:H=S;break;case"scroll":case"scrollend":H=xl;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Qi;break;case"toggle":case"beforetoggle":H=wt}var _t=(i&4)!==0,ne=!_t&&(n==="scroll"||n==="scrollend"),M=_t?q!==null?q+"Capture":null:q;_t=[];for(var D=j,B;D!==null;){var Y=D;if(B=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||B===null||M===null||(Y=ti(D,M),Y!=null&&_t.push(su(D,Y,B))),ne)break;D=D.return}0<_t.length&&(q=new H(q,ut,null,a,G),J.push({event:q,listeners:_t}))}}if((i&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==wl&&(ut=a.relatedTarget||a.fromElement)&&(_i(ut)||ut[pi]))break t;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ut=a.relatedTarget||a.toElement,H=j,ut=ut?_i(ut):null,ut!==null&&(ne=u(ut),_t=ut.tag,ut!==ne||_t!==5&&_t!==27&&_t!==6)&&(ut=null)):(H=null,ut=j),H!==ut)){if(_t=Cl,Y="onMouseLeave",M="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(_t=Qi,Y="onPointerLeave",M="onPointerEnter",D="pointer"),ne=H==null?q:En(H),B=ut==null?q:En(ut),q=new _t(Y,D+"leave",H,a,G),q.target=ne,q.relatedTarget=B,Y=null,_i(G)===j&&(_t=new _t(M,D+"enter",ut,a,G),_t.target=B,_t.relatedTarget=ne,Y=_t),ne=Y,H&&ut)e:{for(_t=gw,M=H,D=ut,B=0,Y=M;Y;Y=_t(Y))B++;Y=0;for(var gt=D;gt;gt=_t(gt))Y++;for(;0<B-Y;)M=_t(M),B--;for(;0<Y-B;)D=_t(D),Y--;for(;B--;){if(M===D||D!==null&&M===D.alternate){_t=M;break e}M=_t(M),D=_t(D)}_t=null}else _t=null;H!==null&&l0(J,q,H,_t,!1),ut!==null&&ne!==null&&l0(J,ne,ut,_t,!0)}}t:{if(q=j?En(j):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var jt=wy;else if(Sy(q))if(Iy)jt=I1;else{jt=A1;var ft=S1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&ka(j.elementType)&&(jt=wy):jt=w1;if(jt&&(jt=jt(n,j))){Ay(J,jt,a,G);break t}ft&&ft(n,q,j),n==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&bl(q,"number",q.value)}switch(ft=j?En(j):window,n){case"focusin":(Sy(ft)||ft.contentEditable==="true")&&(Ha=ft,bd=j,Ml=null);break;case"focusout":Ml=bd=Ha=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,My(J,a,G);break;case"selectionchange":if(x1)break;case"keydown":case"keyup":My(J,a,G)}var Ct;if(Ht)t:{switch(n){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Fa?zs(n,a)&&(Mt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(xi&&a.locale!=="ko"&&(Fa||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Fa&&(Ct=Rl()):(Ai=G,Il="value"in Ai?Ai.value:Ai.textContent,Fa=!0)),ft=wh(j,Mt),0<ft.length&&(Mt=new Ri(Mt,n,null,a,G),J.push({event:Mt,listeners:ft}),Ct?Mt.data=Ct:(Ct=qa(a),Ct!==null&&(Mt.data=Ct)))),(Ct=Un?v1(n,a):T1(n,a))&&(Mt=wh(j,"onBeforeInput"),0<Mt.length&&(ft=new Ri("onBeforeInput","beforeinput",null,a,G),J.push({event:ft,listeners:Mt}),ft.data=Ct)),hw(J,n,j,a,G)}a0(J,i)})}function su(n,i,a){return{instance:n,listener:i,currentTarget:a}}function wh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ti(n,a),f!=null&&l.unshift(su(n,f,d)),f=ti(n,i),f!=null&&l.push(su(n,f,d))),n.tag===3)return l;n=n.return}return[]}function gw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function l0(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,x=b.alternate,j=b.stateNode;if(b=b.tag,x!==null&&x===l)break;b!==5&&b!==26&&b!==27||j===null||(x=j,f?(j=ti(a,d),j!=null&&_.unshift(su(a,j,x))):f||(j=ti(a,d),j!=null&&_.push(su(a,j,x)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var pw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function u0(n){return(typeof n=="string"?n:""+n).replace(pw,`
`).replace(yw,"")}function c0(n,i){return i=u0(i),u0(n)===i}function ee(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||dn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&dn(n,""+l);break;case"className":bn(n,"class",l);break;case"tabIndex":bn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(n,a,l);break;case"style":Al(n,l,d);break;case"data":if(i!=="object"){bn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ee(n,i,"name",f.name,f,null),ee(n,i,"formEncType",f.formEncType,f,null),ee(n,i,"formMethod",f.formMethod,f,null),ee(n,i,"formTarget",f.formTarget,f,null)):(ee(n,i,"encType",f.encType,f,null),ee(n,i,"method",f.method,f,null),ee(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"onScroll":l!=null&&Vt("scroll",n);break;case"onScrollEnd":l!=null&&Vt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=La(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Vt("beforetoggle",n),Vt("toggle",n),Ma(n,"popover",l);break;case"xlinkActuate":xe(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xe(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xe(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xe(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xe(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xe(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xe(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xe(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xe(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ma(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wc.get(a)||a,Ma(n,a,l))}}function Ym(n,i,a,l,f,d){switch(a){case"style":Al(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?dn(n,l):(typeof l=="number"||typeof l=="bigint")&&dn(n,""+l);break;case"onScroll":l!=null&&Vt("scroll",n);break;case"onScrollEnd":l!=null&&Vt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[qe]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ma(n,a,l)}}}function Je(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",n),Vt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,d,_,a,null)}}f&&ee(n,i,"srcSet",a.srcSet,a,null),l&&ee(n,i,"src",a.src,a,null);return;case"input":Vt("invalid",n);var b=d=_=f=null,x=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":f=G;break;case"type":_=G;break;case"checked":x=G;break;case"defaultChecked":j=G;break;case"value":d=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:ee(n,i,l,G,a,null)}}bc(n,d,b,x,j,_,f,!1);return;case"select":Vt("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:ee(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?Ar(n,!!l,i,!1):a!=null&&Ar(n,!!l,a,!0);return;case"textarea":Vt("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:ee(n,i,_,b,a,null)}wr(n,l,f,d);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ee(n,i,x,l,a,null)}return;case"dialog":Vt("beforetoggle",n),Vt("toggle",n),Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":Vt("load",n);break;case"video":case"audio":for(l=0;l<ru.length;l++)Vt(ru[l],n);break;case"image":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"embed":case"source":case"link":Vt("error",n),Vt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,j,l,a,null)}return;default:if(ka(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&Ym(n,i,G,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ee(n,i,b,l,a,null))}function _w(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,x=null,j=null,G=null;for(H in a){var J=a[H];if(a.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":x=J;default:l.hasOwnProperty(H)||ee(n,i,H,null,l,J)}}for(var q in l){var H=l[q];if(J=a[q],l.hasOwnProperty(q)&&(H!=null||J!=null))switch(q){case"type":d=H;break;case"name":f=H;break;case"checked":j=H;break;case"defaultChecked":G=H;break;case"value":_=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==J&&ee(n,i,q,H,l,J)}}Pa(n,_,b,x,j,G,d,f);return;case"select":H=_=b=q=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":H=x;default:l.hasOwnProperty(d)||ee(n,i,d,null,l,x)}for(f in l)if(d=l[f],x=a[f],l.hasOwnProperty(f)&&(d!=null||x!=null))switch(f){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==x&&ee(n,i,f,d,l,x)}i=b,a=_,l=H,q!=null?Ar(n,!!a,q,!1):!!l!=!!a&&(i!=null?Ar(n,!!a,i,!0):Ar(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ee(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ee(n,i,_,f,l,d)}Sc(n,q,H);return;case"option":for(var ut in a)if(q=a[ut],a.hasOwnProperty(ut)&&q!=null&&!l.hasOwnProperty(ut))switch(ut){case"selected":n.selected=!1;break;default:ee(n,i,ut,null,l,q)}for(x in l)if(q=l[x],H=a[x],l.hasOwnProperty(x)&&q!==H&&(q!=null||H!=null))switch(x){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ee(n,i,x,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in a)q=a[_t],a.hasOwnProperty(_t)&&q!=null&&!l.hasOwnProperty(_t)&&ee(n,i,_t,null,l,q);for(j in l)if(q=l[j],H=a[j],l.hasOwnProperty(j)&&q!==H&&(q!=null||H!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:ee(n,i,j,q,l,H)}return;default:if(ka(i)){for(var ne in a)q=a[ne],a.hasOwnProperty(ne)&&q!==void 0&&!l.hasOwnProperty(ne)&&Ym(n,i,ne,void 0,l,q);for(G in l)q=l[G],H=a[G],!l.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||Ym(n,i,G,q,l,H);return}}for(var M in a)q=a[M],a.hasOwnProperty(M)&&q!=null&&!l.hasOwnProperty(M)&&ee(n,i,M,null,l,q);for(J in l)q=l[J],H=a[J],!l.hasOwnProperty(J)||q===H||q==null&&H==null||ee(n,i,J,q,l,H)}function h0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&h0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var x=a[l],j=x.startTime;if(j>b)break;var G=x.transferSize,J=x.initiatorType;G&&h0(J)&&(x=x.responseEnd,_+=G*(x<b?1:(b-j)/(x-j)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xm=null,$m=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function f0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Zm=null;function Tw(){var n=window.event;return n&&n.type==="popstate"?n===Zm?!1:(Zm=n,!0):(Zm=null,!1)}var m0=typeof setTimeout=="function"?setTimeout:void 0,Ew=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(n){return g0.resolve(null).then(n).catch(Sw)}:m0;function Sw(n){setTimeout(function(){throw n})}function Yr(n){return n==="head"}function p0(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),_o(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")au(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,au(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[yi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&au(n.ownerDocument.body);a=f}while(a);_o(i)}function y0(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Wm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wm(a),Oa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Aw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[yi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Gn(n.nextSibling),n===null)break}return null}function ww(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Gn(n.nextSibling),n===null))return null;return n}function _0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Gn(n.nextSibling),n===null))return null;return n}function tg(n){return n.data==="$?"||n.data==="$~"}function eg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Iw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Gn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ng=null;function v0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Gn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function T0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function E0(n,i,a){switch(i=Ih(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function au(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Oa(n)}var Kn=new Map,b0=new Set;function Rh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var lr=nt.d;nt.d={f:Rw,r:xw,D:Cw,C:Dw,L:Nw,m:Vw,X:Mw,S:Ow,M:Pw};function Rw(){var n=lr.f(),i=_h();return n||i}function xw(n){var i=Pn(n);i!==null&&i.tag===5&&i.type==="form"?z_(i):lr.r(n)}var go=typeof document>"u"?null:document;function S0(n,i,a){var l=go;if(l&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),b0.has(f)||(b0.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Je(i,"link",n),Re(i),l.head.appendChild(i)))}}function Cw(n){lr.D(n),S0("dns-prefetch",n,null)}function Dw(n,i){lr.C(n,i),S0("preconnect",n,i)}function Nw(n,i,a){lr.L(n,i,a);var l=go;if(l&&n&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(n)+'"]';var d=f;switch(i){case"style":d=po(n);break;case"script":d=yo(n)}Kn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Kn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(ou(d))||i==="script"&&l.querySelector(lu(d))||(i=l.createElement("link"),Je(i,"link",n),Re(i),l.head.appendChild(i)))}}function Vw(n,i){lr.m(n,i);var a=go;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=yo(n)}if(!Kn.has(d)&&(n=T({rel:"modulepreload",href:n},i),Kn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(lu(d)))return}l=a.createElement("link"),Je(l,"link",n),Re(l),a.head.appendChild(l)}}}function Ow(n,i,a){lr.S(n,i,a);var l=go;if(l&&n){var f=vi(l).hoistableStyles,d=po(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(ou(d)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Kn.get(d))&&ig(n,a);var x=_=l.createElement("link");Re(x),Je(x,"link",n),x._p=new Promise(function(j,G){x.onload=j,x.onerror=G}),x.addEventListener("load",function(){b.loading|=1}),x.addEventListener("error",function(){b.loading|=2}),b.loading|=4,xh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function Mw(n,i){lr.X(n,i);var a=go;if(a&&n){var l=vi(a).hoistableScripts,f=yo(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=T({src:n,async:!0},i),(i=Kn.get(f))&&rg(n,i),d=a.createElement("script"),Re(d),Je(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Pw(n,i){lr.M(n,i);var a=go;if(a&&n){var l=vi(a).hoistableScripts,f=yo(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=Kn.get(f))&&rg(n,i),d=a.createElement("script"),Re(d),Je(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function A0(n,i,a,l){var f=(f=xt.current)?Rh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=po(a.href),a=vi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=po(a.href);var d=vi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(ou(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Kn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(n,a),d||kw(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yo(a),a=vi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function po(n){return'href="'+fn(n)+'"'}function ou(n){return'link[rel="stylesheet"]['+n+"]"}function w0(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function kw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Je(i,"link",a),Re(i),n.head.appendChild(i))}function yo(n){return'[src="'+fn(n)+'"]'}function lu(n){return"script[async]"+n}function I0(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,Re(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Re(l),Je(l,"style",f),xh(l,a.precedence,n),i.instance=l;case"stylesheet":f=po(a.href);var d=n.querySelector(ou(f));if(d)return i.state.loading|=4,i.instance=d,Re(d),d;l=w0(a),(f=Kn.get(f))&&ig(l,f),d=(n.ownerDocument||n).createElement("link"),Re(d);var _=d;return _._p=new Promise(function(b,x){_.onload=b,_.onerror=x}),Je(d,"link",l),i.state.loading|=4,xh(d,a.precedence,n),i.instance=d;case"script":return d=yo(a.src),(f=n.querySelector(lu(d)))?(i.instance=f,Re(f),f):(l=a,(f=Kn.get(d))&&(l=T({},a),rg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Re(f),Je(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,xh(l,a.precedence,n));return i.instance}function xh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function ig(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function rg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ch=null;function R0(n,i,a){if(Ch===null){var l=new Map,f=Ch=new Map;f.set(a,l)}else f=Ch,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[yi]||d[Ie]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function x0(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Lw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function C0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Uw(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=po(l.href),d=i.querySelector(ou(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Dh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Re(d);return}d=i.ownerDocument||i,l=w0(l),(f=Kn.get(f))&&ig(l,f),d=d.createElement("link"),Re(d);var _=d;_._p=new Promise(function(b,x){_.onload=b,_.onerror=x}),Je(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Dh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var sg=0;function zw(n,i){return n.stylesheets&&n.count===0&&Vh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Vh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&sg===0&&(sg=62500*vw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Vh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>sg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Dh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Nh=null;function Vh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Nh=new Map,i.forEach(Bw,n),Nh=null,Dh.call(n))}function Bw(n,i){if(!(i.state.loading&4)){var a=Nh.get(n);if(a)var l=a.get(null);else{a=new Map,Nh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Dh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var uu={$$typeof:at,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function jw(n,i,a,l,f,d,_,b,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function D0(n,i,a,l,f,d,_,b,x,j,G,J){return n=new jw(n,i,a,_,x,j,G,J,b),i=1,d===!0&&(i|=24),d=An(3,null,null,i),n.current=d,d.stateNode=n,i=Ud(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},qd(d),n}function N0(n){return n?(n=Qa,n):Qa}function V0(n,i,a,l,f,d){f=N0(f),l.context===null?l.context=f:l.pendingContext=f,l=Lr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ur(n,l,i),a!==null&&(_n(a,n,i),jl(a,n,i))}function O0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ag(n,i){O0(n,i),(n=n.alternate)&&O0(n,i)}function M0(n){if(n.tag===13||n.tag===31){var i=qs(n,67108864);i!==null&&_n(i,n,67108864),ag(n,67108864)}}function P0(n){if(n.tag===13||n.tag===31){var i=Cn();i=Ds(i);var a=qs(n,i);a!==null&&_n(a,n,i),ag(n,i)}}var Oh=!0;function qw(n,i,a,l){var f=K.T;K.T=null;var d=nt.p;try{nt.p=2,og(n,i,a,l)}finally{nt.p=d,K.T=f}}function Fw(n,i,a,l){var f=K.T;K.T=null;var d=nt.p;try{nt.p=8,og(n,i,a,l)}finally{nt.p=d,K.T=f}}function og(n,i,a,l){if(Oh){var f=lg(l);if(f===null)Qm(n,i,l,Mh,a),L0(n,l);else if(Gw(f,n,i,a,l))l.stopPropagation();else if(L0(n,l),i&4&&-1<Hw.indexOf(n)){for(;f!==null;){var d=Pn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=di(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var x=1<<31-_e(_);b.entanglements[1]|=x,_&=~x}Vi(d),(Gt&6)===0&&(ph=ln()+500,iu(0))}}break;case 31:case 13:b=qs(d,2),b!==null&&_n(b,d,2),_h(),ag(d,2)}if(d=lg(l),d===null&&Qm(n,i,l,Mh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Qm(n,i,l,null,a)}}function lg(n){return n=kn(n),ug(n)}var Mh=null;function ug(n){if(Mh=null,n=_i(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Mh=n,null}function k0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Is()){case fl:return 2;case dl:return 8;case br:case gd:return 32;case fc:return 268435456;default:return 32}default:return 32}}var cg=!1,Xr=null,$r=null,Jr=null,cu=new Map,hu=new Map,Zr=[],Hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L0(n,i){switch(n){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(i.pointerId)}}function fu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Pn(i),i!==null&&M0(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Gw(n,i,a,l,f){switch(i){case"focusin":return Xr=fu(Xr,n,i,a,l,f),!0;case"dragenter":return $r=fu($r,n,i,a,l,f),!0;case"mouseover":return Jr=fu(Jr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return cu.set(d,fu(cu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,hu.set(d,fu(hu.get(d)||null,n,i,a,l,f)),!0}return!1}function U0(n){var i=_i(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){P0(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){P0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ph(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=lg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);wl=l,a.target.dispatchEvent(l),wl=null}else return i=Pn(a),i!==null&&M0(i),n.blockedOn=a,!1;i.shift()}return!0}function z0(n,i,a){Ph(n)&&a.delete(i)}function Kw(){cg=!1,Xr!==null&&Ph(Xr)&&(Xr=null),$r!==null&&Ph($r)&&($r=null),Jr!==null&&Ph(Jr)&&(Jr=null),cu.forEach(z0),hu.forEach(z0)}function kh(n,i){n.blockedOn===i&&(n.blockedOn=null,cg||(cg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Kw)))}var Lh=null;function B0(n){Lh!==n&&(Lh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Lh===n&&(Lh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(ug(l||a)===null)continue;break}var d=Pn(a);d!==null&&(n.splice(i,3),i-=3,lm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function _o(n){function i(x){return kh(x,n)}Xr!==null&&kh(Xr,n),$r!==null&&kh($r,n),Jr!==null&&kh(Jr,n),cu.forEach(i),hu.forEach(i);for(var a=0;a<Zr.length;a++){var l=Zr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Zr.length&&(a=Zr[0],a.blockedOn===null);)U0(a),a.blockedOn===null&&Zr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qe]||null;if(typeof d=="function")_||B0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qe]||null)b=_.formAction;else if(ug(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),B0(a)}}}function j0(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function hg(n){this._internalRoot=n}Uh.prototype.render=hg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Cn();V0(a,l,n,i,null,null)},Uh.prototype.unmount=hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;V0(n.current,2,null,n,null,null),_h(),i[pi]=null}};function Uh(n){this._internalRoot=n}Uh.prototype.unstable_scheduleHydration=function(n){if(n){var i=_c();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Zr.length&&i!==0&&i<Zr[a].priority;a++);Zr.splice(a,0,n),a===0&&U0(n)}};var q0=t.version;if(q0!=="19.2.3")throw Error(r(527,q0,"19.2.3"));nt.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var Qw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{Xn=zh.inject(Qw),Ke=zh}catch{}}return mu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=X_,d=$_,_=J_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=D0(n,1,!1,null,null,a,l,null,f,d,_,j0),n[pi]=i.current,Km(n),new hg(i)},mu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=X_,_=$_,b=J_,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=D0(n,1,!0,i,a??null,l,f,x,d,_,b,j0),i.context=N0(null),a=i.current,l=Cn(),l=Ds(l),f=Lr(l),f.callback=null,Ur(a,f,l),a=l,i.current.lanes=a,xs(i,a),Vi(i),n[pi]=i.current,Km(n),new Uh(i)},mu.version="19.2.3",mu}var Z0;function iI(){if(Z0)return mg.exports;Z0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),mg.exports=nI(),mg.exports}var rI=iI();const sI=()=>{};var W0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},aI=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],c=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],c=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},WE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,L=p&63;g||(L=64,c||(A=64)),r.push(e[E],e[T],e[A],e[L])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(ZE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):aI(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const p=o<s.length?e[s.charAt(o)]:64;++o;const T=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new oI;const A=u<<2|m>>4;if(r.push(A),p!==64){const L=m<<4&240|p>>2;if(r.push(L),T!==64){const $=p<<6&192|T;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class oI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lI=function(s){const t=ZE(s);return WE.encodeByteArray(t,!0)},tb=function(s){return lI(s).replace(/\./g,"")},eb=function(s){try{return WE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=()=>nb().__FIREBASE_DEFAULTS__,cI=()=>{if(typeof process>"u"||typeof W0>"u")return;const s=W0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&eb(s[1]);return t&&JSON.parse(t)},Lf=()=>{try{return sI()||uI()||cI()||hI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},fI=s=>{var t,e;return(e=(t=Lf())==null?void 0:t.emulatorHosts)==null?void 0:e[s]},ib=()=>{var s;return(s=Lf())==null?void 0:s.config},rb=s=>{var t;return(t=Lf())==null?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sb(s){return(await fetch(s,{credentials:"include"})).ok}const wu={};function mI(){const s={prod:[],emulator:[]};for(const t of Object.keys(wu))wu[t]?s.emulator.push(t):s.prod.push(t);return s}function gI(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let tT=!1;function pI(s,t){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||wu[s]===t||wu[s]||tT)return;wu[s]=t;function e(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=mI().prod.length>0;function c(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,L){A.setAttribute("width","24"),A.setAttribute("id",L),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{tT=!0,c()},A}function E(A,L){A.setAttribute("id",L),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=gI(r),L=e("text"),$=document.getElementById(L)||document.createElement("span"),Q=e("learnmore"),X=document.getElementById(Q)||document.createElement("a"),ct=e("preprendIcon"),dt=document.getElementById(ct)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const at=A.element;m(at),E(X,Q);const St=p();g(dt,ct),at.append(dt,$,X,St),document.body.appendChild(at)}u?($.innerText="Preview backend disconnected.",dt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(dt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function ab(){var t;const s=(t=Lf())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _I(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function TI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EI(){const s=Be();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function ob(){return!ab()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lb(){return!ab()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ub(){try{return typeof indexedDB=="object"}catch{return!1}}function bI(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="FirebaseError";class _r extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=SI,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?AI(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new _r(o,m,r)}}function AI(s,t){return s.replace(wI,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const wI=/\{\$([^}]+)}/g;function II(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function pa(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],c=t[o];if(eT(u)&&eT(c)){if(!pa(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function eT(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function RI(s,t){const e=new xI(s,t);return e.subscribe.bind(e)}class xI{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");CI(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=_g),o.error===void 0&&(o.error=_g),o.complete===void 0&&(o.complete=_g);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CI(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(s){return s&&s._delegate?s._delegate:s}class ya{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new dI;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(VI(t))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=na){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=na){return this.instances.has(t)}getOptions(t=na){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NI(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=na){return this.component?this.component.multipleInstances?t:na:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NI(s){return s===na?void 0:s}function VI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new DI(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const MI={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},PI=Pt.INFO,kI={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},LI=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=kI[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _p{constructor(t){this.name=t,this._logLevel=PI,this._logHandler=LI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?MI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const UI=(s,t)=>t.some(e=>s instanceof e);let nT,iT;function zI(){return nT||(nT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BI(){return iT||(iT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cb=new WeakMap,Pg=new WeakMap,hb=new WeakMap,vg=new WeakMap,vp=new WeakMap;function jI(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{e(us(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&cb.set(e,s)}).catch(()=>{}),vp.set(t,s),t}function qI(s){if(Pg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Pg.set(s,t)}let kg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Pg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||hb.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return us(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function FI(s){kg=s(kg)}function HI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(Tg(this),t,...e);return hb.set(r,t.sort?t.sort():[t]),us(r)}:BI().includes(s)?function(...t){return s.apply(Tg(this),t),us(cb.get(this))}:function(...t){return us(s.apply(Tg(this),t))}}function GI(s){return typeof s=="function"?HI(s):(s instanceof IDBTransaction&&qI(s),UI(s,zI())?new Proxy(s,kg):s)}function us(s){if(s instanceof IDBRequest)return jI(s);if(vg.has(s))return vg.get(s);const t=GI(s);return t!==s&&(vg.set(s,t),vp.set(t,s)),t}const Tg=s=>vp.get(s);function KI(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,t),m=us(c);return r&&c.addEventListener("upgradeneeded",g=>{r(us(c.result),g.oldVersion,g.newVersion,us(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const QI=["get","getKey","getAll","getAllKeys","count"],YI=["put","add","delete","clear"],Eg=new Map;function rT(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Eg.get(t))return Eg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=YI.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||QI.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[e](...m),o&&g.done]))[0]};return Eg.set(t,u),u}FI(s=>({...s,get:(t,e,r)=>rT(t,e)||s.get(t,e,r),has:(t,e)=>!!rT(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if($I(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function $I(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Lg="@firebase/app",sT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new _p("@firebase/app"),JI="@firebase/app-compat",ZI="@firebase/analytics-compat",WI="@firebase/analytics",tR="@firebase/app-check-compat",eR="@firebase/app-check",nR="@firebase/auth",iR="@firebase/auth-compat",rR="@firebase/database",sR="@firebase/data-connect",aR="@firebase/database-compat",oR="@firebase/functions",lR="@firebase/functions-compat",uR="@firebase/installations",cR="@firebase/installations-compat",hR="@firebase/messaging",fR="@firebase/messaging-compat",dR="@firebase/performance",mR="@firebase/performance-compat",gR="@firebase/remote-config",pR="@firebase/remote-config-compat",yR="@firebase/storage",_R="@firebase/storage-compat",vR="@firebase/firestore",TR="@firebase/ai",ER="@firebase/firestore-compat",bR="firebase",SR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="[DEFAULT]",AR={[Lg]:"fire-core",[JI]:"fire-core-compat",[WI]:"fire-analytics",[ZI]:"fire-analytics-compat",[eR]:"fire-app-check",[tR]:"fire-app-check-compat",[nR]:"fire-auth",[iR]:"fire-auth-compat",[rR]:"fire-rtdb",[sR]:"fire-data-connect",[aR]:"fire-rtdb-compat",[oR]:"fire-fn",[lR]:"fire-fn-compat",[uR]:"fire-iid",[cR]:"fire-iid-compat",[hR]:"fire-fcm",[fR]:"fire-fcm-compat",[dR]:"fire-perf",[mR]:"fire-perf-compat",[gR]:"fire-rc",[pR]:"fire-rc-compat",[yR]:"fire-gcs",[_R]:"fire-gcs-compat",[vR]:"fire-fst",[ER]:"fire-fst-compat",[TR]:"fire-vertex","fire-js":"fire-js",[bR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Map,wR=new Map,zg=new Map;function aT(s,t){try{s.container.addComponent(t)}catch(e){mr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function Po(s){const t=s.name;if(zg.has(t))return mr.debug(`There were multiple attempts to register component ${t}.`),!1;zg.set(t,s);for(const e of hf.values())aT(e,s);for(const e of wR.values())aT(e,s);return!0}function Tp(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function li(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Wu("app","Firebase",IR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=SR;function fb(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r={name:Ug,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(e||(e=ib()),!e)throw cs.create("no-options");const u=hf.get(o);if(u){if(pa(e,u.options)&&pa(r,u.config))return u;throw cs.create("duplicate-app",{appName:o})}const c=new OI(o);for(const g of zg.values())c.addComponent(g);const m=new RR(e,r,c);return hf.set(o,m),m}function xR(s=Ug){const t=hf.get(s);if(!t&&s===Ug&&ib())return fb();if(!t)throw cs.create("no-app",{appName:s});return t}function hs(s,t,e){let r=AR[s]??s;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mr.warn(c.join(" "));return}Po(new ya(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firebase-heartbeat-database",DR=1,zu="firebase-heartbeat-store";let bg=null;function db(){return bg||(bg=KI(CR,DR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(zu)}catch(e){console.warn(e)}}}}).catch(s=>{throw cs.create("idb-open",{originalErrorMessage:s.message})})),bg}async function NR(s){try{const e=(await db()).transaction(zu),r=await e.objectStore(zu).get(mb(s));return await e.done,r}catch(t){if(t instanceof _r)mr.warn(t.message);else{const e=cs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});mr.warn(e.message)}}}async function oT(s,t){try{const r=(await db()).transaction(zu,"readwrite");await r.objectStore(zu).put(t,mb(s)),await r.done}catch(e){if(e instanceof _r)mr.warn(e.message);else{const r=cs.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});mr.warn(r.message)}}}function mb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=1024,OR=30;class MR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new kR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=lT();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>OR){const c=LR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lT(),{heartbeatsToSend:r,unsentEntries:o}=PR(this._heartbeatsCache.heartbeats),u=tb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return mr.warn(e),""}}}function lT(){return new Date().toISOString().substring(0,10)}function PR(s,t=VR){const e=[];let r=s.slice();for(const o of s){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),uT(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),uT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class kR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ub()?bI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await NR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return oT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return oT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function uT(s){return tb(JSON.stringify({version:2,heartbeats:s})).length}function LR(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(s){Po(new ya("platform-logger",t=>new XI(t),"PRIVATE")),Po(new ya("heartbeat",t=>new MR(t),"PRIVATE")),hs(Lg,sT,s),hs(Lg,sT,"esm2020"),hs("fire-js","")}UR("");var zR="firebase",BR="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(zR,BR,"app");function gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jR=gb,pb=new Wu("auth","Firebase",gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new _p("@firebase/auth");function qR(s,...t){ff.logLevel<=Pt.WARN&&ff.warn(`Auth (${nl}): ${s}`,...t)}function Yh(s,...t){ff.logLevel<=Pt.ERROR&&ff.error(`Auth (${nl}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(s,...t){throw bp(s,...t)}function ci(s,...t){return bp(s,...t)}function Ep(s,t,e){const r={...jR(),[t]:e};return new Wu("auth","Firebase",r).create(t,{appName:s.name})}function ha(s){return Ep(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FR(s,t,e){const r=e;if(!(t instanceof r))throw r.name!==t.constructor.name&&qi(s,"argument-error"),Ep(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bp(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return pb.create(s,...t)}function Tt(s,t,...e){if(!s)throw bp(t,...e)}function cr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Yh(t),new Error(t)}function gr(s,t){s||cr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function HR(){return cT()==="http:"||cT()==="https:"}function cT(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HR()||vI()||"connection"in navigator)?navigator.onLine:!0}function KR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,e){this.shortDelay=t,this.longDelay=e,gr(e>t,"Short delay should be less than long delay!"),this.isMobile=yI()||TI()}get(){return GR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(s,t){gr(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XR=new ec(3e4,6e4);function Ap(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function il(s,t,e,r,o={}){return _b(s,o,async()=>{let u={},c={};r&&(t==="GET"?c=r:u={body:JSON.stringify(r)});const m=tc({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:t,headers:g,...u};return _I()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&el(s.emulatorConfig.host)&&(p.credentials="include"),yb.fetch()(await vb(s,s.config.apiHost,e,m),p)})}async function _b(s,t,e){s._canInitEmulator=!1;const r={...QR,...t};try{const o=new JR(s),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Bh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Bh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw Bh(s,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ep(s,E,p);qi(s,E)}}catch(o){if(o instanceof _r)throw o;qi(s,"network-request-failed",{message:String(o)})}}async function $R(s,t,e,r,o={}){const u=await il(s,t,e,r,o);return"mfaPendingCredential"in u&&qi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function vb(s,t,e,r){const o=`${t}${e}?${r}`,u=s,c=u.config.emulator?Sp(s.config,o):`${s.config.apiScheme}://${o}`;return YR.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class JR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),XR.get())})}}function Bh(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const o=ci(s,t,r);return o.customData._tokenResponse=e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(s,t){return il(s,"POST","/v1/accounts:delete",t)}async function df(s,t){return il(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function WR(s,t=!1){const e=We(s),r=await e.getIdToken(t),o=wp(r);Tt(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Iu(Sg(o.auth_time)),issuedAtTime:Iu(Sg(o.iat)),expirationTime:Iu(Sg(o.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Sg(s){return Number(s)*1e3}function wp(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const o=eb(e);return o?JSON.parse(o):(Yh("Failed to decode base64 JWT payload"),null)}catch(o){return Yh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function hT(s){const t=wp(s);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof _r&&t2(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function t2({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(s){var T;const t=s.auth,e=await s.getIdToken(),r=await Bu(s,df(t,{idToken:e}));Tt(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(T=o.providerUserInfo)!=null&&T.length?Tb(o.providerUserInfo):[],c=i2(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new jg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,E)}async function n2(s){const t=We(s);await mf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function i2(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function Tb(s){return s.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(s,t){const e=await _b(s,{},async()=>{const r=tc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await vb(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&el(s.emulatorConfig.host)&&(g.credentials="include"),yb.fetch()(c,g)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function s2(s,t){return il(s,"POST","/v2/accounts:revokeToken",Ap(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):hT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const e=hT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:o,expiresIn:u}=await r2(t,e);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:o,expirationTime:u}=e,c=new Do;return r&&(Tt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(Tt(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(Tt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(s,t){Tt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class ui{constructor({uid:t,auth:e,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new e2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Bu(this,this.stsTokenManager.getToken(this.auth,t));return Tt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return WR(this,t)}reload(){return n2(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ui({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await mf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(ha(this.auth));const t=await this.getIdToken();return await Bu(this,ZR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,g=e._redirectEventId??void 0,p=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:L,providerData:$,stsTokenManager:Q}=e;Tt(T&&Q,t,"internal-error");const X=Do.fromJSON(this.name,Q);Tt(typeof T=="string",t,"internal-error"),ts(r,t.name),ts(o,t.name),Tt(typeof A=="boolean",t,"internal-error"),Tt(typeof L=="boolean",t,"internal-error"),ts(u,t.name),ts(c,t.name),ts(m,t.name),ts(g,t.name),ts(p,t.name),ts(E,t.name);const ct=new ui({uid:T,auth:t,email:o,emailVerified:A,displayName:r,isAnonymous:L,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:X,createdAt:p,lastLoginAt:E});return $&&Array.isArray($)&&(ct.providerData=$.map(dt=>({...dt}))),g&&(ct._redirectEventId=g),ct}static async _fromIdTokenResponse(t,e,r=!1){const o=new Do;o.updateFromServerResponse(e);const u=new ui({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await mf(u),u}static async _fromGetAccountInfoResponse(t,e,r){const o=e.users[0];Tt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Tb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Do;m.updateFromIdToken(r);const g=new ui({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;function hr(s){gr(s instanceof Function,"Expected a class definition");let t=fT.get(s);return t?(gr(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,fT.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Eb.type="NONE";const dT=Eb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(s,t,e){return`firebase:${s}:${t}:${e}`}class No{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Xh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xh("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await df(this.auth,{idToken:t}).catch(()=>{});return e?ui._fromGetAccountInfoResponse(this.auth,e,t):null}return ui._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new No(hr(dT),t,r);const o=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||hr(dT);const c=Xh(r,t.config.apiKey,t.name);let m=null;for(const p of e)try{const E=await p._get(c);if(E){let T;if(typeof E=="string"){const A=await df(t,{idToken:E}).catch(()=>{});if(!A)break;T=await ui._fromGetAccountInfoResponse(t,A,E)}else T=ui._fromJSON(t,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new No(u,t,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new No(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rb(t))return"Blackberry";if(xb(t))return"Webos";if(Sb(t))return"Safari";if((t.includes("chrome/")||Ab(t))&&!t.includes("edge/"))return"Chrome";if(Ib(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bb(s=Be()){return/firefox\//i.test(s)}function Sb(s=Be()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ab(s=Be()){return/crios\//i.test(s)}function wb(s=Be()){return/iemobile/i.test(s)}function Ib(s=Be()){return/android/i.test(s)}function Rb(s=Be()){return/blackberry/i.test(s)}function xb(s=Be()){return/webos/i.test(s)}function Ip(s=Be()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function a2(s=Be()){var t;return Ip(s)&&!!((t=window.navigator)!=null&&t.standalone)}function o2(){return EI()&&document.documentMode===10}function Cb(s=Be()){return Ip(s)||Ib(s)||xb(s)||Rb(s)||/windows phone/i.test(s)||wb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(s,t=[]){let e;switch(s){case"Browser":e=mT(Be());break;case"Worker":e=`${mT(Be())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((c,m)=>{try{const g=t(u);c(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(s,t={}){return il(s,"GET","/v2/passwordPolicy",Ap(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=6;class h2{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??c2,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(t,e,r,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gT(this),this.idTokenSubscription=new gT(this),this.beforeStateQueue=new l2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=hr(e)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await No.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await df(this,{idToken:t}),r=await ui._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var u;if(li(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await mf(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=KR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(li(this.app))return Promise.reject(ha(this));const e=t?We(t):null;return e&&Tt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return li(this.app)?Promise.reject(ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await u2(this),e=new h2(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Wu("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await s2(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&hr(t)||this._popupRedirectResolver;Tt(e,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[hr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,o);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&qR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Uf(s){return We(s)}class gT{constructor(t){this.auth=t,this.observer=null,this.addObserver=RI(e=>this.observer=e)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d2(s){Rp=s}function m2(s){return Rp.loadJS(s)}function g2(){return Rp.gapiScript}function p2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(s,t){const e=Tp(s,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(pa(u,t??{}))return o;qi(o,"already-initialized")}return e.initialize({options:t})}function _2(s,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(hr);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function v2(s,t,e){const r=Uf(s);Tt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=Nb(t),{host:c,port:m}=T2(t),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Tt(pa(p,r.config.emulator)&&pa(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,el(c)?(sb(`${u}//${c}${g}`),pI("Auth",!0)):E2()}function Nb(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function T2(s){const t=Nb(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:pT(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:pT(c)}}}function pT(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function E2(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return cr("not implemented")}_getIdTokenResponse(t){return cr("not implemented")}_linkToIdToken(t,e){return cr("not implemented")}_getReauthenticationResolver(t){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(s,t){return $R(s,"POST","/v1/accounts:signInWithIdp",Ap(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="http://localhost";class _a extends Vb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new _a(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):qi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=e;if(!r||!o)return null;const c=new _a(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Vo(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Vo(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Vo(t,e)}buildRequest(){const t={requestUri:b2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=tc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends xp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends nc{constructor(){super("facebook.com")}static credential(t){return _a._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return rs.credentialFromTaggedObject(t)}static credentialFromError(t){return rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return rs.credential(t.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends nc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return _a._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ur.credentialFromTaggedObject(t)}static credentialFromError(t){return ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return ur.credential(e,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends nc{constructor(){super("github.com")}static credential(t){return _a._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ss.credentialFromTaggedObject(t)}static credentialFromError(t){return ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ss.credential(t.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends nc{constructor(){super("twitter.com")}static credential(t,e){return _a._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return as.credentialFromTaggedObject(t)}static credentialFromError(t){return as.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return as.credential(e,r)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,o=!1){const u=await ui._fromIdTokenResponse(t,r,o),c=yT(r);return new ko({user:u,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const o=yT(r);return new ko({user:t,providerId:o,_tokenResponse:r,operationType:e})}}function yT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends _r{constructor(t,e,r,o){super(e.code,e.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,o){return new gf(t,e,r,o)}}function Ob(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(s,u,t,r):u})}async function S2(s,t,e=!1){const r=await Bu(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return ko._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(s,t,e=!1){const{auth:r}=s;if(li(r.app))return Promise.reject(ha(r));const o="reauthenticate";try{const u=await Bu(s,Ob(r,o,t,s),e);Tt(u.idToken,r,"internal-error");const c=wp(u.idToken);Tt(c,r,"internal-error");const{sub:m}=c;return Tt(s.uid===m,r,"user-mismatch"),ko._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&qi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(s,t,e=!1){if(li(s.app))return Promise.reject(ha(s));const r="signIn",o=await Ob(s,r,t),u=await ko._fromIdTokenResponse(s,r,o);return e||await s._updateCurrentUser(u.user),u}function I2(s,t,e,r){return We(s).onIdTokenChanged(t,e,r)}function R2(s,t,e){return We(s).beforeAuthStateChanged(t,e)}function x2(s,t,e,r){return We(s).onAuthStateChanged(t,e,r)}function C2(s){return We(s).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=1e3,N2=10;class Pb extends Mb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),o=this.localCache[e];r!==o&&t(e,o,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);o2()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,N2):o()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},D2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Pb.type="LOCAL";const V2=Pb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb extends Mb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}kb.type="SESSION";const Lb=kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const r=new zf(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(e.origin,u)),g=await O2(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Cp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function P2(s){zi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function k2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L2(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function U2(){return Ub()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firebaseLocalStorageDb",z2=1,yf="firebaseLocalStorage",Bb="fbase_key";class ic{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Bf(s,t){return s.transaction([yf],t?"readwrite":"readonly").objectStore(yf)}function B2(){const s=indexedDB.deleteDatabase(zb);return new ic(s).toPromise()}function qg(){const s=indexedDB.open(zb,z2);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(yf,{keyPath:Bb})}catch(o){e(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(yf)?t(r):(r.close(),await B2(),t(await qg()))})})}async function _T(s,t,e){const r=Bf(s,!0).put({[Bb]:t,value:e});return new ic(r).toPromise()}async function j2(s,t){const e=Bf(s,!1).get(t),r=await new ic(e).toPromise();return r===void 0?null:r.value}function vT(s,t){const e=Bf(s,!0).delete(t);return new ic(e).toPromise()}const q2=800,F2=3;class jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qg(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>F2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ub()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(U2()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await k2(),!this.activeServiceWorker)return;this.sender=new M2(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||L2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await qg();return await _T(t,pf,"1"),await vT(t,pf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_T(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>j2(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>vT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Bf(o,!1).getAll();return new ic(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jb.type="LOCAL";const H2=jb;new ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(s,t){return t?hr(t):(Tt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Vb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Vo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Vo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Vo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function G2(s){return w2(s.auth,new Dp(s),s.bypassAuthState)}function K2(s){const{auth:t,user:e}=s;return Tt(e,t,"internal-error"),A2(e,new Dp(s),s.bypassAuthState)}async function Q2(s){const{auth:t,user:e}=s;return Tt(e,t,"internal-error"),S2(e,new Dp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,e,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return G2;case"linkViaPopup":case"linkViaRedirect":return Q2;case"reauthViaPopup":case"reauthViaRedirect":return K2;default:qi(this.auth,"internal-error")}}resolve(t){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new ec(2e3,1e4);async function X2(s,t,e){if(li(s.app))return Promise.reject(ci(s,"operation-not-supported-in-this-environment"));const r=Uf(s);FR(s,t,xp);const o=qb(r,e);return new ua(r,"signInViaPopup",t,o).executeNotNull()}class ua extends Fb{constructor(t,e,r,o,u){super(t,e,o,u),this.provider=r,this.authWindow=null,this.pollId=null,ua.currentPopupAction&&ua.currentPopupAction.cancel(),ua.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const t=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ua.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Y2.get())};t()}}ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="pendingRedirect",$h=new Map;class J2 extends Fb{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=$h.get(this.auth._key());if(!t){try{const r=await Z2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}$h.set(this.auth._key(),t)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z2(s,t){const e=ex(t),r=tx(s);if(!await r._isAvailable())return!1;const o=await r._get(e)==="true";return await r._remove(e),o}function W2(s,t){$h.set(s._key(),t)}function tx(s){return hr(s._redirectPersistence)}function ex(s){return Xh($2,s.config.apiKey,s.name)}async function nx(s,t,e=!1){if(li(s.app))return Promise.reject(ha(s));const r=Uf(s),o=qb(r,t),c=await new J2(r,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=600*1e3;class rx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!sx(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!Hb(t)){const o=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(ci(this.auth,o))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ix&&this.cachedEventUids.clear(),this.cachedEventUids.has(TT(t))}saveEventToCache(t){this.cachedEventUids.add(TT(t)),this.lastProcessedEventTime=Date.now()}}function TT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function Hb({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function sx(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(s,t={}){return il(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lx=/^https?/;async function ux(s){if(s.config.emulator)return;const{authorizedDomains:t}=await ax(s);for(const e of t)try{if(cx(e))return}catch{}qi(s,"unauthorized-domain")}function cx(s){const t=Bg(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!lx.test(e))return!1;if(ox.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new ec(3e4,6e4);function ET(){const s=zi().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function fx(s){return new Promise((t,e)=>{var o,u,c;function r(){ET(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ET(),e(ci(s,"network-request-failed"))},timeout:hx.get()})}if((u=(o=zi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)t(gapi.iframes.getContext());else if((c=zi().gapi)!=null&&c.load)r();else{const m=p2("iframefcb");return zi()[m]=()=>{gapi.load?r():e(ci(s,"network-request-failed"))},m2(`${g2()}?onload=${m}`).catch(g=>e(g))}}).catch(t=>{throw Jh=null,t})}let Jh=null;function dx(s){return Jh=Jh||fx(s),Jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new ec(5e3,15e3),gx="__/auth/iframe",px="emulator/auth/iframe",yx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_x=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vx(s){const t=s.config;Tt(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Sp(t,px):`https://${s.config.authDomain}/${gx}`,r={apiKey:t.apiKey,appName:s.name,v:nl},o=_x.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${tc(r).slice(1)}`}async function Tx(s){const t=await dx(s),e=zi().gapi;return Tt(e,s,"internal-error"),t.open({where:document.body,url:vx(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=ci(s,"network-request-failed"),m=zi().setTimeout(()=>{u(c)},mx.get());function g(){zi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bx=500,Sx=600,Ax="_blank",wx="http://localhost";class bT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ix(s,t,e,r=bx,o=Sx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...Ex,width:r.toString(),height:o.toString(),top:u,left:c},p=Be().toLowerCase();e&&(m=Ab(p)?Ax:e),bb(p)&&(t=t||wx,g.scrollbars="yes");const E=Object.entries(g).reduce((A,[L,$])=>`${A}${L}=${$},`,"");if(a2(p)&&m!=="_self")return Rx(t||"",m),new bT(null);const T=window.open(t||"",m,E);Tt(T,s,"popup-blocked");try{T.focus()}catch{}return new bT(T)}function Rx(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="__/auth/handler",Cx="emulator/auth/handler",Dx=encodeURIComponent("fac");async function ST(s,t,e,r,o,u){Tt(s.config.authDomain,s,"auth-domain-config-required"),Tt(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:nl,eventId:o};if(t instanceof xp){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",II(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(t instanceof nc){const E=t.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),p=g?`#${Dx}=${encodeURIComponent(g)}`:"";return`${Nx(s)}?${tc(m).slice(1)}${p}`}function Nx({config:s}){return s.emulator?Sp(s,Cx):`https://${s.authDomain}/${xx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class Vx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lb,this._completeRedirectFn=nx,this._overrideRedirectResult=W2}async _openPopup(t,e,r,o){var c;gr((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const u=await ST(t,e,r,Bg(),o);return Ix(t,u,Cp())}async _openRedirect(t,e,r,o){await this._originValidation(t);const u=await ST(t,e,r,Bg(),o);return P2(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(gr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await Tx(t),r=new rx(t);return e.register("authEvent",o=>(Tt(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ag,{type:Ag},o=>{var c;const u=(c=o==null?void 0:o[0])==null?void 0:c[Ag];u!==void 0&&e(!!u),qi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=ux(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Cb()||Sb()||Ip()}}const Ox=Vx;var AT="@firebase/auth",wT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kx(s){Po(new ya("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Tt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Db(s)},p=new f2(r,o,u,g);return _2(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Po(new ya("auth-internal",t=>{const e=Uf(t.getProvider("auth").getImmediate());return(r=>new Mx(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(AT,wT,Px(s)),hs(AT,wT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=300,Ux=rb("authIdTokenMaxAge")||Lx;let IT=null;const zx=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>Ux)return;const o=e==null?void 0:e.token;IT!==o&&(IT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Bx(s=xR()){const t=Tp(s,"auth");if(t.isInitialized())return t.getImmediate();const e=y2(s,{popupRedirectResolver:Ox,persistence:[H2,V2,Lb]}),r=rb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=zx(u.toString());R2(e,c,()=>c(e.currentUser)),I2(e,m=>c(m))}}const o=fI("auth");return o&&v2(e,`http://${o}`),e}function jx(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}d2({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=ci("internal-error");u.customData=o,e(u)},r.type="text/javascript",r.charset="UTF-8",jx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kx("Browser");var RT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,Gb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function C(){}C.prototype=w.prototype,I.F=w.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(O,N,k){for(var R=Array(arguments.length-2),le=2;le<arguments.length;le++)R[le-2]=arguments[le];return w.prototype[N].apply(O,R)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,C){C||(C=0);const O=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)O[N]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(N=0;N<16;++N)O[N]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=I.g[0],C=I.g[1],N=I.g[2];let k=I.g[3],R;R=w+(k^C&(N^k))+O[0]+3614090360&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+O[1]+3905402710&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+O[2]+606105819&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+O[3]+3250441966&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(k^C&(N^k))+O[4]+4118548399&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+O[5]+1200080426&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+O[6]+2821735955&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+O[7]+4249261313&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(k^C&(N^k))+O[8]+1770035416&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+O[9]+2336552879&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+O[10]+4294925233&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+O[11]+2304563134&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(k^C&(N^k))+O[12]+1804603682&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+O[13]+4254626195&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+O[14]+2792965006&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+O[15]+1236535329&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(N^k&(C^N))+O[1]+4129170786&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+O[6]+3225465664&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+O[11]+643717713&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+O[0]+3921069994&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(N^k&(C^N))+O[5]+3593408605&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+O[10]+38016083&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+O[15]+3634488961&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+O[4]+3889429448&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(N^k&(C^N))+O[9]+568446438&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+O[14]+3275163606&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+O[3]+4107603335&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+O[8]+1163531501&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(N^k&(C^N))+O[13]+2850285829&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+O[2]+4243563512&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+O[7]+1735328473&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+O[12]+2368359562&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(C^N^k)+O[5]+4294588738&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+O[8]+2272392833&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+O[11]+1839030562&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+O[14]+4259657740&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(C^N^k)+O[1]+2763975236&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+O[4]+1272893353&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+O[7]+4139469664&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+O[10]+3200236656&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(C^N^k)+O[13]+681279174&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+O[0]+3936430074&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+O[3]+3572445317&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+O[6]+76029189&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(C^N^k)+O[9]+3654602809&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+O[12]+3873151461&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+O[15]+530742520&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+O[2]+3299628645&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(N^(C|~k))+O[0]+4096336452&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+O[7]+1126891415&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+O[14]+2878612391&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+O[5]+4237533241&4294967295,C=N+(R<<21&4294967295|R>>>11),R=w+(N^(C|~k))+O[12]+1700485571&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+O[3]+2399980690&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+O[10]+4293915773&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+O[1]+2240044497&4294967295,C=N+(R<<21&4294967295|R>>>11),R=w+(N^(C|~k))+O[8]+1873313359&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+O[15]+4264355552&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+O[6]+2734768916&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+O[13]+1309151649&4294967295,C=N+(R<<21&4294967295|R>>>11),R=w+(N^(C|~k))+O[4]+4149444226&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+O[11]+3174756917&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+O[2]+718787259&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.v=function(I,w){w===void 0&&(w=I.length);const C=w-this.blockSize,O=this.C;let N=this.h,k=0;for(;k<w;){if(N==0)for(;k<=C;)o(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<w;)if(O[N++]=I.charCodeAt(k++),N==this.blockSize){o(this,O),N=0;break}}else for(;k<w;)if(O[N++]=I[k++],N==this.blockSize){o(this,O),N=0;break}}this.h=N,this.o+=w},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)I[w++]=this.g[C]>>>O&255;return I};function u(I,w){var C=m;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=w(I)}function c(I,w){this.h=w;const C=[];let O=!0;for(let N=I.length-1;N>=0;N--){const k=I[N]|0;O&&k==w||(C[N]=k,O=!1)}this.g=C}var m={};function g(I){return-128<=I&&I<128?u(I,function(w){return new c([w|0],w<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return T;if(I<0)return X(p(-I));const w=[];let C=1;for(let O=0;I>=C;O++)w[O]=I/C|0,C*=4294967296;return new c(w,0)}function E(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return X(E(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(w,8));let O=T;for(let k=0;k<I.length;k+=8){var N=Math.min(8,I.length-k);const R=parseInt(I.substring(k,k+N),w);N<8?(N=p(Math.pow(w,N)),O=O.j(N).add(p(R))):(O=O.j(C),O=O.add(p(R)))}return O}var T=g(0),A=g(1),L=g(16777216);s=c.prototype,s.m=function(){if(Q(this))return-X(this).m();let I=0,w=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);I+=(O>=0?O:4294967296+O)*w,w*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if($(this))return"0";if(Q(this))return"-"+X(this).toString(I);const w=p(Math.pow(I,6));var C=this;let O="";for(;;){const N=St(C,w).g;C=ct(C,N.j(w));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=N,$(C))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function $(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function Q(I){return I.h==-1}s.l=function(I){return I=ct(this,I),Q(I)?-1:$(I)?0:1};function X(I){const w=I.g.length,C=[];for(let O=0;O<w;O++)C[O]=~I.g[O];return new c(C,~I.h).add(A)}s.abs=function(){return Q(this)?X(this):this},s.add=function(I){const w=Math.max(this.g.length,I.g.length),C=[];let O=0;for(let N=0;N<=w;N++){let k=O+(this.i(N)&65535)+(I.i(N)&65535),R=(k>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);O=R>>>16,k&=65535,R&=65535,C[N]=R<<16|k}return new c(C,C[C.length-1]&-2147483648?-1:0)};function ct(I,w){return I.add(X(w))}s.j=function(I){if($(this)||$(I))return T;if(Q(this))return Q(I)?X(this).j(X(I)):X(X(this).j(I));if(Q(I))return X(this.j(X(I)));if(this.l(L)<0&&I.l(L)<0)return p(this.m()*I.m());const w=this.g.length+I.g.length,C=[];for(var O=0;O<2*w;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<I.g.length;N++){const k=this.i(O)>>>16,R=this.i(O)&65535,le=I.i(N)>>>16,ke=I.i(N)&65535;C[2*O+2*N]+=R*ke,dt(C,2*O+2*N),C[2*O+2*N+1]+=k*ke,dt(C,2*O+2*N+1),C[2*O+2*N+1]+=R*le,dt(C,2*O+2*N+1),C[2*O+2*N+2]+=k*le,dt(C,2*O+2*N+2)}for(I=0;I<w;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=w;I<2*w;I++)C[I]=0;return new c(C,0)};function dt(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function at(I,w){this.g=I,this.h=w}function St(I,w){if($(w))throw Error("division by zero");if($(I))return new at(T,T);if(Q(I))return w=St(X(I),w),new at(X(w.g),X(w.h));if(Q(w))return w=St(I,X(w)),new at(X(w.g),w.h);if(I.g.length>30){if(Q(I)||Q(w))throw Error("slowDivide_ only works with positive integers.");for(var C=A,O=w;O.l(I)<=0;)C=Rt(C),O=Rt(O);var N=vt(C,1),k=vt(O,1);for(O=vt(O,2),C=vt(C,2);!$(O);){var R=k.add(O);R.l(I)<=0&&(N=N.add(C),k=R),O=vt(O,1),C=vt(C,1)}return w=ct(I,N.j(w)),new at(N,w)}for(N=T;I.l(w)>=0;){for(C=Math.max(1,Math.floor(I.m()/w.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(C),R=k.j(w);Q(R)||R.l(I)>0;)C-=O,k=p(C),R=k.j(w);$(k)&&(k=A),N=N.add(k),I=ct(I,R)}return new at(N,I)}s.B=function(I){return St(this,I).h},s.and=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)&I.i(O);return new c(C,this.h&I.h)},s.or=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)|I.i(O);return new c(C,this.h|I.h)},s.xor=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let O=0;O<w;O++)C[O]=this.i(O)^I.i(O);return new c(C,this.h^I.h)};function Rt(I){const w=I.g.length+1,C=[];for(let O=0;O<w;O++)C[O]=I.i(O)<<1|I.i(O-1)>>>31;return new c(C,I.h)}function vt(I,w){const C=w>>5;w%=32;const O=I.g.length-C,N=[];for(let k=0;k<O;k++)N[k]=w>0?I.i(k+C)>>>w|I.i(k+C+1)<<32-w:I.i(k+C);return new c(N,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Gb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,fs=c}).apply(typeof RT<"u"?RT:typeof self<"u"?self:typeof window<"u"?window:{});var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kb,Tu,Qb,Zh,Fg,Yb,Xb,$b;(function(){var s,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof jh=="object"&&jh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,y){if(y)t:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var z=h[S];if(!(z in v))break t;v=v[z]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,z,F){for(var et=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)et[wt-2]=arguments[wt];return y.prototype[z].apply(S,et)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function L(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function $(h,y){for(let S=1;S<arguments.length;S++){const z=arguments[S];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=h.length||0;const F=z.length||0;h.length=v+F;for(let et=0;et<F;et++)h[v+et]=z[et]}else h.push(z)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(h){c.setTimeout(()=>{throw h},0)}function ct(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class dt{constructor(){this.h=this.g=null}add(y,v){const S=at.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var at=new Q(()=>new St,h=>h.reset());class St{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Rt,vt=!1,I=new dt,w=()=>{const h=Promise.resolve(void 0);Rt=()=>{h.then(C)}};function C(){for(var h;h=ct();){try{h.h.call(h.g)}catch(v){X(v)}var y=at;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}vt=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function le(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(le,N),le.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),K=0;function nt(h,y,v,S,z){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=z,this.key=++K,this.da=this.fa=!1}function yt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Bt(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Qt(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function V(h){const y={};for(const v in h)y[v]=h[v];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(h,y){let v,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(v in S)h[v]=S[v];for(let F=0;F<Z.length;F++)v=Z[F],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function ot(h){this.src=h,this.g={},this.h=0}ot.prototype.add=function(h,y,v,S,z){const F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);const et=xt(h,y,S,z);return et>-1?(y=h[et],v||(y.fa=!1)):(y=new nt(y,this.src,F,!!S,z),y.fa=v,h.push(y)),y};function Et(h,y){const v=y.type;if(v in h.g){var S=h.g[v],z=Array.prototype.indexOf.call(S,y,void 0),F;(F=z>=0)&&Array.prototype.splice.call(S,z,1),F&&(yt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function xt(h,y,v,S){for(let z=0;z<h.length;++z){const F=h[z];if(!F.da&&F.listener==y&&F.capture==!!v&&F.ha==S)return z}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Le={};function ue(h,y,v,S,z){if(Array.isArray(y)){for(let F=0;F<y.length;F++)ue(h,y[F],v,S,z);return null}return v=hl(v),h&&h[ke]?h.J(y,v,m(S)?!!S.capture:!1,z):As(h,y,v,!1,S,z)}function As(h,y,v,S,z,F){if(!y)throw Error("Invalid event type");const et=m(z)?!!z.capture:!!z;let wt=ws(h);if(wt||(h[Ut]=wt=new ot(h)),v=wt.add(y,v,S,et,F),v.proxy)return v;if(S=xa(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)k||(z=et),z===void 0&&(z=!1),h.addEventListener(y.toString(),S,z);else if(h.attachEvent)h.attachEvent(hi(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xa(){function h(v){return y.call(h.src,h.listener,v)}const y=ul;return h}function Ca(h,y,v,S,z){if(Array.isArray(y))for(var F=0;F<y.length;F++)Ca(h,y[F],v,S,z);else S=m(S)?!!S.capture:!!S,v=hl(v),h&&h[ke]?(h=h.i,F=String(y).toString(),F in h.g&&(y=h.g[F],v=xt(y,v,S,z),v>-1&&(yt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[F],h.h--)))):h&&(h=ws(h))&&(y=h.g[y.toString()],h=-1,y&&(h=xt(y,v,S,z)),(v=h>-1?y[h]:null)&&Da(v))}function Da(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ke])Et(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(hi(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=ws(y))?(Et(v,h),v.h==0&&(v.src=null,y[Ut]=null)):yt(h)}}}function hi(h){return h in Le?Le[h]:Le[h]="on"+h}function ul(h,y){if(h.da)h=!0;else{y=new le(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Da(h),h=v.call(S,y)}return h}function ws(h){return h=h[Ut],h instanceof ot?h:null}var cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function hl(h){return typeof h=="function"?h:(h[cl]||(h[cl]=function(y){return h.handleEvent(y)}),h[cl])}function Ae(){O.call(this),this.i=new ot(this),this.M=this,this.G=null}T(Ae,O),Ae.prototype[ke]=!0,Ae.prototype.removeEventListener=function(h,y,v,S){Ca(this,h,y,v,S)};function Ue(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var z=y;y=new N(S,h),it(y,z)}z=!0;let F,et;if(v)for(et=v.length-1;et>=0;et--)F=y.g=v[et],z=Er(F,S,!0,y)&&z;if(F=y.g=h,z=Er(F,S,!0,y)&&z,z=Er(F,S,!1,y)&&z,v)for(et=0;et<v.length;et++)F=y.g=v[et],z=Er(F,S,!1,y)&&z}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)yt(v[S]);delete h.g[y],h.h--}}this.G=null},Ae.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Ae.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Er(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let F=0;F<y.length;++F){const et=y[F];if(et&&!et.da&&et.capture==v){const wt=et.listener,ve=et.ha||et.src;et.fa&&Et(h.i,et),z=wt.call(ve,S)!==!1&&z}}return z&&!S.defaultPrevented}function md(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function hc(h){h.g=md(()=>{h.g=null,h.i&&(h.i=!1,hc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:hc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(h){O.call(this),this.h=h,this.g={}}T(Is,O);var fl=[];function dl(h){Bt(h.g,function(y,v){this.g.hasOwnProperty(v)&&Da(y)},h),h.g={}}Is.prototype.N=function(){Is.Z.N.call(this),dl(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var br=c.JSON.stringify,gd=c.JSON.parse,fc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function dc(){}function mc(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){N.call(this,"d")}T(Ke,N);function Mn(){N.call(this,"c")}T(Mn,N);var _e={},gc=null;function Na(){return gc=gc||new Ae}_e.Ia="serverreachability";function pc(h){N.call(this,_e.Ia,h)}T(pc,N);function fi(h){const y=Na();Ue(y,new pc(y))}_e.STAT_EVENT="statevent";function Rs(h,y){N.call(this,_e.STAT_EVENT,h),this.stat=y}T(Rs,N);function we(h){const y=Na();Ue(y,new Rs(y,h))}_e.Ja="timingevent";function di(h,y){N.call(this,_e.Ja,h),this.size=y}T(di,N);function mi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function pd(h,y,v,S,z,F){h.info(function(){if(h.g)if(F){var et="",wt=F.split("&");for(let Ht=0;Ht<wt.length;Ht++){var ve=wt[Ht].split("=");if(ve.length>1){const ce=ve[0];ve=ve[1];const Un=ce.split("_");et=Un.length>=2&&Un[1]=="type"?et+(ce+"="+ve+"&"):et+(ce+"=redacted&")}}}else et=null;else et=F;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+y+`
`+v+`
`+et})}function yc(h,y,v,S,z,F,et){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+y+`
`+v+`
`+F+" "+et})}function gi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+yd(h,v)+(S?" "+S:"")})}function xs(h,y){h.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function yd(h,y){if(!h.g)return y;if(!y)return null;try{const F=JSON.parse(y);if(F){for(h=0;h<F.length;h++)if(Array.isArray(F[h])){var v=F[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let et=1;et<S.length;et++)S[et]=""}}}}return br(F)}catch{return y}}var Cs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gl;function Ds(){}T(Ds,dc),Ds.prototype.g=function(){return new XMLHttpRequest},gl=new Ds;function Hi(h){return encodeURIComponent(String(h))}function _c(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Jn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new Is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Ie={},qe={};function pi(h,y,v){h.M=1,h.A=Ns(xe(y)),h.u=v,h.R=!0,Va(h,null)}function Va(h,y){h.F=Date.now(),yi(h),h.B=xe(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),ka(v.i,"t",S),h.C=0,v=h.j.L,h.h=new Zn,h.g=Oc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new ln(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var z="readystatechange";Array.isArray(z)||(z&&(fl[0]=z.toString()),z=fl);for(let F=0;F<z.length;F++){const et=ue(v,z[F],S||y.handleEvent,!1,y.h||y);if(!et)break;y.g[et.key]=et}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),fi(),pd(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ei(h)==3?y.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)t:{const wt=ei(this.g),ve=this.g.ya(),Ht=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||Qe(this.g)))){this.K||wt!=4||ve==7||(ve==8||Ht<=0?fi(3):fi(2)),_i(this);var y=this.g.ca();this.X=y;var v=_d(this);if(this.o=y==200,yc(this.i,this.v,this.B,this.l,this.S,wt,y),this.o){if(this.U&&!this.L){e:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var F=S;break e}}F=null}if(h=F)gi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vi(this,h);else{this.o=!1,this.m=3,we(12),En(this),Pn(this);break t}}if(this.R){h=!0;let ce;for(;!this.K&&this.C<v.length;)if(ce=Tc(this,v),ce==qe){wt==4&&(this.m=4,we(14),h=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==Ie){this.m=4,we(15),gi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else gi(this.i,this.l,ce,null),vi(this,ce);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||v.length!=0||this.h.h||(this.m=1,we(16),h=!1),this.o=this.o&&h,!h)gi(this.i,this.l,v,"[Invalid Chunked Response]"),En(this),Pn(this);else if(v.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Dl(et),et.P=!0,we(11))}}else gi(this.i,this.l,v,null),vi(this,v);wt==4&&En(this),this.o&&!this.K&&(wt==4?Cc(this.j,this):(this.o=!1,yi(this)))}else Ki(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),En(this),Pn(this)}}}catch{}finally{}};function _d(h){if(!vc(h))return h.g.la();const y=Qe(h.g);if(y==="")return"";let v="";const S=y.length,z=ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return En(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let F=0;F<S;F++)h.h.h=!0,v+=h.h.i.decode(y[F],{stream:!(z&&F==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function vc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Tc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?qe:(v=Number(y.substring(v,S)),isNaN(v)?Ie:(S+=1,S+v>y.length?qe:(y=y.slice(S,S+v),h.C=S+v,y)))}Jn.prototype.cancel=function(){this.K=!0,En(this)};function yi(h){h.T=Date.now()+h.H,Oa(h,h.H)}function Oa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=mi(p(h.aa,h),y)}function _i(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(xs(this.i,this.B),this.M!=2&&(fi(),we(17)),En(this),this.m=2,Pn(this)):Oa(this,this.T-h)};function Pn(h){h.j.I==0||h.K||Cc(h.j,h)}function En(h){_i(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,dl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function vi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ei(v.h,h))){if(!h.L&&Ei(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)ja(v),Dr(v);else break t;Us(v),we(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=mi(p(v.Va,v),6e3));Ti(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ri(v,11)}else if((h.L||v.g==h)&&ja(v),!R(y))for(z=v.Ba.g.parse(y),y=0;y<z.length;y++){let Ht=z[y];const ce=Ht[0];if(!(ce<=v.K))if(v.K=ce,Ht=Ht[1],v.I==2)if(Ht[0]=="c"){v.M=Ht[1],v.ba=Ht[2];const Un=Ht[3];Un!=null&&(v.ka=Un,v.j.info("VER="+v.ka));const xi=Ht[4];xi!=null&&(v.za=xi,v.j.info("SVER="+v.za));const ni=Ht[5];ni!=null&&typeof ni=="number"&&ni>0&&(S=1.5*ni,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ii=h.g;if(ii){const zs=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var F=S.h;F.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(_l(F,F.h),F.h=null))}if(S.G){const qa=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(S.wa=qa,Yt(S.J,S.G,qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var et=h;if(S.na=Vc(S,S.L?S.ba:null,S.W),et.L){vl(S.h,et);var wt=et,ve=S.O;ve&&(wt.H=ve),wt.D&&(_i(wt),yi(wt)),S.g=et}else Rc(S);v.i.length>0&&Ii(v)}else Ht[0]!="stop"&&Ht[0]!="close"||Ri(v,7);else v.I==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Ri(v,7):xl(v):Ht[0]!="noop"&&v.l&&v.l.qa(Ht),v.A=0)}}fi(4)}catch{}}var Re=class{constructor(h,y){this.g=h,this.map=y}};function pl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ti(h){return h.h?1:h.g?h.g.size:0}function Ei(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function _l(h,y){h.g?h.g.add(y):h.h=y}function vl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}pl.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return L(h.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ma(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let z,F=null;S>=0?(z=h[v].substring(0,S),F=h[v].substring(S+1)):z=h[v],y(z,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof bn?(this.l=h.l,Fe(this,h.j),this.o=h.o,this.g=h.g,Sr(this,h.u),this.h=h.h,El(this,wc(h.i)),this.m=h.m):h&&(y=String(h).match(Ec))?(this.l=!1,Fe(this,y[1]||"",!0),this.o=bi(y[2]||""),this.g=bi(y[3]||"",!0),Sr(this,y[4]),this.h=bi(y[5]||"",!0),El(this,y[6]||"",!0),this.m=bi(y[7]||"")):(this.l=!1,this.i=new wr(null,this.l))}bn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Vs(y,Pa,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Vs(y,Pa,!0),"@"),h.push(Hi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Vs(v,v.charAt(0)=="/"?bl:bc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Vs(v,Sc)),h.join("")},bn.prototype.resolve=function(h){const y=xe(this);let v=!!h.j;v?Fe(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Sr(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=y.h.lastIndexOf("/");z!=-1&&(S=y.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const F=[];for(let et=0;et<z.length;){const wt=z[et++];wt=="."?S&&et==z.length&&F.push(""):wt==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),S&&et==z.length&&F.push("")):(F.push(wt),S=!0)}S=F.join("/")}else S=z}return v?y.h=S:v=h.i.toString()!=="",v?El(y,wc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function xe(h){return new bn(h)}function Fe(h,y,v){h.j=v?bi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Sr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function El(h,y,v){y instanceof wr?(h.i=y,La(h.i,h.l)):(v||(y=Vs(y,Ar)),h.i=new wr(y,h.l))}function Yt(h,y,v){h.i.set(y,v)}function Ns(h){return Yt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function bi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,fn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Pa=/[#\/\?@]/g,bc=/[#\?:]/g,bl=/[#\?]/g,Ar=/[#\?@]/g,Sc=/#/g;function wr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ma(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=wr.prototype,s.add=function(h,y){dn(this),this.i=null,h=Ir(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ac(h,y){dn(h),y=Ir(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sl(h,y){return dn(h),y=Ir(h,y),h.g.has(y)}s.forEach=function(h,y){dn(this),this.g.forEach(function(v,S){v.forEach(function(z){h.call(y,z,S,this)},this)},this)};function Al(h,y){dn(h);let v=[];if(typeof y=="string")Sl(h,y)&&(v=v.concat(h.g.get(Ir(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return dn(this),this.i=null,h=Ir(this,h),Sl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Al(this,h),h.length>0?String(h[0]):y):y};function ka(h,y,v){Ac(h,y),v.length>0&&(h.i=null,h.g.set(Ir(h,y),L(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const z=Hi(v);v=Al(this,v);for(let F=0;F<v.length;F++){let et=z;v[F]!==""&&(et+="="+Hi(v[F])),h.push(et)}}return this.i=h.join("&")};function wc(h){const y=new wr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ir(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function La(h,y){y&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(v,S){const z=S.toLowerCase();S!=z&&(Ac(this,S),ka(this,z,v))},h)),h.j=y}function Wn(h,y){const v=new $n;if(c.Image){const S=new Image;S.onload=E(kn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=E(kn,v,"TestLoadImage: error",!1,y,S),S.onabort=E(kn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=E(kn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function wl(h,y){const v=new $n,S=new AbortController,z=setTimeout(()=>{S.abort(),kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(F=>{clearTimeout(z),F.ok?kn(v,"TestPingServer: ok",!0,y):kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),kn(v,"TestPingServer: error",!1,y)})}function kn(h,y,v,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(v)}catch{}}function Rr(){this.g=new fc}function Si(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Si,dc),Si.prototype.g=function(){return new Os(this.i,this.h)};function Os(h,y){Ae.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Os,Ae),s=Os.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ti(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ua(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ua(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?xr(this):ti(this),this.readyState==3&&Ua(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,xr(this))},s.Na=function(h){this.g&&(this.response=h,xr(this))},s.ga=function(){this.g&&xr(this)};function xr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ti(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ti(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Bt(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ms(h,y,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=Ln(v),typeof h=="string"?v!=null&&Hi(v):Yt(h,y,v))}function Wt(h){Ae.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Wt,Ae);var Ai=/^https?$/i,Il=["POST","PUT"];s=Wt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gl.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(F){Ps(this,F);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)v.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())v.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),z=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Il,y,void 0)>=0)||S||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,et]of v)this.g.setRequestHeader(F,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(F){Ps(this,F)}};function Ps(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Rl(h),Gi(h)}function Rl(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ue(this,"complete"),Ue(this,"abort"),Gi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Wt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ks(this):this.Xa())},s.Xa=function(){ks(this)};function ks(h){if(h.h&&typeof u<"u"){if(h.v&&ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ue(h,"readystatechange"),ei(h)==4){h.h=!1;try{const F=h.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var S;if(S=F===0){let et=String(h.D).match(Ec)[1]||null;!et&&c.self&&c.self.location&&(et=c.self.location.protocol.slice(0,-1)),S=!Ai.test(et?et.toLowerCase():"")}v=S}if(v)Ue(h,"complete"),Ue(h,"success");else{h.o=6;try{var z=ei(h)>2?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.ca()+"]",Rl(h)}}finally{Gi(h)}}}}function Gi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ue(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),gd(y)}};function Qe(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(h){const y={};h=(h.g&&ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(R(h[S]))continue;var v=_c(h[S]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=y[z]||[];y[z]=F,F.push(v)}Qt(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Cr(h){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,h),this.Za=wi("retryDelaySeedMs",1e4,h),this.Ta=wi("forwardChannelMaxRetries",2,h),this.va=wi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new pl(h&&h.concurrentRequestLimit),this.Ba=new Rr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Cr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){we(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Vc(this,null,this.W),Ii(this)};function xl(h){if(za(h),h.I==3){var y=h.V++,v=xe(h.J);if(Yt(v,"SID",h.M),Yt(v,"RID",y),Yt(v,"TYPE","terminate"),Ls(h,v),y=new Jn(h,h.j,y),y.M=2,y.A=Ns(xe(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Oc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),yi(y)}Nc(h)}function Dr(h){h.g&&(Dl(h),h.g.cancel(),h.g=null)}function za(h){Dr(h),h.v&&(c.clearTimeout(h.v),h.v=null),ja(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ii(h){if(!yl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Rt||w(),vt||(Rt(),vt=!0),I.add(y,h),h.D=0}}function Ba(h,y){return Ti(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=mi(p(h.Ea,h,y),Dc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const z=new Jn(this,this.j,h);let F=this.o;if(this.U&&(F?(F=V(F),it(F,this.U)):F=this.U),this.u!==null||this.R||(z.J=F,F=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Ic(this,z,y),v=xe(this.J),Yt(v,"RID",h),Yt(v,"CVER",22),this.G&&Yt(v,"X-HTTP-Session-Id",this.G),Ls(this,v),F&&(this.R?y="headers="+Hi(Ln(F))+"&"+y:this.u&&Ms(v,this.u,F)),_l(this.h,z),this.Ra&&Yt(v,"TYPE","init"),this.S?(Yt(v,"$req",y),Yt(v,"SID","null"),z.U=!0,pi(z,v,null)):pi(z,v,y),this.I=2}}else this.I==3&&(h?Cl(this,h):this.i.length==0||yl(this.h)||Cl(this))};function Cl(h,y){var v;y?v=y.l:v=h.V++;const S=xe(h.J);Yt(S,"SID",h.M),Yt(S,"RID",v),Yt(S,"AID",h.K),Ls(h,S),h.u&&h.o&&Ms(S,h.u,h.o),v=new Jn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ic(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),_l(h.h,v),pi(v,S,y)}function Ls(h,y){h.H&&Bt(h.H,function(v,S){Yt(y,S,v)}),h.l&&Bt({},function(v,S){Yt(y,S,v)})}function Ic(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;t:{var z=h.i;let wt=-1;for(;;){const ve=["count="+v];wt==-1?v>0?(wt=z[0].g,ve.push("ofs="+wt)):wt=0:ve.push("ofs="+wt);let Ht=!0;for(let ce=0;ce<v;ce++){var F=z[ce].g;const Un=z[ce].map;if(F-=wt,F<0)wt=Math.max(0,z[ce].g-100),Ht=!1;else try{F="req"+F+"_"||"";try{var et=Un instanceof Map?Un:Object.entries(Un);for(const[xi,ni]of et){let ii=ni;m(ni)&&(ii=br(ni)),ve.push(F+xi+"="+encodeURIComponent(ii))}}catch(xi){throw ve.push(F+"type="+encodeURIComponent("_badmap")),xi}}catch{S&&S(Un)}}if(Ht){et=ve.join("&");break t}}et=void 0}return h=h.i.splice(0,v),y.G=h,et}function Rc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Rt||w(),vt||(Rt(),vt=!0),I.add(y,h),h.A=0}}function Us(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=mi(p(h.Da,h),Dc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,xc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=mi(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Dr(this),xc(this))};function Dl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function xc(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xe(h.na);Yt(y,"RID","rpc"),Yt(y,"SID",h.M),Yt(y,"AID",h.K),Yt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Yt(y,"TO",h.ia),Yt(y,"TYPE","xmlhttp"),Ls(h,y),h.u&&h.o&&Ms(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Ns(xe(y)),v.u=null,v.R=!0,Va(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Dr(this),Us(this),we(19))};function ja(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Cc(h,y){var v=null;if(h.g==y){ja(h),Dl(h),h.g=null;var S=2}else if(Ei(h.h,y))v=y.G,vl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var z=h.D;S=Na(),Ue(S,new di(S,v)),Ii(h)}else Rc(h);else if(z=y.m,z==3||z==0&&y.X>0||!(S==1&&Ba(h,y)||S==2&&Us(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),z){case 1:Ri(h,5);break;case 4:Ri(h,10);break;case 3:Ri(h,6);break;default:Ri(h,2)}}}function Dc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ri(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const z=!S;S=new bn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Fe(S,"https"),Ns(S),z?Wn(S.toString(),v):wl(S.toString(),v)}else we(2);h.I=0,h.l&&h.l.pa(y),Nc(h),za(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Nc(h){if(h.I=0,h.ja=[],h.l){const y=Tl(h.h);(y.length!=0||h.i.length!=0)&&($(h.ja,y),$(h.ja,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.oa()}}function Vc(h,y,v){var S=v instanceof bn?xe(v):new bn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Sr(S,S.u);else{var z=c.location;S=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const F=new bn(null);S&&Fe(F,S),y&&(F.g=y),z&&Sr(F,z),v&&(F.h=v),S=F}return v=h.G,y=h.wa,v&&y&&Yt(S,v,y),Yt(S,"VER",h.ka),Ls(h,S),S}function Oc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Wt(new Si({ab:v})):new Wt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}s=Mc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Nr(){}Nr.prototype.g=function(h,y){return new un(h,y)};function un(h,y){Ae.call(this),this.g=new Cr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Qi(this)}T(un,Ae),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){xl(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=br(h),h=v);y.i.push(new Re(y.Ya++,h)),y.I==3&&Ii(y)},un.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,un.Z.N.call(this)};function Pc(h){Ke.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Pc,Ke);function kc(){Mn.call(this),this.status=1}T(kc,Mn);function Qi(h){this.g=h}T(Qi,Mc),Qi.prototype.ra=function(){Ue(this.g,"a")},Qi.prototype.qa=function(h){Ue(this.g,new Pc(h))},Qi.prototype.pa=function(h){Ue(this.g,new kc)},Qi.prototype.oa=function(){Ue(this.g,"b")},Nr.prototype.createWebChannel=Nr.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,$b=function(){return new Nr},Xb=function(){return Na()},Yb=_e,Fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cs.NO_ERROR=0,Cs.TIMEOUT=8,Cs.HTTP_ERROR=6,Zh=Cs,ml.COMPLETE="complete",Qb=ml,mc.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,Tu=mc,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Kb=Wt}).apply(typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{});const xT="@firebase/firestore",CT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new _p("@firebase/firestore");function wo(){return va.logLevel}function tt(s,...t){if(va.logLevel<=Pt.DEBUG){const e=t.map(Np);va.debug(`Firestore (${rl}): ${s}`,...e)}}function be(s,...t){if(va.logLevel<=Pt.ERROR){const e=t.map(Np);va.error(`Firestore (${rl}): ${s}`,...e)}}function ju(s,...t){if(va.logLevel<=Pt.WARN){const e=t.map(Np);va.warn(`Firestore (${rl}): ${s}`,...e)}}function Np(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(s,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,Jb(s,r,e)}function Jb(s,t,e){let r=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw be(r),new Error(r)}function mt(s,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,s||Jb(t,o,r)}function ht(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends _r{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Fx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(nn.UNAUTHENTICATED)))}shutdown(){}}class Hx{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){mt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ds,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ds)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new qx(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class Gx{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Kx{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new Gx(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class DT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qx{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){mt(this.o===void 0,3512);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new DT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(mt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new DT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Yx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function bt(s,t){return s<t?-1:s>t?1:0}function Hg(s,t){const e=Math.min(s.length,t.length);for(let r=0;r<e;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return wg(o)===wg(u)?bt(o,u):wg(o)?1:-1}return bt(s.length,t.length)}const Xx=55296,$x=57343;function wg(s){const t=s.charCodeAt(0);return t>=Xx&&t<=$x}function Lo(s,t,e){return s.length===t.length&&s.every(((r,o)=>e(r,t[o])))}function Zb(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__name__";class Oi{constructor(t,e,r){e===void 0?e=0:e>t.length&&lt(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&lt(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Oi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=Oi.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return bt(t.length,e.length)}static compareSegments(t,e){const r=Oi.isNumericId(t),o=Oi.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?Oi.extractNumericId(t).compare(Oi.extractNumericId(e)):Hg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return fs.fromString(t.substring(4,t.length-2))}}class Kt extends Oi{construct(t,e,r){return new Kt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new st(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Kt(e)}static emptyPath(){return new Kt([])}}const Jx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class me extends Oi{construct(t,e,r){return new me(t,e,r)}static isValidIdentifier(t){return Jx.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),me.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NT}static keyField(){return new me([NT])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new st(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new st(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new st(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new st(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new me(e)}static emptyPath(){return new me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Kt.fromString(t))}static fromName(t){return new rt(Kt.fromString(t).popFirst(5))}static empty(){return new rt(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Kt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Kt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(s,t,e){if(!e)throw new st(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Zx(s,t,e,r){if(t===!0&&r===!0)throw new st(W.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function VT(s){if(!rt.isDocumentKey(s))throw new st(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function OT(s){if(rt.isDocumentKey(s))throw new st(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function tS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Op(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":lt(12329,{type:typeof s})}function dr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new st(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Op(s);throw new st(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(s,t){const e={typeString:s};return t&&(e.value=t),e}function rc(s,t){if(!tS(s))throw new st(W.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){e=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new st(W.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=-62135596800,PT=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*PT);return new Jt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new st(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new st(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<MT)throw new st(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new st(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PT}_compareTo(t){return this.seconds===t.seconds?bt(this.nanoseconds,t.nanoseconds):bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(rc(t,Jt._jsonSchema))return new Jt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-MT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Me("string",Jt._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static fromTimestamp(t){return new pt(t)}static min(){return new pt(new Jt(0,0))}static max(){return new pt(new Jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=-1;class _f{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Gg(s){return s.fields.find((t=>t.kind===2))}function ia(s){return s.fields.filter((t=>t.kind!==2))}_f.UNKNOWN_ID=-1;class Wh{constructor(t,e){this.fieldPath=t,this.kind=e}}class qu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new qu(0,On.min())}}function eS(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=pt.fromTimestamp(r===1e9?new Jt(e+1,0):new Jt(e,r));return new On(o,rt.empty(),t)}function nS(s){return new On(s.readTime,s.key,Uo)}class On{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new On(pt.min(),rt.empty(),Uo)}static max(){return new On(pt.max(),rt.empty(),Uo)}}function Mp(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(s.documentKey,t.documentKey),e!==0?e:bt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ts(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==iS)throw s;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new U(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof U?e:U.resolve(e)}catch(e){return U.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):U.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):U.reject(e)}static resolve(t){return new U(((e,r)=>{e(t)}))}static reject(t){return new U(((e,r)=>{r(t)}))}static waitFor(t){return new U(((e,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(g=>r(g)))})),c=!0,u===o&&e()}))}static or(t){let e=U.resolve(!1);for(const r of t)e=e.next((o=>o?U.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new U(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;e(t[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(t,e){return new U(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="SimpleDb";class jf{static open(t,e,r,o){try{return new jf(e,t.transaction(o,r))}catch(u){throw new Ru(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new ds,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Ru(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Pp(r.target.error);this.S.reject(new Ru(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(tt(Dn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new tC(e)}}class ms{static delete(t){return tt(Dn,"Removing database:",t),sa(nb().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!ub())return!1;if(ms.F())return!0;const t=Be(),e=ms.M(t),r=0<e&&e<10,o=sS(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,ms.M(Be())===12.2&&be("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(tt(Dn,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;e(c)},o.onblocked=()=>{r(new Ru(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new st(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new st(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Ru(t,c))},o.onupgradeneeded=u=>{tt(Dn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{tt(Dn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=jf.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),U.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(tt(Dn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function sS(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class Wx{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return sa(this.U.delete())}}class Ru extends st{constructor(t,e){super(W.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Es(s){return s.name==="IndexedDbTransactionError"}class tC{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(Dn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(Dn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),sa(r)}add(t){return tt(Dn,"ADD",this.store.name,t,t),sa(this.store.add(t))}get(t){return sa(this.store.get(t)).next((e=>(e===void 0&&(e=null),tt(Dn,"GET",this.store.name,t,e),e)))}delete(t){return tt(Dn,"DELETE",this.store.name,t),sa(this.store.delete(t))}count(){return tt(Dn,"COUNT",this.store.name),sa(this.store.count())}J(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new U(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new U(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(t,e){tt(Dn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.H(o,e)}te(t){const e=this.cursor({});return new U(((r,o)=>{e.onerror=u=>{const c=Pp(u.target.error);o(c)},e.onsuccess=u=>{const c=u.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(t,e){const r=[];return new U(((o,u)=>{t.onerror=c=>{u(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new Wx(m),p=e(m.primaryKey,m.value,g);if(p instanceof U){const E=p.catch((T=>(g.done(),U.reject(T))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>U.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function sa(s){return new U(((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=Pp(r.target.error);e(o)}}))}let kT=!1;function Pp(s){const t=ms.M(Be());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kT||(kT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const xu="IndexBackfiller";class eC{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){tt(xu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();tt(xu,`Documents written: ${e}`)}catch(e){Es(e)?tt(xu,"Ignoring IndexedDB error during index backfill: ",e):await Ts(e)}await this.re(6e4)}))}}class nC{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let o=e,u=!0;return U.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!r.has(c))return tt(xu,`Processing collection: ${c}`),this.oe(t,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>e-o))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(o,u))).next((m=>(tt(xu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((o,u)=>{const c=nS(u);Mp(c,r)>0&&(r=c)})),new On(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}vn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=-1;function qf(s){return s==null}function Fu(s){return s===0&&1/s==-1/0}function aS(s){return typeof s=="number"&&Number.isInteger(s)&&!Fu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="";function on(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=LT(t)),t=iC(s.get(e),t);return LT(t)}function iC(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case vf:e+="";break;default:e+=u}}return e}function LT(s){return s+vf+""}function Li(s){const t=s.length;if(mt(t>=2,64408,{path:s}),t===2)return mt(s.charAt(0)===vf&&s.charAt(1)==="",56145,{path:s}),Kt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const c=s.indexOf(vf,u);switch((c<0||c>e)&&lt(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:lt(61167,{path:s})}u=c+2}return new Kt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="remoteDocuments",sc="owner",vo="owner",Hu="mutationQueues",rC="userId",oi="mutations",UT="batchId",ca="userMutationsIndex",zT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(s,t){return[s,on(t)]}function oS(s,t,e){return[s,on(t),e]}const sC={},zo="documentMutations",Tf="remoteDocumentsV14",aC=["prefixPath","collectionGroup","readTime","documentId"],ef="documentKeyIndex",oC=["prefixPath","collectionGroup","documentId"],lS="collectionGroupIndex",lC=["collectionGroup","readTime","prefixPath","documentId"],Gu="remoteDocumentGlobal",Kg="remoteDocumentGlobalKey",Bo="targets",uS="queryTargetsIndex",uC=["canonicalId","targetId"],jo="targetDocuments",cC=["targetId","path"],kp="documentTargetsIndex",hC=["path","targetId"],Ef="targetGlobalKey",da="targetGlobal",Ku="collectionParents",fC=["collectionId","parent"],qo="clientMetadata",dC="clientId",Ff="bundles",mC="bundleId",Hf="namedQueries",gC="name",Lp="indexConfiguration",pC="indexId",Qg="collectionGroupIndex",yC="collectionGroup",Cu="indexState",_C=["indexId","uid"],cS="sequenceNumberIndex",vC=["uid","sequenceNumber"],Du="indexEntries",TC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hS="documentKeyIndex",EC=["indexId","uid","orderedDocumentKey"],Gf="documentOverlays",bC=["userId","collectionPath","documentId"],Yg="collectionPathOverlayIndex",SC=["userId","collectionPath","largestBatchId"],fS="collectionGroupOverlayIndex",AC=["userId","collectionGroup","largestBatchId"],Up="globals",wC="name",dS=[Hu,oi,zo,ra,Bo,sc,da,jo,qo,Gu,Ku,Ff,Hf],IC=[...dS,Gf],mS=[Hu,oi,zo,Tf,Bo,sc,da,jo,qo,Gu,Ku,Ff,Hf,Gf],gS=mS,zp=[...gS,Lp,Cu,Du],RC=zp,pS=[...zp,Up],xC=pS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends rS{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function je(s,t){const e=ht(s);return ms.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function bs(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function yS(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,e){this.comparator=t,this.root=e||Ze.EMPTY}insert(t,e){return new se(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qh(this.root,t,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qh(this.root,t,this.comparator,!0)}}class qh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ze{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Ze.RED,this.left=o??Ze.EMPTY,this.right=u??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Ze(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Ze.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw lt(27949);return t+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Ze(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new jT(this.data.getIterator())}getIteratorFrom(t){return new jT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Zt(this.comparator);return e.data=t,e}}class jT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function To(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(me.comparator)}static empty(){return new Tn([])}unionWith(t){let e=new Zt(me.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Tn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Lo(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new _S("Invalid base64 string: "+u):u}})(t);return new Se(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new Se(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Se.EMPTY_BYTE_STRING=new Se("");const CC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(s){if(mt(!!s,39018),typeof s=="string"){let t=0;const e=CC.exec(s);if(mt(!!e,46558,{timestamp:s}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fe(s.seconds),nanos:fe(s.nanos)}}function fe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yr(s){return typeof s=="string"?Se.fromBase64String(s):Se.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="server_timestamp",TS="__type__",ES="__previous_value__",bS="__local_write_time__";function Bp(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[TS])==null?void 0:r.stringValue)===vS}function Kf(s){const t=s.mapValue.fields[ES];return Bp(t)?Kf(t):t}function Qu(s){const t=pr(s.mapValue.fields[bS].timestampValue);return new Jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t,e,r,o,u,c,m,g,p,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const bf="(default)";class Ta{constructor(t,e){this.projectId=t,this.database=e||bf}static empty(){return new Ta("","")}get isDefaultDatabase(){return this.database===bf}isEqual(t){return t instanceof Ta&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="__type__",SS="__max__",ls={mapValue:{fields:{__type__:{stringValue:SS}}}},qp="__vector__",Fo="value",nf={nullValue:"NULL_VALUE"};function ps(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Bp(s)?4:AS(s)?9007199254740991:Qf(s)?10:11:lt(28295,{value:s})}function Fi(s,t){if(s===t)return!0;const e=ps(s);if(e!==ps(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Qu(s).isEqual(Qu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=pr(o.timestampValue),m=pr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return yr(o.bytesValue).isEqual(yr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return fe(o.geoPointValue.latitude)===fe(u.geoPointValue.latitude)&&fe(o.geoPointValue.longitude)===fe(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return fe(o.integerValue)===fe(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=fe(o.doubleValue),m=fe(u.doubleValue);return c===m?Fu(c)===Fu(m):isNaN(c)&&isNaN(m)}return!1})(s,t);case 9:return Lo(s.arrayValue.values||[],t.arrayValue.values||[],Fi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(BT(c)!==BT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Fi(c[g],m[g])))return!1;return!0})(s,t);default:return lt(52216,{left:s})}}function Yu(s,t){return(s.values||[]).find((e=>Fi(e,t)))!==void 0}function ys(s,t){if(s===t)return 0;const e=ps(s),r=ps(t);if(e!==r)return bt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return bt(s.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=fe(u.integerValue||u.doubleValue),g=fe(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return qT(s.timestampValue,t.timestampValue);case 4:return qT(Qu(s),Qu(t));case 5:return Hg(s.stringValue,t.stringValue);case 6:return(function(u,c){const m=yr(u),g=yr(c);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=bt(m[p],g[p]);if(E!==0)return E}return bt(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=bt(fe(u.latitude),fe(c.latitude));return m!==0?m:bt(fe(u.longitude),fe(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return FT(s.arrayValue,t.arrayValue);case 10:return(function(u,c){var A,L,$,Q;const m=u.fields||{},g=c.fields||{},p=(A=m[Fo])==null?void 0:A.arrayValue,E=(L=g[Fo])==null?void 0:L.arrayValue,T=bt((($=p==null?void 0:p.values)==null?void 0:$.length)||0,((Q=E==null?void 0:E.values)==null?void 0:Q.length)||0);return T!==0?T:FT(p,E)})(s.mapValue,t.mapValue);case 11:return(function(u,c){if(u===ls.mapValue&&c===ls.mapValue)return 0;if(u===ls.mapValue)return 1;if(c===ls.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const A=Hg(g[T],E[T]);if(A!==0)return A;const L=ys(m[g[T]],p[E[T]]);if(L!==0)return L}return bt(g.length,E.length)})(s.mapValue,t.mapValue);default:throw lt(23264,{he:e})}}function qT(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return bt(s,t);const e=pr(s),r=pr(t),o=bt(e.seconds,r.seconds);return o!==0?o:bt(e.nanos,r.nanos)}function FT(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=ys(e[o],r[o]);if(u)return u}return bt(e.length,r.length)}function Ho(s){return $g(s)}function $g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const r=pr(e);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return yr(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return rt.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=$g(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${$g(e.fields[c])}`;return o+"}"})(s.mapValue):lt(61005,{value:s})}function rf(s){switch(ps(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Kf(s);return t?16+rf(t):16;case 5:return 2*s.stringValue.length;case 6:return yr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+rf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return bs(r.fields,((u,c)=>{o+=u.length+rf(c)})),o})(s.mapValue);default:throw lt(13486,{value:s})}}function Fp(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Jg(s){return!!s&&"integerValue"in s}function Xu(s){return!!s&&"arrayValue"in s}function HT(s){return!!s&&"nullValue"in s}function GT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function sf(s){return!!s&&"mapValue"in s}function Qf(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[jp])==null?void 0:r.stringValue)===qp}function Nu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return bs(s.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Nu(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Nu(s.arrayValue.values[e]);return t}return{...s}}function AS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===SS}const wS={mapValue:{fields:{[jp]:{stringValue:qp},[Fo]:{arrayValue:{}}}}};function NC(s){return"nullValue"in s?nf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Fp(Ta.empty(),rt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Qf(s)?wS:{mapValue:{}}:lt(35942,{value:s})}function VC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Fp(Ta.empty(),rt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?wS:"mapValue"in s?Qf(s)?{mapValue:{}}:ls:lt(61959,{value:s})}function KT(s,t){const e=ys(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function QT(s,t){const e=ys(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.value=t}static empty(){return new sn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!sf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nu(e)}setAll(t){let e=me.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}c?r[m.lastSegment()]=Nu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());sf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Fi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];sf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){bs(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new sn(Nu(this.value))}}function IS(s){const t=[];return bs(s.fields,((e,r)=>{const o=new me([e]);if(sf(r)){const u=IS(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,e,r,o,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new ye(t,0,pt.min(),pt.min(),pt.min(),sn.empty(),0)}static newFoundDocument(t,e,r,o){return new ye(t,1,e,pt.min(),r,o,0)}static newNoDocument(t,e){return new ye(t,2,e,pt.min(),pt.min(),sn.empty(),0)}static newUnknownDocument(t,e){return new ye(t,3,e,pt.min(),pt.min(),sn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ye&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,e){this.position=t,this.inclusive=e}}function YT(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],c=s.position[o];if(u.field.isKeyField()?r=rt.comparator(rt.fromName(c.referenceValue),e.key):r=ys(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function XT(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Fi(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,e="asc"){this.field=t,this.dir=e}}function OC(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{}class Lt extends RS{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new MC(t,e,r):e==="array-contains"?new LC(t,r):e==="in"?new OS(t,r):e==="not-in"?new UC(t,r):e==="array-contains-any"?new zC(t,r):new Lt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new PC(t,r):new kC(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(ys(e,this.value)):e!==null&&ps(this.value)===ps(e)&&this.matchesComparison(ys(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ie extends RS{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ie(t,e)}matches(t){return Ko(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ko(s){return s.op==="and"}function Zg(s){return s.op==="or"}function Hp(s){return xS(s)&&Ko(s)}function xS(s){for(const t of s.filters)if(t instanceof ie)return!1;return!0}function Wg(s){if(s instanceof Lt)return s.field.canonicalString()+s.op.toString()+Ho(s.value);if(Hp(s))return s.filters.map((t=>Wg(t))).join(",");{const t=s.filters.map((e=>Wg(e))).join(",");return`${s.op}(${t})`}}function CS(s,t){return s instanceof Lt?(function(r,o){return o instanceof Lt&&r.op===o.op&&r.field.isEqual(o.field)&&Fi(r.value,o.value)})(s,t):s instanceof ie?(function(r,o){return o instanceof ie&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&CS(c,o.filters[m])),!0):!1})(s,t):void lt(19439)}function DS(s,t){const e=s.filters.concat(t);return ie.create(e,s.op)}function NS(s){return s instanceof Lt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Ho(e.value)}`})(s):s instanceof ie?(function(e){return e.op.toString()+" {"+e.getFilters().map(NS).join(" ,")+"}"})(s):"Filter"}class MC extends Lt{constructor(t,e,r){super(t,e,r),this.key=rt.fromName(r.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class PC extends Lt{constructor(t,e){super(t,"in",e),this.keys=VS("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class kC extends Lt{constructor(t,e){super(t,"not-in",e),this.keys=VS("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function VS(s,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((r=>rt.fromName(r.referenceValue)))}class LC extends Lt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Xu(e)&&Yu(e.arrayValue,this.value)}}class OS extends Lt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Yu(this.value.arrayValue,e)}}class UC extends Lt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Yu(this.value.arrayValue,e)}}class zC extends Lt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Xu(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t,e=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function tp(s,t=null,e=[],r=[],o=null,u=null,c=null){return new BC(s,t,e,r,o,u,c)}function Ea(s){const t=ht(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Wg(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),qf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Ho(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Ho(r))).join(",")),t.Te=e}return t.Te}function ac(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!OC(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!CS(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!XT(s.startAt,t.startAt)&&XT(s.endAt,t.endAt)}function Af(s){return rt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function wf(s,t){return s.filters.filter((e=>e instanceof Lt&&e.field.isEqual(t)))}function $T(s,t,e){let r=nf,o=!0;for(const u of wf(s,t)){let c=nf,m=!0;switch(u.op){case"<":case"<=":c=NC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=nf}KT({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];KT({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}function JT(s,t,e){let r=ls,o=!0;for(const u of wf(s,t)){let c=ls,m=!0;switch(u.op){case">=":case">":c=VC(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=ls}QT({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];QT({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(t,e=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MS(s,t,e,r,o,u,c,m){return new Yf(s,t,e,r,o,u,c,m)}function Xf(s){return new Yf(s)}function ZT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function jC(s){return s.collectionGroup!==null}function Vu(s){const t=ht(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Zt(me.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Sf(u,r))})),e.has(me.keyField().canonicalString())||t.Ie.push(new Sf(me.keyField(),r))}return t.Ie}function Vn(s){const t=ht(s);return t.Ee||(t.Ee=qC(t,Vu(s))),t.Ee}function qC(s,t){if(s.limitType==="F")return tp(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sf(o.field,u)}));const e=s.endAt?new Go(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Go(s.startAt.position,s.startAt.inclusive):null;return tp(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function ep(s,t,e){return new Yf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function $f(s,t){return ac(Vn(s),Vn(t))&&s.limitType===t.limitType}function PS(s){return`${Ea(Vn(s))}|lt:${s.limitType}`}function Io(s){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>NS(o))).join(", ")}]`),qf(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>Ho(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>Ho(o))).join(",")),`Target(${r})`})(Vn(s))}; limitType=${s.limitType})`}function oc(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):rt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of Vu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=YT(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Vu(r),o)||r.endAt&&!(function(c,m,g){const p=YT(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Vu(r),o))})(s,t)}function kS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function LS(s){return(t,e)=>{let r=!1;for(const o of Vu(s)){const u=FC(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function FC(s,t,e){const r=s.field.isKeyField()?rt.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?ys(g,p):lt(42886)})(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){bs(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return yS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new se(rt.comparator);function Nn(){return HC}const US=new se(rt.comparator);function Eu(...s){let t=US;for(const e of s)t=t.insert(e.key,e);return t}function zS(s){let t=US;return s.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Ui(){return Ou()}function BS(){return Ou()}function Ou(){return new vr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const GC=new se(rt.comparator),KC=new Zt(rt.comparator);function Dt(...s){let t=KC;for(const e of s)t=t.add(e);return t}const QC=new Zt(bt);function Gp(){return QC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(t)?"-0":t}}function jS(s){return{integerValue:""+s}}function YC(s,t){return aS(t)?jS(t):Kp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function XC(s,t,e){return s instanceof Qo?(function(o,u){const c={fields:{[TS]:{stringValue:vS},[bS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bp(u)&&(u=Kf(u)),u&&(c.fields[ES]=u),{mapValue:c}})(e,t):s instanceof Yo?FS(s,t):s instanceof Xo?HS(s,t):(function(o,u){const c=qS(o,u),m=WT(c)+WT(o.Ae);return Jg(c)&&Jg(o.Ae)?jS(m):Kp(o.serializer,m)})(s,t)}function $C(s,t,e){return s instanceof Yo?FS(s,t):s instanceof Xo?HS(s,t):e}function qS(s,t){return s instanceof $u?(function(r){return Jg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Qo extends Jf{}class Yo extends Jf{constructor(t){super(),this.elements=t}}function FS(s,t){const e=GS(t);for(const r of s.elements)e.some((o=>Fi(o,r)))||e.push(r);return{arrayValue:{values:e}}}class Xo extends Jf{constructor(t){super(),this.elements=t}}function HS(s,t){let e=GS(t);for(const r of s.elements)e=e.filter((o=>!Fi(o,r)));return{arrayValue:{values:e}}}class $u extends Jf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function WT(s){return fe(s.integerValue||s.doubleValue)}function GS(s){return Xu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,e){this.field=t,this.transform=e}}function JC(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Yo&&o instanceof Yo||r instanceof Xo&&o instanceof Xo?Lo(r.elements,o.elements,Fi):r instanceof $u&&o instanceof $u?Fi(r.Ae,o.Ae):r instanceof Qo&&o instanceof Qo})(s.transform,t.transform)}class ZC{constructor(t,e){this.version=t,this.transformResults=e}}class an{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new an}static exists(t){return new an(void 0,t)}static updateTime(t){return new an(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function af(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Zf{}function QS(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Wf(s.key,an.none()):new sl(s.key,s.data,an.none());{const e=s.data,r=sn.empty();let o=new Zt(me.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Tr(s.key,r,new Tn(o.toArray()),an.none())}}function WC(s,t,e){s instanceof sl?(function(o,u,c){const m=o.value.clone(),g=eE(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,e):s instanceof Tr?(function(o,u,c){if(!af(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=eE(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(YS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Mu(s,t,e,r){return s instanceof sl?(function(u,c,m,g){if(!af(u.precondition,c))return m;const p=u.value.clone(),E=nE(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,t,e,r):s instanceof Tr?(function(u,c,m,g){if(!af(u.precondition,c))return m;const p=nE(u.fieldTransforms,g,c),E=c.data;return E.setAll(YS(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,t,e,r):(function(u,c,m){return af(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,t,e)}function tD(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=qS(r.transform,o||null);u!=null&&(e===null&&(e=sn.empty()),e.set(r.field,u))}return e||null}function tE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Lo(r,o,((u,c)=>JC(u,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class sl extends Zf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Tr extends Zf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function YS(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}})),t}function eE(s,t,e){const r=new Map;mt(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let o=0;o<e.length;o++){const u=s[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,$C(c,m,e[o]))}return r}function nE(s,t,e){const r=new Map;for(const o of s){const u=o.transform,c=e.data.field(o.field);r.set(o.field,XC(u,c,t))}return r}class Wf extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XS extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&WC(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Mu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Mu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=BS();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const g=QS(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(pt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Dt())}isEqual(t){return this.batchId===t.batchId&&Lo(this.mutations,t.mutations,((e,r)=>tE(e,r)))&&Lo(this.baseMutations,t.baseMutations,((e,r)=>tE(e,r)))}}class Yp{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){mt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return GC})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Yp(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,zt;function nD(s){switch(s){case W.OK:return lt(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return lt(15467,{code:s})}}function $S(s){if(s===void 0)return be("GRPC error has no .code"),W.UNKNOWN;switch(s){case Oe.OK:return W.OK;case Oe.CANCELLED:return W.CANCELLED;case Oe.UNKNOWN:return W.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return W.INTERNAL;case Oe.UNAVAILABLE:return W.UNAVAILABLE;case Oe.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Oe.NOT_FOUND:return W.NOT_FOUND;case Oe.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Oe.ABORTED:return W.ABORTED;case Oe.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Oe.DATA_LOSS:return W.DATA_LOSS;default:return lt(39323,{code:s})}}(zt=Oe||(Oe={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new fs([4294967295,4294967295],0);function iE(s){const t=iD().encode(s),e=new Gb;return e.update(t),new Uint8Array(e.digest())}function rE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new fs([e,r],0),new fs([o,u],0)]}class $p{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new bu(`Invalid padding: ${e}`);if(r<0)throw new bu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new bu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=fs.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(fs.fromNumber(r)));return o.compare(rD)===1&&(o=new fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=iE(t),[r,o]=rE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new $p(u,o,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=iE(t),[r,o]=rE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,uc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new lc(pt.min(),o,new se(bt),Nn(),Dt())}}class uc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new uc(r,e,Dt(),Dt(),Dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class JS{constructor(t,e){this.targetId=t,this.Ce=e}}class ZS{constructor(t,e,r=Se.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class sE{constructor(){this.ve=0,this.Fe=aE(),this.Me=Se.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Dt(),e=Dt(),r=Dt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:lt(38017,{changeType:u})}})),new uc(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=aE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sD{constructor(t){this.Ge=t,this.ze=new Map,this.je=Nn(),this.Je=Fh(),this.He=Fh(),this.Ye=new se(bt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:lt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(Af(u))if(r===0){const c=new rt(u.path);this.et(e,c,ye.newNoDocument(c,pt.min()))}else mt(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,p)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=yr(r).toUint8Array()}catch(g){if(g instanceof _S)return ju("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new $p(c,o,u)}catch(g){return ju(g instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Af(m.target)){const g=new rt(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,ye.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=Dt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new lc(t,e,this.Ye,this.je,r);return this.je=Nn(),this.Je=Fh(),this.He=Fh(),this.Ye=new se(bt),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new sE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Zt(bt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Zt(bt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new sE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Fh(){return new se(rt.comparator)}function aE(){return new se(rt.comparator)}const aD={asc:"ASCENDING",desc:"DESCENDING"},oD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lD={and:"AND",or:"OR"};class uD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function np(s,t){return s.useProto3Json||qf(t)?t:{value:t}}function $o(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WS(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function cD(s,t){return $o(s,t.toTimestamp())}function hn(s){return mt(!!s,49232),pt.fromTimestamp((function(e){const r=pr(e);return new Jt(r.seconds,r.nanos)})(s))}function Jp(s,t){return ip(s,t).canonicalString()}function ip(s,t){const e=(function(o){return new Kt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?e:e.child(t)}function tA(s){const t=Kt.fromString(s);return mt(uA(t),10190,{key:t.toString()}),t}function If(s,t){return Jp(s.databaseId,t.path)}function ma(s,t){const e=tA(t);if(e.get(1)!==s.databaseId.projectId)throw new st(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new st(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new rt(iA(e))}function eA(s,t){return Jp(s.databaseId,t)}function nA(s){const t=tA(s);return t.length===4?Kt.emptyPath():iA(t)}function rp(s){return new Kt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function iA(s){return mt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function oE(s,t,e){return{name:If(s,t),fields:e.value.mapValue.fields}}function hD(s,t,e){const r=ma(s,t.name),o=hn(t.updateTime),u=t.createTime?hn(t.createTime):pt.min(),c=new sn({mapValue:{fields:t.fields}}),m=ye.newFoundDocument(r,o,u,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function fD(s,t){let e;if("targetChange"in t){t.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:lt(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(mt(E===void 0||typeof E=="string",58123),Se.fromBase64String(E||"")):(mt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Se.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?W.UNKNOWN:$S(p.code);return new st(E,p.message||"")})(c);e=new ZS(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=ma(s,r.document.name),u=hn(r.document.updateTime),c=r.document.createTime?hn(r.document.createTime):pt.min(),m=new sn({mapValue:{fields:r.document.fields}}),g=ye.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];e=new of(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=ma(s,r.document),u=r.readTime?hn(r.readTime):pt.min(),c=ye.newNoDocument(o,u),m=r.removedTargetIds||[];e=new of([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=ma(s,r.document),u=r.removedTargetIds||[];e=new of([],u,o,null)}else{if(!("filter"in t))return lt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new eD(o,u),m=r.targetId;e=new JS(m,c)}}return e}function Rf(s,t){let e;if(t instanceof sl)e={update:oE(s,t.key,t.value)};else if(t instanceof Wf)e={delete:If(s,t.key)};else if(t instanceof Tr)e={update:oE(s,t.key,t.data),updateMask:_D(t.fieldMask)};else{if(!(t instanceof XS))return lt(16599,{Vt:t.type});e={verify:If(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof Qo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Yo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Xo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $u)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw lt(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:cD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:lt(27497)})(s,t.precondition)),e}function sp(s,t){const e=t.currentDocument?(function(u){return u.updateTime!==void 0?an.updateTime(hn(u.updateTime)):u.exists!==void 0?an.exists(u.exists):an.none()})(t.currentDocument):an.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)mt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Qo;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Yo(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new Xo(E)}else"increment"in m?g=new $u(c,m.increment):lt(16584,{proto:m});const p=me.fromServerFormat(m.fieldPath);return new KS(p,g)})(s,o))):[];if(t.update){t.update.name;const o=ma(s,t.update.name),u=new sn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new Tn(p.map((E=>me.fromServerFormat(E))))})(t.updateMask);return new Tr(o,u,c,e,r)}return new sl(o,u,e,r)}if(t.delete){const o=ma(s,t.delete);return new Wf(o,e)}if(t.verify){const o=ma(s,t.verify);return new XS(o,e)}return lt(1463,{proto:t})}function dD(s,t){return s&&s.length>0?(mt(t!==void 0,14353),s.map((e=>(function(o,u){let c=o.updateTime?hn(o.updateTime):hn(u);return c.isEqual(pt.min())&&(c=hn(u)),new ZC(c,o.transformResults||[])})(e,t)))):[]}function rA(s,t){return{documents:[eA(s,t.path)]}}function sA(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=eA(s,o);const u=(function(p){if(p.length!==0)return lA(ie.create(p,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(A){return{field:Ro(A.field),direction:gD(A.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=np(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:e,parent:o}}function aA(s){let t=nA(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){mt(r===1,65062);const E=e.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=(function(T){const A=oA(T);return A instanceof ie&&Hp(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(T){return T.map((A=>(function($){return new Sf(xo($.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(A)))})(e.orderBy));let m=null;e.limit&&(m=(function(T){let A;return A=typeof T=="object"?T.value:T,qf(A)?null:A})(e.limit));let g=null;e.startAt&&(g=(function(T){const A=!!T.before,L=T.values||[];return new Go(L,A)})(e.startAt));let p=null;return e.endAt&&(p=(function(T){const A=!T.before,L=T.values||[];return new Go(L,A)})(e.endAt)),MS(t,o,c,u,m,"F",g,p)}function mD(s,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function oA(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=xo(e.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=xo(e.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=xo(e.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=xo(e.unaryFilter.field);return Lt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(s):s.fieldFilter!==void 0?(function(e){return Lt.create(xo(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return ie.create(e.compositeFilter.filters.map((r=>oA(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(e.compositeFilter.op))})(s):lt(30097,{filter:s})}function gD(s){return aD[s]}function pD(s){return oD[s]}function yD(s){return lD[s]}function Ro(s){return{fieldPath:s.canonicalString()}}function xo(s){return me.fromServerFormat(s.fieldPath)}function lA(s){return s instanceof Lt?(function(e){if(e.op==="=="){if(GT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NAN"}};if(HT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(GT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NAN"}};if(HT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(e.field),op:pD(e.op),value:e.value}}})(s):s instanceof ie?(function(e){const r=e.getFilters().map((o=>lA(o)));return r.length===1?r[0]:{compositeFilter:{op:yD(e.op),filters:r}}})(s):lt(54877,{filter:s})}function _D(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function uA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t,e,r,o,u=pt.min(),c=pt.min(),m=Se.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new fr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t){this.yt=t}}function vD(s,t){let e;if(t.document)e=hD(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=rt.fromSegments(t.noDocument.path),o=Sa(t.noDocument.readTime);e=ye.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return lt(56709);{const r=rt.fromSegments(t.unknownDocument.path),o=Sa(t.unknownDocument.version);e=ye.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime((function(o){const u=new Jt(o[0],o[1]);return pt.fromTimestamp(u)})(t.readTime)),e}function lE(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:xf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,c){return{name:If(u,c.key),fields:c.data.value.mapValue.fields,updateTime:$o(u,c.version.toTimestamp()),createTime:$o(u,c.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:ba(t.version)};else{if(!t.isUnknownDocument())return lt(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:ba(t.version)}}return r}function xf(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function ba(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Sa(s){const t=new Jt(s.seconds,s.nanoseconds);return pt.fromTimestamp(t)}function aa(s,t){const e=(t.baseMutations||[]).map((u=>sp(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const c=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>sp(s.yt,u))),o=Jt.fromMillis(t.localWriteTimeMs);return new Qp(t.batchId,o,e,r)}function Su(s){const t=Sa(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?Sa(s.lastLimboFreeSnapshotVersion):pt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return mt(c===1,1966,{count:c}),Vn(Xf(nA(u.documents[0])))})(s.query):(function(u){return Vn(aA(u))})(s.query),new fr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Se.fromBase64String(s.resumeToken))}function hA(s,t){const e=ba(t.snapshotVersion),r=ba(t.lastLimboFreeSnapshotVersion);let o;o=Af(t.target)?rA(s.yt,t.target):sA(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ea(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function fA(s){const t=aA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ep(t,t.limit,"L"):t}function Ig(s,t){return new Xp(t.largestBatchId,sp(s.yt,t.overlayMutation))}function uE(s,t){const e=t.path.lastSegment();return[s,on(t.path.popLast()),e]}function cE(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:ba(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{getBundleMetadata(t,e){return hE(t).get(e).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:Sa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,e){return hE(t).put((function(o){return{bundleId:o.id,createTime:ba(hn(o.createTime)),version:o.version}})(e))}getNamedQuery(t,e){return fE(t).get(e).next((r=>{if(r)return(function(u){return{name:u.name,query:fA(u.bundledQuery),readTime:Sa(u.readTime)}})(r)}))}saveNamedQuery(t,e){return fE(t).put((function(o){return{name:o.name,readTime:ba(hn(o.readTime)),bundledQuery:o.bundledQuery}})(e))}}function hE(s){return je(s,Ff)}function fE(s){return je(s,Hf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new td(t,r)}getOverlay(t,e){return gu(t).get(uE(this.userId,e)).next((r=>r?Ig(this.serializer,r):null))}getOverlays(t,e){const r=Ui();return U.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){const o=[];return r.forEach(((u,c)=>{const m=new Xp(e,c);o.push(this.St(t,m))})),U.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach((c=>o.add(on(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(gu(t).Z(Yg,m))})),U.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Ui(),u=on(e),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return gu(t).J(Yg,c).next((m=>{for(const g of m){const p=Ig(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(t,e,r,o){const u=Ui();let c;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gu(t).ee({index:fS,range:m},((g,p,E)=>{const T=Ig(this.serializer,p);u.size()<o||T.largestBatchId===c?(u.set(T.getKey(),T),c=T.largestBatchId):E.done()})).next((()=>u))}St(t,e){return gu(t).put((function(o,u,c){const[m,g,p]=uE(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Rf(o.yt,c.mutation)}})(this.serializer,this.userId,e))}}function gu(s){return je(s,Gf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{bt(t){return je(t,Up)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e==null?void 0:e.value;return r?Se.fromUint8Array(r):Se.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(fe(t.integerValue));else if("doubleValue"in t){const r=fe(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Fu(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=pr(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(yr(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?AS(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Qf(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):lt(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const o of Object.keys(r))this.Ot(o,e),this.Ct(r[o],e)}kt(t,e){var c,m;const r=t.fields||{};this.Ft(e,53);const o=Fo,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(e,15),e.Mt(fe(u)),this.Ot(o,e),this.Ct(r[o],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const o of r)this.Ct(o,e)}Lt(t,e){this.Ft(e,37),rt.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}oa.Kt=new oa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=255;function bD(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function dE(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=bD(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(t/8)}class SD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=e.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=e.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const e=this.en(t),r=dE(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}nn(t){const e=this.en(t),r=dE(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}rn(){this.sn(Eo),this.sn(255)}_n(){this.an(Eo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Eo?(this.sn(Eo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Eo?(this.an(Eo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class AD{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class wD{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class pu{constructor(){this.cn=new SD,this.ln=new AD(this.cn),this.hn=new wD(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,e,r,o){this.Tn=t,this.In=e,this.En=r,this.dn=o}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new la(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:lf(this.En),directionalValue:lf(this.dn),orderedDocumentKey:lf(e),documentKey:r.path.toArray()}}Vn(t,e,r){const o=this.Rn(t,e,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function es(s,t){let e=s.Tn-t.Tn;return e!==0?e:(e=mE(s.En,t.En),e!==0?e:(e=mE(s.dn,t.dn),e!==0?e:rt.comparator(s.In,t.In)))}function mE(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}function lf(s){return lb()?(function(e){let r="";for(let o=0;o<e.length;o++)r+=String.fromCharCode(e[o]);return r})(s):s}function gE(s){return typeof s!="string"?s:(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(s)}class pE{constructor(t){this.mn=new Zt(((e,r)=>me.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(mt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Gg(t);if(e!==void 0&&!this.wn(e))return!1;const r=ia(t);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new Zt(me.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new Wh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new Wh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new Wh(r.field,r.dir==="asc"?0:1)));return new _f(_f.UNKNOWN_ID,this.collectionId,e,qu.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(s){var e,r;if(mt(s instanceof Lt||s instanceof ie,20012),s instanceof Lt){if(s instanceof OS){const o=((r=(e=s.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map((u=>Lt.create(s.field,"==",u))))||[];return ie.create(o,"or")}return s}const t=s.filters.map((o=>dA(o)));return ie.create(t,s.op)}function ID(s){if(s.getFilters().length===0)return[];const t=lp(dA(s));return mt(mA(t),7391),ap(t)||op(t)?[t]:t.getFilters()}function ap(s){return s instanceof Lt}function op(s){return s instanceof ie&&Hp(s)}function mA(s){return ap(s)||op(s)||(function(e){if(e instanceof ie&&Zg(e)){for(const r of e.getFilters())if(!ap(r)&&!op(r))return!1;return!0}return!1})(s)}function lp(s){if(mt(s instanceof Lt||s instanceof ie,34018),s instanceof Lt)return s;if(s.filters.length===1)return lp(s.filters[0]);const t=s.filters.map((r=>lp(r)));let e=ie.create(t,s.op);return e=Cf(e),mA(e)?e:(mt(e instanceof ie,64498),mt(Ko(e),40251),mt(e.filters.length>1,57927),e.filters.reduce(((r,o)=>Zp(r,o))))}function Zp(s,t){let e;return mt(s instanceof Lt||s instanceof ie,38388),mt(t instanceof Lt||t instanceof ie,25473),e=s instanceof Lt?t instanceof Lt?(function(o,u){return ie.create([o,u],"and")})(s,t):yE(s,t):t instanceof Lt?yE(t,s):(function(o,u){if(mt(o.filters.length>0&&u.filters.length>0,48005),Ko(o)&&Ko(u))return DS(o,u.getFilters());const c=Zg(o)?o:u,m=Zg(o)?u:o,g=c.filters.map((p=>Zp(p,m)));return ie.create(g,"or")})(s,t),Cf(e)}function yE(s,t){if(Ko(t))return DS(t,s.getFilters());{const e=t.filters.map((r=>Zp(s,r)));return ie.create(e,"or")}}function Cf(s){if(mt(s instanceof Lt||s instanceof ie,11850),s instanceof Lt)return s;const t=s.getFilters();if(t.length===1)return Cf(t[0]);if(xS(s))return s;const e=t.map((o=>Cf(o))),r=[];return e.forEach((o=>{o instanceof Lt?r.push(o):o instanceof ie&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:ie.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.Cn=new Wp}addToCollectionParentIndex(t,e){return this.Cn.add(e),U.resolve()}getCollectionParents(t,e){return U.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return U.resolve()}deleteFieldIndex(t,e){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,e){return U.resolve()}getDocumentsMatchingTarget(t,e){return U.resolve(null)}getIndexType(t,e){return U.resolve(0)}getFieldIndexes(t,e){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,e){return U.resolve(On.min())}getMinOffsetFromCollectionGroup(t,e){return U.resolve(On.min())}updateCollectionGroup(t,e,r){return U.resolve()}updateIndexEntries(t,e){return U.resolve()}}class Wp{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Zt(Kt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Zt(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="IndexedDbIndexManager",Hh=new Uint8Array(0);class xD{constructor(t,e){this.databaseId=e,this.vn=new Wp,this.Fn=new vr((r=>Ea(r)),((r,o)=>ac(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const u={collectionId:r,parent:on(o)};return vE(t).put(u)}return U.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[Zb(e),""],!1,!0);return vE(t).J(o).next((u=>{for(const c of u){if(c.collectionId!==e)break;r.push(Li(c.parent))}return r}))}addFieldIndex(t,e){const r=yu(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(e);delete o.indexId;const u=r.add(o);if(e.indexState){const c=So(t);return u.next((m=>{c.put(cE(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return u.next()}deleteFieldIndex(t,e){const r=yu(t),o=So(t),u=bo(t);return r.delete(e.indexId).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=yu(t),r=bo(t),o=So(t);return e.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,e){return U.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new pE(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,e){const r=bo(t);let o=!0;const u=new Map;return U.forEach(this.Mn(e),(c=>this.xn(t,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Dt();const m=[];return U.forEach(u,((g,p)=>{tt(_E,`Using index ${(function(at){return`id=${at.indexId}|cg=${at.collectionGroup}|f=${at.fields.map((St=>`${St.fieldPath}:${St.kind}`)).join(",")}`})(g)} to execute ${Ea(e)}`);const E=(function(at,St){const Rt=Gg(St);if(Rt===void 0)return null;for(const vt of wf(at,Rt.fieldPath))switch(vt.op){case"array-contains-any":return vt.value.arrayValue.values||[];case"array-contains":return[vt.value]}return null})(p,g),T=(function(at,St){const Rt=new Map;for(const vt of ia(St))for(const I of wf(at,vt.fieldPath))switch(I.op){case"==":case"in":Rt.set(vt.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Rt.set(vt.fieldPath.canonicalString(),I.value),Array.from(Rt.values())}return null})(p,g),A=(function(at,St){const Rt=[];let vt=!0;for(const I of ia(St)){const w=I.kind===0?$T(at,I.fieldPath,at.startAt):JT(at,I.fieldPath,at.startAt);Rt.push(w.value),vt&&(vt=w.inclusive)}return new Go(Rt,vt)})(p,g),L=(function(at,St){const Rt=[];let vt=!0;for(const I of ia(St)){const w=I.kind===0?JT(at,I.fieldPath,at.endAt):$T(at,I.fieldPath,at.endAt);Rt.push(w.value),vt&&(vt=w.inclusive)}return new Go(Rt,vt)})(p,g),$=this.On(g,p,A),Q=this.On(g,p,L),X=this.Nn(g,p,T),ct=this.Bn(g.indexId,E,$,A.inclusive,Q,L.inclusive,X);return U.forEach(ct,(dt=>r.Y(dt,e.limit).next((at=>{at.forEach((St=>{const Rt=rt.fromSegments(St.documentKey);c.has(Rt)||(c=c.add(Rt),m.push(Rt))}))}))))})).next((()=>m))}return U.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=ID(ie.create(t.filters,"and")).map((r=>tp(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,o,u,c,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),p=g/(e!=null?e.length:1),E=[];for(let T=0;T<g;++T){const A=e?this.Ln(e[T/p]):Hh,L=this.kn(t,A,r[T%p],o),$=this.qn(t,A,u[T%p],c),Q=m.map((X=>this.kn(t,A,X,!0)));E.push(...this.createRange(L,$,Q))}return E}kn(t,e,r,o){const u=new la(t,rt.empty(),e,r);return o?u:u.An()}qn(t,e,r,o){const u=new la(t,rt.empty(),e,r);return o?u.An():u}xn(t,e){const r=new pE(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let r=2;const o=this.Mn(e);return U.forEach(o,(u=>this.xn(t,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new Zt(me.comparator),E=!1;for(const T of g.filters)for(const A of T.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:p=p.add(A.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(e)&&o.length>1&&r===2?1:r))}Qn(t,e){const r=new pu;for(const o of ia(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);oa.Kt.Dt(u,c)}return r.un()}Ln(t){const e=new pu;return oa.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new pu;return oa.Kt.Dt(Fp(this.databaseId,e),r.Pn((function(u){const c=ia(u);return c.length===0?0:c[c.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let o=[];o.push(new pu);let u=0;for(const c of ia(t)){const m=r[u++];for(const g of o)if(this.Un(e,c.fieldPath)&&Xu(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);oa.Kt.Dt(m,p)}}return this.Wn(o)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const o=[...t],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new pu;g.seed(m.un()),oa.Kt.Dt(c,g.Pn(e.kind)),u.push(g)}return u}Un(t,e){return!!t.filters.find((r=>r instanceof Lt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=yu(t),o=So(t);return(e?r.J(Qg,IDBKeyRange.bound(e,e)):r.J()).next((u=>{const c=[];return U.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,T){const A=T?new qu(T.sequenceNumber,new On(Sa(T.readTime),new rt(Li(T.documentKey)),T.largestBatchId)):qu.empty(),L=E.fields.map((([$,Q])=>new Wh(me.fromServerFormat($),Q)));return new _f(E.indexId,E.collectionGroup,L,A)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:bt(r.collectionGroup,o.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const o=yu(t),u=So(t);return this.Gn(t).next((c=>o.J(Qg,IDBKeyRange.bound(e,e)).next((m=>U.forEach(m,(g=>u.put(cE(g.indexId,this.uid,c,r))))))))}updateIndexEntries(t,e){const r=new Map;return U.forEach(e,((o,u)=>{const c=r.get(o.collectionGroup);return(c?U.resolve(c):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),U.forEach(m,(g=>this.zn(t,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?U.resolve():this.Jn(t,u,g,p,E)})))))))}))}Hn(t,e,r,o){return bo(t).put(o.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,o){return bo(t).delete(o.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const o=bo(t);let u=new Zt(es);return o.ee({index:hS,range:IDBKeyRange.only([r.indexId,this.uid,lf(this.$n(r,e))])},((c,m)=>{u=u.add(new la(r.indexId,e,gE(m.arrayValue),gE(m.directionalValue)))})).next((()=>u))}jn(t,e){let r=new Zt(es);const o=this.Qn(e,t);if(o==null)return r;const u=Gg(e);if(u!=null){const c=t.data.field(u.fieldPath);if(Xu(c))for(const m of c.arrayValue.values||[])r=r.add(new la(e.indexId,t.key,this.Ln(m),o))}else r=r.add(new la(e.indexId,t.key,Hh,o));return r}Jn(t,e,r,o,u){tt(_E,"Updating index entries for document '%s'",e.key);const c=[];return(function(g,p,E,T,A){const L=g.getIterator(),$=p.getIterator();let Q=To(L),X=To($);for(;Q||X;){let ct=!1,dt=!1;if(Q&&X){const at=E(Q,X);at<0?dt=!0:at>0&&(ct=!0)}else Q!=null?dt=!0:ct=!0;ct?(T(X),X=To($)):dt?(A(Q),Q=To(L)):(Q=To(L),X=To($))}})(o,u,es,(m=>{c.push(this.Hn(t,e,r,m))}),(m=>{c.push(this.Yn(t,e,r,m))})),U.waitFor(c)}Gn(t){let e=1;return So(t).ee({index:cS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),e=o.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((c,m)=>es(c,m))).filter(((c,m,g)=>!m||es(c,g[m-1])!==0));const o=[];o.push(t);for(const c of r){const m=es(c,t),g=es(c,e);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(e);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Hh,rt.empty()),g=o[c+1].Vn(this.uid,Hh,rt.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,e){return es(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(TE)}getMinOffset(t,e){return U.mapArray(this.Mn(e),(r=>this.xn(t,r).next((o=>o||lt(44426))))).next(TE)}}function vE(s){return je(s,Ku)}function bo(s){return je(s,Du)}function yu(s){return je(s,Lp)}function So(s){return je(s,Cu)}function TE(s){mt(s.length!==0,28825);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Mp(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new On(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gA=41943040;class rn{static withCacheSize(t){return new rn(t,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(s,t,e){const r=s.store(oi),o=s.store(zo),u=[],c=IDBKeyRange.only(e.batchId);let m=0;const g=r.ee({range:c},((E,T,A)=>(m++,A.delete())));u.push(g.next((()=>{mt(m===1,47070,{batchId:e.batchId})})));const p=[];for(const E of e.mutations){const T=oS(t,E.key.path,e.batchId);u.push(o.delete(T)),p.push(E.key)}return U.waitFor(u).next((()=>p))}function Df(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw lt(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(gA,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class ed{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,e,r,o){mt(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new ed(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ns(t).ee({index:ca,range:r},((o,u,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,r,o){const u=Co(t),c=ns(t);return c.add({}).next((m=>{mt(typeof m=="number",49019);const g=new Qp(m,e,r,o),p=(function(L,$,Q){const X=Q.baseMutations.map((dt=>Rf(L.yt,dt))),ct=Q.mutations.map((dt=>Rf(L.yt,dt)));return{userId:$,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:X,mutations:ct}})(this.serializer,this.userId,g),E=[];let T=new Zt(((A,L)=>bt(A.canonicalString(),L.canonicalString())));for(const A of o){const L=oS(this.userId,A.key.path,m);T=T.add(A.key.path.popLast()),E.push(c.put(p)),E.push(u.put(L,sC))}return T.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(t,A))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),U.waitFor(E).next((()=>g))}))}lookupMutationBatch(t,e){return ns(t).get(e).next((r=>r?(mt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),aa(this.serializer,r)):null))}er(t,e){return this.Xn[e]?U.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const o=r.keys();return this.Xn[e]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ns(t).ee({index:ca,range:o},((c,m,g)=>{m.userId===this.userId&&(mt(m.batchId>=r,47524,{tr:r}),u=aa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fa;return ns(t).ee({index:ca,range:e,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,fa],[this.userId,Number.POSITIVE_INFINITY]);return ns(t).J(ca,e).next((r=>r.map((o=>aa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=tf(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Co(t).ee({range:o},((c,m,g)=>{const[p,E,T]=c,A=Li(E);if(p===this.userId&&e.path.isEqual(A))return ns(t).get(T).next((L=>{if(!L)throw lt(61480,{nr:c,batchId:T});mt(L.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:L.userId,batchId:T}),u.push(aa(this.serializer,L))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(bt);const o=[];return e.forEach((u=>{const c=tf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Co(t).ee({range:m},((p,E,T)=>{const[A,L,$]=p,Q=Li(L);A===this.userId&&u.path.isEqual(Q)?r=r.add($):T.done()}));o.push(g)})),U.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=tf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Zt(bt);return Co(t).ee({range:c},((g,p,E)=>{const[T,A,L]=g,$=Li(A);T===this.userId&&r.isPrefixOf($)?$.length===o&&(m=m.add(L)):E.done()})).next((()=>this.rr(t,m)))}rr(t,e){const r=[],o=[];return e.forEach((u=>{o.push(ns(t).get(u).next((c=>{if(c===null)throw lt(35274,{batchId:u});mt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(aa(this.serializer,c))})))})),U.waitFor(o).next((()=>r))}removeMutationBatch(t,e){return pA(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),U.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return U.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Co(t).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Li(u[1]);o.push(g)}else m.done()})).next((()=>{mt(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,e){return yA(t,this.userId,e)}_r(t){return _A(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:fa,lastStreamToken:""}))}}function yA(s,t,e){const r=tf(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Co(s).ee({range:u,X:!0},((m,g,p)=>{const[E,T,A]=m;E===t&&T===o&&(c=!0),p.done()})).next((()=>c))}function ns(s){return je(s,oi)}function Co(s){return je(s,zo)}function _A(s){return je(s,Hu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Aa(0)}static cr(){return new Aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new Aa(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>pt.fromTimestamp(new Jt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.hr(t,o))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Ao(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(mt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let o=0;const u=[];return Ao(t).ee(((c,m)=>{const g=Su(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>U.waitFor(u))).next((()=>o))}forEachTarget(t,e){return Ao(t).ee(((r,o)=>{const u=Su(o);e(u)}))}lr(t){return bE(t).get(Ef).next((e=>(mt(e!==null,2888),e)))}hr(t,e){return bE(t).put(Ef,e)}Pr(t,e){return Ao(t).put(hA(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=Ea(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ao(t).ee({range:o,index:uS},((c,m,g)=>{const p=Su(m);ac(e,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(t,e,r){const o=[],u=os(t);return e.forEach((c=>{const m=on(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,c))})),U.waitFor(o)}removeMatchingKeys(t,e,r){const o=os(t);return U.forEach(e,(u=>{const c=on(u.path);return U.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,e){const r=os(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=os(t);let u=Dt();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Li(c[1]),E=new rt(p);u=u.add(E)})).next((()=>u))}containsKey(t,e){const r=on(e.path),o=IDBKeyRange.bound([r],[Zb(r)],!1,!0);let u=0;return os(t).ee({index:kp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(t,e){return Ao(t).get(e).next((r=>r?Su(r):null))}}function Ao(s){return je(s,Bo)}function bE(s){return je(s,da)}function os(s){return je(s,jo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="LruGarbageCollector",vA=1048576;function AE([s,t],[e,r]){const o=bt(s,e);return o===0?bt(t,r):o}class DD{constructor(t){this.Ir=t,this.buffer=new Zt(AE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();AE(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class TA{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(SE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Es(e)?tt(SE,"Ignoring IndexedDB error during garbage collection: ",e):await Ts(e)}await this.Vr(3e5)}))}}class ND{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return U.resolve(vn.ce);const r=new DD(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(EE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(r=T,m=Date.now(),this.removeTargets(t,r,e)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((T=>(p=Date.now(),wo()<=Pt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function EA(s,t){return new ND(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(t,e){this.db=t,this.garbageCollector=EA(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,o)=>e(o)))}addReference(t,e,r){return Gh(t,r)}removeReference(t,e,r){return Gh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Gh(t,e)}br(t,e){return(function(o,u){let c=!1;return _A(o).te((m=>yA(o,m,u).next((g=>(g&&(c=!0),U.resolve(!g)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((c,m)=>{if(m<=e){const g=this.br(t,c).next((p=>{if(!p)return u++,r.getEntry(t,c).next((()=>(r.removeEntry(c,pt.min()),os(t).delete((function(T){return[0,on(T.path)]})(c)))))}));o.push(g)}})).next((()=>U.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Gh(t,e)}Sr(t,e){const r=os(t);let o,u=vn.ce;return r.ee({index:kp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==vn.ce&&e(new rt(Li(o)),u),u=p,o=g):u=vn.ce})).next((()=>{u!==vn.ce&&e(new rt(Li(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Gh(s,t){return os(s).put((function(r,o){return{targetId:0,path:on(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.changes=new vr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ye.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?U.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return ea(t).put(r)}removeEntry(t,e,r){return ea(t).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],xf(c),m[m.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=ye.newInvalidDocument(e);return ea(t).ee({index:ef,range:IDBKeyRange.only(_u(e))},((o,u)=>{r=this.Cr(e,u)})).next((()=>r))}vr(t,e){let r={size:0,document:ye.newInvalidDocument(e)};return ea(t).ee({index:ef,range:IDBKeyRange.only(_u(e))},((o,u)=>{r={document:this.Cr(e,u),size:Df(u)}})).next((()=>r))}getEntries(t,e){let r=Nn();return this.Fr(t,e,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(t,e){let r=Nn(),o=new se(rt.comparator);return this.Fr(t,e,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Df(c))})).next((()=>({documents:r,Or:o})))}Fr(t,e,r){if(e.isEmpty())return U.resolve();let o=new Zt(RE);e.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(_u(o.first()),_u(o.last())),c=o.getIterator();let m=c.getNext();return ea(t).ee({index:ef,range:u},((g,p,E)=>{const T=rt.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&RE(m,T)<0;)r(m,null),m=c.getNext();m&&m.isEqual(T)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(_u(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,r,o,u){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),xf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ea(t).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let E=Nn();for(const T of p){const A=this.Cr(rt.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);A.isFoundDocument()&&(oc(e,A)||o.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(t,e,r,o){let u=Nn();const c=IE(e,r),m=IE(e,On.max());return ea(t).ee({index:lS,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const T=this.Cr(rt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(T.key,T),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(t){return new MD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return wE(t).get(Kg).next((e=>(mt(!!e,20021),e)))}Dr(t,e){return wE(t).put(Kg,e)}Cr(t,e){if(e){const r=vD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(pt.min())))return r}return ye.newInvalidDocument(t)}}function SA(s){return new OD(s)}class MD extends bA{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new vr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const e=[];let r=0,o=new Zt(((u,c)=>bt(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(e.push(this.Nr.removeEntry(t,u,m.readTime)),c.isValidDocument()){const g=lE(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Df(g);r+=p-m.size,e.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=lE(this.Nr.serializer,c.convertToNoDocument(pt.min()));e.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),e.push(this.Nr.updateMetadata(t,r)),U.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function wE(s){return je(s,Gu)}function ea(s){return je(s,Tf)}function _u(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function IE(s,t){const e=t.documentKey.path.toArray();return[s,xf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function RE(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=bt(e[u],r[u]),o)return o;return o=bt(e.length,r.length),o||(o=bt(e[e.length-2],r[r.length-2]),o||bt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&Mu(r.mutation,o,Tn.empty(),Jt.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Dt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Dt()){const o=Ui();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=Eu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Ui();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Dt())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,o){let u=Nn();const c=Ou(),m=(function(){return Ou()})();return e.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Tr)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),Mu(E.mutation,p,E.mutation.getFieldMask(),Jt.now())):c.set(p.key,Tn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),e.forEach(((p,E)=>m.set(p,new PD(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Ou();let o=new se(((c,m)=>c-m)),u=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=e.get(g);if(p===null)return;let E=r.get(g)||Tn.empty();E=m.applyToLocalView(p,E),r.set(g,E);const T=(o.get(m.batchId)||Dt()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=BS();E.forEach((A=>{if(!u.has(A)){const L=QS(e.get(A),r.get(A));L!==null&&T.set(A,L),u=u.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,T))}return U.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):jC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):U.resolve(Ui());let m=Uo,g=u;return c.next((p=>U.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?U.resolve():this.remoteDocumentCache.getEntry(t,E).next((A=>{g=g.insert(E,A)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Dt()))).next((E=>({batchId:m,changes:zS(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next((r=>{let o=Eu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=Eu();return this.indexManager.getCollectionParents(t,u).next((m=>U.forEach(m,(g=>{const p=(function(T,A){return new Yf(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,r,o).next((E=>{E.forEach(((T,A)=>{c=c.insert(T,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,ye.newInvalidDocument(E)))}));let m=Eu();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&Mu(E.mutation,p,Tn.empty(),Jt.now()),oc(e,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return U.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}})(e)),U.resolve()}getNamedQuery(t,e){return U.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:fA(o.bundledQuery),readTime:hn(o.readTime)}})(e)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.overlays=new se(rt.comparator),this.qr=new Map}getOverlay(t,e){return U.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ui();return U.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),U.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(t,e,r){const o=Ui(),u=e.length+1,c=new rt(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return U.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new se(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Ui(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Ui(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return U.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Xp(e,r));let u=this.qr.get(e);u===void 0&&(u=Dt(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.sessionToken=Se.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Qr=new Zt(Ge.$r),this.Ur=new Zt(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new Ge(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new Ge(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new rt(new Kt([])),r=new Ge(e,t),o=new Ge(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new rt(new Kt([])),r=new Ge(e,t),o=new Ge(e,t+1);let u=Dt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new Ge(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return rt.comparator(t.key,e.key)||bt(t.Yr,e.Yr)}static Kr(t,e){return bt(t.Yr,e.Yr)||rt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(Ge.$r)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Qp(u,e,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Ge(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return U.resolve(c)}lookupMutationBatch(t,e){return U.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return U.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?fa:this.tr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Ge(e,0),o=new Ge(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),U.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(bt);return e.forEach((o=>{const u=new Ge(o,0),c=new Ge(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const c=new Ge(new rt(u),0);let m=new Zt(bt);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),U.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){mt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(e.mutations,(o=>{const u=new Ge(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new Ge(e,0),o=this.Zr.firstAfterOrEqual(r);return U.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t){this.ri=t,this.docs=(function(){return new se(rt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return U.resolve(r?r.document.mutableCopy():ye.newInvalidDocument(e))}getEntries(t,e){let r=Nn();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ye.newInvalidDocument(o))})),U.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=Nn();const c=e.path,m=new rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Mp(nS(E),r)<=0||(o.has(E.key)||oc(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return U.resolve(u)}getAllFromCollectionGroup(t,e,r,o){lt(9500)}ii(t,e){return U.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new jD(this)}getSize(t){return U.resolve(this.size)}}class jD extends bA{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),U.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(t){this.persistence=t,this.si=new vr((e=>Ea(e)),ac),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.oi=0,this._i=new ty,this.targetCount=0,this.ai=Aa.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),U.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Aa(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,U.resolve()}updateTargetData(t,e){return this.Pr(e),U.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),U.waitFor(u).next((()=>o))}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return U.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),U.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),U.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),U.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return U.resolve(r)}containsKey(t,e){return U.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(t,e){this.ui={},this.overlays={},this.ci=new vn(0),this.li=!1,this.li=!0,this.hi=new UD,this.referenceDelegate=t(this),this.Pi=new qD(this),this.indexManager=new RD,this.remoteDocumentCache=(function(o){return new BD(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new cA(e),this.Ii=new kD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new LD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new zD(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new FD(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class FD extends rS{constructor(t){super(),this.currentSequenceNumber=t}}class nd{constructor(t){this.persistence=t,this.Ri=new ty,this.Vi=null}static mi(t){return new nd(t)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),U.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),U.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const o=rt.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,pt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return U.or([()=>U.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Nf{constructor(t,e){this.persistence=t,this.pi=new vr((r=>on(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=EA(this,e)}static mi(t,e){return new Nf(t,e)}Ei(){}di(t){return U.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return U.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?U.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,pt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),U.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),U.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),U.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=rf(t.data.value)),e}br(t,e,r){return U.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return U.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t){this.serializer=t}k(t,e,r,o){const u=new jf("createOrUpgrade",e);r<1&&o>=1&&((function(g){g.createObjectStore(sc)})(t),(function(g){g.createObjectStore(Hu,{keyPath:rC}),g.createObjectStore(oi,{keyPath:UT,autoIncrement:!0}).createIndex(ca,zT,{unique:!0}),g.createObjectStore(zo)})(t),xE(t),(function(g){g.createObjectStore(ra)})(t));let c=U.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(jo),g.deleteObjectStore(Bo),g.deleteObjectStore(da)})(t),xE(t)),c=c.next((()=>(function(g){const p=g.store(da),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return p.put(Ef,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(oi).J().next((T=>{g.deleteObjectStore(oi),g.createObjectStore(oi,{keyPath:UT,autoIncrement:!0}).createIndex(ca,zT,{unique:!0});const A=p.store(oi),L=T.map(($=>A.put($)));return U.waitFor(L)}))})(t,u)))),c=c.next((()=>{(function(g){g.createObjectStore(qo,{keyPath:dC})})(t)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Gu)})(t),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(t,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Ff,{keyPath:mC})})(t),(function(g){g.createObjectStore(Hf,{keyPath:gC})})(t)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Gf,{keyPath:bC});p.createIndex(Yg,SC,{unique:!1}),p.createIndex(fS,AC,{unique:!1})})(t)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Tf,{keyPath:aC});p.createIndex(ef,oC),p.createIndex(lS,lC)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(ra)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Lp,{keyPath:pC,autoIncrement:!0}).createIndex(Qg,yC,{unique:!1}),g.createObjectStore(Cu,{keyPath:_C}).createIndex(cS,vC,{unique:!1}),g.createObjectStore(Du,{keyPath:TC}).createIndex(hS,EC,{unique:!1})})(t)))),r<16&&o>=16&&(c=c.next((()=>{e.objectStore(Cu).clear()})).next((()=>{e.objectStore(Du).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Up,{keyPath:wC})})(t)}))),r<18&&o>=18&&lb()&&(c=c.next((()=>{e.objectStore(Cu).clear()})).next((()=>{e.objectStore(Du).clear()}))),c}wi(t){let e=0;return t.store(ra).ee(((r,o)=>{e+=Df(o)})).next((()=>{const r={byteSize:e};return t.store(Gu).put(Kg,r)}))}yi(t){const e=t.store(Hu),r=t.store(oi);return e.J().next((o=>U.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,fa],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ca,c).next((m=>U.forEach(m,(g=>{mt(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=aa(this.serializer,g);return pA(t,u.userId,p).next((()=>{}))}))))}))))}Si(t){const e=t.store(jo),r=t.store(ra);return t.store(da).get(Ef).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Kt(c),p=(function(T){return[0,on(T)]})(g);u.push(e.get(p).next((E=>E?U.resolve():(T=>e.put({targetId:0,path:on(T),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>U.waitFor(u)))}))}bi(t,e){t.createObjectStore(Ku,{keyPath:fC});const r=e.store(Ku),o=new Wp,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:on(g)})}};return e.store(ra).ee({X:!0},((c,m)=>{const g=new Kt(c);return u(g.popLast())})).next((()=>e.store(zo).ee({X:!0},(([c,m,g],p)=>{const E=Li(m);return u(E.popLast())}))))}Di(t){const e=t.store(Bo);return e.ee(((r,o)=>{const u=Su(o),c=hA(this.serializer,u);return e.put(c)}))}Ci(t,e){const r=e.store(ra),o=[];return r.ee(((u,c)=>{const m=e.store(Tf),g=(function(T){return T.document?new rt(Kt.fromString(T.document.name).popFirst(5)):T.noDocument?rt.fromSegments(T.noDocument.path):T.unknownDocument?rt.fromSegments(T.unknownDocument.path):lt(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>U.waitFor(o)))}Fi(t,e){const r=e.store(oi),o=SA(this.serializer),u=new ey(nd.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Dt();aa(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),U.forEach(m,((g,p)=>{const E=new nn(p),T=td.wt(this.serializer,E),A=u.getIndexManager(E),L=ed.wt(E,this.serializer,A,u.referenceDelegate);return new AA(o,L,T,A).recalculateAndSaveOverlaysForDocumentKeys(new Xg(e,vn.ce),g).next()}))}))}}function xE(s){s.createObjectStore(jo,{keyPath:cC}).createIndex(kp,hC,{unique:!0}),s.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(uS,uC,{unique:!0}),s.createObjectStore(da)}const is="IndexedDbPersistence",Rg=18e5,xg=5e3,Cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GD="main";class ny{constructor(t,e,r,o,u,c,m,g,p,E,T=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!ny.v())throw new st(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VD(this,o),this.$i=e+GD,this.serializer=new cA(g),this.Ui=new ms(this.$i,this.Ni,new HD(this.serializer)),this.hi=new ED,this.Pi=new CD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SA(this.serializer),this.Ii=new TD,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&be(is,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(W.FAILED_PRECONDITION,Cg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new vn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Kh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(Es(t))return tt(is,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(is,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return vu(t).get(vo).next((e=>U.resolve(this.es(e))))}ts(t){return Kh(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Rg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=je(e,qo);return r.J().next((o=>{const u=this.ss(o,Rg),c=o.filter((m=>u.indexOf(m)===-1));return U.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?U.resolve(!0):vu(t).get(vo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,xg)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new st(W.FAILED_PRECONDITION,Cg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kh(t).J().next((r=>this.ss(r,xg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&tt(is,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[sc,qo],(t=>{const e=new Xg(t,vn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Kh(t).J().next((e=>this.ss(e,Rg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return ed.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new xD(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return td.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt(is,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?xC:g===17?pS:g===16?RC:g===15?zp:g===14?gS:g===13?mS:g===12?IC:g===11?dS:void lt(60245)})(this.Ni);let c;return this.Ui.runTransaction(t,o,u,(m=>(c=new Xg(m,this.ci?this.ci.next():vn.ce),e==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw be(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new st(W.FAILED_PRECONDITION,iS);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(t){return vu(t).get(vo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,xg)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new st(W.FAILED_PRECONDITION,Cg)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(t).put(vo,e)}static v(){return ms.v()}Zi(t){const e=vu(t);return e.get(vo).next((r=>this.es(r)?(tt(is,"Releasing primary lease."),e.delete(vo)):U.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(be(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;ob()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return tt(is,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return be(is,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){be("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function vu(s){return je(s,sc)}function Kh(s){return je(s,qo)}function wA(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=Dt(),o=Dt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new iy(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ob()?8:sS(Be())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new KD;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(wo()<=Pt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Io(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(wo()<=Pt.DEBUG&&tt("QueryEngine","Query:",Io(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(wo()<=Pt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Io(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vn(e))):U.resolve())}ys(t,e){if(ZT(e))return U.resolve(null);let r=Vn(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=ep(e,null,"F"),r=Vn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Dt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const p=this.Ds(e,m);return this.Cs(e,p,c,g.readTime)?this.ys(t,ep(e,null,"F")):this.vs(t,p,e,g)}))))})))))}ws(t,e,r,o){return ZT(e)||o.isEqual(pt.min())?U.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?U.resolve(null):(wo()<=Pt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Io(e)),this.vs(t,c,e,eS(o,Uo)).next((m=>m)))}))}Ds(t,e){let r=new Zt(LS(t));return e.forEach(((o,u)=>{oc(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return wo()<=Pt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Io(e)),this.ps.getDocumentsMatchingQuery(t,e,On.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="LocalStore",QD=3e8;class YD{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new se(bt),this.xs=new vr((u=>Ea(u)),ac),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new AA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function RA(s,t,e,r){return new YD(s,t,e,r)}async function xA(s,t){const e=ht(s);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Dt();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function XD(s,t){const e=ht(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,A=T.keys();let L=U.resolve();return A.forEach(($=>{L=L.next((()=>E.getEntry(g,$))).next((Q=>{const X=p.docVersions.get($);mt(X!==null,48541),Q.version.compareTo(X)<0&&(T.applyToRemoteDocument(Q,p),Q.isValidDocument()&&(Q.setReadTime(p.commitVersion),E.addEntry(Q)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Dt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function CA(s){const t=ht(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function $D(s,t){const e=ht(s),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((E,T)=>{const A=o.get(T);if(!A)return;m.push(e.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>e.Pi.addMatchingKeys(u,E.addedDocuments,T))));let L=A.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?L=L.withResumeToken(Se.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,r)),o=o.insert(T,L),(function(Q,X,ct){return Q.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=QD?!0:ct.addedDocuments.size+ct.modifiedDocuments.size+ct.removedDocuments.size>0})(A,L,E)&&m.push(e.Pi.updateTargetData(u,L))}));let g=Nn(),p=Dt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(JD(u,c,t.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(pt.min())){const E=e.Pi.getLastRemoteSnapshotVersion(u).next((T=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return U.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(e.Ms=o,u)))}function JD(s,t,e){let r=Dt(),o=Dt();return e.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let c=Nn();return e.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(pt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):tt(ry,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function ZD(s,t){const e=ht(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=fa),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Vf(s,t){const e=ht(s);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,U.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new fr(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function Jo(s,t,e){const r=ht(s),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Es(c))throw c;tt(ry,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function up(s,t,e){const r=ht(s);let o=pt.min(),u=Dt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const T=ht(g),A=T.xs.get(E);return A!==void 0?U.resolve(T.Ms.get(A)):T.Pi.getTargetData(p,E)})(r,c,Vn(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:pt.min(),e?u:Dt()))).next((m=>(VA(r,kS(t),m),{documents:m,Qs:u})))))}function DA(s,t){const e=ht(s),r=ht(e.Pi),o=e.Ms.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,t).next((c=>c?c.target:null))))}function NA(s,t){const e=ht(s),r=e.Os.get(t)||pt.min();return e.persistence.runTransaction("Get new document changes","readonly",(o=>e.Ns.getAllFromCollectionGroup(o,t,eS(r,Uo),Number.MAX_SAFE_INTEGER))).then((o=>(VA(e,t,o),o)))}function VA(s,t,e){let r=s.Os.get(t)||pt.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firestore_clients";function CE(s,t){return`${OA}_${s}_${t}`}const MA="firestore_mutations";function DE(s,t,e){let r=`${MA}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const PA="firestore_targets";function Dg(s,t){return`${PA}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="SharedClientState";class Of{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static Ws(t,e,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new st(o.error.code,o.error.message))),c?new Of(t,e,o.state,u):(be(Mi,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Pu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new st(r.error.code,r.error.message))),u?new Pu(t,r.state,o):(be(Mi,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Mf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Gp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=aS(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Mf(t,u):(be(Mi,`Failed to parse client data for instance '${t}': ${e}`),null)}}class sy{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new sy(e.clientId,e.onlineState):(be(Mi,`Failed to parse online state: ${t}`),null)}}class cp{constructor(){this.activeTargetIds=Gp()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ng{constructor(t,e,r,o,u){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new se(bt),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=CE(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new cp),this.ro=new RegExp(`^${OA}_${c}_([^_]*)$`),this.io=new RegExp(`^${MA}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${PA}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const o=this.getItem(CE(this.persistenceKey,r));if(o){const u=Mf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(Dg(this.persistenceKey,t));if(o){const u=Pu.Ws(t,o);u&&(r=u.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Dg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach((o=>{this.Po(o)})),this.currentUser=t,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return tt(Mi,"READ",t,e),e}setItem(t,e){tt(Mi,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){tt(Mi,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(tt(Mi,"EVENT",e.key,e.newValue),e.key===this.eo)return void be("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=(function(u){let c=vn.ce;if(u!=null)try{const m=JSON.parse(u);mt(typeof m=="number",30636,{So:u}),c=m}catch(m){be(Mi,"Failed to read sequence number from WebStorage",m)}return c})(e.newValue);r!==vn.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const o=new Of(this.currentUser,t,e,r),u=DE(this.persistenceKey,this.currentUser,t);this.setItem(u,o.Gs())}Po(t){const e=DE(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const o=Dg(this.persistenceKey,t),u=new Pu(t,e,r);this.setItem(o,u.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return Mf.Ws(r,e)}fo(t,e){const r=this.io.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Of.Ws(new nn(u),o,e)}yo(t,e){const r=this.so.exec(t),o=Number(r[1]);return Pu.Ws(o,e)}uo(t){return sy.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);tt(Mi,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Gp();return t.forEach(((r,o)=>{e=e.unionWith(o.activeTargetIds)})),e}}class kA{constructor(){this.Mo=new cp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new cp,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="ConnectivityMonitor";class VE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(NE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(NE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function hp(){return Qh===null?Qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",tN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=hp(),m=this.zo(t,e.toUriEncodedString());tt(Vg,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=el(p);return this.Jo(t,m,g,r,E).then((T=>(tt(Vg,`Received RPC '${t}' ${c}: `,T),T)),(T=>{throw ju(Vg,`RPC '${t}' ${c} failed with error: `,T,"url: ",m,"request:",r),T}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=tN[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class iN extends eN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=hp();return new Promise(((m,g)=>{const p=new Kb;p.setWithCredentials(!0),p.listenOnce(Qb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Zh.NO_ERROR:const T=p.getResponseJson();tt(en,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(T)),m(T);break;case Zh.TIMEOUT:tt(en,`RPC '${t}' ${c} timed out`),g(new st(W.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const A=p.getStatus();if(tt(en,`RPC '${t}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let L=p.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L==null?void 0:L.error;if($&&$.status&&$.message){const Q=(function(ct){const dt=ct.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(dt)>=0?dt:W.UNKNOWN})($.status);g(new st(Q,$.message))}else g(new st(W.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new st(W.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{tt(en,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(o);tt(en,`RPC '${t}' ${c} sending request:`,o),p.send(e,"POST",E,r,15)}))}T_(t,e,r){const o=hp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=$b(),m=Xb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");tt(en,`Creating RPC '${t}' stream ${o}: ${E}`,g);const T=c.createWebChannel(E,g);this.I_(T);let A=!1,L=!1;const $=new nN({Yo:X=>{L?tt(en,`Not sending because RPC '${t}' stream ${o} is closed:`,X):(A||(tt(en,`Opening RPC '${t}' stream ${o} transport.`),T.open(),A=!0),tt(en,`RPC '${t}' stream ${o} sending:`,X),T.send(X))},Zo:()=>T.close()}),Q=(X,ct,dt)=>{X.listen(ct,(at=>{try{dt(at)}catch(St){setTimeout((()=>{throw St}),0)}}))};return Q(T,Tu.EventType.OPEN,(()=>{L||(tt(en,`RPC '${t}' stream ${o} transport opened.`),$.o_())})),Q(T,Tu.EventType.CLOSE,(()=>{L||(L=!0,tt(en,`RPC '${t}' stream ${o} transport closed`),$.a_(),this.E_(T))})),Q(T,Tu.EventType.ERROR,(X=>{L||(L=!0,ju(en,`RPC '${t}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),$.a_(new st(W.UNAVAILABLE,"The operation could not be completed")))})),Q(T,Tu.EventType.MESSAGE,(X=>{var ct;if(!L){const dt=X.data[0];mt(!!dt,16349);const at=dt,St=(at==null?void 0:at.error)||((ct=at[0])==null?void 0:ct.error);if(St){tt(en,`RPC '${t}' stream ${o} received error:`,St);const Rt=St.status;let vt=(function(C){const O=Oe[C];if(O!==void 0)return $S(O)})(Rt),I=St.message;vt===void 0&&(vt=W.INTERNAL,I="Unknown error status: "+Rt+" with message "+St.message),L=!0,$.a_(new st(vt,I)),T.close()}else tt(en,`RPC '${t}' stream ${o} received:`,dt),$.u_(dt)}})),Q(m,Yb.STAT_EVENT,(X=>{X.stat===Fg.PROXY?tt(en,`RPC '${t}' stream ${o} detected buffering proxy`):X.stat===Fg.NOPROXY&&tt(en,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof window<"u"?window:null}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(s){return new uD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="PersistentStream";class zA{constructor(t,e,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UA(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===W.RESOURCE_EXHAUSTED?(be(e.toString()),be("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new st(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(OE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(tt(OE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rN extends zA{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=fD(this.serializer,t),r=(function(u){if(!("targetChange"in u))return pt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?pt.min():c.readTime?hn(c.readTime):pt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=rp(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=Af(g)?{documents:rA(u,g)}:{query:sA(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=WS(u,c.resumeToken);const p=np(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(pt.min())>0){m.readTime=$o(u,c.snapshotVersion.toTimestamp());const p=np(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const r=mD(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=rp(this.serializer),e.removeTarget=t,this.q_(e)}}class sN extends zA{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=dD(t.writeResults,t.commitTime),r=hn(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=rp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>Rf(this.serializer,r)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{}class oN extends aN{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new st(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,ip(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new st(W.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,ip(e,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new st(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lN{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(be(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="RemoteStore";class uN{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ra(this)&&(tt(wa,"Restarting streams for network reachability change."),await(async function(g){const p=ht(g);p.Ea.add(4),await cc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await rd(p)})(this))}))})),this.Ra=new lN(r,o)}}async function rd(s){if(Ra(s))for(const t of s.da)await t(!0)}async function cc(s){for(const t of s.da)await t(!1)}function sd(s,t){const e=ht(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),ly(e)?oy(e):ol(e).O_()&&ay(e,t))}function Zo(s,t){const e=ht(s),r=ol(e);e.Ia.delete(t),r.O_()&&BA(e,t),e.Ia.size===0&&(r.O_()?r.L_():Ra(e)&&e.Ra.set("Unknown"))}function ay(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ol(s).Y_(t)}function BA(s,t){s.Va.Ue(t),ol(s).Z_(t)}function oy(s){s.Va=new sD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),ol(s).start(),s.Ra.ua()}function ly(s){return Ra(s)&&!ol(s).x_()&&s.Ia.size>0}function Ra(s){return ht(s).Ea.size===0}function jA(s){s.Va=void 0}async function cN(s){s.Ra.set("Online")}async function hN(s){s.Ia.forEach(((t,e)=>{ay(s,t)}))}async function fN(s,t){jA(s),ly(s)?(s.Ra.ha(t),oy(s)):s.Ra.set("Unknown")}async function dN(s,t,e){if(s.Ra.set("Online"),t instanceof ZS&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){tt(wa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Pf(s,r)}else if(t instanceof of?s.Va.Ze(t):t instanceof JS?s.Va.st(t):s.Va.tt(t),!e.isEqual(pt.min()))try{const r=await CA(s.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Se.EMPTY_BYTE_STRING,E.snapshotVersion)),BA(u,g);const T=new fr(E.target,g,p,E.sequenceNumber);ay(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(s,e)}catch(r){tt(wa,"Failed to raise snapshot:",r),await Pf(s,r)}}async function Pf(s,t,e){if(!Es(t))throw t;s.Ea.add(1),await cc(s),s.Ra.set("Offline"),e||(e=()=>CA(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{tt(wa,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await rd(s)}))}function qA(s,t){return t().catch((e=>Pf(s,e,t)))}async function al(s){const t=ht(s),e=_s(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:fa;for(;mN(t);)try{const o=await ZD(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,gN(t,o)}catch(o){await Pf(t,o)}FA(t)&&HA(t)}function mN(s){return Ra(s)&&s.Ta.length<10}function gN(s,t){s.Ta.push(t);const e=_s(s);e.O_()&&e.X_&&e.ea(t.mutations)}function FA(s){return Ra(s)&&!_s(s).x_()&&s.Ta.length>0}function HA(s){_s(s).start()}async function pN(s){_s(s).ra()}async function yN(s){const t=_s(s);for(const e of s.Ta)t.ea(e.mutations)}async function _N(s,t,e){const r=s.Ta.shift(),o=Yp.from(r,t,e);await qA(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await al(s)}async function vN(s,t){t&&_s(s).X_&&await(async function(r,o){if((function(c){return nD(c)&&c!==W.ABORTED})(o.code)){const u=r.Ta.shift();_s(r).B_(),await qA(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await al(r)}})(s,t),FA(s)&&HA(s)}async function ME(s,t){const e=ht(s);e.asyncQueue.verifyOperationInProgress(),tt(wa,"RemoteStore received new credentials");const r=Ra(e);e.Ea.add(3),await cc(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await rd(e)}async function fp(s,t){const e=ht(s);t?(e.Ea.delete(2),await rd(e)):t||(e.Ea.add(2),await cc(e),e.Ra.set("Unknown"))}function ol(s){return s.ma||(s.ma=(function(e,r,o){const u=ht(e);return u.sa(),new rN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:cN.bind(null,s),t_:hN.bind(null,s),r_:fN.bind(null,s),H_:dN.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),ly(s)?oy(s):s.Ra.set("Unknown")):(await s.ma.stop(),jA(s))}))),s.ma}function _s(s){return s.fa||(s.fa=(function(e,r,o){const u=ht(e);return u.sa(),new sN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:pN.bind(null,s),r_:vN.bind(null,s),ta:yN.bind(null,s),na:_N.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await al(s)):(await s.fa.stop(),s.Ta.length>0&&(tt(wa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,m=new uy(t,e,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(s,t){if(be("AsyncQueue",`${t}: ${s}`),Es(s))return new st(W.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(t){return new Oo(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||rt.comparator(e.key,r.key):(e,r)=>rt.comparator(e.key,r.key),this.keyedMap=Eu(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Oo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.ga=new se(rt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):lt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class Wo{constructor(t,e,r,o,u,c,m,g,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new Wo(t,e,Oo.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$f(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class EN{constructor(){this.queries=kE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=ht(e),u=o.queries;o.queries=kE(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new st(W.ABORTED,"Firestore shutting down"))}}function kE(){return new vr((s=>PS(s)),$f)}async function bN(s,t){const e=ht(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new TN,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=cy(c,`Initialization of query '${Io(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&hy(e)}async function SN(s,t){const e=ht(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function AN(s,t){const e=ht(s);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&hy(e)}function wN(s,t,e){const r=ht(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function hy(s){s.Ca.forEach((t=>{t.next()}))}var dp,LE;(LE=dp||(dp={})).Ma="default",LE.Cache="cache";class IN{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Wo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(t){this.key=t}}class KA{constructor(t){this.key=t}}class RN{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Dt(),this.mutatedKeys=Dt(),this.eu=LS(t),this.tu=new Oo(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new PE,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const A=o.get(E),L=oc(this.query,T)?T:null,$=!!A&&this.mutatedKeys.has(A.key),Q=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let X=!1;A&&L?A.data.isEqual(L.data)?$!==Q&&(r.track({type:3,doc:L}),X=!0):this.su(A,L)||(r.track({type:2,doc:L}),X=!0,(g&&this.eu(L,g)>0||p&&this.eu(L,p)<0)&&(m=!0)):!A&&L?(r.track({type:0,doc:L}),X=!0):A&&!L&&(r.track({type:1,doc:A}),X=!0,(g||p)&&(m=!0)),X&&(L?(c=c.add(L),u=Q?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,T)=>(function(L,$){const Q=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:X})}};return Q(L)-Q($)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new Wo(this.query,t.tu,u,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Dt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new KA(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new GA(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=Dt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ll="SyncEngine";class xN{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class CN{constructor(t){this.key=t,this.hu=!1}}class DN{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new vr((m=>PS(m)),$f),this.Iu=new Map,this.Eu=new Set,this.du=new se(rt.comparator),this.Au=new Map,this.Ru=new ty,this.Vu={},this.mu=new Map,this.fu=Aa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NN(s,t,e=!0){const r=ad(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await QA(r,t,e,!0),o}async function VN(s,t){const e=ad(s);await QA(e,t,!0,!1)}async function QA(s,t,e,r){const o=await Vf(s.localStore,Vn(t)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await fy(s,t,u,c==="current",o.resumeToken)),s.isPrimaryClient&&e&&sd(s.remoteStore,o),m}async function fy(s,t,e,r,o){s.pu=(T,A,L)=>(async function(Q,X,ct,dt){let at=X.view.ru(ct);at.Cs&&(at=await up(Q.localStore,X.query,!1).then((({documents:I})=>X.view.ru(I,at))));const St=dt&&dt.targetChanges.get(X.targetId),Rt=dt&&dt.targetMismatches.get(X.targetId)!=null,vt=X.view.applyChanges(at,Q.isPrimaryClient,St,Rt);return mp(Q,X.targetId,vt.au),vt.snapshot})(s,T,A,L);const u=await up(s.localStore,t,!0),c=new RN(t,u.Qs),m=c.ru(u.documents),g=uc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);mp(s,e,p.au);const E=new xN(t,e,c);return s.Tu.set(t,E),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),p.snapshot}async function ON(s,t,e){const r=ht(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!$f(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Jo(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Zo(r.remoteStore,o.targetId),tl(r,o.targetId)})).catch(Ts)):(tl(r,o.targetId),await Jo(r.localStore,o.targetId,!0))}async function MN(s,t){const e=ht(s),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Zo(e.remoteStore,r.targetId))}async function PN(s,t,e){const r=py(s);try{const o=await(function(c,m){const g=ht(c),p=Jt.now(),E=m.reduce(((L,$)=>L.add($.key)),Dt());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let $=Nn(),Q=Dt();return g.Ns.getEntries(L,E).next((X=>{$=X,$.forEach(((ct,dt)=>{dt.isValidDocument()||(Q=Q.add(ct))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,$))).next((X=>{T=X;const ct=[];for(const dt of m){const at=tD(dt,T.get(dt.key).overlayedDocument);at!=null&&ct.push(new Tr(dt.key,at,IS(at.value.mapValue),an.exists(!0)))}return g.mutationQueue.addMutationBatch(L,p,ct,m)})).next((X=>{A=X;const ct=X.applyToLocalDocumentSet(T,Q);return g.documentOverlayCache.saveOverlays(L,X.batchId,ct)}))})).then((()=>({batchId:A.batchId,changes:zS(T)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new se(bt)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,e),await Ss(r,o.changes),await al(r.remoteStore)}catch(o){const u=cy(o,"Failed to persist write");e.reject(u)}}async function YA(s,t){const e=ht(s);try{const r=await $D(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?mt(c.hu,14607):o.removedDocuments.size>0&&(mt(c.hu,42227),c.hu=!1))})),await Ss(e,r,t)}catch(r){await Ts(r)}}function UE(s,t,e){const r=ht(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=ht(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const A of T.Sa)A.va(m)&&(p=!0)})),p&&hy(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function kN(s,t,e){const r=ht(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new se(rt.comparator);c=c.insert(u,ye.newNoDocument(u,pt.min()));const m=Dt().add(u),g=new lc(pt.min(),new Map,new se(bt),c,m);await YA(r,g),r.du=r.du.remove(u),r.Au.delete(t),gy(r)}else await Jo(r.localStore,t,!1).then((()=>tl(r,t,e))).catch(Ts)}async function LN(s,t){const e=ht(s),r=t.batch.batchId;try{const o=await XD(e.localStore,t);my(e,r,null),dy(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Ss(e,o)}catch(o){await Ts(o)}}async function UN(s,t,e){const r=ht(s);try{const o=await(function(c,m){const g=ht(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(mt(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,t);my(r,t,e),dy(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Ss(r,o)}catch(o){await Ts(o)}}function dy(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function my(s,t,e){const r=ht(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function tl(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),e&&s.Pu.yu(r,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||XA(s,r)}))}function XA(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(Zo(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),gy(s))}function mp(s,t,e){for(const r of e)r instanceof GA?(s.Ru.addReference(r.key,t),zN(s,r)):r instanceof KA?(tt(ll,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||XA(s,r.key)):lt(19791,{wu:r})}function zN(s,t){const e=t.key,r=e.path.canonicalString();s.du.get(e)||s.Eu.has(r)||(tt(ll,"New document in limbo: "+e),s.Eu.add(r),gy(s))}function gy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new rt(Kt.fromString(t)),r=s.fu.next();s.Au.set(r,new CN(e)),s.du=s.du.insert(e,r),sd(s.remoteStore,new fr(Vn(Xf(e.path)),r,"TargetPurposeLimboResolution",vn.ce))}}async function Ss(s,t,e){const r=ht(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((p=>{var E;if((p||e)&&r.isPrimaryClient){const T=p?!p.fromCache:(E=e==null?void 0:e.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){o.push(p);const T=iy.As(g.targetId,p);u.push(T)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=ht(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>U.forEach(p,(A=>U.forEach(A.Es,(L=>E.persistence.referenceDelegate.addReference(T,A.targetId,L))).next((()=>U.forEach(A.ds,(L=>E.persistence.referenceDelegate.removeReference(T,A.targetId,L)))))))))}catch(T){if(!Es(T))throw T;tt(ry,"Failed to update sequence numbers: "+T)}for(const T of p){const A=T.targetId;if(!T.fromCache){const L=E.Ms.get(A),$=L.snapshotVersion,Q=L.withLastLimboFreeSnapshotVersion($);E.Ms=E.Ms.insert(A,Q)}}})(r.localStore,u))}async function BN(s,t){const e=ht(s);if(!e.currentUser.isEqual(t)){tt(ll,"User change. New user:",t.toKey());const r=await xA(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new st(W.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ss(e,r.Ls)}}function jN(s,t){const e=ht(s),r=e.Au.get(t);if(r&&r.hu)return Dt().add(r.key);{let o=Dt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function qN(s,t){const e=ht(s),r=await up(e.localStore,t.query,!0),o=t.view.cu(r);return e.isPrimaryClient&&mp(e,t.targetId,o.au),o}async function FN(s,t){const e=ht(s);return NA(e.localStore,t).then((r=>Ss(e,r)))}async function HN(s,t,e,r){const o=ht(s),u=await(function(m,g){const p=ht(m),E=ht(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(T=>E.er(T,g).next((A=>A?p.localDocuments.getDocuments(T,A):U.resolve(null)))))})(o.localStore,t);u!==null?(e==="pending"?await al(o.remoteStore):e==="acknowledged"||e==="rejected"?(my(o,t,r||null),dy(o,t),(function(m,g){ht(ht(m).mutationQueue).ir(g)})(o.localStore,t)):lt(6720,"Unknown batchState",{Su:e}),await Ss(o,u)):tt(ll,"Cannot apply mutation batch with id: "+t)}async function GN(s,t){const e=ht(s);if(ad(e),py(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await zE(e,r.toArray());e.gu=!0,await fp(e.remoteStore,!0);for(const u of o)sd(e.remoteStore,u)}else if(t===!1&&e.gu!==!1){const r=[];let o=Promise.resolve();e.Iu.forEach(((u,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(tl(e,c),Jo(e.localStore,c,!0)))),Zo(e.remoteStore,c)})),await o,await zE(e,r),(function(c){const m=ht(c);m.Au.forEach(((g,p)=>{Zo(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new se(rt.comparator)})(e),e.gu=!1,await fp(e.remoteStore,!1)}}async function zE(s,t,e){const r=ht(s),o=[],u=[];for(const c of t){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await Vf(r.localStore,Vn(g[0]));for(const p of g){const E=r.Tu.get(p),T=await qN(r,E);T.snapshot&&u.push(T.snapshot)}}else{const p=await DA(r.localStore,c);m=await Vf(r.localStore,p),await fy(r,$A(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function $A(s){return MS(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function KN(s){return(function(e){return ht(ht(e).persistence).Ts()})(ht(s).localStore)}async function QN(s,t,e,r){const o=ht(s);if(o.gu)return void tt(ll,"Ignoring unexpected query state notification.");const u=o.Iu.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const c=await NA(o.localStore,kS(u[0])),m=lc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Se.EMPTY_BYTE_STRING);await Ss(o,c,m);break}case"rejected":await Jo(o.localStore,t,!0),tl(o,t,r);break;default:lt(64155,e)}}async function YN(s,t,e){const r=ad(s);if(r.gu){for(const o of t){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){tt(ll,"Adding an already active target "+o);continue}const u=await DA(r.localStore,o),c=await Vf(r.localStore,u);await fy(r,$A(u),c.targetId,!1,c.resumeToken),sd(r.remoteStore,c)}for(const o of e)r.Iu.has(o)&&await Jo(r.localStore,o,!1).then((()=>{Zo(r.remoteStore,o),tl(r,o)})).catch(Ts)}}function ad(s){const t=ht(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=kN.bind(null,t),t.Pu.H_=AN.bind(null,t.eventManager),t.Pu.yu=wN.bind(null,t.eventManager),t}function py(s){const t=ht(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=LN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=UN.bind(null,t),t}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=id(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return RA(this.persistence,new IA,t.initialUser,this.serializer)}Cu(t){return new ey(nd.mi,this.serializer)}Du(t){return new kA}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class XN extends Ju{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){mt(this.persistence.referenceDelegate instanceof Nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TA(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ey((r=>Nf.mi(r,e)),this.serializer)}}class JA extends Ju{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await py(this.xu.syncEngine),await al(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return RA(this.persistence,new IA,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new TA(r,t.asyncQueue,e)}Mu(t,e){const r=new nC(e,this.persistence);return new eC(t.asyncQueue,r)}Cu(t){const e=wA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ny(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,LA(),uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new kA}}class $N extends JA{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Ng&&(this.sharedClientState.syncEngine={Co:HN.bind(null,e),vo:QN.bind(null,e),Fo:YN.bind(null,e),Ts:KN.bind(null,e),Do:FN.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await GN(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const e=LA();if(!Ng.v(e))throw new st(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ng(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Zu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>UE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BN.bind(null,this.syncEngine),await fp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new EN})()}createDatastore(t){const e=id(t.databaseInfo.databaseId),r=(function(u){return new iN(u)})(t.databaseInfo);return(function(u,c,m,g){return new oN(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,m){return new uN(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>UE(this.syncEngine,e,0)),(function(){return VE.v()?new VE:new WD})())}createSyncEngine(t,e){return(function(o,u,c,m,g,p,E){const T=new DN(o,u,c,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(o){const u=ht(o);tt(wa,"RemoteStore shutting down."),u.Ea.add(5),await cc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Zu.provider={build:()=>new Zu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):be("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class ZN{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{tt(vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(tt(vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=cy(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Og(s,t){s.asyncQueue.verifyOperationInProgress(),tt(vs,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await xA(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function BE(s,t){s.asyncQueue.verifyOperationInProgress();const e=await WN(s);tt(vs,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((r=>ME(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>ME(t.remoteStore,o))),s._onlineComponents=t}async function WN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(vs,"Using user provided OfflineComponentProvider");try{await Og(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;ju("Error using user provided cache. Falling back to memory cache: "+e),await Og(s,new Ju)}}else tt(vs,"Using default OfflineComponentProvider"),await Og(s,new XN(void 0));return s._offlineComponents}async function ZA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(vs,"Using user provided OnlineComponentProvider"),await BE(s,s._uninitializedComponentsProvider._online)):(tt(vs,"Using default OnlineComponentProvider"),await BE(s,new Zu))),s._onlineComponents}function tV(s){return ZA(s).then((t=>t.syncEngine))}async function jE(s){const t=await ZA(s),e=t.eventManager;return e.onListen=NN.bind(null,t.syncEngine),e.onUnlisten=ON.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=VN.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=MN.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="firestore.googleapis.com",FE=!0;class HE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new st(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eV,this.ssl=FE}else this.host=t.host,this.ssl=t.ssl??FE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=gA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vA)throw new st(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Zx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WA(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yy{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new st(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Fx;switch(r.type){case"firstParty":return new Kx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=qE.get(e);r&&(tt("ComponentProvider","Removing Datastore"),qE.delete(e),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new od(this.firestore,t,this._query)}}class Pe{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pe(this.firestore,t,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(rc(e,Pe._jsonSchema))return new Pe(t,r||null,new rt(Kt.fromString(e.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:Me("string",Pe._jsonSchemaVersion),referencePath:Me("string")};class gs extends od{constructor(t,e,r){super(t,e,Xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pe(this.firestore,null,new rt(t))}withConverter(t){return new gs(this.firestore,t,this._path)}}function GE(s,t,...e){if(s=We(s),Wb("collection","path",t),s instanceof yy){const r=Kt.fromString(t,...e);return OT(r),new gs(s,null,r)}{if(!(s instanceof Pe||s instanceof gs))throw new st(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Kt.fromString(t,...e));return OT(r),new gs(s.firestore,null,r)}}function Pi(s,t,...e){if(s=We(s),arguments.length===1&&(t=Vp.newId()),Wb("doc","path",t),s instanceof yy){const r=Kt.fromString(t,...e);return VT(r),new Pe(s,null,new rt(r))}{if(!(s instanceof Pe||s instanceof gs))throw new st(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Kt.fromString(t,...e));return VT(r),new Pe(s.firestore,s instanceof gs?s.converter:null,new rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="AsyncQueue";class QE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UA(this,"async_queue_retry"),this._c=()=>{const r=uf();r&&tt(KE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=uf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=uf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Es(t))throw t;tt(KE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,be("INTERNAL UNHANDLED ERROR: ",YE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=uy.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&lt(47125,{Pc:YE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function YE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(s){return(function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Ia extends yy{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new QE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new QE(t),this._firestoreClient=void 0,await t}}}function nV(s,t,e){e||(e=bf);const r=Tp(s,"firestore");if(r.isInitialized(e)){const o=r.getImmediate({identifier:e}),u=r.getOptions(e);if(pa(u,t))return o;throw new st(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new st(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vA)throw new st(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&el(t.host)&&sb(t.host),r.initialize({options:t,instanceIdentifier:e})}function t1(s){if(s._terminated)throw new st(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||iV(s),s._firestoreClient}function iV(s){var r,o,u;const t=s._freezeSettings(),e=(function(m,g,p,E){return new DC(m,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,WA(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new ZN(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qn(Se.fromBase64String(t))}catch(e){throw new st(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Qn(Se.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(rc(t,Qn._jsonSchema))return Qn.fromBase64String(t.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Me("string",Qn._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new st(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new st(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new st(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return bt(this._lat,t._lat)||bt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(t){if(rc(t,Bi._jsonSchema))return new Bi(t.latitude,t.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Me("string",Bi._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(rc(t,ji._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new ji(t.vectorValues);throw new st(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ji._jsonSchemaVersion="firestore/vectorValue/1.0",ji._jsonSchema={type:Me("string",ji._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=/^__.*__$/;class sV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Tr(t,this.data,this.fieldMask,e,this.fieldTransforms):new sl(t,this.data,e,this.fieldTransforms)}}class e1{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Tr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function n1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:s})}}class _y{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new _y({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return kf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(n1(this.Ac)&&rV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class aV{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||id(t)}Cc(t,e,r,o=!1){return new _y({Ac:t,methodName:e,Dc:r,path:me.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vy(s){const t=s._freezeSettings(),e=id(s._databaseId);return new aV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function i1(s,t,e,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,t,e,o);Ey("Data must be an object, but it was:",c,r);const m=r1(r,c);let g,p;if(u.merge)g=new Tn(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const A=gp(t,T,e);if(!c.contains(A))throw new st(W.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);a1(E,A)||E.push(A)}g=new Tn(E),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new sV(new sn(m),g,p)}class cd extends ud{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof cd}}class Ty extends ud{_toFieldTransform(t){return new KS(t.path,new Qo)}isEqual(t){return t instanceof Ty}}function oV(s,t,e,r){const o=s.Cc(1,t,e);Ey("Data must be an object, but it was:",o,r);const u=[],c=sn.empty();bs(r,((g,p)=>{const E=by(t,g,e);p=We(p);const T=o.yc(E);if(p instanceof cd)u.push(E);else{const A=hd(p,T);A!=null&&(u.push(E),c.set(E,A))}}));const m=new Tn(u);return new e1(c,m,o.fieldTransforms)}function lV(s,t,e,r,o,u){const c=s.Cc(1,t,e),m=[gp(t,r,e)],g=[o];if(u.length%2!=0)throw new st(W.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(gp(t,u[A])),g.push(u[A+1]);const p=[],E=sn.empty();for(let A=m.length-1;A>=0;--A)if(!a1(p,m[A])){const L=m[A];let $=g[A];$=We($);const Q=c.yc(L);if($ instanceof cd)p.push(L);else{const X=hd($,Q);X!=null&&(p.push(L),E.set(L,X))}}const T=new Tn(p);return new e1(E,T,c.fieldTransforms)}function hd(s,t){if(s1(s=We(s)))return Ey("Unsupported field value:",t,s),r1(s,t);if(s instanceof ud)return(function(r,o){if(!n1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=hd(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YC(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Jt.fromDate(r);return{timestampValue:$o(o.serializer,u)}}if(r instanceof Jt){const u=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$o(o.serializer,u)}}if(r instanceof Bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:WS(o.serializer,r._byteString)};if(r instanceof Pe){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Jp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ji)return(function(c,m){return{mapValue:{fields:{[jp]:{stringValue:qp},[Fo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Kp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Op(r)}`)})(s,t)}function r1(s,t){const e={};return yS(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bs(s,((r,o)=>{const u=hd(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function s1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Jt||s instanceof Bi||s instanceof Qn||s instanceof Pe||s instanceof ud||s instanceof ji)}function Ey(s,t,e){if(!s1(e)||!tS(e)){const r=Op(e);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function gp(s,t,e){if((t=We(t))instanceof ld)return t._internalPath;if(typeof t=="string")return by(s,t);throw kf("Field path arguments must be of type string or ",s,!1,void 0,e)}const uV=new RegExp("[~\\*/\\[\\]]");function by(s,t,e){if(t.search(uV)>=0)throw kf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new ld(...t.split("."))._internalPath}catch{throw kf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function kf(s,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new st(W.INVALID_ARGUMENT,m+s+g)}function a1(s,t){return s.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new cV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(l1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class cV extends o1{data(){return super.data()}}function l1(s,t){return typeof t=="string"?by(s,t):t instanceof ld?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new st(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fV{convertValue(t,e="none"){switch(ps(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(yr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw lt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return bs(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){var r,o,u;const e=(u=(o=(r=t.fields)==null?void 0:r[Fo].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>fe(c.doubleValue)));return new ji(e)}convertGeoPoint(t){return new Bi(fe(t.latitude),fe(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Kf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Qu(t));default:return null}}convertTimestamp(t){const e=pr(t);return new Jt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Kt.fromString(t);mt(uA(r),9688,{name:t});const o=new Ta(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(e)||be(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(s,t,e){let r;return r=s?s.toFirestore(t):t,r}class Au{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ga extends o1{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(l1("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ga._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Me("string",ga._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class cf extends ga{data(t={}){return super.data(t)}}class Mo{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Au(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new cf(this._firestore,this._userDataWriter,r.key,r,new Au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new st(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Au(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Au(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:dV(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Mo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function dV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:s})}}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:Me("string",Mo._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};class c1 extends fV{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Pe(this.firestore,null,e)}}function mV(s,t,e){s=dr(s,Pe);const r=dr(s.firestore,Ia),o=u1(s.converter,t);return fd(r,[i1(vy(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,an.none())])}function ku(s,t,e,...r){s=dr(s,Pe);const o=dr(s.firestore,Ia),u=vy(o);let c;return c=typeof(t=We(t))=="string"||t instanceof ld?lV(u,"updateDoc",s._key,t,e,r):oV(u,"updateDoc",s._key,t),fd(o,[c.toMutation(s._key,an.exists(!0))])}function h1(s){return fd(dr(s.firestore,Ia),[new Wf(s._key,an.none())])}function gV(s,t){const e=dr(s.firestore,Ia),r=Pi(s),o=u1(s.converter,t);return fd(e,[i1(vy(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function f1(s,...t){var g,p,E;s=We(s);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||XE(t[r])||(e=t[r++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(XE(t[r])){const T=t[r];t[r]=(g=T.next)==null?void 0:g.bind(T),t[r+1]=(p=T.error)==null?void 0:p.bind(T),t[r+2]=(E=T.complete)==null?void 0:E.bind(T)}let u,c,m;if(s instanceof Pe)c=dr(s.firestore,Ia),m=Xf(s._key.path),u={next:T=>{t[r]&&t[r](pV(c,s,T))},error:t[r+1],complete:t[r+2]};else{const T=dr(s,od);c=dr(T.firestore,Ia),m=T._query;const A=new c1(c);u={next:L=>{t[r]&&t[r](new Mo(c,A,T,L))},error:t[r+1],complete:t[r+2]},hV(s._query)}return(function(A,L,$,Q){const X=new JN(Q),ct=new IN(L,X,$);return A.asyncQueue.enqueueAndForget((async()=>bN(await jE(A),ct))),()=>{X.Nu(),A.asyncQueue.enqueueAndForget((async()=>SN(await jE(A),ct)))}})(t1(c),m,o,u)}function fd(s,t){return(function(r,o){const u=new ds;return r.asyncQueue.enqueueAndForget((async()=>PN(await tV(r),o,u))),u.promise})(t1(s),t)}function pV(s,t,e){const r=e.docs.get(t._key),o=new c1(s);return new ga(s,o,t._key,r,new Au(e.hasPendingWrites,e.fromCache),t.converter)}class yV{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=EV(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function _V(s){return new yV(s)}class vV{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Zu.provider,this._offlineComponentProvider={build:e=>new JA(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class TV{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Zu.provider,this._offlineComponentProvider={build:e=>new $N(e,t==null?void 0:t.cacheSizeBytes)}}}function EV(s){return new vV(s==null?void 0:s.forceOwnership)}function bV(){return new TV}function Lu(){return new Ty("serverTimestamp")}(function(t,e=!0){(function(o){rl=o})(nl),Po(new ya("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Ia(new Hx(r.getProvider("auth-internal")),new Qx(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new st(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),hs(xT,CT,t),hs(xT,CT,"esm2020")})();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AV=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),$E=s=>{const t=AV(s);return t.charAt(0).toUpperCase()+t.slice(1)},d1=(...s)=>s.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),wV=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=Ft.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>Ft.createElement("svg",{ref:g,...IV,width:t,height:t,stroke:s,strokeWidth:r?Number(e)*24/Number(t):e,className:d1("lucide",o),...!u&&!wV(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>Ft.createElement(p,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=(s,t)=>{const e=Ft.forwardRef(({className:r,...o},u)=>Ft.createElement(RV,{ref:u,iconNode:t,className:d1(`lucide-${SV($E(s))}`,`lucide-${s}`,r),...o}));return e.displayName=$E(s),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CV=Yn("circle-check",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],NV=Yn("circle-x",DV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],OV=Yn("image",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],m1=Yn("loader-circle",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],kV=Yn("lock",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],g1=Yn("play",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],p1=Yn("plus",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],BV=Yn("sparkles",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qV=Yn("trash-2",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],pp=Yn("trophy",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],GV=Yn("user",HV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],QV=Yn("users",KV),YV={apiKey:"AIzaSyAYtsSzPBLdZ6gnsFJZvyXEwBvq5xxsahY",authDomain:"mohoot-007.firebaseapp.com",projectId:"mohoot-007",storageBucket:"mohoot-007.firebasestorage.app",messagingSenderId:"277114765994",appId:"1:277114765994:web:5d5beff3bb4be86d8dc6d3"},XV=typeof __firebase_config<"u"?JSON.parse(__firebase_config):YV,y1=fb(XV),Mg=Bx(y1),ki=nV(y1,{localCache:_V({tabManager:bV()})}),Uu=typeof __app_id<"u"?__app_id:"mohoot-prod",de={bg:"bg-[#020617]",glassCard:"bg-[#0F172A]/60 backdrop-blur-xl border border-white/10 shadow-2xl",primaryGradient:"bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white shadow-violet-500/20",textGradient:"text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-fuchsia-400",input:"bg-[#020617] border border-white/10 text-white focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all",danger:"text-rose-400 hover:bg-rose-500/10"},_1=[{id:0,color:"bg-rose-600"},{id:1,color:"bg-blue-600"},{id:2,color:"bg-amber-500"},{id:3,color:"bg-emerald-600"}],JE=[{bg:"bg-slate-900",border:"border-violet-500/30",glow:"shadow-violet-900/20"},{bg:"bg-slate-900",border:"border-fuchsia-500/30",glow:"shadow-fuchsia-900/20"},{bg:"bg-slate-900",border:"border-cyan-500/30",glow:"shadow-cyan-900/20"}],$V=({quiz:s,index:t,onHost:e,onEdit:r})=>{var u;const o=JE[t%JE.length];return P.jsxs("div",{onDoubleClick:()=>r(s),className:`${o.bg} border ${o.border} ${o.glow} h-64 rounded-3xl p-6 relative flex flex-col items-center justify-between shadow-lg cursor-pointer hover:scale-[1.02] transition-all select-none group`,children:[P.jsxs("div",{className:"absolute top-4 left-4 bg-white/5 border border-white/10 backdrop-blur-md font-bold px-3 py-1 rounded-full text-[10px] text-slate-300 uppercase tracking-widest",children:[((u=s.questions)==null?void 0:u.length)||0," Qs"]}),P.jsx("div",{className:"flex-1 flex items-center justify-center w-full text-center mt-4 px-2",children:P.jsx("h3",{className:"font-bold text-2xl text-white leading-tight break-words line-clamp-3 group-hover:text-violet-200 transition-colors",children:s.title||"Untitled"})}),P.jsxs("button",{onClick:c=>{c.stopPropagation(),e(s)},className:`w-full py-4 rounded-xl font-bold text-sm uppercase tracking-wider shadow-lg flex items-center justify-center gap-2 active:scale-95 transition-all ${de.primaryGradient}`,children:[P.jsx(g1,{size:18,fill:"currentColor"})," HOST LIVE"]})]})},JV=({user:s,onSignOut:t})=>P.jsxs("nav",{className:"bg-[#020617]/80 backdrop-blur-xl border-b border-white/5 px-8 py-5 flex justify-between items-center sticky top-0 z-20",children:[P.jsxs("div",{className:"font-black text-2xl tracking-tighter",children:[P.jsx("span",{className:"text-white",children:"Mo"}),P.jsx("span",{className:de.textGradient,children:"hoot"}),P.jsx("span",{className:"text-violet-500",children:"."})]}),P.jsx("div",{className:"flex items-center gap-4",children:P.jsxs("button",{onClick:t,className:"relative group rounded-full transition-all focus:outline-none",title:"Sign Out",children:[P.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-full opacity-0 group-hover:opacity-100 blur transition duration-500"}),P.jsx("div",{className:"relative rounded-full ring-2 ring-white/10 group-hover:ring-transparent bg-[#020617] p-0.5 transition-all",children:s!=null&&s.photoURL?P.jsx("img",{src:s.photoURL,className:"w-9 h-9 rounded-full object-cover",alt:"Profile"}):P.jsx("div",{className:"w-9 h-9 bg-slate-800 rounded-full flex items-center justify-center text-violet-400",children:P.jsx(GV,{size:18})})})]})})]}),dd=({onClose:s})=>P.jsxs("div",{className:"fixed top-0 left-0 right-0 p-6 flex justify-between items-center z-50 pointer-events-none",children:[P.jsxs("div",{className:"font-black text-xl tracking-tighter text-white/20 pointer-events-auto select-none",children:["M",P.jsx("span",{className:"text-white/10",children:"ohoot"})]}),P.jsx("div",{className:"pointer-events-auto group relative",children:P.jsx("button",{onClick:s,className:"bg-black/40 backdrop-blur border border-white/10 p-3 rounded-full text-slate-400 hover:bg-rose-500/20 hover:text-rose-400 hover:border-rose-500/50 transition-all",children:P.jsx(NV,{size:24})})})]}),ZV=({pin:s,players:t,onStart:e,onClose:r})=>P.jsxs("div",{className:`min-h-screen ${de.bg} flex flex-col items-center justify-center relative overflow-hidden`,children:[P.jsx(dd,{onClose:r}),P.jsx("div",{className:"absolute top-0 -left-40 w-96 h-96 bg-violet-600/20 rounded-full blur-[128px]"}),P.jsx("div",{className:"absolute bottom-0 -right-40 w-96 h-96 bg-fuchsia-600/20 rounded-full blur-[128px]"}),P.jsxs("div",{className:`${de.glassCard} p-12 rounded-[2.5rem] flex flex-col items-center text-center relative z-10 mb-10 animate-in fade-in zoom-in duration-500`,children:[P.jsx("div",{className:"text-xs font-bold text-violet-400 uppercase tracking-[0.4em] mb-6",children:"Join at mohoot.sbs"}),P.jsx("div",{className:"text-[7rem] md:text-[9rem] font-black leading-none text-white tabular-nums tracking-tighter drop-shadow-[0_0_30px_rgba(139,92,246,0.3)]",children:s}),P.jsxs("div",{className:"mt-8 flex items-center gap-3 text-slate-400 font-bold bg-white/5 px-6 py-2 rounded-full border border-white/5",children:[P.jsx(QV,{size:18})," ",t.length," Players Ready"]})]}),P.jsx("div",{className:"flex flex-wrap gap-3 justify-center max-w-5xl mb-24 relative z-10 px-4",children:t.map((o,u)=>P.jsx("div",{className:"bg-[#1e293b]/80 border border-violet-500/20 px-5 py-2.5 rounded-xl shadow-lg font-bold text-base text-violet-200 animate-in zoom-in duration-300",children:o.nickname},u))}),P.jsx("div",{className:"fixed bottom-10 z-20",children:P.jsx("button",{disabled:t.length===0,onClick:e,className:`px-16 py-5 rounded-2xl font-black text-xl tracking-wide shadow-2xl transition-all ${t.length>0?de.primaryGradient+" hover:scale-105 hover:shadow-violet-500/40":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:"START GAME"})})]}),WV=({snap:s,players:t,timeLeft:e,onSkip:r,onClose:o})=>{const u=s.quizSnapshot.questions[s.currentQuestionIndex],[c,m]=Ft.useState(!1),[g,p]=Ft.useState(!1),[E,T]=Ft.useState(!1),A=Ft.useRef(0),L=t.filter($=>$.lastAnsweredRoundId===s.roundId).length;return Ft.useEffect(()=>m(!1),[u]),Ft.useEffect(()=>{if(L>A.current&&L>0){T(!0);const $=setTimeout(()=>T(!1),3e3);return()=>clearTimeout($)}A.current=L},[L]),Ft.useEffect(()=>{if(t.length>0&&L===t.length&&!g){p(!0);const $=setTimeout(()=>{ku(Pi(ki,"artifacts",Uu,"sessions",s.pin),{endTime:Date.now()})},1500);return()=>clearTimeout($)}},[L,t.length,g,s.pin]),P.jsxs("div",{className:`min-h-screen ${de.bg} relative flex flex-col`,children:[P.jsx(dd,{onClose:o}),P.jsxs("div",{className:"flex-1 flex flex-col items-center pt-20 px-6 animate-in fade-in",children:[P.jsxs("div",{className:"w-full flex justify-between items-center max-w-6xl mb-8",children:[P.jsxs("div",{className:"text-white/30 font-black text-2xl tracking-widest drop-shadow-sm",children:["Q",s.currentQuestionIndex+1]}),P.jsxs("div",{className:"relative group",children:[P.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-2xl opacity-50 blur group-hover:opacity-75 transition duration-1000"}),P.jsx("div",{className:"relative text-5xl font-black text-white bg-[#020617] px-8 py-3 rounded-xl border border-white/10",children:e})]}),P.jsx("div",{className:"w-10"})]}),P.jsxs("div",{className:"flex-1 w-full max-w-5xl flex flex-col items-center justify-center text-center pb-20",children:[u.image&&!c&&P.jsxs("div",{className:"relative mb-8 group",children:[P.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-2xl opacity-20 blur"}),P.jsx("img",{src:u.image,onError:()=>m(!0),className:"relative max-h-[35vh] w-auto object-contain rounded-2xl shadow-2xl border border-white/10 bg-black/40"})]}),P.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white leading-tight mb-12 drop-shadow-lg max-w-4xl",children:u.text}),P.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:u.answers.map(($,Q)=>P.jsx("div",{className:`${_1[Q].color} p-8 rounded-2xl text-white text-2xl font-black flex items-center justify-center shadow-lg border-2 border-white/10 transform transition-transform`,children:$},Q))})]}),E&&P.jsx("div",{className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-5 fade-in duration-300",children:P.jsxs("div",{className:"bg-[#0f172a]/90 backdrop-blur-xl border border-violet-500/30 text-white pl-4 pr-6 py-3 rounded-full shadow-[0_0_30px_rgba(124,58,237,0.3)] flex items-center gap-3",children:[P.jsx("div",{className:"bg-gradient-to-r from-violet-600 to-fuchsia-600 p-2 rounded-full",children:P.jsx(BV,{size:16,className:"text-white"})}),P.jsx("span",{className:"font-bold text-sm tracking-wide",children:"Someone answered!"})]})}),P.jsx("div",{className:"fixed bottom-6 right-6",children:P.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white px-6 py-3 font-bold text-sm uppercase tracking-wider transition-colors",children:"Skip "})})]})]})},tO=({snap:s,sortedPlayers:t,onNext:e,onClose:r})=>{const o=s.quizSnapshot.questions.length-(s.currentQuestionIndex+1),u=o<3&&o>=0,[c,m]=Ft.useState(5),[g,p]=Ft.useState(!1);return Ft.useEffect(()=>{if(c>0&&!g){const E=setTimeout(()=>m(T=>T-1),1e3);return()=>clearTimeout(E)}else c===0&&!g&&e()},[c,g]),P.jsxs("div",{className:`min-h-screen ${de.bg} pt-20 px-6 relative`,children:[P.jsx(dd,{onClose:r}),P.jsxs("div",{className:"max-w-3xl mx-auto pt-10 animate-in slide-in-from-bottom-8",children:[P.jsxs("div",{className:"text-center mb-12",children:[P.jsx(pp,{size:56,className:"mx-auto text-yellow-500 mb-6 drop-shadow-[0_0_25px_rgba(234,179,8,0.4)]"}),P.jsx("h2",{className:"text-5xl font-black text-white tracking-tight",children:"Leaderboard"})]}),u&&P.jsxs("div",{className:"bg-violet-900/20 border border-violet-500/50 p-4 rounded-xl mb-6 text-center text-violet-300 font-bold uppercase tracking-widest animate-pulse",children:[P.jsx(kV,{size:16,className:"inline mr-2 mb-1"})," The Podium is Hidden..."]}),P.jsx("div",{className:"space-y-3 mb-20",children:t.slice(0,5).map((E,T)=>u&&T<3?P.jsx("div",{className:"p-4 rounded-xl flex justify-between items-center bg-[#020617] border border-white/5 opacity-50",children:P.jsxs("div",{className:"flex items-center gap-6",children:[P.jsx("span",{className:"font-black text-xl w-10 text-center text-slate-700",children:"?"}),P.jsx("span",{className:"font-bold text-xl text-slate-700",children:"----------------"})]})},T):P.jsxs("div",{className:`p-4 rounded-xl flex justify-between items-center border transition-all ${T===0?"bg-gradient-to-r from-yellow-500/10 to-transparent border-yellow-500/30":"bg-slate-900/50 border-white/5"}`,children:[P.jsxs("div",{className:"flex items-center gap-6",children:[P.jsx("span",{className:`font-black text-xl w-10 text-center ${T===0?"text-yellow-400":"text-slate-600"}`,children:T===0?P.jsx(pp,{size:20,className:"mx-auto"}):T+1}),P.jsx("span",{className:"font-bold text-xl text-white",children:E.nickname})]}),P.jsx("span",{className:`font-mono font-black text-xl ${T===0?"text-yellow-400":"text-violet-400"}`,children:E.score})]},T))}),P.jsx("div",{className:"fixed bottom-10 inset-x-0 flex justify-center",children:P.jsxs("button",{onClick:()=>g?e():p(!0),className:`group relative ${de.primaryGradient} pl-8 pr-10 py-4 rounded-2xl font-black text-lg shadow-2xl hover:scale-105 active:scale-95 transition-all flex items-center gap-3 overflow-hidden`,children:[P.jsx("span",{className:"relative z-10",children:!g&&c>0?`Auto Next (${c}s)`:"Next Round"}),P.jsx(g1,{size:18,fill:"currentColor",className:"relative z-10"}),!g&&c>0&&P.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-white/40 transition-all duration-1000 ease-linear w-full",style:{width:`${c/5*100}%`}})]})})]})]})},eO=({sortedPlayers:s,onClose:t})=>{const e=s.slice(0,3);return P.jsxs("div",{className:`min-h-screen ${de.bg} flex flex-col items-center justify-center pt-10`,children:[P.jsx(dd,{onClose:t}),P.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-violet-900/20 via-slate-950 to-slate-950 pointer-events-none"}),P.jsxs("div",{className:"flex items-end justify-center gap-4 md:gap-8 w-full max-w-4xl px-4 mb-20 relative z-10",children:[e[1]&&P.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-20 duration-[1500ms]",children:[P.jsx("div",{className:"text-xl font-black text-slate-400 mb-4",children:e[1].nickname}),P.jsx("div",{className:"w-full h-40 bg-slate-800 rounded-t-2xl flex items-end justify-center pb-4 border-t border-slate-600 relative shadow-2xl",children:P.jsx("span",{className:"text-5xl font-black text-white/10",children:"2"})}),P.jsx("div",{className:"mt-4 font-bold text-slate-500",children:e[1].score})]}),e[0]&&P.jsxs("div",{className:"flex flex-col items-center w-1/3 -mt-10 z-10 animate-in slide-in-from-bottom-32 duration-[2000ms]",children:[P.jsx(pp,{size:64,className:"text-yellow-400 mb-6 drop-shadow-[0_0_35px_rgba(250,204,21,0.5)]",fill:"currentColor"}),P.jsx("div",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:e[0].nickname}),P.jsx("div",{className:"w-full h-64 bg-gradient-to-b from-yellow-500 to-yellow-700 rounded-t-3xl flex items-end justify-center pb-6 border-t-4 border-yellow-300 shadow-[0_0_50px_rgba(234,179,8,0.2)]",children:P.jsx("span",{className:"text-7xl font-black text-white drop-shadow-md",children:"1"})}),P.jsx("div",{className:"mt-6 font-black text-2xl text-yellow-400 bg-yellow-900/10 px-6 py-2 rounded-xl border border-yellow-500/20",children:e[0].score})]}),e[2]&&P.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-16 duration-[1200ms]",children:[P.jsx("div",{className:"text-xl font-black text-amber-700 mb-4",children:e[2].nickname}),P.jsx("div",{className:"w-full h-32 bg-amber-900/20 rounded-t-2xl flex items-end justify-center pb-4 border-t border-amber-800 relative",children:P.jsx("span",{className:"text-5xl font-black text-white/10",children:"3"})}),P.jsx("div",{className:"mt-4 font-bold text-slate-500",children:e[2].score})]})]})]})};function nO(){const[s,t]=Ft.useState(null),[e,r]=Ft.useState("DASHBOARD"),[o,u]=Ft.useState([]),[c,m]=Ft.useState(null),[g,p]=Ft.useState(null),[E,T]=Ft.useState(!0);Ft.useEffect(()=>{const Q=x2(Mg,X=>{t(X),T(!1)});return()=>Q()},[]),Ft.useEffect(()=>{if(s)return f1(GE(ki,"artifacts",Uu,"users",s.uid,"quizzes"),Q=>u(Q.docs.map(X=>({id:X.id,...X.data()}))))},[s]),Ft.useEffect(()=>{const Q=localStorage.getItem("mohoot_host_active");if(Q&&s)try{const{quizId:X,pin:ct}=JSON.parse(Q);p({quizId:X,pin:ct}),r("GAME")}catch{}},[s]);const A=()=>{m({title:"Untitled Quiz",questions:[{text:"",image:"",answers:["","","",""],correct:0,duration:20}]}),r("EDITOR")},L=async Q=>{const X=GE(ki,"artifacts",Uu,"users",s.uid,"quizzes");Q.id?await ku(Pi(X,Q.id),{...Q}):await gV(X,{...Q,createdAt:Lu()}),r("DASHBOARD")},$=async Q=>{const X=Math.floor(1e5+Math.random()*9e5).toString();await mV(Pi(ki,"artifacts",Uu,"sessions",X),{hostId:s.uid,quizId:Q.id,status:"LOBBY",currentQuestionIndex:0,players:{},quizSnapshot:Q,lastUpdated:Lu()}),p({quizId:Q.id,pin:X}),r("GAME"),localStorage.setItem("mohoot_host_active",JSON.stringify({quizId:Q.id,pin:X}))};return E?P.jsx("div",{className:`h-screen ${de.bg} flex items-center justify-center`,children:P.jsx(m1,{className:"animate-spin text-violet-500"})}):s?P.jsxs("div",{className:`min-h-screen ${de.bg} text-white font-sans selection:bg-violet-500/30`,children:[e==="DASHBOARD"&&P.jsxs(P.Fragment,{children:[P.jsx(JV,{user:s,onSignOut:()=>C2(Mg)}),P.jsxs("div",{className:"p-8 max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:[P.jsxs("div",{className:"flex justify-between items-center mb-10",children:[P.jsx("h2",{className:"text-4xl font-black text-white tracking-tight",children:"Library"}),P.jsxs("button",{onClick:A,className:`${de.primaryGradient} px-6 py-3 rounded-xl font-bold flex gap-2 items-center`,children:[P.jsx(p1,{size:20})," Create New"]})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((Q,X)=>P.jsx($V,{quiz:Q,index:X,onHost:$,onEdit:ct=>{m(ct),r("EDITOR")}},Q.id))})]})]}),e==="EDITOR"&&P.jsx(iO,{user:s,quiz:c,onSave:L,onCancel:()=>r("DASHBOARD")}),e==="GAME"&&P.jsx(rO,{user:s,sessionData:g,onExit:()=>{localStorage.removeItem("mohoot_host_active"),p(null),r("DASHBOARD")}})]}):P.jsx("div",{className:`min-h-screen ${de.bg} flex flex-col items-center justify-center p-4 relative overflow-hidden`,children:P.jsxs("div",{className:`${de.glassCard} p-12 rounded-3xl text-center max-w-md w-full relative z-10`,children:[P.jsx("h1",{className:`text-5xl font-black mb-4 tracking-tighter ${de.textGradient}`,children:"Mohoot!"}),P.jsx("button",{onClick:()=>X2(Mg,new ur),className:`w-full ${de.primaryGradient} py-4 rounded-xl font-bold`,children:"Sign in with Google"})]})})}const iO=({user:s,quiz:t,onSave:e,onCancel:r})=>{const[o,u]=Ft.useState(t),[c,m]=Ft.useState(0),g=o.questions[c],p=(T,A)=>{const L=[...o.questions];L[c]={...g,[T]:A},u({...o,questions:L})},E=()=>{u({...o,questions:[...o.questions,{text:"",image:"",answers:["","","",""],correct:0,duration:20}]}),m(o.questions.length)};return P.jsxs("div",{className:"flex gap-6 h-screen p-6 bg-[#020617]",children:[P.jsxs("div",{className:"w-64 flex flex-col gap-2",children:[P.jsx("h2",{className:"text-slate-500 font-bold mb-4 px-2 uppercase text-xs tracking-widest",children:"Outline"}),P.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-2",children:[o.questions.map((T,A)=>P.jsxs("button",{onClick:()=>m(A),className:`w-full text-left p-4 rounded-r-xl border-l-4 transition-all font-bold text-sm ${A===c?"border-violet-500 bg-violet-500/10 text-white":"border-transparent text-slate-500 hover:text-slate-300"}`,children:["Question ",A+1]},A)),P.jsxs("button",{onClick:E,className:"w-full py-4 border border-dashed border-slate-800 rounded-xl text-slate-600 font-bold text-sm hover:border-violet-500/50 hover:text-violet-400 transition-all flex items-center justify-center gap-2",children:[P.jsx(p1,{size:16})," Add New"]})]})]}),P.jsxs("div",{className:`${de.glassCard} flex-1 rounded-3xl p-10 flex flex-col overflow-y-auto`,children:[P.jsx("div",{className:"mb-8 border-b border-white/5 pb-8",children:P.jsx("input",{className:"w-full text-4xl font-black bg-transparent border-none focus:ring-0 outline-none text-white placeholder-slate-700",value:o.title,onChange:T=>u({...o,title:T.target.value}),placeholder:"Enter Quiz Title..."})}),P.jsxs("div",{className:"flex-1 space-y-8",children:[P.jsxs("div",{children:[P.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block tracking-wider",children:"Question Text"}),P.jsx("textarea",{className:`${de.input} w-full p-6 rounded-2xl text-xl font-bold resize-none`,rows:"2",value:g.text,onChange:T=>p("text",T.target.value),placeholder:"What is the meaning of..."})]}),P.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[P.jsxs("div",{className:"space-y-4",children:[P.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block tracking-wider",children:"Settings"}),P.jsxs("div",{className:`${de.input} flex items-center gap-3 p-4 rounded-xl`,children:[P.jsx(OV,{size:20,className:"text-violet-400"}),P.jsx("input",{className:"bg-transparent w-full outline-none text-sm text-white placeholder-slate-600",value:g.image||"",onChange:T=>p("image",T.target.value),placeholder:"Image URL (Optional)"})]}),P.jsxs("div",{className:`${de.input} p-4 rounded-xl`,children:[P.jsx("span",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Duration (Seconds)"}),P.jsx("input",{type:"number",className:"bg-transparent w-full font-black text-xl outline-none text-white",value:g.duration,onChange:T=>p("duration",parseInt(T.target.value)||0)})]})]}),P.jsxs("div",{className:"space-y-3",children:[P.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block tracking-wider",children:"Answer Options"}),P.jsx("div",{className:"grid gap-3",children:g.answers.map((T,A)=>P.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-xl border transition-all ${g.correct===A?"bg-violet-500/10 border-violet-500/50":"bg-[#020617] border-white/5"}`,children:[P.jsx("button",{onClick:()=>p("correct",A),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${g.correct===A?_1[A].color:"bg-slate-800 text-slate-600 hover:text-slate-400"}`,children:P.jsx(CV,{size:20,className:g.correct===A?"text-white":"text-current"})}),P.jsx("input",{className:"bg-transparent flex-1 font-bold text-sm py-2 outline-none text-white placeholder-slate-700",value:T,onChange:L=>{const $=[...g.answers];$[A]=L.target.value,p("answers",$)},placeholder:`Option ${A+1}`})]},A))})]})]})]}),P.jsxs("div",{className:"mt-8 flex justify-between items-center pt-6 border-t border-white/5",children:[o.id&&P.jsxs("button",{onClick:async()=>{confirm("Delete?")&&(await h1(Pi(ki,"artifacts",Uu,"users",s.uid,"quizzes",o.id)),r())},className:de.danger+" font-bold px-4 py-2 rounded-lg transition flex items-center gap-2",children:[P.jsx(qV,{size:18})," Delete"]}),P.jsxs("div",{className:"flex gap-4 ml-auto",children:[P.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:text-white transition",children:"Discard"}),P.jsx("button",{onClick:()=>e(o),className:`${de.primaryGradient} px-8 py-3 rounded-xl font-bold`,children:"Save Quiz"})]})]})]})]})},rO=({user:s,sessionData:t,onExit:e})=>{const[r,o]=Ft.useState(null),[u,c]=Ft.useState(0),m=t.pin;Ft.useEffect(()=>f1(Pi(ki,"artifacts","mohoot-prod","sessions",m),T=>T.exists()?o({...T.data(),pin:m}):e()),[m]),Ft.useEffect(()=>{if((r==null?void 0:r.status)==="QUESTION"){const T=setInterval(()=>{const A=Math.ceil((r.endTime-Date.now())/1e3);c(Math.max(0,A)),A<=0&&ku(Pi(ki,"artifacts","mohoot-prod","sessions",m),{status:"LEADERBOARD",lastUpdated:Lu()})},100);return()=>clearInterval(T)}},[r==null?void 0:r.status,r==null?void 0:r.endTime]);const g=()=>{const T=r.currentQuestionIndex+1,A=r.quizSnapshot.questions[T],L=A?{status:"QUESTION",currentQuestionIndex:T,roundId:Date.now(),startTime:Date.now()+2e3,endTime:Date.now()+2e3+A.duration*1e3}:{status:"FINISHED"};ku(Pi(ki,"artifacts","mohoot-prod","sessions",m),{...L,lastUpdated:Lu()})};if(!r)return P.jsx("div",{className:`h-screen flex items-center justify-center ${de.bg}`,children:P.jsx(m1,{className:"animate-spin text-violet-500"})});const p=Object.values(r.players||{}),E=[...p].sort((T,A)=>(A.score||0)-(T.score||0));return r.status==="LOBBY"?P.jsx(ZV,{pin:m,players:p,onStart:()=>g(),onClose:()=>h1(Pi(ki,"artifacts","mohoot-prod","sessions",m))}):r.status==="QUESTION"?P.jsx(WV,{snap:r,players:p,timeLeft:u,onSkip:()=>ku(Pi(ki,"artifacts","mohoot-prod","sessions",m),{status:"LEADERBOARD",lastUpdated:Lu()}),onClose:()=>e()}):r.status==="LEADERBOARD"?P.jsx(tO,{snap:r,sortedPlayers:E,onNext:g,onClose:()=>e()}):r.status==="FINISHED"?P.jsx(eO,{sortedPlayers:E,onClose:()=>e()}):null};class sO extends Ft.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("Uncaught error:",t,e)}render(){var t;return this.state.hasError?P.jsxs("div",{style:{padding:20,color:"white",background:"#0f172a",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[P.jsx("h1",{children:"Something went wrong."}),P.jsx("p",{style:{color:"#f87171"},children:(t=this.state.error)==null?void 0:t.toString()}),P.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:20,padding:"10px 20px",borderRadius:8,border:"none",background:"#4f46e5",color:"white",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}rI.createRoot(document.getElementById("root")).render(P.jsx(Ft.StrictMode,{children:P.jsx(sO,{children:P.jsx(nO,{})})}));

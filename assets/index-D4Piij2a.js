(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var dg={exports:{}},pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function nI(){if(Yv)return pu;Yv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return pu.Fragment=e,pu.jsx=t,pu.jsxs=t,pu}var Xv;function iI(){return Xv||(Xv=1,dg.exports=nI()),dg.exports}var A=iI(),mg={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function rI(){if($v)return xe;$v=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function k(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,F={};function se(M,J,ae){this.props=M,this.context=J,this.refs=F,this.updater=ae||$}se.prototype.isReactComponent={},se.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},se.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function re(){}re.prototype=se.prototype;function ie(M,J,ae){this.props=M,this.context=J,this.refs=F,this.updater=ae||$}var Te=ie.prototype=new re;Te.constructor=ie,Y(Te,se.prototype),Te.isPureReactComponent=!0;var be=Array.isArray;function ge(){}var C={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(M,J,ae){var ce=ae.ref;return{$$typeof:s,type:M,key:J,ref:ce!==void 0?ce:null,props:ae}}function D(M,J){return R(M.type,J,M.props)}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function z(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return J[ae]})}var w=/\/+/g;function ue(M,J){return typeof M=="object"&&M!==null&&M.key!=null?z(""+M.key):J.toString(36)}function Ae(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ge,ge):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function K(M,J,ae,ce,we){var Ne=typeof M;(Ne==="undefined"||Ne==="boolean")&&(M=null);var qe=!1;if(M===null)qe=!0;else switch(Ne){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(M.$$typeof){case s:case e:qe=!0;break;case T:return qe=M._init,K(qe(M._payload),J,ae,ce,we)}}if(qe)return we=we(M),qe=ce===""?"."+ue(M,0):ce,be(we)?(ae="",qe!=null&&(ae=qe.replace(w,"$&/")+"/"),K(we,J,ae,"",function(ws){return ws})):we!=null&&(V(we)&&(we=D(we,ae+(we.key==null||M&&M.key===we.key?"":(""+we.key).replace(w,"$&/")+"/")+qe)),J.push(we)),1;qe=0;var zt=ce===""?".":ce+":";if(be(M))for(var ct=0;ct<M.length;ct++)ce=M[ct],Ne=zt+ue(ce,ct),qe+=K(ce,J,ae,Ne,we);else if(ct=k(M),typeof ct=="function")for(M=ct.call(M),ct=0;!(ce=M.next()).done;)ce=ce.value,Ne=zt+ue(ce,ct++),qe+=K(ce,J,ae,Ne,we);else if(Ne==="object"){if(typeof M.then=="function")return K(Ae(M),J,ae,ce,we);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return qe}function ne(M,J,ae){if(M==null)return M;var ce=[],we=0;return K(M,ce,"","",function(Ne){return J.call(ae,Ne,we++)}),ce}function ye(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Ue=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Xe={map:ne,forEach:function(M,J,ae){ne(M,function(){J.apply(this,arguments)},ae)},count:function(M){var J=0;return ne(M,function(){J++}),J},toArray:function(M){return ne(M,function(J){return J})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return xe.Activity=E,xe.Children=Xe,xe.Component=se,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=ie,xe.StrictMode=r,xe.Suspense=g,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,xe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},xe.cache=function(M){return function(){return M.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(M,J,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ce=Y({},M.props),we=M.key;if(J!=null)for(Ne in J.key!==void 0&&(we=""+J.key),J)!x.call(J,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&J.ref===void 0||(ce[Ne]=J[Ne]);var Ne=arguments.length-2;if(Ne===1)ce.children=ae;else if(1<Ne){for(var qe=Array(Ne),zt=0;zt<Ne;zt++)qe[zt]=arguments[zt+2];ce.children=qe}return R(M.type,we,ce)},xe.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},xe.createElement=function(M,J,ae){var ce,we={},Ne=null;if(J!=null)for(ce in J.key!==void 0&&(Ne=""+J.key),J)x.call(J,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(we[ce]=J[ce]);var qe=arguments.length-2;if(qe===1)we.children=ae;else if(1<qe){for(var zt=Array(qe),ct=0;ct<qe;ct++)zt[ct]=arguments[ct+2];we.children=zt}if(M&&M.defaultProps)for(ce in qe=M.defaultProps,qe)we[ce]===void 0&&(we[ce]=qe[ce]);return R(M,Ne,we)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(M){return{$$typeof:m,render:M}},xe.isValidElement=V,xe.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:ye}},xe.memo=function(M,J){return{$$typeof:p,type:M,compare:J===void 0?null:J}},xe.startTransition=function(M){var J=C.T,ae={};C.T=ae;try{var ce=M(),we=C.S;we!==null&&we(ae,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ge,Ue)}catch(Ne){Ue(Ne)}finally{J!==null&&ae.types!==null&&(J.types=ae.types),C.T=J}},xe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},xe.use=function(M){return C.H.use(M)},xe.useActionState=function(M,J,ae){return C.H.useActionState(M,J,ae)},xe.useCallback=function(M,J){return C.H.useCallback(M,J)},xe.useContext=function(M){return C.H.useContext(M)},xe.useDebugValue=function(){},xe.useDeferredValue=function(M,J){return C.H.useDeferredValue(M,J)},xe.useEffect=function(M,J){return C.H.useEffect(M,J)},xe.useEffectEvent=function(M){return C.H.useEffectEvent(M)},xe.useId=function(){return C.H.useId()},xe.useImperativeHandle=function(M,J,ae){return C.H.useImperativeHandle(M,J,ae)},xe.useInsertionEffect=function(M,J){return C.H.useInsertionEffect(M,J)},xe.useLayoutEffect=function(M,J){return C.H.useLayoutEffect(M,J)},xe.useMemo=function(M,J){return C.H.useMemo(M,J)},xe.useOptimistic=function(M,J){return C.H.useOptimistic(M,J)},xe.useReducer=function(M,J,ae){return C.H.useReducer(M,J,ae)},xe.useRef=function(M){return C.H.useRef(M)},xe.useState=function(M){return C.H.useState(M)},xe.useSyncExternalStore=function(M,J,ae){return C.H.useSyncExternalStore(M,J,ae)},xe.useTransition=function(){return C.H.useTransition()},xe.version="19.2.3",xe}var Zv;function bp(){return Zv||(Zv=1,mg.exports=rI()),mg.exports}var Oe=bp(),gg={exports:{}},yu={},pg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function sI(){return Jv||(Jv=1,(function(s){function e(K,ne){var ye=K.length;K.push(ne);e:for(;0<ye;){var Ue=ye-1>>>1,Xe=K[Ue];if(0<o(Xe,ne))K[Ue]=ne,K[ye]=Xe,ye=Ue;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ne=K[0],ye=K.pop();if(ye!==ne){K[0]=ye;e:for(var Ue=0,Xe=K.length,M=Xe>>>1;Ue<M;){var J=2*(Ue+1)-1,ae=K[J],ce=J+1,we=K[ce];if(0>o(ae,ye))ce<Xe&&0>o(we,ae)?(K[Ue]=we,K[ce]=ye,Ue=ce):(K[Ue]=ae,K[J]=ye,Ue=J);else if(ce<Xe&&0>o(we,ye))K[Ue]=we,K[ce]=ye,Ue=ce;else break e}}return ne}function o(K,ne){var ye=K.sortIndex-ne.sortIndex;return ye!==0?ye:K.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],T=1,E=null,I=3,k=!1,$=!1,Y=!1,F=!1,se=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function Te(K){for(var ne=t(p);ne!==null;){if(ne.callback===null)r(p);else if(ne.startTime<=K)r(p),ne.sortIndex=ne.expirationTime,e(g,ne);else break;ne=t(p)}}function be(K){if(Y=!1,Te(K),!$)if(t(g)!==null)$=!0,ge||(ge=!0,z());else{var ne=t(p);ne!==null&&Ae(be,ne.startTime-K)}}var ge=!1,C=-1,x=5,R=-1;function D(){return F?!0:!(s.unstable_now()-R<x)}function V(){if(F=!1,ge){var K=s.unstable_now();R=K;var ne=!0;try{e:{$=!1,Y&&(Y=!1,re(C),C=-1),k=!0;var ye=I;try{t:{for(Te(K),E=t(g);E!==null&&!(E.expirationTime>K&&D());){var Ue=E.callback;if(typeof Ue=="function"){E.callback=null,I=E.priorityLevel;var Xe=Ue(E.expirationTime<=K);if(K=s.unstable_now(),typeof Xe=="function"){E.callback=Xe,Te(K),ne=!0;break t}E===t(g)&&r(g),Te(K)}else r(g);E=t(g)}if(E!==null)ne=!0;else{var M=t(p);M!==null&&Ae(be,M.startTime-K),ne=!1}}break e}finally{E=null,I=ye,k=!1}ne=void 0}}finally{ne?z():ge=!1}}}var z;if(typeof ie=="function")z=function(){ie(V)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ue=w.port2;w.port1.onmessage=V,z=function(){ue.postMessage(null)}}else z=function(){se(V,0)};function Ae(K,ne){C=se(function(){K(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(K){switch(I){case 1:case 2:case 3:var ne=3;break;default:ne=I}var ye=I;I=ne;try{return K()}finally{I=ye}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(K,ne){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ye=I;I=K;try{return ne()}finally{I=ye}},s.unstable_scheduleCallback=function(K,ne,ye){var Ue=s.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ue+ye:Ue):ye=Ue,K){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=ye+Xe,K={id:T++,callback:ne,priorityLevel:K,startTime:ye,expirationTime:Xe,sortIndex:-1},ye>Ue?(K.sortIndex=ye,e(p,K),t(g)===null&&K===t(p)&&(Y?(re(C),C=-1):Y=!0,Ae(be,ye-Ue))):(K.sortIndex=Xe,e(g,K),$||k||($=!0,ge||(ge=!0,z()))),K},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(K){var ne=I;return function(){var ye=I;I=ne;try{return K.apply(this,arguments)}finally{I=ye}}}})(yg)),yg}var Wv;function aI(){return Wv||(Wv=1,pg.exports=sI()),pg.exports}var _g={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function oI(){if(eT)return tn;eT=1;var s=bp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:T}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(g,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,T)},tn.flushSync=function(g){var p=c.T,T=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=T,r.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:k}):T==="script"&&r.d.X(g,{crossOrigin:E,integrity:I,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin);r.d.L(g,T,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var T=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},tn.requestFormReset=function(g){r.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,T){return c.H.useFormState(g,p,T)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var tT;function lI(){if(tT)return _g.exports;tT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_g.exports=oI(),_g.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function uI(){if(nT)return yu;nT=1;var s=aI(),e=bp(),t=lI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function T(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=T(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var w=Symbol.for("react.client.reference");function ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===w?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Y:return"Fragment";case se:return"Profiler";case F:return"StrictMode";case be:return"Suspense";case ge:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case $:return"Portal";case ie:return n.displayName||"Context";case re:return(n._context.displayName||"Context")+".Consumer";case Te:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:ue(n.type)||"Memo";case x:i=n._payload,n=n._init;try{return ue(n(i))}catch{}}return null}var Ae=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ue=[],Xe=-1;function M(n){return{current:n}}function J(n){0>Xe||(n.current=Ue[Xe],Ue[Xe]=null,Xe--)}function ae(n,i){Xe++,Ue[Xe]=n.current,n.current=i}var ce=M(null),we=M(null),Ne=M(null),qe=M(null);function zt(n,i){switch(ae(Ne,i),ae(we,n),ae(ce,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?yv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=yv(i),n=_v(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(ce),ae(ce,n)}function ct(){J(ce),J(we),J(Ne)}function ws(n){n.memoizedState!==null&&ae(qe,n);var i=ce.current,a=_v(i,n.type);i!==a&&(ae(we,n),ae(ce,a))}function Na(n){we.current===n&&(J(ce),J(we)),qe.current===n&&(J(qe),fu._currentValue=ye)}var Da,Va;function mi(n){if(Da===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Da=i&&i[1]||"",Va=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Da+n+Va}var fl=!1;function Is(n,i){if(!n||fl)return"";fl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(G){var q=G}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(G){q=G}n.call(Z.prototype)}}else{try{throw Error()}catch(G){q=G}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),B=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===B.length)for(l=N.length-1,f=B.length-1;1<=l&&0<=f&&N[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==B[f]){var Q=`
`+N[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{fl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?mi(a):""}function dl(n,i){switch(n.tag){case 26:case 27:case 5:return mi(n.type);case 16:return mi("Lazy");case 13:return n.child!==i&&i!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Is(n.type,!1);case 11:return Is(n.type.render,!1);case 1:return Is(n.type,!0);case 31:return mi("Activity");default:return""}}function ml(n){try{var i="",a=null;do i+=dl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var wt=Object.prototype.hasOwnProperty,Lt=s.unstable_scheduleCallback,br=s.unstable_cancelCallback,gd=s.unstable_shouldYield,hc=s.unstable_requestPaint,un=s.unstable_now,xs=s.unstable_getCurrentPriorityLevel,gl=s.unstable_ImmediatePriority,pl=s.unstable_UserBlockingPriority,Sr=s.unstable_NormalPriority,pd=s.unstable_LowPriority,fc=s.unstable_IdlePriority,dc=s.log,mc=s.unstable_setDisableYieldValue,Zn=null,Qt=null;function kn(n){if(typeof dc=="function"&&mc(n),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Zn,n)}catch{}}var vt=Math.clz32?Math.clz32:pc,gc=Math.log,Oa=Math.LN2;function pc(n){return n>>>=0,n===0?32:31-(gc(n)/Oa|0)|0}var gi=256,Rs=262144,It=4194304;function pi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function yi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=pi(l):(_&=b,_!==0?f=pi(_):a||(a=b&~n,a!==0&&(f=pi(a))))):(b=l&~d,b!==0?f=pi(b):_!==0?f=pi(_):a||(a=l&~n,a!==0&&(f=pi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Jn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function yd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var n=It;return It<<=1,(It&62914560)===0&&(It=4194304),n}function _i(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Cs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function _d(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,B=n.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-vt(a),Z=1<<Q;b[Q]=0,N[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var G=q[Q];G!==null&&(G.lane&=-536870913)}a&=~Z}l!==0&&Ns(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Ns(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-vt(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function yl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-vt(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function _l(n,i){var a=i&-i;return a=(a&42)!==0?1:Ds(a),(a&(n.suspendedLanes|i))!==0?0:a}function Ds(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function _c(){var n=ne.p;return n!==0?n:(n=window.event,n===void 0?32:Bv(n.type))}function Wn(n,i){var a=ne.p;try{return ne.p=n,i()}finally{ne.p=a}}var ei=Math.random().toString(36).slice(2),xt="__reactFiber$"+ei,qt="__reactProps$"+ei,vi="__reactContainer$"+ei,Ma="__reactEvents$"+ei,vd="__reactListeners$"+ei,vc="__reactHandles$"+ei,Tc="__reactResources$"+ei,Ti="__reactMarker$"+ei;function ka(n){delete n[xt],delete n[qt],delete n[Ma],delete n[vd],delete n[vc]}function Ei(n){var i=n[xt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[vi]||a[xt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=wv(n);n!==null;){if(a=n[xt])return a;n=wv(n)}return i}n=a,a=n.parentNode}return null}function Pn(n){if(n=n[xt]||n[vi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function bn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function bi(n){var i=n[Tc];return i||(i=n[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(n){n[Ti]=!0}var vl=new Set,Tl={};function Si(n,i){Ai(n,i),Ai(n+"Capture",i)}function Ai(n,i){for(Tl[n]=i,n=0;n<i.length;n++)vl.add(i[n])}var El=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},Sl={};function Ec(n){return wt.call(Sl,n)?!0:wt.call(bl,n)?!1:El.test(n)?Sl[n]=!0:(bl[n]=!0,!1)}function Pa(n,i,a){if(Ec(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Sn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Ct(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Ft(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ar(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Al(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function $e(n){if(!n._valueTracker){var i=Ar(n)?"checked":"value";n._valueTracker=Al(n,i,""+n[i])}}function Vs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Ar(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function wi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Os=/[\n"\\]/g;function dn(n){return n.replace(Os,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function za(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ft(i)):n.value!==""+Ft(i)&&(n.value=""+Ft(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?wl(n,_,Ft(i)):a!=null?wl(n,_,Ft(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Ft(b):n.removeAttribute("name")}function bc(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){$e(n);return}a=a!=null?""+Ft(a):"",i=i!=null?""+Ft(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),$e(n)}function wl(n,i,a){i==="number"&&wi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function wr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Ft(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Sc(n,i,a){if(i!=null&&(i=""+Ft(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Ft(a):""}function Ir(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ae(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ft(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),$e(n)}function mn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Ac.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function xl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Il(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Il(n,d,i[d])}function La(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(n){return xr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ti(){}var Rl=null;function zn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rr=null,Ii=null;function Ms(n){var i=Pn(n);if(i&&(n=i.stateNode)){var a=n[qt]||null;e:switch(n=i.stateNode,i.type){case"input":if(za(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[qt]||null;if(!f)throw Error(r(90));za(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Vs(l)}break e;case"textarea":Sc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&wr(n,!!a.multiple,i,!1)}}}var ja=!1;function Cr(n,i,a){if(ja)return n(i,a);ja=!0;try{var l=n(i);return l}finally{if(ja=!1,(Rr!==null||Ii!==null)&&(_h(),Rr&&(i=Rr,n=Ii,Ii=Rr=null,Ms(i),n)))for(i=0;i<n.length;i++)Ms(n[i])}}function ni(n,i){var a=n.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(Ln)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){ks=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{ks=!1}var xi=null,Cl=null,Ps=null;function Nl(){if(Ps)return Ps;var n,i=Cl,a=i.length,l,f="value"in xi?xi.value:xi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Ps=f.slice(n,1<l?1-l:void 0)}function zs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ki(){return!0}function ii(){return!1}function Yt(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ki:ii,this.isPropagationStopped=ii,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),i}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Yt(Qi),Nr=E({},Qi,{view:0,detail:0}),Dl=Yt(Nr),Dr,Ba,Ci,qa=E({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ci&&(Ci&&n.type==="mousemove"?(Dr=n.screenX-Ci.screenX,Ba=n.screenY-Ci.screenY):Ba=Dr=0,Ci=n),Dr)},movementY:function(n){return"movementY"in n?n.movementY:Ba}}),Vl=Yt(qa),Ls=E({},qa,{dataTransfer:0}),Ic=Yt(Ls),xc=E({},Nr,{relatedTarget:0}),Us=Yt(xc),Ol=E({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Rc=Yt(Ol),Fa=E({},Qi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cc=Yt(Fa),Nc=E({},Qi,{data:0}),Ni=Yt(Nc),Dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Oc[n])?!!i[n]:!1}function Vr(){return Mc}var cn=E({},Nr,{key:function(n){if(n.key){var i=Dc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Vc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(n){return n.type==="keypress"?zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),kc=Yt(cn),Pc=E({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Yt(Pc),h=E({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),y=Yt(h),v=E({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Yt(v),U=E({},qa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Yt(U),te=E({},Qi,{newState:0,oldState:0}),Re=Yt(te),Tt=[9,13,27,32],Ke=Ln&&"CompositionEvent"in window,ht=null;Ln&&"documentMode"in document&&(ht=document.documentMode);var Un=Ln&&"TextEvent"in window&&!ht,Di=Ln&&(!Ke||ht&&8<ht&&11>=ht),ri=" ",si=!1;function js(n,i){switch(n){case"keyup":return Tt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ga=!1;function IA(n,i){switch(n){case"compositionend":return Ha(i);case"keypress":return i.which!==32?null:(si=!0,ri);case"textInput":return n=i.data,n===ri&&si?null:n;default:return null}}function xA(n,i){if(Ga)return n==="compositionend"||!Ke&&js(n,i)?(n=Nl(),Ps=Cl=xi=null,Ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Di&&i.locale!=="ko"?null:i.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ry(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!RA[n.type]:i==="textarea"}function Cy(n,i,a,l){Rr?Ii?Ii.push(l):Ii=[l]:Rr=l,i=wh(i,"onChange"),0<i.length&&(a=new Ri("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ml=null,kl=null;function CA(n){hv(n,0)}function zc(n){var i=bn(n);if(Vs(i))return n}function Ny(n,i){if(n==="change")return i}var Dy=!1;if(Ln){var Td;if(Ln){var Ed="oninput"in document;if(!Ed){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Ed=typeof Vy.oninput=="function"}Td=Ed}else Td=!1;Dy=Td&&(!document.documentMode||9<document.documentMode)}function Oy(){Ml&&(Ml.detachEvent("onpropertychange",My),kl=Ml=null)}function My(n){if(n.propertyName==="value"&&zc(kl)){var i=[];Cy(i,kl,n,zn(n)),Cr(CA,i)}}function NA(n,i,a){n==="focusin"?(Oy(),Ml=i,kl=a,Ml.attachEvent("onpropertychange",My)):n==="focusout"&&Oy()}function DA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zc(kl)}function VA(n,i){if(n==="click")return zc(i)}function OA(n,i){if(n==="input"||n==="change")return zc(i)}function MA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var An=typeof Object.is=="function"?Object.is:MA;function Pl(n,i){if(An(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!wt.call(i,f)||!An(n[f],i[f]))return!1}return!0}function ky(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Py(n,i){var a=ky(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ky(a)}}function zy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?zy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ly(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=wi(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=wi(n.document)}return i}function bd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var kA=Ln&&"documentMode"in document&&11>=document.documentMode,Ka=null,Sd=null,zl=null,Ad=!1;function Uy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ad||Ka==null||Ka!==wi(l)||(l=Ka,"selectionStart"in l&&bd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&Pl(zl,l)||(zl=l,l=wh(Sd,"onSelect"),0<l.length&&(i=new Ri("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ka)))}function Bs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Qa={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},wd={},jy={};Ln&&(jy=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function qs(n){if(wd[n])return wd[n];if(!Qa[n])return n;var i=Qa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in jy)return wd[n]=i[a];return n}var By=qs("animationend"),qy=qs("animationiteration"),Fy=qs("animationstart"),PA=qs("transitionrun"),zA=qs("transitionstart"),LA=qs("transitioncancel"),Hy=qs("transitionend"),Gy=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function ai(n,i){Gy.set(n,i),Si(i,[n])}var Lc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},jn=[],Ya=0,xd=0;function Uc(){for(var n=Ya,i=xd=Ya=0;i<n;){var a=jn[i];jn[i++]=null;var l=jn[i];jn[i++]=null;var f=jn[i];jn[i++]=null;var d=jn[i];if(jn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Ky(a,f,d)}}function jc(n,i,a,l){jn[Ya++]=n,jn[Ya++]=i,jn[Ya++]=a,jn[Ya++]=l,xd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Rd(n,i,a,l){return jc(n,i,a,l),Bc(n)}function Fs(n,i){return jc(n,null,null,i),Bc(n)}function Ky(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-vt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Bc(n){if(50<su)throw su=0,zm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Xa={};function UA(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,i,a,l){return new UA(n,i,a,l)}function Cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xi(n,i){var a=n.alternate;return a===null?(a=wn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Qy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function qc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")Cd(n)&&(_=1);else if(typeof n=="string")_=Hw(n,a,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=wn(31,a,i,f),n.elementType=R,n.lanes=d,n;case Y:return Hs(a.children,f,d,i);case F:_=8,f|=24;break;case se:return n=wn(12,a,i,f|2),n.elementType=se,n.lanes=d,n;case be:return n=wn(13,a,i,f),n.elementType=be,n.lanes=d,n;case ge:return n=wn(19,a,i,f),n.elementType=ge,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:_=10;break e;case re:_=9;break e;case Te:_=11;break e;case C:_=14;break e;case x:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=wn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Hs(n,i,a,l){return n=wn(7,n,l,i),n.lanes=a,n}function Nd(n,i,a){return n=wn(6,n,null,i),n.lanes=a,n}function Yy(n){var i=wn(18,null,null,0);return i.stateNode=n,i}function Dd(n,i,a){return i=wn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Xy=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var a=Xy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:ml(i)},Xy.set(n,i),i)}return{value:n,source:i,stack:ml(i)}}var $a=[],Za=0,Fc=null,Ll=0,qn=[],Fn=0,Or=null,Vi=1,Oi="";function $i(n,i){$a[Za++]=Ll,$a[Za++]=Fc,Fc=n,Ll=i}function $y(n,i,a){qn[Fn++]=Vi,qn[Fn++]=Oi,qn[Fn++]=Or,Or=n;var l=Vi;n=Oi;var f=32-vt(l)-1;l&=~(1<<f),a+=1;var d=32-vt(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Vi=1<<32-vt(i)+f|a<<f|l,Oi=d+n}else Vi=1<<d|a<<f|l,Oi=n}function Vd(n){n.return!==null&&($i(n,1),$y(n,1,0))}function Od(n){for(;n===Fc;)Fc=$a[--Za],$a[Za]=null,Ll=$a[--Za],$a[Za]=null;for(;n===Or;)Or=qn[--Fn],qn[Fn]=null,Oi=qn[--Fn],qn[Fn]=null,Vi=qn[--Fn],qn[Fn]=null}function Zy(n,i){qn[Fn++]=Vi,qn[Fn++]=Oi,qn[Fn++]=Or,Vi=i.id,Oi=i.overflow,Or=n}var Xt=null,lt=null,je=!1,Mr=null,Hn=!1,Md=Error(r(519));function kr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(Bn(i,n)),Md}function Jy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[xt]=n,i[qt]=l,a){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(a=0;a<ou.length;a++)ke(ou[a],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),bc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),Ir(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||gv(i.textContent,a)?(l.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),l.onScroll!=null&&ke("scroll",i),l.onScrollEnd!=null&&ke("scrollend",i),l.onClick!=null&&(i.onclick=ti),i=!0):i=!1,i||kr(n,!0)}function Wy(n){for(Xt=n.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Xt=Xt.return}}function Ja(n){if(n!==Xt)return!1;if(!je)return Wy(n),je=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Jm(n.type,n.memoizedProps)),a=!a),a&&lt&&kr(n),Wy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));lt=Av(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));lt=Av(n)}else i===27?(i=lt,Xr(n.type)?(n=ig,ig=null,lt=n):lt=i):lt=Xt?Kn(n.stateNode.nextSibling):null;return!0}function Gs(){lt=Xt=null,je=!1}function kd(){var n=Mr;return n!==null&&(_n===null?_n=n:_n.push.apply(_n,n),Mr=null),n}function Ul(n){Mr===null?Mr=[n]:Mr.push(n)}var Pd=M(null),Ks=null,Zi=null;function Pr(n,i,a){ae(Pd,i._currentValue),i._currentValue=a}function Ji(n){n._currentValue=Pd.current,J(Pd)}function zd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Ld(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),zd(d.return,a,n),l||(_=null);break e}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),zd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Wa(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=f.type;An(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===qe.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(fu):n=[fu])}f=f.return}n!==null&&Ld(i,n,a,l),i.flags|=262144}function Hc(n){for(n=n.firstContext;n!==null;){if(!An(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qs(n){Ks=n,Zi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function $t(n){return e_(Ks,n)}function Gc(n,i){return Ks===null&&Qs(n),e_(n,i)}function e_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Zi===null){if(n===null)throw Error(r(308));Zi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Zi=Zi.next=i;return a}var jA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},BA=s.unstable_scheduleCallback,qA=s.unstable_NormalPriority,Nt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ud(){return{controller:new jA,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&BA(qA,function(){n.controller.abort()})}var Bl=null,jd=0,eo=0,to=null;function FA(n,i){if(Bl===null){var a=Bl=[];jd=0,eo=Fm(),to={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jd++,i.then(t_,t_),i}function t_(){if(--jd===0&&Bl!==null){to!==null&&(to.status="fulfilled");var n=Bl;Bl=null,eo=0,to=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function HA(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var n_=K.S;K.S=function(n,i){U0=un(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&FA(n,i),n_!==null&&n_(n,i)};var Ys=M(null);function Bd(){var n=Ys.current;return n!==null?n:at.pooledCache}function Kc(n,i){i===null?ae(Ys,Ys.current):ae(Ys,i.pool)}function i_(){var n=Bd();return n===null?null:{parent:Nt._currentValue,pool:n}}var no=Error(r(460)),qd=Error(r(474)),Qc=Error(r(542)),Yc={then:function(){}};function r_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function s_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(ti,ti),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,o_(n),n;default:if(typeof i.status=="string")i.then(ti,ti);else{if(n=at,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,o_(n),n}throw $s=i,no}}function Xs(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($s=a,no):a}}var $s=null;function a_(){if($s===null)throw Error(r(459));var n=$s;return $s=null,n}function o_(n){if(n===no||n===Qc)throw Error(r(483))}var io=null,ql=0;function Xc(n){var i=ql;return ql+=1,io===null&&(io=[]),s_(io,n,i)}function Fl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function $c(n,i){throw i.$$typeof===I?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function l_(n){function i(P,O){if(n){var j=P.deletions;j===null?(P.deletions=[O],P.flags|=16):j.push(O)}}function a(P,O){if(!n)return null;for(;O!==null;)i(P,O),O=O.sibling;return null}function l(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function f(P,O){return P=Xi(P,O),P.index=0,P.sibling=null,P}function d(P,O,j){return P.index=j,n?(j=P.alternate,j!==null?(j=j.index,j<O?(P.flags|=67108866,O):j):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function _(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function b(P,O,j,X){return O===null||O.tag!==6?(O=Nd(j,P.mode,X),O.return=P,O):(O=f(O,j),O.return=P,O)}function N(P,O,j,X){var _e=j.type;return _e===Y?Q(P,O,j.props.children,X,j.key):O!==null&&(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&Xs(_e)===O.type)?(O=f(O,j.props),Fl(O,j),O.return=P,O):(O=qc(j.type,j.key,j.props,null,P.mode,X),Fl(O,j),O.return=P,O)}function B(P,O,j,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=Dd(j,P.mode,X),O.return=P,O):(O=f(O,j.children||[]),O.return=P,O)}function Q(P,O,j,X,_e){return O===null||O.tag!==7?(O=Hs(j,P.mode,X,_e),O.return=P,O):(O=f(O,j),O.return=P,O)}function Z(P,O,j){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Nd(""+O,P.mode,j),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case k:return j=qc(O.type,O.key,O.props,null,P.mode,j),Fl(j,O),j.return=P,j;case $:return O=Dd(O,P.mode,j),O.return=P,O;case x:return O=Xs(O),Z(P,O,j)}if(Ae(O)||z(O))return O=Hs(O,P.mode,j,null),O.return=P,O;if(typeof O.then=="function")return Z(P,Xc(O),j);if(O.$$typeof===ie)return Z(P,Gc(P,O),j);$c(P,O)}return null}function q(P,O,j,X){var _e=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return _e!==null?null:b(P,O,""+j,X);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case k:return j.key===_e?N(P,O,j,X):null;case $:return j.key===_e?B(P,O,j,X):null;case x:return j=Xs(j),q(P,O,j,X)}if(Ae(j)||z(j))return _e!==null?null:Q(P,O,j,X,null);if(typeof j.then=="function")return q(P,O,Xc(j),X);if(j.$$typeof===ie)return q(P,O,Gc(P,j),X);$c(P,j)}return null}function G(P,O,j,X,_e){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(j)||null,b(O,P,""+X,_e);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case k:return P=P.get(X.key===null?j:X.key)||null,N(O,P,X,_e);case $:return P=P.get(X.key===null?j:X.key)||null,B(O,P,X,_e);case x:return X=Xs(X),G(P,O,j,X,_e)}if(Ae(X)||z(X))return P=P.get(j)||null,Q(O,P,X,_e,null);if(typeof X.then=="function")return G(P,O,j,Xc(X),_e);if(X.$$typeof===ie)return G(P,O,j,Gc(O,X),_e);$c(O,X)}return null}function fe(P,O,j,X){for(var _e=null,He=null,me=O,De=O=0,ze=null;me!==null&&De<j.length;De++){me.index>De?(ze=me,me=null):ze=me.sibling;var Ge=q(P,me,j[De],X);if(Ge===null){me===null&&(me=ze);break}n&&me&&Ge.alternate===null&&i(P,me),O=d(Ge,O,De),He===null?_e=Ge:He.sibling=Ge,He=Ge,me=ze}if(De===j.length)return a(P,me),je&&$i(P,De),_e;if(me===null){for(;De<j.length;De++)me=Z(P,j[De],X),me!==null&&(O=d(me,O,De),He===null?_e=me:He.sibling=me,He=me);return je&&$i(P,De),_e}for(me=l(me);De<j.length;De++)ze=G(me,P,De,j[De],X),ze!==null&&(n&&ze.alternate!==null&&me.delete(ze.key===null?De:ze.key),O=d(ze,O,De),He===null?_e=ze:He.sibling=ze,He=ze);return n&&me.forEach(function(es){return i(P,es)}),je&&$i(P,De),_e}function Ee(P,O,j,X){if(j==null)throw Error(r(151));for(var _e=null,He=null,me=O,De=O=0,ze=null,Ge=j.next();me!==null&&!Ge.done;De++,Ge=j.next()){me.index>De?(ze=me,me=null):ze=me.sibling;var es=q(P,me,Ge.value,X);if(es===null){me===null&&(me=ze);break}n&&me&&es.alternate===null&&i(P,me),O=d(es,O,De),He===null?_e=es:He.sibling=es,He=es,me=ze}if(Ge.done)return a(P,me),je&&$i(P,De),_e;if(me===null){for(;!Ge.done;De++,Ge=j.next())Ge=Z(P,Ge.value,X),Ge!==null&&(O=d(Ge,O,De),He===null?_e=Ge:He.sibling=Ge,He=Ge);return je&&$i(P,De),_e}for(me=l(me);!Ge.done;De++,Ge=j.next())Ge=G(me,P,De,Ge.value,X),Ge!==null&&(n&&Ge.alternate!==null&&me.delete(Ge.key===null?De:Ge.key),O=d(Ge,O,De),He===null?_e=Ge:He.sibling=Ge,He=Ge);return n&&me.forEach(function(tI){return i(P,tI)}),je&&$i(P,De),_e}function rt(P,O,j,X){if(typeof j=="object"&&j!==null&&j.type===Y&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case k:e:{for(var _e=j.key;O!==null;){if(O.key===_e){if(_e=j.type,_e===Y){if(O.tag===7){a(P,O.sibling),X=f(O,j.props.children),X.return=P,P=X;break e}}else if(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&Xs(_e)===O.type){a(P,O.sibling),X=f(O,j.props),Fl(X,j),X.return=P,P=X;break e}a(P,O);break}else i(P,O);O=O.sibling}j.type===Y?(X=Hs(j.props.children,P.mode,X,j.key),X.return=P,P=X):(X=qc(j.type,j.key,j.props,null,P.mode,X),Fl(X,j),X.return=P,P=X)}return _(P);case $:e:{for(_e=j.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){a(P,O.sibling),X=f(O,j.children||[]),X.return=P,P=X;break e}else{a(P,O);break}else i(P,O);O=O.sibling}X=Dd(j,P.mode,X),X.return=P,P=X}return _(P);case x:return j=Xs(j),rt(P,O,j,X)}if(Ae(j))return fe(P,O,j,X);if(z(j)){if(_e=z(j),typeof _e!="function")throw Error(r(150));return j=_e.call(j),Ee(P,O,j,X)}if(typeof j.then=="function")return rt(P,O,Xc(j),X);if(j.$$typeof===ie)return rt(P,O,Gc(P,j),X);$c(P,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,O!==null&&O.tag===6?(a(P,O.sibling),X=f(O,j),X.return=P,P=X):(a(P,O),X=Nd(j,P.mode,X),X.return=P,P=X),_(P)):a(P,O)}return function(P,O,j,X){try{ql=0;var _e=rt(P,O,j,X);return io=null,_e}catch(me){if(me===no||me===Qc)throw me;var He=wn(29,me,null,P.mode);return He.lanes=X,He.return=P,He}finally{}}}var Zs=l_(!0),u_=l_(!1),zr=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Lr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ur(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Bc(n),Ky(n,null,a),i}return jc(n,l,i,a),Bc(n)}function Hl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,yl(n,a)}}function Gd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Kd=!1;function Gl(){if(Kd){var n=to;if(n!==null)throw n}}function Kl(n,i,a,l){Kd=!1;var f=n.updateQueue;zr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,B=N.next;N.next=null,_===null?d=B:_.next=B,_=N;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==_&&(b===null?Q.firstBaseUpdate=B:b.next=B,Q.lastBaseUpdate=N))}if(d!==null){var Z=f.baseState;_=0,Q=B=N=null,b=d;do{var q=b.lane&-536870913,G=q!==b.lane;if(G?(Pe&q)===q:(l&q)===q){q!==0&&q===eo&&(Kd=!0),Q!==null&&(Q=Q.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var fe=n,Ee=b;q=i;var rt=a;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){Z=fe.call(rt,Z,q);break e}Z=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,q=typeof fe=="function"?fe.call(rt,Z,q):fe,q==null)break e;Z=E({},Z,q);break e;case 2:zr=!0}}q=b.callback,q!==null&&(n.flags|=64,G&&(n.flags|=8192),G=f.callbacks,G===null?f.callbacks=[q]:G.push(q))}else G={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(B=Q=G,N=Z):Q=Q.next=G,_|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;G=b,b=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Q===null&&(N=Z),f.baseState=N,f.firstBaseUpdate=B,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),Hr|=_,n.lanes=_,n.memoizedState=Z}}function c_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function h_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)c_(a[n],i)}var ro=M(null),Zc=M(0);function f_(n,i){n=or,ae(Zc,n),ae(ro,i),or=n|i.baseLanes}function Qd(){ae(Zc,or),ae(ro,ro.current)}function Yd(){or=Zc.current,J(ro),J(Zc)}var In=M(null),Gn=null;function jr(n){var i=n.alternate;ae(Et,Et.current&1),ae(In,n),Gn===null&&(i===null||ro.current!==null||i.memoizedState!==null)&&(Gn=n)}function Xd(n){ae(Et,Et.current),ae(In,n),Gn===null&&(Gn=n)}function d_(n){n.tag===22?(ae(Et,Et.current),ae(In,n),Gn===null&&(Gn=n)):Br()}function Br(){ae(Et,Et.current),ae(In,In.current)}function xn(n){J(In),Gn===n&&(Gn=null),J(Et)}var Et=M(0);function Jc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||tg(a)||ng(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,Ce=null,nt=null,Dt=null,Wc=!1,so=!1,Js=!1,eh=0,Ql=0,ao=null,GA=0;function pt(){throw Error(r(321))}function $d(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!An(n[a],i[a]))return!1;return!0}function Zd(n,i,a,l,f,d){return Wi=d,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?$_:fm,Js=!1,d=a(l,f),Js=!1,so&&(d=g_(i,a,l,f)),m_(n),d}function m_(n){K.H=$l;var i=nt!==null&&nt.next!==null;if(Wi=0,Dt=nt=Ce=null,Wc=!1,Ql=0,ao=null,i)throw Error(r(300));n===null||Vt||(n=n.dependencies,n!==null&&Hc(n)&&(Vt=!0))}function g_(n,i,a,l){Ce=n;var f=0;do{if(so&&(ao=null),Ql=0,so=!1,25<=f)throw Error(r(301));if(f+=1,Dt=nt=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=Z_,d=i(a,l)}while(so);return d}function KA(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Yl(i):i,n=n.useState()[0],(nt!==null?nt.memoizedState:null)!==n&&(Ce.flags|=1024),i}function Jd(){var n=eh!==0;return eh=0,n}function Wd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function em(n){if(Wc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Wc=!1}Wi=0,Dt=nt=Ce=null,so=!1,Ql=eh=0,ao=null}function hn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ce.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function bt(){if(nt===null){var n=Ce.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var i=Dt===null?Ce.memoizedState:Dt.next;if(i!==null)Dt=i,nt=n;else{if(n===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Dt===null?Ce.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function th(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(n){var i=Ql;return Ql+=1,ao===null&&(ao=[]),n=s_(ao,n,i),i=Ce,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?$_:fm),n}function nh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yl(n);if(n.$$typeof===ie)return $t(n)}throw Error(r(438,String(n)))}function tm(n){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=th(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=D;return i.index++,a}function er(n,i){return typeof i=="function"?i(n):i}function ih(n){var i=bt();return nm(i,nt,n)}function nm(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,N=null,B=i,Q=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(Pe&Z)===Z:(Wi&Z)===Z){var q=B.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===eo&&(Q=!0);else if((Wi&q)===q){B=B.next,q===eo&&(Q=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=Z,_=d):N=N.next=Z,Ce.lanes|=q,Hr|=q;Z=B.action,Js&&a(d,Z),d=B.hasEagerState?B.eagerState:a(d,Z)}else q={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=q,_=d):N=N.next=q,Ce.lanes|=Z,Hr|=Z;B=B.next}while(B!==null&&B!==i);if(N===null?_=d:N.next=b,!An(d,n.memoizedState)&&(Vt=!0,Q&&(a=to,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function im(n){var i=bt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);An(d,i.memoizedState)||(Vt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function p_(n,i,a){var l=Ce,f=bt(),d=je;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!An((nt||f).memoizedState,a);if(_&&(f.memoizedState=a,Vt=!0),f=f.queue,am(v_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,oo(9,{destroy:void 0},__.bind(null,l,f,a,i),null),at===null)throw Error(r(349));d||(Wi&127)!==0||y_(l,i,a)}return a}function y_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=th(),Ce.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function __(n,i,a,l){i.value=a,i.getSnapshot=l,T_(i)&&E_(n)}function v_(n,i,a){return a(function(){T_(i)&&E_(n)})}function T_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!An(n,a)}catch{return!0}}function E_(n){var i=Fs(n,2);i!==null&&vn(i,n,2)}function rm(n){var i=hn();if(typeof n=="function"){var a=n;if(n=a(),Js){kn(!0);try{a()}finally{kn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:n},i}function b_(n,i,a,l){return n.baseState=a,nm(n,nt,typeof l=="function"?l:er)}function QA(n,i,a,l,f){if(ah(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,S_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function S_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var b=a(f,l),N=K.S;N!==null&&N(_,b),A_(n,i,b)}catch(B){sm(n,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(f,l),A_(n,i,d)}catch(B){sm(n,i,B)}}function A_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){w_(n,i,l)},function(l){return sm(n,i,l)}):w_(n,i,a)}function w_(n,i,a){i.status="fulfilled",i.value=a,I_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,S_(n,a)))}function sm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,I_(i),i=i.next;while(i!==l)}n.action=null}function I_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function x_(n,i){return i}function R_(n,i){if(je){var a=at.formState;if(a!==null){e:{var l=Ce;if(je){if(lt){t:{for(var f=lt,d=Hn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Kn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){lt=Kn(f.nextSibling),l=f.data==="F!";break e}}kr(l)}l=!1}l&&(i=a[0])}}return a=hn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:i},a.queue=l,a=Q_.bind(null,Ce,l),l.dispatch=a,l=rm(!1),d=hm.bind(null,Ce,!1,l.queue),l=hn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=QA.bind(null,Ce,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function C_(n){var i=bt();return N_(i,nt,n)}function N_(n,i,a){if(i=nm(n,i,x_)[0],n=ih(er)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Yl(i)}catch(_){throw _===no?Qc:_}else l=i;i=bt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,oo(9,{destroy:void 0},YA.bind(null,f,a),null)),[l,d,n]}function YA(n,i){n.action=i}function D_(n){var i=bt(),a=nt;if(a!==null)return N_(i,a,n);bt(),i=i.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function oo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=th(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function V_(){return bt().memoizedState}function rh(n,i,a,l){var f=hn();Ce.flags|=n,f.memoizedState=oo(1|i,{destroy:void 0},a,l===void 0?null:l)}function sh(n,i,a,l){var f=bt();l=l===void 0?null:l;var d=f.memoizedState.inst;nt!==null&&l!==null&&$d(l,nt.memoizedState.deps)?f.memoizedState=oo(i,d,a,l):(Ce.flags|=n,f.memoizedState=oo(1|i,d,a,l))}function O_(n,i){rh(8390656,8,n,i)}function am(n,i){sh(2048,8,n,i)}function XA(n){Ce.flags|=4;var i=Ce.updateQueue;if(i===null)i=th(),Ce.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function M_(n){var i=bt().memoizedState;return XA({ref:i,nextImpl:n}),function(){if((Qe&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function k_(n,i){return sh(4,2,n,i)}function P_(n,i){return sh(4,4,n,i)}function z_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function L_(n,i,a){a=a!=null?a.concat([n]):null,sh(4,4,z_.bind(null,i,n),a)}function om(){}function U_(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&$d(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function j_(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&$d(i,l[1]))return l[0];if(l=n(),Js){kn(!0);try{n()}finally{kn(!1)}}return a.memoizedState=[l,i],l}function lm(n,i,a){return a===void 0||(Wi&1073741824)!==0&&(Pe&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=B0(),Ce.lanes|=n,Hr|=n,a)}function B_(n,i,a,l){return An(a,i)?a:ro.current!==null?(n=lm(n,a,l),An(n,i)||(Vt=!0),n):(Wi&42)===0||(Wi&1073741824)!==0&&(Pe&261930)===0?(Vt=!0,n.memoizedState=a):(n=B0(),Ce.lanes|=n,Hr|=n,i)}function q_(n,i,a,l,f){var d=ne.p;ne.p=d!==0&&8>d?d:8;var _=K.T,b={};K.T=b,hm(n,!1,i,a);try{var N=f(),B=K.S;if(B!==null&&B(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=HA(N,l);Xl(n,i,Q,Nn(n))}else Xl(n,i,l,Nn(n))}catch(Z){Xl(n,i,{then:function(){},status:"rejected",reason:Z},Nn())}finally{ne.p=d,_!==null&&b.types!==null&&(_.types=b.types),K.T=_}}function $A(){}function um(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=F_(n).queue;q_(n,f,i,ye,a===null?$A:function(){return H_(n),a(l)})}function F_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function H_(n){var i=F_(n);i.next===null&&(i=n.alternate.memoizedState),Xl(n,i.next.queue,{},Nn())}function cm(){return $t(fu)}function G_(){return bt().memoizedState}function K_(){return bt().memoizedState}function ZA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();n=Lr(a);var l=Ur(i,n,a);l!==null&&(vn(l,i,a),Hl(l,i,a)),i={cache:Ud()},n.payload=i;return}i=i.return}}function JA(n,i,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ah(n)?Y_(i,a):(a=Rd(n,i,a,l),a!==null&&(vn(a,n,l),X_(a,i,l)))}function Q_(n,i,a){var l=Nn();Xl(n,i,a,l)}function Xl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ah(n))Y_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,An(b,_))return jc(n,i,f,0),at===null&&Uc(),!1}catch{}finally{}if(a=Rd(n,i,f,l),a!==null)return vn(a,n,l),X_(a,i,l),!0}return!1}function hm(n,i,a,l){if(l={lane:2,revertLane:Fm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ah(n)){if(i)throw Error(r(479))}else i=Rd(n,a,l,2),i!==null&&vn(i,n,2)}function ah(n){var i=n.alternate;return n===Ce||i!==null&&i===Ce}function Y_(n,i){so=Wc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function X_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,yl(n,a)}}var $l={readContext:$t,use:nh,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};$l.useEffectEvent=pt;var $_={readContext:$t,use:nh,useCallback:function(n,i){return hn().memoizedState=[n,i===void 0?null:i],n},useContext:$t,useEffect:O_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,rh(4194308,4,z_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return rh(4194308,4,n,i)},useInsertionEffect:function(n,i){rh(4,2,n,i)},useMemo:function(n,i){var a=hn();i=i===void 0?null:i;var l=n();if(Js){kn(!0);try{n()}finally{kn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=hn();if(a!==void 0){var f=a(i);if(Js){kn(!0);try{a(i)}finally{kn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=JA.bind(null,Ce,n),[l.memoizedState,n]},useRef:function(n){var i=hn();return n={current:n},i.memoizedState=n},useState:function(n){n=rm(n);var i=n.queue,a=Q_.bind(null,Ce,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:om,useDeferredValue:function(n,i){var a=hn();return lm(a,n,i)},useTransition:function(){var n=rm(!1);return n=q_.bind(null,Ce,n.queue,!0,!1),hn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Ce,f=hn();if(je){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),at===null)throw Error(r(349));(Pe&127)!==0||y_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,O_(v_.bind(null,l,d,n),[n]),l.flags|=2048,oo(9,{destroy:void 0},__.bind(null,l,d,a,i),null),a},useId:function(){var n=hn(),i=at.identifierPrefix;if(je){var a=Oi,l=Vi;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=eh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=GA++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:cm,useFormState:R_,useActionState:R_,useOptimistic:function(n){var i=hn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=hm.bind(null,Ce,!0,a),a.dispatch=i,[n,i]},useMemoCache:tm,useCacheRefresh:function(){return hn().memoizedState=ZA.bind(null,Ce)},useEffectEvent:function(n){var i=hn(),a={impl:n};return i.memoizedState=a,function(){if((Qe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},fm={readContext:$t,use:nh,useCallback:U_,useContext:$t,useEffect:am,useImperativeHandle:L_,useInsertionEffect:k_,useLayoutEffect:P_,useMemo:j_,useReducer:ih,useRef:V_,useState:function(){return ih(er)},useDebugValue:om,useDeferredValue:function(n,i){var a=bt();return B_(a,nt.memoizedState,n,i)},useTransition:function(){var n=ih(er)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:p_,useId:G_,useHostTransitionStatus:cm,useFormState:C_,useActionState:C_,useOptimistic:function(n,i){var a=bt();return b_(a,nt,n,i)},useMemoCache:tm,useCacheRefresh:K_};fm.useEffectEvent=M_;var Z_={readContext:$t,use:nh,useCallback:U_,useContext:$t,useEffect:am,useImperativeHandle:L_,useInsertionEffect:k_,useLayoutEffect:P_,useMemo:j_,useReducer:im,useRef:V_,useState:function(){return im(er)},useDebugValue:om,useDeferredValue:function(n,i){var a=bt();return nt===null?lm(a,n,i):B_(a,nt.memoizedState,n,i)},useTransition:function(){var n=im(er)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:p_,useId:G_,useHostTransitionStatus:cm,useFormState:D_,useActionState:D_,useOptimistic:function(n,i){var a=bt();return nt!==null?b_(a,nt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:tm,useCacheRefresh:K_};Z_.useEffectEvent=M_;function dm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var mm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=Lr(l);f.payload=i,a!=null&&(f.callback=a),i=Ur(n,f,l),i!==null&&(vn(i,n,l),Hl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=Lr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ur(n,f,l),i!==null&&(vn(i,n,l),Hl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Nn(),l=Lr(a);l.tag=2,i!=null&&(l.callback=i),i=Ur(n,l,a),i!==null&&(vn(i,n,a),Hl(i,n,a))}};function J_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Pl(a,l)||!Pl(f,d):!0}function W_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&mm.enqueueReplaceState(i,i.state,null)}function Ws(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function e0(n){Lc(n)}function t0(n){console.error(n)}function n0(n){Lc(n)}function oh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function i0(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function gm(n,i,a){return a=Lr(a),a.tag=3,a.payload={element:null},a.callback=function(){oh(n,i)},a}function r0(n){return n=Lr(n),n.tag=3,n}function s0(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){i0(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){i0(i,a,l),typeof f!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function WA(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Wa(i,a,f,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?vh():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Yc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),jm(n,l,f)),!1;case 22:return a.flags|=65536,l===Yc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),jm(n,l,f)),!1}throw Error(r(435,a.tag))}return jm(n,l,f),vh(),!1}if(je)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Md&&(n=Error(r(422),{cause:l}),Ul(Bn(n,a)))):(l!==Md&&(i=Error(r(423),{cause:l}),Ul(Bn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Bn(l,a),f=gm(n.stateNode,l,f),Gd(n,f),yt!==4&&(yt=2)),!1;var d=Error(r(520),{cause:l});if(d=Bn(d,a),ru===null?ru=[d]:ru.push(d),yt!==4&&(yt=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=gm(a.stateNode,l,n),Gd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Gr===null||!Gr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=r0(f),s0(f,n,a,l),Gd(a,f),!1}a=a.return}while(a!==null);return!1}var pm=Error(r(461)),Vt=!1;function Zt(n,i,a,l){i.child=n===null?u_(i,null,a,l):Zs(i,n.child,a,l)}function a0(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Qs(i),l=Zd(n,i,a,_,d,f),b=Jd(),n!==null&&!Vt?(Wd(n,i,f),tr(n,i,f)):(je&&b&&Vd(i),i.flags|=1,Zt(n,i,l,f),i.child)}function o0(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Cd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,l0(n,i,d,l,f)):(n=qc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Am(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Pl,a(_,l)&&n.ref===i.ref)return tr(n,i,f)}return i.flags|=1,n=Xi(d,l),n.ref=i.ref,n.return=i,i.child=n}function l0(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Pl(d,l)&&n.ref===i.ref)if(Vt=!1,i.pendingProps=l=d,Am(n,f))(n.flags&131072)!==0&&(Vt=!0);else return i.lanes=n.lanes,tr(n,i,f)}return ym(n,i,a,l,f)}function u0(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return c0(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Kc(i,d!==null?d.cachePool:null),d!==null?f_(i,d):Qd(),d_(i);else return l=i.lanes=536870912,c0(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Kc(i,d.cachePool),f_(i,d),Br(),i.memoizedState=null):(n!==null&&Kc(i,null),Qd(),Br());return Zt(n,i,f,a),i.child}function Zl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function c0(n,i,a,l,f){var d=Bd();return d=d===null?null:{parent:Nt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Kc(i,null),Qd(),d_(i),n!==null&&Wa(n,i,l,!0),i.childLanes=f,null}function lh(n,i){return i=ch({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function h0(n,i,a){return Zs(i,n.child,null,a),n=lh(i,i.pendingProps),n.flags|=2,xn(i),i.memoizedState=null,n}function ew(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(je){if(l.mode==="hidden")return n=lh(i,l),i.lanes=536870912,Zl(null,n);if(Xd(i),(n=lt)?(n=Sv(n,Hn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Or!==null?{id:Vi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Yy(n),a.return=i,i.child=a,Xt=i,lt=null)):n=null,n===null)throw kr(i);return i.lanes=536870912,null}return lh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Xd(i),f)if(i.flags&256)i.flags&=-257,i=h0(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Vt||Wa(n,i,a,!1),f=(a&n.childLanes)!==0,Vt||f){if(l=at,l!==null&&(_=_l(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Fs(n,_),vn(l,n,_),pm;vh(),i=h0(n,i,a)}else n=d.treeContext,lt=Kn(_.nextSibling),Xt=i,je=!0,Mr=null,Hn=!1,n!==null&&Zy(i,n),i=lh(i,l),i.flags|=4096;return i}return n=Xi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function uh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function ym(n,i,a,l,f){return Qs(i),a=Zd(n,i,a,l,void 0,f),l=Jd(),n!==null&&!Vt?(Wd(n,i,f),tr(n,i,f)):(je&&l&&Vd(i),i.flags|=1,Zt(n,i,a,f),i.child)}function f0(n,i,a,l,f,d){return Qs(i),i.updateQueue=null,a=g_(i,l,a,f),m_(n),l=Jd(),n!==null&&!Vt?(Wd(n,i,d),tr(n,i,d)):(je&&l&&Vd(i),i.flags|=1,Zt(n,i,a,d),i.child)}function d0(n,i,a,l,f){if(Qs(i),i.stateNode===null){var d=Xa,_=a.contextType;typeof _=="object"&&_!==null&&(d=$t(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=mm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Fd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?$t(_):Xa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(dm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&mm.enqueueReplaceState(d,d.state,null),Kl(i,l,d,f),Gl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,N=Ws(a,b);d.props=N;var B=d.context,Q=a.contextType;_=Xa,typeof Q=="object"&&Q!==null&&(_=$t(Q));var Z=a.getDerivedStateFromProps;Q=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&W_(i,d,l,_),zr=!1;var q=i.memoizedState;d.state=q,Kl(i,l,d,f),Gl(),B=i.memoizedState,b||q!==B||zr?(typeof Z=="function"&&(dm(i,a,Z,l),B=i.memoizedState),(N=zr||J_(i,a,N,l,q,B,_))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Hd(n,i),_=i.memoizedProps,Q=Ws(a,_),d.props=Q,Z=i.pendingProps,q=d.context,B=a.contextType,N=Xa,typeof B=="object"&&B!==null&&(N=$t(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Z||q!==N)&&W_(i,d,l,N),zr=!1,q=i.memoizedState,d.state=q,Kl(i,l,d,f),Gl();var G=i.memoizedState;_!==Z||q!==G||zr||n!==null&&n.dependencies!==null&&Hc(n.dependencies)?(typeof b=="function"&&(dm(i,a,b,l),G=i.memoizedState),(Q=zr||J_(i,a,Q,l,q,G,N)||n!==null&&n.dependencies!==null&&Hc(n.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=N,l=Q):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,uh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Zs(i,n.child,null,f),i.child=Zs(i,null,a,f)):Zt(n,i,a,f),i.memoizedState=d.state,n=i.child):n=tr(n,i,f),n}function m0(n,i,a,l){return Gs(),i.flags|=256,Zt(n,i,a,l),i.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(n){return{baseLanes:n,cachePool:i_()}}function Tm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Cn),n}function g0(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Et.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(je){if(f?jr(i):Br(),(n=lt)?(n=Sv(n,Hn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Or!==null?{id:Vi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Yy(n),a.return=i,i.child=a,Xt=i,lt=null)):n=null,n===null)throw kr(i);return ng(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Br(),f=i.mode,b=ch({mode:"hidden",children:b},f),l=Hs(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=vm(a),l.childLanes=Tm(n,_,a),i.memoizedState=_m,Zl(null,l)):(jr(i),Em(i,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(jr(i),i.flags&=-257,i=bm(n,i,a)):i.memoizedState!==null?(Br(),i.child=n.child,i.flags|=128,i=null):(Br(),b=l.fallback,f=i.mode,l=ch({mode:"visible",children:l.children},f),b=Hs(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Zs(i,n.child,null,a),l=i.child,l.memoizedState=vm(a),l.childLanes=Tm(n,_,a),i.memoizedState=_m,i=Zl(null,l));else if(jr(i),ng(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,Ul({value:l,source:null,stack:null}),i=bm(n,i,a)}else if(Vt||Wa(n,i,a,!1),_=(a&n.childLanes)!==0,Vt||_){if(_=at,_!==null&&(l=_l(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Fs(n,l),vn(_,n,l),pm;tg(b)||vh(),i=bm(n,i,a)}else tg(b)?(i.flags|=192,i.child=n.child,i=null):(n=N.treeContext,lt=Kn(b.nextSibling),Xt=i,je=!0,Mr=null,Hn=!1,n!==null&&Zy(i,n),i=Em(i,l.children),i.flags|=4096);return i}return f?(Br(),b=l.fallback,f=i.mode,N=n.child,B=N.sibling,l=Xi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?b=Xi(B,b):(b=Hs(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Zl(null,l),l=i.child,b=n.child.memoizedState,b===null?b=vm(a):(f=b.cachePool,f!==null?(N=Nt._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=i_(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=Tm(n,_,a),i.memoizedState=_m,Zl(n.child,l)):(jr(i),a=n.child,n=a.sibling,a=Xi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Em(n,i){return i=ch({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function ch(n,i){return n=wn(22,n,null,i),n.lanes=0,n}function bm(n,i,a){return Zs(i,n.child,null,a),n=Em(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function p0(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),zd(n.return,i,a)}function Sm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function y0(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Et.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ae(Et,_),Zt(n,i,l,a),l=je?Ll:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&p0(n,a,i);else if(n.tag===19)p0(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Jc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Sm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Jc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Sm(i,!0,a,null,d,l);break;case"together":Sm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function tr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Hr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Wa(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Xi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Xi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Am(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Hc(n)))}function tw(n,i,a){switch(i.tag){case 3:zt(i,i.stateNode.containerInfo),Pr(i,Nt,n.memoizedState.cache),Gs();break;case 27:case 5:ws(i);break;case 4:zt(i,i.stateNode.containerInfo);break;case 10:Pr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(jr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?g0(n,i,a):(jr(i),n=tr(n,i,a),n!==null?n.sibling:null);jr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Wa(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return y0(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Et,Et.current),l)break;return null;case 22:return i.lanes=0,u0(n,i,a,i.pendingProps);case 24:Pr(i,Nt,n.memoizedState.cache)}return tr(n,i,a)}function _0(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Vt=!0;else{if(!Am(n,a)&&(i.flags&128)===0)return Vt=!1,tw(n,i,a);Vt=(n.flags&131072)!==0}else Vt=!1,je&&(i.flags&1048576)!==0&&$y(i,Ll,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Xs(i.elementType),i.type=n,typeof n=="function")Cd(n)?(l=Ws(n,l),i.tag=1,i=d0(null,i,n,l,a)):(i.tag=0,i=ym(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===Te){i.tag=11,i=a0(null,i,n,l,a);break e}else if(f===C){i.tag=14,i=o0(null,i,n,l,a);break e}}throw i=ue(n)||n,Error(r(306,i,""))}}return i;case 0:return ym(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ws(l,i.pendingProps),d0(n,i,l,f,a);case 3:e:{if(zt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Hd(n,i),Kl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Pr(i,Nt,l),l!==d.cache&&Ld(i,[Nt],a,!0),Gl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=m0(n,i,l,a);break e}else if(l!==f){f=Bn(Error(r(424)),i),Ul(f),i=m0(n,i,l,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(lt=Kn(n.firstChild),Xt=i,je=!0,Mr=null,Hn=!0,a=u_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gs(),l===f){i=tr(n,i,a);break e}Zt(n,i,l,a)}i=i.child}return i;case 26:return uh(n,i),n===null?(a=Cv(i.type,null,i.pendingProps,null))?i.memoizedState=a:je||(a=i.type,n=i.pendingProps,l=Ih(Ne.current).createElement(a),l[xt]=i,l[qt]=n,Jt(l,a,n),Rt(l),i.stateNode=l):i.memoizedState=Cv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ws(i),n===null&&je&&(l=i.stateNode=Iv(i.type,i.pendingProps,Ne.current),Xt=i,Hn=!0,f=lt,Xr(i.type)?(ig=f,lt=Kn(l.firstChild)):lt=f),Zt(n,i,i.pendingProps.children,a),uh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&je&&((f=l=lt)&&(l=Dw(l,i.type,i.pendingProps,Hn),l!==null?(i.stateNode=l,Xt=i,lt=Kn(l.firstChild),Hn=!1,f=!0):f=!1),f||kr(i)),ws(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Jm(f,d)?l=null:_!==null&&Jm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Zd(n,i,KA,null,null,a),fu._currentValue=f),uh(n,i),Zt(n,i,l,a),i.child;case 6:return n===null&&je&&((n=a=lt)&&(a=Vw(a,i.pendingProps,Hn),a!==null?(i.stateNode=a,Xt=i,lt=null,n=!0):n=!1),n||kr(i)),null;case 13:return g0(n,i,a);case 4:return zt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Zs(i,null,l,a):Zt(n,i,l,a),i.child;case 11:return a0(n,i,i.type,i.pendingProps,a);case 7:return Zt(n,i,i.pendingProps,a),i.child;case 8:return Zt(n,i,i.pendingProps.children,a),i.child;case 12:return Zt(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Pr(i,i.type,l.value),Zt(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Qs(i),f=$t(f),l=l(f),i.flags|=1,Zt(n,i,l,a),i.child;case 14:return o0(n,i,i.type,i.pendingProps,a);case 15:return l0(n,i,i.type,i.pendingProps,a);case 19:return y0(n,i,a);case 31:return ew(n,i,a);case 22:return u0(n,i,a,i.pendingProps);case 24:return Qs(i),l=$t(Nt),n===null?(f=Bd(),f===null&&(f=at,d=Ud(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Fd(i),Pr(i,Nt,f)):((n.lanes&a)!==0&&(Hd(n,i),Kl(i,null,null,a),Gl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Pr(i,Nt,l)):(l=d.cache,Pr(i,Nt,l),l!==f.cache&&Ld(i,[Nt],a,!0))),Zt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function nr(n){n.flags|=4}function wm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(G0())n.flags|=8192;else throw $s=Yc,qd}else n.flags&=-16777217}function v0(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Mv(i))if(G0())n.flags|=8192;else throw $s=Yc,qd}function hh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?yc():536870912,n.lanes|=i,ho|=i)}function Jl(n,i){if(!je)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function nw(n,i,a){var l=i.pendingProps;switch(Od(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(Nt),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ja(i)?nr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kd())),ut(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(nr(i),d!==null?(ut(i),v0(i,d)):(ut(i),wm(i,f,null,l,a))):d?d!==n.memoizedState?(nr(i),ut(i),v0(i,d)):(ut(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&nr(i),ut(i),wm(i,f,n,l,a)),null;case 27:if(Na(i),a=Ne.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&nr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}n=ce.current,Ja(i)?Jy(i):(n=Iv(f,l,a),i.stateNode=n,nr(i))}return ut(i),null;case 5:if(Na(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&nr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}if(d=ce.current,Ja(i))Jy(i);else{var _=Ih(Ne.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[xt]=i,d[qt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Jt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&nr(i)}}return ut(i),wm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&nr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ne.current,Ja(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Xt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[xt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||gv(n.nodeValue,a)),n||kr(i,!0)}else n=Ih(n).createTextNode(l),n[xt]=i,i.stateNode=n}return ut(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=Ja(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[xt]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),n=!1}else a=kd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(xn(i),i):(xn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ut(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ja(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[xt]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),f=!1}else f=kd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(xn(i),i):(xn(i),null)}return xn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),hh(i,i.updateQueue),ut(i),null);case 4:return ct(),n===null&&Qm(i.stateNode.containerInfo),ut(i),null;case 10:return Ji(i.type),ut(i),null;case 19:if(J(Et),l=i.memoizedState,l===null)return ut(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Jl(l,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=Jc(n),d!==null){for(i.flags|=128,Jl(l,!1),n=d.updateQueue,i.updateQueue=n,hh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Qy(a,n),a=a.sibling;return ae(Et,Et.current&1|2),je&&$i(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&un()>ph&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304)}else{if(!f)if(n=Jc(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,hh(i,n),Jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!je)return ut(i),null}else 2*un()-l.renderingStartTime>ph&&a!==536870912&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=un(),n.sibling=null,a=Et.current,ae(Et,f?a&1|2:a&1),je&&$i(i,l.treeForkCount),n):(ut(i),null);case 22:case 23:return xn(i),Yd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&hh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&J(Ys),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(Nt),ut(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function iw(n,i){switch(Od(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ji(Nt),ct(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Na(i),null;case 31:if(i.memoizedState!==null){if(xn(i),i.alternate===null)throw Error(r(340));Gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(xn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(Et),null;case 4:return ct(),null;case 10:return Ji(i.type),null;case 22:case 23:return xn(i),Yd(),n!==null&&J(Ys),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ji(Nt),null;case 25:return null;default:return null}}function T0(n,i){switch(Od(i),i.tag){case 3:Ji(Nt),ct();break;case 26:case 27:case 5:Na(i);break;case 4:ct();break;case 31:i.memoizedState!==null&&xn(i);break;case 13:xn(i);break;case 19:J(Et);break;case 10:Ji(i.type);break;case 22:case 23:xn(i),Yd(),n!==null&&J(Ys);break;case 24:Ji(Nt)}}function Wl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){Je(i,i.return,b)}}function qr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,B=b;try{B()}catch(Q){Je(f,N,Q)}}}l=l.next}while(l!==d)}}catch(Q){Je(i,i.return,Q)}}function E0(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{h_(i,a)}catch(l){Je(n,n.return,l)}}}function b0(n,i,a){a.props=Ws(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Je(n,i,l)}}function eu(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Je(n,i,f)}}function Mi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Je(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Je(n,i,f)}else a.current=null}function S0(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Je(n,n.return,f)}}function Im(n,i,a){try{var l=n.stateNode;ww(l,n.type,a,i),l[qt]=i}catch(f){Je(n,n.return,f)}}function A0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xr(n.type)||n.tag===4}function xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||A0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ti));else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Rm(n,i,a),n=n.sibling;n!==null;)Rm(n,i,a),n=n.sibling}function fh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(fh(n,i,a),n=n.sibling;n!==null;)fh(n,i,a),n=n.sibling}function w0(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Jt(i,l,a),i[xt]=n,i[qt]=a}catch(d){Je(n,n.return,d)}}var ir=!1,Ot=!1,Cm=!1,I0=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function rw(n,i){if(n=n.containerInfo,$m=Oh,n=Ly(n),bd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,B=0,Q=0,Z=n,q=null;t:for(;;){for(var G;Z!==a||f!==0&&Z.nodeType!==3||(b=_+f),Z!==d||l!==0&&Z.nodeType!==3||(N=_+l),Z.nodeType===3&&(_+=Z.nodeValue.length),(G=Z.firstChild)!==null;)q=Z,Z=G;for(;;){if(Z===n)break t;if(q===a&&++B===f&&(b=_),q===d&&++Q===l&&(N=_),(G=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=G}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zm={focusedElem:n,selectionRange:a},Oh=!1,Ht=i;Ht!==null;)if(i=Ht,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ht=n;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=Ws(a.type,f);n=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){Je(a,a.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)eg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":eg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ht=n;break}Ht=i.return}}function x0(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:sr(n,a),l&4&&Wl(5,a);break;case 1:if(sr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Je(a,a.return,_)}else{var f=Ws(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Je(a,a.return,_)}}l&64&&E0(a),l&512&&eu(a,a.return);break;case 3:if(sr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{h_(n,i)}catch(_){Je(a,a.return,_)}}break;case 27:i===null&&l&4&&w0(a);case 26:case 5:sr(n,a),i===null&&l&4&&S0(a),l&512&&eu(a,a.return);break;case 12:sr(n,a);break;case 31:sr(n,a),l&4&&N0(n,a);break;case 13:sr(n,a),l&4&&D0(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=dw.bind(null,a),Ow(n,a))));break;case 22:if(l=a.memoizedState!==null||ir,!l){i=i!==null&&i.memoizedState!==null||Ot,f=ir;var d=Ot;ir=l,(Ot=i)&&!d?ar(n,a,(a.subtreeFlags&8772)!==0):sr(n,a),ir=f,Ot=d}break;case 30:break;default:sr(n,a)}}function R0(n){var i=n.alternate;i!==null&&(n.alternate=null,R0(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ka(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ft=null,gn=!1;function rr(n,i,a){for(a=a.child;a!==null;)C0(n,i,a),a=a.sibling}function C0(n,i,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Zn,a)}catch{}switch(a.tag){case 26:Ot||Mi(a,i),rr(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Mi(a,i);var l=ft,f=gn;Xr(a.type)&&(ft=a.stateNode,gn=!1),rr(n,i,a),uu(a.stateNode),ft=l,gn=f;break;case 5:Ot||Mi(a,i);case 6:if(l=ft,f=gn,ft=null,rr(n,i,a),ft=l,gn=f,ft!==null)if(gn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(d){Je(a,i,d)}else try{ft.removeChild(a.stateNode)}catch(d){Je(a,i,d)}break;case 18:ft!==null&&(gn?(n=ft,Ev(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),To(n)):Ev(ft,a.stateNode));break;case 4:l=ft,f=gn,ft=a.stateNode.containerInfo,gn=!0,rr(n,i,a),ft=l,gn=f;break;case 0:case 11:case 14:case 15:qr(2,a,i),Ot||qr(4,a,i),rr(n,i,a);break;case 1:Ot||(Mi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&b0(a,i,l)),rr(n,i,a);break;case 21:rr(n,i,a);break;case 22:Ot=(l=Ot)||a.memoizedState!==null,rr(n,i,a),Ot=l;break;default:rr(n,i,a)}}function N0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{To(n)}catch(a){Je(i,i.return,a)}}}function D0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{To(n)}catch(a){Je(i,i.return,a)}}function sw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new I0),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new I0),i;default:throw Error(r(435,n.tag))}}function dh(n,i){var a=sw(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=mw.bind(null,n,l);l.then(f,f)}})}function pn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Xr(b.type)){ft=b.stateNode,gn=!1;break e}break;case 5:ft=b.stateNode,gn=!1;break e;case 3:case 4:ft=b.stateNode.containerInfo,gn=!0;break e}b=b.return}if(ft===null)throw Error(r(160));C0(d,_,f),ft=null,gn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)V0(i,n),i=i.sibling}var oi=null;function V0(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:pn(i,n),yn(n),l&4&&(qr(3,n,n.return),Wl(3,n),qr(5,n,n.return));break;case 1:pn(i,n),yn(n),l&512&&(Ot||a===null||Mi(a,a.return)),l&64&&ir&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=oi;if(pn(i,n),yn(n),l&512&&(Ot||a===null||Mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ti]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Jt(d,l,a),d[xt]=n,Rt(d),l=d;break e;case"link":var _=Vv("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;case"meta":if(_=Vv("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[xt]=n,Rt(d),l=d}n.stateNode=l}else Ov(f,n.type,n.stateNode);else n.stateNode=Dv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Ov(f,n.type,n.stateNode):Dv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Im(n,n.memoizedProps,a.memoizedProps)}break;case 27:pn(i,n),yn(n),l&512&&(Ot||a===null||Mi(a,a.return)),a!==null&&l&4&&Im(n,n.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,n),yn(n),l&512&&(Ot||a===null||Mi(a,a.return)),n.flags&32){f=n.stateNode;try{mn(f,"")}catch(fe){Je(n,n.return,fe)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Im(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Cm=!0);break;case 6:if(pn(i,n),yn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(fe){Je(n,n.return,fe)}}break;case 3:if(Ch=null,f=oi,oi=xh(i.containerInfo),pn(i,n),oi=f,yn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{To(i.containerInfo)}catch(fe){Je(n,n.return,fe)}Cm&&(Cm=!1,O0(n));break;case 4:l=oi,oi=xh(n.stateNode.containerInfo),pn(i,n),yn(n),oi=l;break;case 12:pn(i,n),yn(n);break;case 31:pn(i,n),yn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 13:pn(i,n),yn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gh=un()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 22:f=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=ir,Q=Ot;if(ir=B||f,Ot=Q||N,pn(i,n),Ot=Q,ir=B,yn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||ir||Ot||ea(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var Z=N.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(fe){Je(N,N.return,fe)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(fe){Je(N,N.return,fe)}}}else if(i.tag===18){if(a===null){N=i;try{var G=N.stateNode;f?bv(G,!0):bv(N.stateNode,!1)}catch(fe){Je(N,N.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dh(n,a))));break;case 19:pn(i,n),yn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,dh(n,l)));break;case 30:break;case 21:break;default:pn(i,n),yn(n)}}function yn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(A0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=xm(n);fh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(mn(_,""),a.flags&=-33);var b=xm(n);fh(n,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,B=xm(n);Rm(n,B,N);break;default:throw Error(r(161))}}catch(Q){Je(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function O0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;O0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function sr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)x0(n,i.alternate,i),i=i.sibling}function ea(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:qr(4,i,i.return),ea(i);break;case 1:Mi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&b0(i,i.return,a),ea(i);break;case 27:uu(i.stateNode);case 26:case 5:Mi(i,i.return),ea(i);break;case 22:i.memoizedState===null&&ea(i);break;case 30:ea(i);break;default:ea(i)}n=n.sibling}}function ar(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:ar(f,d,a),Wl(4,d);break;case 1:if(ar(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){Je(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)c_(N[f],b)}catch(B){Je(l,l.return,B)}}a&&_&64&&E0(d),eu(d,d.return);break;case 27:w0(d);case 26:case 5:ar(f,d,a),a&&l===null&&_&4&&S0(d),eu(d,d.return);break;case 12:ar(f,d,a);break;case 31:ar(f,d,a),a&&_&4&&N0(f,d);break;case 13:ar(f,d,a),a&&_&4&&D0(f,d);break;case 22:d.memoizedState===null&&ar(f,d,a),eu(d,d.return);break;case 30:break;default:ar(f,d,a)}i=i.sibling}}function Nm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&jl(a))}function Dm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n))}function li(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)M0(n,i,a,l),i=i.sibling}function M0(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:li(n,i,a,l),f&2048&&Wl(9,i);break;case 1:li(n,i,a,l);break;case 3:li(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n)));break;case 12:if(f&2048){li(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Je(i,i.return,N)}}else li(n,i,a,l);break;case 31:li(n,i,a,l);break;case 13:li(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?li(n,i,a,l):tu(n,i):d._visibility&2?li(n,i,a,l):(d._visibility|=2,lo(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Nm(_,i);break;case 24:li(n,i,a,l),f&2048&&Dm(i.alternate,i);break;default:li(n,i,a,l)}}function lo(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,N=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:lo(d,_,b,N,f),Wl(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?lo(d,_,b,N,f):tu(d,_):(Q._visibility|=2,lo(d,_,b,N,f)),f&&B&2048&&Nm(_.alternate,_);break;case 24:lo(d,_,b,N,f),f&&B&2048&&Dm(_.alternate,_);break;default:lo(d,_,b,N,f)}i=i.sibling}}function tu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:tu(a,l),f&2048&&Nm(l.alternate,l);break;case 24:tu(a,l),f&2048&&Dm(l.alternate,l);break;default:tu(a,l)}i=i.sibling}}var nu=8192;function uo(n,i,a){if(n.subtreeFlags&nu)for(n=n.child;n!==null;)k0(n,i,a),n=n.sibling}function k0(n,i,a){switch(n.tag){case 26:uo(n,i,a),n.flags&nu&&n.memoizedState!==null&&Gw(a,oi,n.memoizedState,n.memoizedProps);break;case 5:uo(n,i,a);break;case 3:case 4:var l=oi;oi=xh(n.stateNode.containerInfo),uo(n,i,a),oi=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=nu,nu=16777216,uo(n,i,a),nu=l):uo(n,i,a));break;default:uo(n,i,a)}}function P0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function iu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,L0(l,n)}P0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)z0(n),n=n.sibling}function z0(n){switch(n.tag){case 0:case 11:case 15:iu(n),n.flags&2048&&qr(9,n,n.return);break;case 3:iu(n);break;case 12:iu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,mh(n)):iu(n);break;default:iu(n)}}function mh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,L0(l,n)}P0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:qr(8,i,i.return),mh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,mh(i));break;default:mh(i)}n=n.sibling}}function L0(n,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:qr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=n;Ht!==null;){l=Ht;var f=l.sibling,d=l.return;if(R0(l),l===a){Ht=null;break e}if(f!==null){f.return=d,Ht=f;break e}Ht=d}}}var aw={getCacheForType:function(n){var i=$t(Nt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return $t(Nt).controller.signal}},ow=typeof WeakMap=="function"?WeakMap:Map,Qe=0,at=null,Me=null,Pe=0,Ze=0,Rn=null,Fr=!1,co=!1,Vm=!1,or=0,yt=0,Hr=0,ta=0,Om=0,Cn=0,ho=0,ru=null,_n=null,Mm=!1,gh=0,U0=0,ph=1/0,yh=null,Gr=null,Ut=0,Kr=null,fo=null,lr=0,km=0,Pm=null,j0=null,su=0,zm=null;function Nn(){return(Qe&2)!==0&&Pe!==0?Pe&-Pe:K.T!==null?Fm():_c()}function B0(){if(Cn===0)if((Pe&536870912)===0||je){var n=Rs;Rs<<=1,(Rs&3932160)===0&&(Rs=262144),Cn=n}else Cn=536870912;return n=In.current,n!==null&&(n.flags|=32),Cn}function vn(n,i,a){(n===at&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(mo(n,0),Qr(n,Pe,Cn,!1)),Cs(n,a),((Qe&2)===0||n!==at)&&(n===at&&((Qe&2)===0&&(ta|=a),yt===4&&Qr(n,Pe,Cn,!1)),ki(n))}function q0(n,i,a){if((Qe&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Jn(n,i),f=l?cw(n,i):Um(n,i,!0),d=l;do{if(f===0){co&&!l&&Qr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!lw(a)){f=Um(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=n;f=ru;var N=b.current.memoizedState.isDehydrated;if(N&&(mo(b,_).flags|=256),_=Um(b,_,!1),_!==2){if(Vm&&!N){b.errorRecoveryDisabledLanes|=d,ta|=d,f=4;break e}d=_n,_n=f,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){mo(n,0),Qr(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Qr(l,i,Cn,!Fr);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=gh+300-un(),10<f)){if(Qr(l,i,Cn,!Fr),yi(l,0,!0)!==0)break e;lr=i,l.timeoutHandle=vv(F0.bind(null,l,a,_n,yh,Mm,i,Cn,ta,ho,Fr,d,"Throttled",-0,0),f);break e}F0(l,a,_n,yh,Mm,i,Cn,ta,ho,Fr,d,null,-0,0)}}break}while(!0);ki(n)}function F0(n,i,a,l,f,d,_,b,N,B,Q,Z,q,G){if(n.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},k0(i,d,Z);var fe=(d&62914560)===d?gh-un():(d&4194048)===d?U0-un():0;if(fe=Kw(Z,fe),fe!==null){lr=d,n.cancelPendingCommit=fe(Z0.bind(null,n,i,d,a,l,f,_,b,N,Q,Z,null,q,G)),Qr(n,d,_,!B);return}}Z0(n,i,d,a,l,f,_,b,N)}function lw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!An(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qr(n,i,a,l){i&=~Om,i&=~ta,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-vt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Ns(n,a,i)}function _h(){return(Qe&6)===0?(au(0),!1):!0}function Lm(){if(Me!==null){if(Ze===0)var n=Me.return;else n=Me,Zi=Ks=null,em(n),io=null,ql=0,n=Me;for(;n!==null;)T0(n.alternate,n),n=n.return;Me=null}}function mo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Rw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),lr=0,Lm(),at=n,Me=a=Xi(n.current,null),Pe=i,Ze=0,Rn=null,Fr=!1,co=Jn(n,i),Vm=!1,ho=Cn=Om=ta=Hr=yt=0,_n=ru=null,Mm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-vt(l),d=1<<f;i|=n[f],l&=~d}return or=i,Uc(),a}function H0(n,i){Ce=null,K.H=$l,i===no||i===Qc?(i=a_(),Ze=3):i===qd?(i=a_(),Ze=4):Ze=i===pm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Me===null&&(yt=1,oh(n,Bn(i,n.current)))}function G0(){var n=In.current;return n===null?!0:(Pe&4194048)===Pe?Gn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?n===Gn:!1}function K0(){var n=K.H;return K.H=$l,n===null?$l:n}function Q0(){var n=K.A;return K.A=aw,n}function vh(){yt=4,Fr||(Pe&4194048)!==Pe&&In.current!==null||(co=!0),(Hr&134217727)===0&&(ta&134217727)===0||at===null||Qr(at,Pe,Cn,!1)}function Um(n,i,a){var l=Qe;Qe|=2;var f=K0(),d=Q0();(at!==n||Pe!==i)&&(yh=null,mo(n,i)),i=!1;var _=yt;e:do try{if(Ze!==0&&Me!==null){var b=Me,N=Rn;switch(Ze){case 8:Lm(),_=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var B=Ze;if(Ze=0,Rn=null,go(n,b,N,B),a&&co){_=0;break e}break;default:B=Ze,Ze=0,Rn=null,go(n,b,N,B)}}uw(),_=yt;break}catch(Q){H0(n,Q)}while(!0);return i&&n.shellSuspendCounter++,Zi=Ks=null,Qe=l,K.H=f,K.A=d,Me===null&&(at=null,Pe=0,Uc()),_}function uw(){for(;Me!==null;)Y0(Me)}function cw(n,i){var a=Qe;Qe|=2;var l=K0(),f=Q0();at!==n||Pe!==i?(yh=null,ph=un()+500,mo(n,i)):co=Jn(n,i);e:do try{if(Ze!==0&&Me!==null){i=Me;var d=Rn;t:switch(Ze){case 1:Ze=0,Rn=null,go(n,i,d,1);break;case 2:case 9:if(r_(d)){Ze=0,Rn=null,X0(i);break}i=function(){Ze!==2&&Ze!==9||at!==n||(Ze=7),ki(n)},d.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:r_(d)?(Ze=0,Rn=null,X0(i)):(Ze=0,Rn=null,go(n,i,d,7));break;case 5:var _=null;switch(Me.tag){case 26:_=Me.memoizedState;case 5:case 27:var b=Me;if(_?Mv(_):b.stateNode.complete){Ze=0,Rn=null;var N=b.sibling;if(N!==null)Me=N;else{var B=b.return;B!==null?(Me=B,Th(B)):Me=null}break t}}Ze=0,Rn=null,go(n,i,d,5);break;case 6:Ze=0,Rn=null,go(n,i,d,6);break;case 8:Lm(),yt=6;break e;default:throw Error(r(462))}}hw();break}catch(Q){H0(n,Q)}while(!0);return Zi=Ks=null,K.H=l,K.A=f,Qe=a,Me!==null?0:(at=null,Pe=0,Uc(),yt)}function hw(){for(;Me!==null&&!gd();)Y0(Me)}function Y0(n){var i=_0(n.alternate,n,or);n.memoizedProps=n.pendingProps,i===null?Th(n):Me=i}function X0(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=f0(a,i,i.pendingProps,i.type,void 0,Pe);break;case 11:i=f0(a,i,i.pendingProps,i.type.render,i.ref,Pe);break;case 5:em(i);default:T0(a,i),i=Me=Qy(i,or),i=_0(a,i,or)}n.memoizedProps=n.pendingProps,i===null?Th(n):Me=i}function go(n,i,a,l){Zi=Ks=null,em(i),io=null,ql=0;var f=i.return;try{if(WA(n,f,i,a,Pe)){yt=1,oh(n,Bn(a,n.current)),Me=null;return}}catch(d){if(f!==null)throw Me=f,d;yt=1,oh(n,Bn(a,n.current)),Me=null;return}i.flags&32768?(je||l===1?n=!0:co||(Pe&536870912)!==0?n=!1:(Fr=n=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),$0(i,n)):Th(i)}function Th(n){var i=n;do{if((i.flags&32768)!==0){$0(i,Fr);return}n=i.return;var a=nw(i.alternate,i,or);if(a!==null){Me=a;return}if(i=i.sibling,i!==null){Me=i;return}Me=i=n}while(i!==null);yt===0&&(yt=5)}function $0(n,i){do{var a=iw(n.alternate,n);if(a!==null){a.flags&=32767,Me=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Me=n;return}Me=n=a}while(n!==null);yt=6,Me=null}function Z0(n,i,a,l,f,d,_,b,N){n.cancelPendingCommit=null;do Eh();while(Ut!==0);if((Qe&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=xd,_d(n,a,d,_,b,N),n===at&&(Me=at=null,Pe=0),fo=i,Kr=n,lr=a,km=d,Pm=f,j0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,gw(Sr,function(){return nv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=ne.p,ne.p=2,_=Qe,Qe|=4;try{rw(n,i,a)}finally{Qe=_,ne.p=f,K.T=l}}Ut=1,J0(),W0(),ev()}}function J0(){if(Ut===1){Ut=0;var n=Kr,i=fo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=ne.p;ne.p=2;var f=Qe;Qe|=4;try{V0(i,n);var d=Zm,_=Ly(n.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&zy(b.ownerDocument.documentElement,b)){if(N!==null&&bd(b)){var B=N.start,Q=N.end;if(Q===void 0&&(Q=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(Q,b.value.length);else{var Z=b.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var G=q.getSelection(),fe=b.textContent.length,Ee=Math.min(N.start,fe),rt=N.end===void 0?Ee:Math.min(N.end,fe);!G.extend&&Ee>rt&&(_=rt,rt=Ee,Ee=_);var P=Py(b,Ee),O=Py(b,rt);if(P&&O&&(G.rangeCount!==1||G.anchorNode!==P.node||G.anchorOffset!==P.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var j=Z.createRange();j.setStart(P.node,P.offset),G.removeAllRanges(),Ee>rt?(G.addRange(j),G.extend(O.node,O.offset)):(j.setEnd(O.node,O.offset),G.addRange(j))}}}}for(Z=[],G=b;G=G.parentNode;)G.nodeType===1&&Z.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var X=Z[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Oh=!!$m,Zm=$m=null}finally{Qe=f,ne.p=l,K.T=a}}n.current=i,Ut=2}}function W0(){if(Ut===2){Ut=0;var n=Kr,i=fo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=ne.p;ne.p=2;var f=Qe;Qe|=4;try{x0(n,i.alternate,i)}finally{Qe=f,ne.p=l,K.T=a}}Ut=3}}function ev(){if(Ut===4||Ut===3){Ut=0,hc();var n=Kr,i=fo,a=lr,l=j0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,fo=Kr=null,tv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Gr=null),Gi(a),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Zn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=ne.p,ne.p=2,K.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{K.T=i,ne.p=f}}(lr&3)!==0&&Eh(),ki(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===zm?su++:(su=0,zm=n):su=0,au(0)}}function tv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,jl(i)))}function Eh(){return J0(),W0(),ev(),nv()}function nv(){if(Ut!==5)return!1;var n=Kr,i=km;km=0;var a=Gi(lr),l=K.T,f=ne.p;try{ne.p=32>a?32:a,K.T=null,a=Pm,Pm=null;var d=Kr,_=lr;if(Ut=0,fo=Kr=null,lr=0,(Qe&6)!==0)throw Error(r(331));var b=Qe;if(Qe|=4,z0(d.current),M0(d,d.current,_,a),Qe=b,au(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Zn,d)}catch{}return!0}finally{ne.p=f,K.T=l,tv(n,i)}}function iv(n,i,a){i=Bn(a,i),i=gm(n.stateNode,i,2),n=Ur(n,i,2),n!==null&&(Cs(n,2),ki(n))}function Je(n,i,a){if(n.tag===3)iv(n,n,a);else for(;i!==null;){if(i.tag===3){iv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gr===null||!Gr.has(l))){n=Bn(a,n),a=r0(2),l=Ur(i,a,2),l!==null&&(s0(a,l,i,n),Cs(l,2),ki(l));break}}i=i.return}}function jm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new ow;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Vm=!0,f.add(a),n=fw.bind(null,n,i,a),i.then(n,n))}function fw(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,at===n&&(Pe&a)===a&&(yt===4||yt===3&&(Pe&62914560)===Pe&&300>un()-gh?(Qe&2)===0&&mo(n,0):Om|=a,ho===Pe&&(ho=0)),ki(n)}function rv(n,i){i===0&&(i=yc()),n=Fs(n,i),n!==null&&(Cs(n,i),ki(n))}function dw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),rv(n,a)}function mw(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),rv(n,a)}function gw(n,i){return Lt(n,i)}var bh=null,po=null,Bm=!1,Sh=!1,qm=!1,Yr=0;function ki(n){n!==po&&n.next===null&&(po===null?bh=po=n:po=po.next=n),Sh=!0,Bm||(Bm=!0,yw())}function au(n,i){if(!qm&&Sh){qm=!0;do for(var a=!1,l=bh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-vt(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,lv(l,d))}else d=Pe,d=yi(l,l===at?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Jn(l,d)||(a=!0,lv(l,d));l=l.next}while(a);qm=!1}}function pw(){sv()}function sv(){Sh=Bm=!1;var n=0;Yr!==0&&xw()&&(n=Yr);for(var i=un(),a=null,l=bh;l!==null;){var f=l.next,d=av(l,i);d===0?(l.next=null,a===null?bh=f:a.next=f,f===null&&(po=a)):(a=l,(n!==0||(d&3)!==0)&&(Sh=!0)),l=f}Ut!==0&&Ut!==5||au(n),Yr!==0&&(Yr=0)}function av(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-vt(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=yd(b,i)):N<=i&&(n.expiredLanes|=b),d&=~b}if(i=at,a=Pe,a=yi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&br(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Jn(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&br(l),Gi(a)){case 2:case 8:a=pl;break;case 32:a=Sr;break;case 268435456:a=fc;break;default:a=Sr}return l=ov.bind(null,n),a=Lt(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&br(l),n.callbackPriority=2,n.callbackNode=null,2}function ov(n,i){if(Ut!==0&&Ut!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Eh()&&n.callbackNode!==a)return null;var l=Pe;return l=yi(n,n===at?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(q0(n,l,i),av(n,un()),n.callbackNode!=null&&n.callbackNode===a?ov.bind(null,n):null)}function lv(n,i){if(Eh())return null;q0(n,i,!0)}function yw(){Cw(function(){(Qe&6)!==0?Lt(gl,pw):sv()})}function Fm(){if(Yr===0){var n=eo;n===0&&(n=gi,gi<<=1,(gi&261888)===0&&(gi=256)),Yr=n}return Yr}function uv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ua(""+n)}function cv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function _w(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=uv((f[qt]||null).action),_=l.submitter;_&&(i=(i=_[qt]||null)?uv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Ri("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Yr!==0){var N=_?cv(f,_):new FormData(f);um(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?cv(f,_):new FormData(f),um(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var Hm=0;Hm<Id.length;Hm++){var Gm=Id[Hm],vw=Gm.toLowerCase(),Tw=Gm[0].toUpperCase()+Gm.slice(1);ai(vw,"on"+Tw)}ai(By,"onAnimationEnd"),ai(qy,"onAnimationIteration"),ai(Fy,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(PA,"onTransitionRun"),ai(zA,"onTransitionStart"),ai(LA,"onTransitionCancel"),ai(Hy,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ou));function hv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,B=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=B;try{d(f)}catch(Q){Lc(Q)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,B=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=B;try{d(f)}catch(Q){Lc(Q)}f.currentTarget=null,d=N}}}}function ke(n,i){var a=i[Ma];a===void 0&&(a=i[Ma]=new Set);var l=n+"__bubble";a.has(l)||(fv(i,n,2,!1),a.add(l))}function Km(n,i,a){var l=0;i&&(l|=4),fv(a,n,l,i)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Qm(n){if(!n[Ah]){n[Ah]=!0,vl.forEach(function(a){a!=="selectionchange"&&(Ew.has(a)||Km(a,!1,n),Km(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ah]||(i[Ah]=!0,Km("selectionchange",!1,i))}}function fv(n,i,a,l){switch(Bv(i)){case 2:var f=Xw;break;case 8:f=$w;break;default:f=lg}a=f.bind(null,i,a,n),f=void 0,!ks||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Ym(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Ei(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}b=b.parentNode}}l=l.return}Cr(function(){var B=d,Q=zn(a),Z=[];e:{var q=Gy.get(n);if(q!==void 0){var G=Ri,fe=n;switch(n){case"keypress":if(zs(a)===0)break e;case"keydown":case"keyup":G=kc;break;case"focusin":fe="focus",G=Us;break;case"focusout":fe="blur",G=Us;break;case"beforeblur":case"afterblur":G=Us;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=y;break;case By:case qy:case Fy:G=Rc;break;case Hy:G=S;break;case"scroll":case"scrollend":G=Dl;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Yi;break;case"toggle":case"beforetoggle":G=Re}var Ee=(i&4)!==0,rt=!Ee&&(n==="scroll"||n==="scrollend"),P=Ee?q!==null?q+"Capture":null:q;Ee=[];for(var O=B,j;O!==null;){var X=O;if(j=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||j===null||P===null||(X=ni(O,P),X!=null&&Ee.push(lu(O,X,j))),rt)break;O=O.return}0<Ee.length&&(q=new G(q,fe,null,a,Q),Z.push({event:q,listeners:Ee}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",q&&a!==Rl&&(fe=a.relatedTarget||a.fromElement)&&(Ei(fe)||fe[vi]))break e;if((G||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,G?(fe=a.relatedTarget||a.toElement,G=B,fe=fe?Ei(fe):null,fe!==null&&(rt=u(fe),Ee=fe.tag,fe!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(G=null,fe=B),G!==fe)){if(Ee=Vl,X="onMouseLeave",P="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=Yi,X="onPointerLeave",P="onPointerEnter",O="pointer"),rt=G==null?q:bn(G),j=fe==null?q:bn(fe),q=new Ee(X,O+"leave",G,a,Q),q.target=rt,q.relatedTarget=j,X=null,Ei(Q)===B&&(Ee=new Ee(P,O+"enter",fe,a,Q),Ee.target=j,Ee.relatedTarget=rt,X=Ee),rt=X,G&&fe)t:{for(Ee=bw,P=G,O=fe,j=0,X=P;X;X=Ee(X))j++;X=0;for(var _e=O;_e;_e=Ee(_e))X++;for(;0<j-X;)P=Ee(P),j--;for(;0<X-j;)O=Ee(O),X--;for(;j--;){if(P===O||O!==null&&P===O.alternate){Ee=P;break t}P=Ee(P),O=Ee(O)}Ee=null}else Ee=null;G!==null&&dv(Z,q,G,Ee,!1),fe!==null&&rt!==null&&dv(Z,rt,fe,Ee,!0)}}e:{if(q=B?bn(B):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var He=Ny;else if(Ry(q))if(Dy)He=OA;else{He=DA;var me=NA}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&La(B.elementType)&&(He=Ny):He=VA;if(He&&(He=He(n,B))){Cy(Z,He,a,Q);break e}me&&me(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&wl(q,"number",q.value)}switch(me=B?bn(B):window,n){case"focusin":(Ry(me)||me.contentEditable==="true")&&(Ka=me,Sd=B,zl=null);break;case"focusout":zl=Sd=Ka=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,Uy(Z,a,Q);break;case"selectionchange":if(kA)break;case"keydown":case"keyup":Uy(Z,a,Q)}var De;if(Ke)e:{switch(n){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Ga?js(n,a)&&(ze="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Di&&a.locale!=="ko"&&(Ga||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Ga&&(De=Nl()):(xi=Q,Cl="value"in xi?xi.value:xi.textContent,Ga=!0)),me=wh(B,ze),0<me.length&&(ze=new Ni(ze,n,null,a,Q),Z.push({event:ze,listeners:me}),De?ze.data=De:(De=Ha(a),De!==null&&(ze.data=De)))),(De=Un?IA(n,a):xA(n,a))&&(ze=wh(B,"onBeforeInput"),0<ze.length&&(me=new Ni("onBeforeInput","beforeinput",null,a,Q),Z.push({event:me,listeners:ze}),me.data=De)),_w(Z,n,B,a,Q)}hv(Z,i)})}function lu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function wh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ni(n,a),f!=null&&l.unshift(lu(n,f,d)),f=ni(n,i),f!=null&&l.push(lu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function bw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function dv(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,B=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||B===null||(N=B,f?(B=ni(a,d),B!=null&&_.unshift(lu(a,B,N))):f||(B=ni(a,d),B!=null&&_.push(lu(a,B,N)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Sw=/\r\n?/g,Aw=/\u0000|\uFFFD/g;function mv(n){return(typeof n=="string"?n:""+n).replace(Sw,`
`).replace(Aw,"")}function gv(n,i){return i=mv(i),mv(n)===i}function it(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||mn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&mn(n,""+l);break;case"className":Sn(n,"class",l);break;case"tabIndex":Sn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(n,a,l);break;case"style":xl(n,l,d);break;case"data":if(i!=="object"){Sn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&it(n,i,"name",f.name,f,null),it(n,i,"formEncType",f.formEncType,f,null),it(n,i,"formMethod",f.formMethod,f,null),it(n,i,"formTarget",f.formTarget,f,null)):(it(n,i,"encType",f.encType,f,null),it(n,i,"method",f.method,f,null),it(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=ti);break;case"onScroll":l!=null&&ke("scroll",n);break;case"onScrollEnd":l!=null&&ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ua(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":ke("beforetoggle",n),ke("toggle",n),Pa(n,"popover",l);break;case"xlinkActuate":Ct(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ct(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ct(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ct(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ct(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ct(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pa(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wc.get(a)||a,Pa(n,a,l))}}function Xm(n,i,a,l,f,d){switch(a){case"style":xl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?mn(n,l):(typeof l=="number"||typeof l=="bigint")&&mn(n,""+l);break;case"onScroll":l!=null&&ke("scroll",n);break;case"onScrollEnd":l!=null&&ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Pa(n,a,l)}}}function Jt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",n),ke("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:it(n,i,d,_,a,null)}}f&&it(n,i,"srcSet",a.srcSet,a,null),l&&it(n,i,"src",a.src,a,null);return;case"input":ke("invalid",n);var b=d=_=f=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":_=Q;break;case"checked":N=Q;break;case"defaultChecked":B=Q;break;case"value":d=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:it(n,i,l,Q,a,null)}}bc(n,d,b,N,B,_,f,!1);return;case"select":ke("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:it(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?wr(n,!!l,i,!1):a!=null&&wr(n,!!l,a,!0);return;case"textarea":ke("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:it(n,i,_,b,a,null)}Ir(n,l,f,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(n,i,N,l,a,null)}return;case"dialog":ke("beforetoggle",n),ke("toggle",n),ke("cancel",n),ke("close",n);break;case"iframe":case"object":ke("load",n);break;case"video":case"audio":for(l=0;l<ou.length;l++)ke(ou[l],n);break;case"image":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"embed":case"source":case"link":ke("error",n),ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:it(n,i,B,l,a,null)}return;default:if(La(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Xm(n,i,Q,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&it(n,i,b,l,a,null))}function ww(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,B=null,Q=null;for(G in a){var Z=a[G];if(a.hasOwnProperty(G)&&Z!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=Z;default:l.hasOwnProperty(G)||it(n,i,G,null,l,Z)}}for(var q in l){var G=l[q];if(Z=a[q],l.hasOwnProperty(q)&&(G!=null||Z!=null))switch(q){case"type":d=G;break;case"name":f=G;break;case"checked":B=G;break;case"defaultChecked":Q=G;break;case"value":_=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==Z&&it(n,i,q,G,l,Z)}}za(n,_,b,N,B,Q,d,f);return;case"select":G=_=b=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":G=N;default:l.hasOwnProperty(d)||it(n,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&it(n,i,f,d,l,N)}i=b,a=_,l=G,q!=null?wr(n,!!a,q,!1):!!l!=!!a&&(i!=null?wr(n,!!a,i,!0):wr(n,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&it(n,i,_,f,l,d)}Sc(n,q,G);return;case"option":for(var fe in a)if(q=a[fe],a.hasOwnProperty(fe)&&q!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":n.selected=!1;break;default:it(n,i,fe,null,l,q)}for(N in l)if(q=l[N],G=a[N],l.hasOwnProperty(N)&&q!==G&&(q!=null||G!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:it(n,i,N,q,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)q=a[Ee],a.hasOwnProperty(Ee)&&q!=null&&!l.hasOwnProperty(Ee)&&it(n,i,Ee,null,l,q);for(B in l)if(q=l[B],G=a[B],l.hasOwnProperty(B)&&q!==G&&(q!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:it(n,i,B,q,l,G)}return;default:if(La(i)){for(var rt in a)q=a[rt],a.hasOwnProperty(rt)&&q!==void 0&&!l.hasOwnProperty(rt)&&Xm(n,i,rt,void 0,l,q);for(Q in l)q=l[Q],G=a[Q],!l.hasOwnProperty(Q)||q===G||q===void 0&&G===void 0||Xm(n,i,Q,q,l,G);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&it(n,i,P,null,l,q);for(Z in l)q=l[Z],G=a[Z],!l.hasOwnProperty(Z)||q===G||q==null&&G==null||it(n,i,Z,q,l,G)}function pv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Iw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&pv(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],B=N.startTime;if(B>b)break;var Q=N.transferSize,Z=N.initiatorType;Q&&pv(Z)&&(N=N.responseEnd,_+=Q*(N<b?1:(b-B)/(N-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var $m=null,Zm=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function yv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _v(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wm=null;function xw(){var n=window.event;return n&&n.type==="popstate"?n===Wm?!1:(Wm=n,!0):(Wm=null,!1)}var vv=typeof setTimeout=="function"?setTimeout:void 0,Rw=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(n){return Tv.resolve(null).then(n).catch(Nw)}:vv;function Nw(n){setTimeout(function(){throw n})}function Xr(n){return n==="head"}function Ev(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),To(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")uu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,uu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[Ti]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&uu(n.ownerDocument.body);a=f}while(a);To(i)}function bv(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function eg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":eg(a),ka(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Dw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ti])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function Vw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Kn(n.nextSibling),n===null))return null;return n}function Sv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Kn(n.nextSibling),n===null))return null;return n}function tg(n){return n.data==="$?"||n.data==="$~"}function ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Ow(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Kn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ig=null;function Av(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Kn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function wv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function Iv(n,i,a){switch(i=Ih(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function uu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ka(n)}var Qn=new Map,xv=new Set;function xh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ur=ne.d;ne.d={f:Mw,r:kw,D:Pw,C:zw,L:Lw,m:Uw,X:Bw,S:jw,M:qw};function Mw(){var n=ur.f(),i=_h();return n||i}function kw(n){var i=Pn(n);i!==null&&i.tag===5&&i.type==="form"?H_(i):ur.r(n)}var yo=typeof document>"u"?null:document;function Rv(n,i,a){var l=yo;if(l&&typeof i=="string"&&i){var f=dn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),xv.has(f)||(xv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Jt(i,"link",n),Rt(i),l.head.appendChild(i)))}}function Pw(n){ur.D(n),Rv("dns-prefetch",n,null)}function zw(n,i){ur.C(n,i),Rv("preconnect",n,i)}function Lw(n,i,a){ur.L(n,i,a);var l=yo;if(l&&n&&i){var f='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+dn(a.imageSizes)+'"]')):f+='[href="'+dn(n)+'"]';var d=f;switch(i){case"style":d=_o(n);break;case"script":d=vo(n)}Qn.has(d)||(n=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Qn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(cu(d))||i==="script"&&l.querySelector(hu(d))||(i=l.createElement("link"),Jt(i,"link",n),Rt(i),l.head.appendChild(i)))}}function Uw(n,i){ur.m(n,i);var a=yo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+dn(l)+'"][href="'+dn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=vo(n)}if(!Qn.has(d)&&(n=E({rel:"modulepreload",href:n},i),Qn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hu(d)))return}l=a.createElement("link"),Jt(l,"link",n),Rt(l),a.head.appendChild(l)}}}function jw(n,i,a){ur.S(n,i,a);var l=yo;if(l&&n){var f=bi(l).hoistableStyles,d=_o(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(cu(d)))b.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Qn.get(d))&&rg(n,a);var N=_=l.createElement("link");Rt(N),Jt(N,"link",n),N._p=new Promise(function(B,Q){N.onload=B,N.onerror=Q}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Rh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function Bw(n,i){ur.X(n,i);var a=yo;if(a&&n){var l=bi(a).hoistableScripts,f=vo(n),d=l.get(f);d||(d=a.querySelector(hu(f)),d||(n=E({src:n,async:!0},i),(i=Qn.get(f))&&sg(n,i),d=a.createElement("script"),Rt(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function qw(n,i){ur.M(n,i);var a=yo;if(a&&n){var l=bi(a).hoistableScripts,f=vo(n),d=l.get(f);d||(d=a.querySelector(hu(f)),d||(n=E({src:n,async:!0,type:"module"},i),(i=Qn.get(f))&&sg(n,i),d=a.createElement("script"),Rt(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Cv(n,i,a,l){var f=(f=Ne.current)?xh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=_o(a.href),a=bi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=_o(a.href);var d=bi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(cu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Qn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(n,a),d||Fw(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vo(a),a=bi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function _o(n){return'href="'+dn(n)+'"'}function cu(n){return'link[rel="stylesheet"]['+n+"]"}function Nv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function Fw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Jt(i,"link",a),Rt(i),n.head.appendChild(i))}function vo(n){return'[src="'+dn(n)+'"]'}function hu(n){return"script[async]"+n}function Dv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+dn(a.href)+'"]');if(l)return i.instance=l,Rt(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Rt(l),Jt(l,"style",f),Rh(l,a.precedence,n),i.instance=l;case"stylesheet":f=_o(a.href);var d=n.querySelector(cu(f));if(d)return i.state.loading|=4,i.instance=d,Rt(d),d;l=Nv(a),(f=Qn.get(f))&&rg(l,f),d=(n.ownerDocument||n).createElement("link"),Rt(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Jt(d,"link",l),i.state.loading|=4,Rh(d,a.precedence,n),i.instance=d;case"script":return d=vo(a.src),(f=n.querySelector(hu(d)))?(i.instance=f,Rt(f),f):(l=a,(f=Qn.get(d))&&(l=E({},a),sg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Rt(f),Jt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Rh(l,a.precedence,n));return i.instance}function Rh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function rg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function sg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ch=null;function Vv(n,i,a){if(Ch===null){var l=new Map,f=Ch=new Map;f.set(a,l)}else f=Ch,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Ti]||d[xt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function Ov(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Hw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Mv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Gw(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=_o(l.href),d=i.querySelector(cu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Nh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Rt(d);return}d=i.ownerDocument||i,l=Nv(l),(f=Qn.get(f))&&rg(l,f),d=d.createElement("link"),Rt(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Jt(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Nh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var ag=0;function Kw(n,i){return n.stylesheets&&n.count===0&&Vh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Vh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&ag===0&&(ag=62500*Iw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Vh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>ag?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Dh=null;function Vh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Dh=new Map,i.forEach(Qw,n),Dh=null,Nh.call(n))}function Qw(n,i){if(!(i.state.loading&4)){var a=Dh.get(n);if(a)var l=a.get(null);else{a=new Map,Dh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Nh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var fu={$$typeof:ie,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Yw(n,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function kv(n,i,a,l,f,d,_,b,N,B,Q,Z){return n=new Yw(n,i,a,_,N,B,Q,Z,b),i=1,d===!0&&(i|=24),d=wn(3,null,null,i),n.current=d,d.stateNode=n,i=Ud(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Fd(d),n}function Pv(n){return n?(n=Xa,n):Xa}function zv(n,i,a,l,f,d){f=Pv(f),l.context===null?l.context=f:l.pendingContext=f,l=Lr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ur(n,l,i),a!==null&&(vn(a,n,i),Hl(a,n,i))}function Lv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function og(n,i){Lv(n,i),(n=n.alternate)&&Lv(n,i)}function Uv(n){if(n.tag===13||n.tag===31){var i=Fs(n,67108864);i!==null&&vn(i,n,67108864),og(n,67108864)}}function jv(n){if(n.tag===13||n.tag===31){var i=Nn();i=Ds(i);var a=Fs(n,i);a!==null&&vn(a,n,i),og(n,i)}}var Oh=!0;function Xw(n,i,a,l){var f=K.T;K.T=null;var d=ne.p;try{ne.p=2,lg(n,i,a,l)}finally{ne.p=d,K.T=f}}function $w(n,i,a,l){var f=K.T;K.T=null;var d=ne.p;try{ne.p=8,lg(n,i,a,l)}finally{ne.p=d,K.T=f}}function lg(n,i,a,l){if(Oh){var f=ug(l);if(f===null)Ym(n,i,l,Mh,a),qv(n,l);else if(Jw(f,n,i,a,l))l.stopPropagation();else if(qv(n,l),i&4&&-1<Zw.indexOf(n)){for(;f!==null;){var d=Pn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=pi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-vt(_);b.entanglements[1]|=N,_&=~N}ki(d),(Qe&6)===0&&(ph=un()+500,au(0))}}break;case 31:case 13:b=Fs(d,2),b!==null&&vn(b,d,2),_h(),og(d,2)}if(d=ug(l),d===null&&Ym(n,i,l,Mh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Ym(n,i,l,null,a)}}function ug(n){return n=zn(n),cg(n)}var Mh=null;function cg(n){if(Mh=null,n=Ei(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Mh=n,null}function Bv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case gl:return 2;case pl:return 8;case Sr:case pd:return 32;case fc:return 268435456;default:return 32}default:return 32}}var hg=!1,$r=null,Zr=null,Jr=null,du=new Map,mu=new Map,Wr=[],Zw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qv(n,i){switch(n){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":du.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(i.pointerId)}}function gu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Pn(i),i!==null&&Uv(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Jw(n,i,a,l,f){switch(i){case"focusin":return $r=gu($r,n,i,a,l,f),!0;case"dragenter":return Zr=gu(Zr,n,i,a,l,f),!0;case"mouseover":return Jr=gu(Jr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return du.set(d,gu(du.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,mu.set(d,gu(mu.get(d)||null,n,i,a,l,f)),!0}return!1}function Fv(n){var i=Ei(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Wn(n.priority,function(){jv(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Wn(n.priority,function(){jv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function kh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ug(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Rl=l,a.target.dispatchEvent(l),Rl=null}else return i=Pn(a),i!==null&&Uv(i),n.blockedOn=a,!1;i.shift()}return!0}function Hv(n,i,a){kh(n)&&a.delete(i)}function Ww(){hg=!1,$r!==null&&kh($r)&&($r=null),Zr!==null&&kh(Zr)&&(Zr=null),Jr!==null&&kh(Jr)&&(Jr=null),du.forEach(Hv),mu.forEach(Hv)}function Ph(n,i){n.blockedOn===i&&(n.blockedOn=null,hg||(hg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ww)))}var zh=null;function Gv(n){zh!==n&&(zh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zh===n&&(zh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(cg(l||a)===null)continue;break}var d=Pn(a);d!==null&&(n.splice(i,3),i-=3,um(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function To(n){function i(N){return Ph(N,n)}$r!==null&&Ph($r,n),Zr!==null&&Ph(Zr,n),Jr!==null&&Ph(Jr,n),du.forEach(i),mu.forEach(i);for(var a=0;a<Wr.length;a++){var l=Wr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Wr.length&&(a=Wr[0],a.blockedOn===null);)Fv(a),a.blockedOn===null&&Wr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qt]||null;if(typeof d=="function")_||Gv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qt]||null)b=_.formAction;else if(cg(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Gv(a)}}}function Kv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function fg(n){this._internalRoot=n}Lh.prototype.render=fg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Nn();zv(a,l,n,i,null,null)},Lh.prototype.unmount=fg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;zv(n.current,2,null,n,null,null),_h(),i[vi]=null}};function Lh(n){this._internalRoot=n}Lh.prototype.unstable_scheduleHydration=function(n){if(n){var i=_c();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Wr.length&&i!==0&&i<Wr[a].priority;a++);Wr.splice(a,0,n),a===0&&Fv(n)}};var Qv=e.version;if(Qv!=="19.2.3")throw Error(r(527,Qv,"19.2.3"));ne.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var eI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{Zn=Uh.inject(eI),Qt=Uh}catch{}}return yu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=e0,d=t0,_=n0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=kv(n,1,!1,null,null,a,l,null,f,d,_,Kv),n[vi]=i.current,Qm(n),new fg(i)},yu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=e0,_=t0,b=n0,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=kv(n,1,!0,i,a??null,l,f,N,d,_,b,Kv),i.context=Pv(null),a=i.current,l=Nn(),l=Ds(l),f=Lr(l),f.callback=null,Ur(a,f,l),a=l,i.current.lanes=a,Cs(i,a),ki(i),n[vi]=i.current,Qm(n),new Lh(i)},yu.version="19.2.3",yu}var iT;function cI(){if(iT)return gg.exports;iT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),gg.exports=uI(),gg.exports}var hI=cI();const fI=()=>{};var rT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dI=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],c=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,T=u>>2,E=(u&3)<<4|m>>4;let I=(m&15)<<2|p>>6,k=p&63;g||(k=64,c||(I=64)),r.push(t[T],t[E],t[I],t[k])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(rb(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):dI(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const E=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||E==null)throw new mI;const I=u<<2|m>>4;if(r.push(I),p!==64){const k=m<<4&240|p>>2;if(r.push(k),E!==64){const $=p<<6&192|E;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class mI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gI=function(s){const e=rb(s);return sb.encodeByteArray(e,!0)},ab=function(s){return gI(s).replace(/\./g,"")},ob=function(s){try{return sb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=()=>lb().__FIREBASE_DEFAULTS__,yI=()=>{if(typeof process>"u"||typeof rT>"u")return;const s=rT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_I=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&ob(s[1]);return e&&JSON.parse(e)},Lf=()=>{try{return fI()||pI()||yI()||_I()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},vI=s=>{var e,t;return(t=(e=Lf())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},ub=()=>{var s;return(s=Lf())==null?void 0:s.config},cb=s=>{var e;return(e=Lf())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hb(s){return(await fetch(s,{credentials:"include"})).ok}const Ru={};function EI(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ru))Ru[e]?s.emulator.push(e):s.prod.push(e);return s}function bI(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let sT=!1;function SI(s,e){if(typeof window>"u"||typeof document>"u"||!rl(window.location.host)||Ru[s]===e||Ru[s]||sT)return;Ru[s]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",u=EI().prod.length>0;function c(){const I=document.getElementById(r);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,k){I.setAttribute("width","24"),I.setAttribute("id",k),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{sT=!0,c()},I}function T(I,k){I.setAttribute("id",k),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=bI(r),k=t("text"),$=document.getElementById(k)||document.createElement("span"),Y=t("learnmore"),F=document.getElementById(Y)||document.createElement("a"),se=t("preprendIcon"),re=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ie=I.element;m(ie),T(F,Y);const Te=p();g(re,se),ie.append(re,$,F,Te),document.body.appendChild(ie)}u?($.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function fb(){var e;const s=(e=Lf())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function II(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function xI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RI(){const s=jt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function db(){return!fb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mb(){return!fb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gb(){try{return typeof indexedDB=="object"}catch{return!1}}function CI(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="FirebaseError";class vr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=NI,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?DI(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new vr(o,m,r)}}function DI(s,e){return s.replace(VI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const VI=/\{\$([^}]+)}/g;function OI(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function _a(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],c=e[o];if(aT(u)&&aT(c)){if(!_a(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function aT(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function MI(s,e){const t=new kI(s,e);return t.subscribe.bind(t)}class kI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");PI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=vg),o.error===void 0&&(o.error=vg),o.complete===void 0&&(o.complete=vg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PI(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(s){return s&&s._delegate?s._delegate:s}class va{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new TI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UI(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LI(s){return s===ia?void 0:s}function UI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const BI={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},qI=Le.INFO,FI={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},HI=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=FI[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=qI,this._logHandler=HI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const GI=(s,e)=>e.some(t=>s instanceof t);let oT,lT;function KI(){return oT||(oT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QI(){return lT||(lT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pb=new WeakMap,zg=new WeakMap,yb=new WeakMap,Tg=new WeakMap,Ap=new WeakMap;function YI(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(cs(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&pb.set(t,s)}).catch(()=>{}),Ap.set(e,s),e}function XI(s){if(zg.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});zg.set(s,e)}let Lg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return zg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||yb.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function $I(s){Lg=s(Lg)}function ZI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Eg(this),e,...t);return yb.set(r,e.sort?e.sort():[e]),cs(r)}:QI().includes(s)?function(...e){return s.apply(Eg(this),e),cs(pb.get(this))}:function(...e){return cs(s.apply(Eg(this),e))}}function JI(s){return typeof s=="function"?ZI(s):(s instanceof IDBTransaction&&XI(s),GI(s,KI())?new Proxy(s,Lg):s)}function cs(s){if(s instanceof IDBRequest)return YI(s);if(Tg.has(s))return Tg.get(s);const e=JI(s);return e!==s&&(Tg.set(s,e),Ap.set(e,s)),e}const Eg=s=>Ap.get(s);function WI(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,e),m=cs(c);return r&&c.addEventListener("upgradeneeded",g=>{r(cs(c.result),g.oldVersion,g.newVersion,cs(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const ex=["get","getKey","getAll","getAllKeys","count"],tx=["put","add","delete","clear"],bg=new Map;function uT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(bg.get(e))return bg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=tx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ex.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return bg.set(e,u),u}$I(s=>({...s,get:(e,t,r)=>uT(e,t)||s.get(e,t,r),has:(e,t)=>!!uT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ix(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function ix(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ug="@firebase/app",cT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new Sp("@firebase/app"),rx="@firebase/app-compat",sx="@firebase/analytics-compat",ax="@firebase/analytics",ox="@firebase/app-check-compat",lx="@firebase/app-check",ux="@firebase/auth",cx="@firebase/auth-compat",hx="@firebase/database",fx="@firebase/data-connect",dx="@firebase/database-compat",mx="@firebase/functions",gx="@firebase/functions-compat",px="@firebase/installations",yx="@firebase/installations-compat",_x="@firebase/messaging",vx="@firebase/messaging-compat",Tx="@firebase/performance",Ex="@firebase/performance-compat",bx="@firebase/remote-config",Sx="@firebase/remote-config-compat",Ax="@firebase/storage",wx="@firebase/storage-compat",Ix="@firebase/firestore",xx="@firebase/ai",Rx="@firebase/firestore-compat",Cx="firebase",Nx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="[DEFAULT]",Dx={[Ug]:"fire-core",[rx]:"fire-core-compat",[ax]:"fire-analytics",[sx]:"fire-analytics-compat",[lx]:"fire-app-check",[ox]:"fire-app-check-compat",[ux]:"fire-auth",[cx]:"fire-auth-compat",[hx]:"fire-rtdb",[fx]:"fire-data-connect",[dx]:"fire-rtdb-compat",[mx]:"fire-fn",[gx]:"fire-fn-compat",[px]:"fire-iid",[yx]:"fire-iid-compat",[_x]:"fire-fcm",[vx]:"fire-fcm-compat",[Tx]:"fire-perf",[Ex]:"fire-perf-compat",[bx]:"fire-rc",[Sx]:"fire-rc-compat",[Ax]:"fire-gcs",[wx]:"fire-gcs-compat",[Ix]:"fire-fst",[Rx]:"fire-fst-compat",[xx]:"fire-vertex","fire-js":"fire-js",[Cx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,Vx=new Map,Bg=new Map;function hT(s,e){try{s.container.addComponent(e)}catch(t){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Lo(s){const e=s.name;if(Bg.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,s);for(const t of ff.values())hT(t,s);for(const t of Vx.values())hT(t,s);return!0}function wp(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ci(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new Wu("app","Firebase",Ox);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=Nx;function _b(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:jg,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw hs.create("bad-app-name",{appName:String(o)});if(t||(t=ub()),!t)throw hs.create("no-options");const u=ff.get(o);if(u){if(_a(t,u.options)&&_a(r,u.config))return u;throw hs.create("duplicate-app",{appName:o})}const c=new jI(o);for(const g of Bg.values())c.addComponent(g);const m=new Mx(t,r,c);return ff.set(o,m),m}function kx(s=jg){const e=ff.get(s);if(!e&&s===jg&&ub())return _b();if(!e)throw hs.create("no-app",{appName:s});return e}function fs(s,e,t){let r=Dx[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(c.join(" "));return}Lo(new va(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="firebase-heartbeat-database",zx=1,Uu="firebase-heartbeat-store";let Sg=null;function vb(){return Sg||(Sg=WI(Px,zx,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Uu)}catch(t){console.warn(t)}}}}).catch(s=>{throw hs.create("idb-open",{originalErrorMessage:s.message})})),Sg}async function Lx(s){try{const t=(await vb()).transaction(Uu),r=await t.objectStore(Uu).get(Tb(s));return await t.done,r}catch(e){if(e instanceof vr)gr.warn(e.message);else{const t=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gr.warn(t.message)}}}async function fT(s,e){try{const r=(await vb()).transaction(Uu,"readwrite");await r.objectStore(Uu).put(e,Tb(s)),await r.done}catch(t){if(t instanceof vr)gr.warn(t.message);else{const r=hs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gr.warn(r.message)}}}function Tb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=1024,jx=30;class Bx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=dT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>jx){const c=Hx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=dT(),{heartbeatsToSend:r,unsentEntries:o}=qx(this._heartbeatsCache.heartbeats),u=ab(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return gr.warn(t),""}}}function dT(){return new Date().toISOString().substring(0,10)}function qx(s,e=Ux){const t=[];let r=s.slice();for(const o of s){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),mT(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),mT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Fx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gb()?CI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Lx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function mT(s){return ab(JSON.stringify({version:2,heartbeats:s})).length}function Hx(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(s){Lo(new va("platform-logger",e=>new nx(e),"PRIVATE")),Lo(new va("heartbeat",e=>new Bx(e),"PRIVATE")),fs(Ug,cT,s),fs(Ug,cT,"esm2020"),fs("fire-js","")}Gx("");var Kx="firebase",Qx="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(Kx,Qx,"app");function Eb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yx=Eb,bb=new Wu("auth","Firebase",Eb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new Sp("@firebase/auth");function Xx(s,...e){df.logLevel<=Le.WARN&&df.warn(`Auth (${sl}): ${s}`,...e)}function Xh(s,...e){df.logLevel<=Le.ERROR&&df.error(`Auth (${sl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(s,...e){throw xp(s,...e)}function di(s,...e){return xp(s,...e)}function Ip(s,e,t){const r={...Yx(),[e]:t};return new Wu("auth","Firebase",r).create(e,{appName:s.name})}function da(s){return Ip(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $x(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fi(s,"argument-error"),Ip(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xp(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return bb.create(s,...e)}function Se(s,e,...t){if(!s)throw xp(e,...t)}function hr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Xh(e),new Error(e)}function pr(s,e){s||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function Zx(){return gT()==="http:"||gT()==="https:"}function gT(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zx()||II()||"connection"in navigator)?navigator.onLine:!0}function Wx(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t){this.shortDelay=e,this.longDelay=t,pr(t>e,"Short delay should be less than long delay!"),this.isMobile=AI()||xI()}get(){return Jx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(s,e){pr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nR=new tc(3e4,6e4);function Cp(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function al(s,e,t,r,o={}){return Ab(s,o,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const m=ec({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return wI()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&rl(s.emulatorConfig.host)&&(p.credentials="include"),Sb.fetch()(await wb(s,s.config.apiHost,t,m),p)})}async function Ab(s,e,t){s._canInitEmulator=!1;const r={...eR,...e};try{const o=new rR(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw jh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw jh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw jh(s,"user-disabled",c);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ip(s,T,p);Fi(s,T)}}catch(o){if(o instanceof vr)throw o;Fi(s,"network-request-failed",{message:String(o)})}}async function iR(s,e,t,r,o={}){const u=await al(s,e,t,r,o);return"mfaPendingCredential"in u&&Fi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function wb(s,e,t,r){const o=`${e}${t}?${r}`,u=s,c=u.config.emulator?Rp(s.config,o):`${s.config.apiScheme}://${o}`;return tR.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class rR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),nR.get())})}}function jh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=di(s,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(s,e){return al(s,"POST","/v1/accounts:delete",e)}async function mf(s,e){return al(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aR(s,e=!1){const t=en(s),r=await t.getIdToken(e),o=Np(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Cu(Ag(o.auth_time)),issuedAtTime:Cu(Ag(o.iat)),expirationTime:Cu(Ag(o.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Ag(s){return Number(s)*1e3}function Np(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const o=ob(t);return o?JSON.parse(o):(Xh("Failed to decode base64 JWT payload"),null)}catch(o){return Xh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function pT(s){const e=Np(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof vr&&oR(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function oR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(s){var E;const e=s.auth,t=await s.getIdToken(),r=await ju(s,mf(e,{idToken:t}));Se(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(E=o.providerUserInfo)!=null&&E.length?Ib(o.providerUserInfo):[],c=cR(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Fg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,T)}async function uR(s){const e=en(s);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cR(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Ib(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(s,e){const t=await Ab(s,{},async()=>{const r=ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await wb(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&rl(s.emulatorConfig.host)&&(g.credentials="include"),Sb.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fR(s,e){return al(s,"POST","/v2/accounts:revokeToken",Cp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=pT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await hR(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,c=new Oo;return r&&(Se(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new lR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ju(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aR(this,e)}reload(){return uR(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(da(this.auth));const e=await this.getIdToken();return await ju(this,sR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:k,providerData:$,stsTokenManager:Y}=t;Se(E&&Y,e,"internal-error");const F=Oo.fromJSON(this.name,Y);Se(typeof E=="string",e,"internal-error"),ts(r,e.name),ts(o,e.name),Se(typeof I=="boolean",e,"internal-error"),Se(typeof k=="boolean",e,"internal-error"),ts(u,e.name),ts(c,e.name),ts(m,e.name),ts(g,e.name),ts(p,e.name),ts(T,e.name);const se=new fi({uid:E,auth:e,email:o,emailVerified:I,displayName:r,isAnonymous:k,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:F,createdAt:p,lastLoginAt:T});return $&&Array.isArray($)&&(se.providerData=$.map(re=>({...re}))),g&&(se._redirectEventId=g),se}static async _fromIdTokenResponse(e,t,r=!1){const o=new Oo;o.updateFromServerResponse(t);const u=new fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await gf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Ib(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Oo;m.updateFromIdToken(r);const g=new fi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Fg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Map;function fr(s){pr(s instanceof Function,"Expected a class definition");let e=yT.get(s);return e?(pr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,yT.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xb.type="NONE";const _T=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(s,e,t){return`firebase:${s}:${e}:${t}`}class Mo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=$h(this.userKey,o.apiKey,u),this.fullPersistenceKey=$h("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mf(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Mo(fr(_T),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||fr(_T);const c=$h(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const T=await p._get(c);if(T){let E;if(typeof T=="string"){const I=await mf(e,{idToken:T}).catch(()=>{});if(!I)break;E=await fi._fromGetAccountInfoResponse(e,I,T)}else E=fi._fromJSON(e,T);p!==u&&(m=E),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Mo(u,e,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Mo(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Db(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ob(e))return"Blackberry";if(Mb(e))return"Webos";if(Cb(e))return"Safari";if((e.includes("chrome/")||Nb(e))&&!e.includes("edge/"))return"Chrome";if(Vb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Rb(s=jt()){return/firefox\//i.test(s)}function Cb(s=jt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nb(s=jt()){return/crios\//i.test(s)}function Db(s=jt()){return/iemobile/i.test(s)}function Vb(s=jt()){return/android/i.test(s)}function Ob(s=jt()){return/blackberry/i.test(s)}function Mb(s=jt()){return/webos/i.test(s)}function Dp(s=jt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function dR(s=jt()){var e;return Dp(s)&&!!((e=window.navigator)!=null&&e.standalone)}function mR(){return RI()&&document.documentMode===10}function kb(s=jt()){return Dp(s)||Vb(s)||Mb(s)||Ob(s)||/windows phone/i.test(s)||Db(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(s,e=[]){let t;switch(s){case"Browser":t=vT(jt());break;case"Worker":t=`${vT(jt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(s,e={}){return al(s,"GET","/v2/passwordPolicy",Cp(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=6;class _R{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??yR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TT(this),this.idTokenSubscription=new TT(this),this.beforeStateQueue=new gR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fr(t)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mf(this,{idToken:e}),r=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(ci(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(da(this));const t=e?en(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pR(this),t=new _R(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await fR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Xx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Uf(s){return en(s)}class TT{constructor(e){this.auth=e,this.observer=null,this.addObserver=MI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TR(s){Vp=s}function ER(s){return Vp.loadJS(s)}function bR(){return Vp.gapiScript}function SR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(s,e){const t=wp(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(_a(u,e??{}))return o;Fi(o,"already-initialized")}return t.initialize({options:e})}function wR(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(fr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function IR(s,e,t){const r=Uf(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=zb(e),{host:c,port:m}=xR(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},T=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(_a(p,r.config.emulator)&&_a(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,rl(c)?(hb(`${u}//${c}${g}`),SI("Auth",!0)):RR()}function zb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function xR(s){const e=zb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:ET(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:ET(c)}}}function ET(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function RR(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,t){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(s,e){return iR(s,"POST","/v1/accounts:signInWithIdp",Cp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="http://localhost";class Ta extends Lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const c=new Ta(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ko(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:CR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ec(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends nc{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ta._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return cr.credential(t,r)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends nc{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends nc{constructor(){super("twitter.com")}static credential(e,t){return Ta._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return os.credential(t,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await fi._fromIdTokenResponse(e,r,o),c=bT(r);return new Uo({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=bT(r);return new Uo({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function bT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends vr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new pf(e,t,r,o)}}function Ub(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?pf._fromErrorAndOperation(s,u,e,r):u})}async function NR(s,e,t=!1){const r=await ju(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Uo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(s,e,t=!1){const{auth:r}=s;if(ci(r.app))return Promise.reject(da(r));const o="reauthenticate";try{const u=await ju(s,Ub(r,o,e,s),t);Se(u.idToken,r,"internal-error");const c=Np(u.idToken);Se(c,r,"internal-error");const{sub:m}=c;return Se(s.uid===m,r,"user-mismatch"),Uo._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Fi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(s,e,t=!1){if(ci(s.app))return Promise.reject(da(s));const r="signIn",o=await Ub(s,r,e),u=await Uo._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}function OR(s,e,t,r){return en(s).onIdTokenChanged(e,t,r)}function MR(s,e,t){return en(s).beforeAuthStateChanged(e,t)}function kR(s,e,t,r){return en(s).onAuthStateChanged(e,t,r)}function PR(s){return en(s).signOut()}const yf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=1e3,LR=10;class Bb extends jb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);mR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LR):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},zR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bb.type="LOCAL";const UR=Bb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends jb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qb.type="SESSION";const Fb=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new jf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await jR(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Mp("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return window}function qR(s){ji().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function FR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HR(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function GR(){return Hb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebaseLocalStorageDb",KR=1,_f="firebaseLocalStorage",Kb="fbase_key";class ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bf(s,e){return s.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function QR(){const s=indexedDB.deleteDatabase(Gb);return new ic(s).toPromise()}function Hg(){const s=indexedDB.open(Gb,KR);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(_f,{keyPath:Kb})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(_f)?e(r):(r.close(),await QR(),e(await Hg()))})})}async function ST(s,e,t){const r=Bf(s,!0).put({[Kb]:e,value:t});return new ic(r).toPromise()}async function YR(s,e){const t=Bf(s,!1).get(e),r=await new ic(t).toPromise();return r===void 0?null:r.value}function AT(s,e){const t=Bf(s,!0).delete(e);return new ic(t).toPromise()}const XR=800,$R=3;class Qb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>$R)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jf._getInstance(GR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await FR(),!this.activeServiceWorker)return;this.sender=new BR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hg();return await ST(e,yf,"1"),await AT(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ST(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>YR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>AT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Bf(o,!1).getAll();return new ic(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qb.type="LOCAL";const ZR=Qb;new tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(s,e){return e?fr(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp extends Lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JR(s){return VR(s.auth,new kp(s),s.bypassAuthState)}function WR(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),DR(t,new kp(s),s.bypassAuthState)}async function e2(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),NR(t,new kp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JR;case"linkViaPopup":case"linkViaRedirect":return e2;case"reauthViaPopup":case"reauthViaRedirect":return WR;default:Fi(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new tc(2e3,1e4);async function n2(s,e,t){if(ci(s.app))return Promise.reject(di(s,"operation-not-supported-in-this-environment"));const r=Uf(s);$x(s,e,Op);const o=Yb(r,t);return new ca(r,"signInViaPopup",e,o).executeNotNull()}class ca extends Xb{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t2.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="pendingRedirect",Zh=new Map;class r2 extends Xb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const r=await s2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s2(s,e){const t=l2(e),r=o2(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function a2(s,e){Zh.set(s._key(),e)}function o2(s){return fr(s._redirectPersistence)}function l2(s){return $h(i2,s.config.apiKey,s.name)}async function u2(s,e,t=!1){if(ci(s.app))return Promise.reject(da(s));const r=Uf(s),o=Yb(r,e),c=await new r2(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=600*1e3;class h2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$b(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(di(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c2&&this.cachedEventUids.clear(),this.cachedEventUids.has(wT(e))}saveEventToCache(e){this.cachedEventUids.add(wT(e)),this.lastProcessedEventTime=Date.now()}}function wT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function $b({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $b(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(s,e={}){return al(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g2=/^https?/;async function p2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await d2(s);for(const t of e)try{if(y2(t))return}catch{}Fi(s,"unauthorized-domain")}function y2(s){const e=qg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!g2.test(t))return!1;if(m2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new tc(3e4,6e4);function IT(){const s=ji().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function v2(s){return new Promise((e,t)=>{var o,u,c;function r(){IT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IT(),t(di(s,"network-request-failed"))},timeout:_2.get()})}if((u=(o=ji().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((c=ji().gapi)!=null&&c.load)r();else{const m=SR("iframefcb");return ji()[m]=()=>{gapi.load?r():t(di(s,"network-request-failed"))},ER(`${bR()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function T2(s){return Jh=Jh||v2(s),Jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new tc(5e3,15e3),b2="__/auth/iframe",S2="emulator/auth/iframe",A2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I2(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Rp(e,S2):`https://${s.config.authDomain}/${b2}`,r={apiKey:e.apiKey,appName:s.name,v:sl},o=w2.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${ec(r).slice(1)}`}async function x2(s){const e=await T2(s),t=ji().gapi;return Se(t,s,"internal-error"),e.open({where:document.body,url:I2(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A2,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=di(s,"network-request-failed"),m=ji().setTimeout(()=>{u(c)},E2.get());function g(){ji().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C2=500,N2=600,D2="_blank",V2="http://localhost";class xT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O2(s,e,t,r=C2,o=N2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...R2,width:r.toString(),height:o.toString(),top:u,left:c},p=jt().toLowerCase();t&&(m=Nb(p)?D2:t),Rb(p)&&(e=e||V2,g.scrollbars="yes");const T=Object.entries(g).reduce((I,[k,$])=>`${I}${k}=${$},`,"");if(dR(p)&&m!=="_self")return M2(e||"",m),new xT(null);const E=window.open(e||"",m,T);Se(E,s,"popup-blocked");try{E.focus()}catch{}return new xT(E)}function M2(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="__/auth/handler",P2="emulator/auth/handler",z2=encodeURIComponent("fac");async function RT(s,e,t,r,o,u){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:sl,eventId:o};if(e instanceof Op){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",OI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,E]of Object.entries({}))c[T]=E}if(e instanceof nc){const T=e.getScopes().filter(E=>E!=="");T.length>0&&(c.scopes=T.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),p=g?`#${z2}=${encodeURIComponent(g)}`:"";return`${L2(s)}?${ec(m).slice(1)}${p}`}function L2({config:s}){return s.emulator?Rp(s,P2):`https://${s.authDomain}/${k2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="webStorageSupport";class U2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fb,this._completeRedirectFn=u2,this._overrideRedirectResult=a2}async _openPopup(e,t,r,o){var c;pr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const u=await RT(e,t,r,qg(),o);return O2(e,u,Mp())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await RT(e,t,r,qg(),o);return qR(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(pr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await x2(e),r=new h2(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wg,{type:wg},o=>{var c;const u=(c=o==null?void 0:o[0])==null?void 0:c[wg];u!==void 0&&t(!!u),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=p2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kb()||Cb()||Dp()}}const j2=U2;var CT="@firebase/auth",NT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F2(s){Lo(new va("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pb(s)},p=new vR(r,o,u,g);return wR(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lo(new va("auth-internal",e=>{const t=Uf(e.getProvider("auth").getImmediate());return(r=>new B2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(CT,NT,q2(s)),fs(CT,NT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=300,G2=cb("authIdTokenMaxAge")||H2;let DT=null;const K2=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>G2)return;const o=t==null?void 0:t.token;DT!==o&&(DT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Q2(s=kx()){const e=wp(s,"auth");if(e.isInitialized())return e.getImmediate();const t=AR(s,{popupRedirectResolver:j2,persistence:[ZR,UR,Fb]}),r=cb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=K2(u.toString());MR(t,c,()=>c(t.currentUser)),OR(t,m=>c(m))}}const o=vI("auth");return o&&IR(t,`http://${o}`),t}function Y2(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}TR({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=di("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",Y2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F2("Browser");var VT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,Zb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function R(){}R.prototype=x.prototype,C.F=x.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(D,V,z){for(var w=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)w[ue-2]=arguments[ue];return x.prototype[V].apply(D,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,x,R){R||(R=0);const D=Array(16);if(typeof x=="string")for(var V=0;V<16;++V)D[V]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(V=0;V<16;++V)D[V]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=C.g[0],R=C.g[1],V=C.g[2];let z=C.g[3],w;w=x+(z^R&(V^z))+D[0]+3614090360&4294967295,x=R+(w<<7&4294967295|w>>>25),w=z+(V^x&(R^V))+D[1]+3905402710&4294967295,z=x+(w<<12&4294967295|w>>>20),w=V+(R^z&(x^R))+D[2]+606105819&4294967295,V=z+(w<<17&4294967295|w>>>15),w=R+(x^V&(z^x))+D[3]+3250441966&4294967295,R=V+(w<<22&4294967295|w>>>10),w=x+(z^R&(V^z))+D[4]+4118548399&4294967295,x=R+(w<<7&4294967295|w>>>25),w=z+(V^x&(R^V))+D[5]+1200080426&4294967295,z=x+(w<<12&4294967295|w>>>20),w=V+(R^z&(x^R))+D[6]+2821735955&4294967295,V=z+(w<<17&4294967295|w>>>15),w=R+(x^V&(z^x))+D[7]+4249261313&4294967295,R=V+(w<<22&4294967295|w>>>10),w=x+(z^R&(V^z))+D[8]+1770035416&4294967295,x=R+(w<<7&4294967295|w>>>25),w=z+(V^x&(R^V))+D[9]+2336552879&4294967295,z=x+(w<<12&4294967295|w>>>20),w=V+(R^z&(x^R))+D[10]+4294925233&4294967295,V=z+(w<<17&4294967295|w>>>15),w=R+(x^V&(z^x))+D[11]+2304563134&4294967295,R=V+(w<<22&4294967295|w>>>10),w=x+(z^R&(V^z))+D[12]+1804603682&4294967295,x=R+(w<<7&4294967295|w>>>25),w=z+(V^x&(R^V))+D[13]+4254626195&4294967295,z=x+(w<<12&4294967295|w>>>20),w=V+(R^z&(x^R))+D[14]+2792965006&4294967295,V=z+(w<<17&4294967295|w>>>15),w=R+(x^V&(z^x))+D[15]+1236535329&4294967295,R=V+(w<<22&4294967295|w>>>10),w=x+(V^z&(R^V))+D[1]+4129170786&4294967295,x=R+(w<<5&4294967295|w>>>27),w=z+(R^V&(x^R))+D[6]+3225465664&4294967295,z=x+(w<<9&4294967295|w>>>23),w=V+(x^R&(z^x))+D[11]+643717713&4294967295,V=z+(w<<14&4294967295|w>>>18),w=R+(z^x&(V^z))+D[0]+3921069994&4294967295,R=V+(w<<20&4294967295|w>>>12),w=x+(V^z&(R^V))+D[5]+3593408605&4294967295,x=R+(w<<5&4294967295|w>>>27),w=z+(R^V&(x^R))+D[10]+38016083&4294967295,z=x+(w<<9&4294967295|w>>>23),w=V+(x^R&(z^x))+D[15]+3634488961&4294967295,V=z+(w<<14&4294967295|w>>>18),w=R+(z^x&(V^z))+D[4]+3889429448&4294967295,R=V+(w<<20&4294967295|w>>>12),w=x+(V^z&(R^V))+D[9]+568446438&4294967295,x=R+(w<<5&4294967295|w>>>27),w=z+(R^V&(x^R))+D[14]+3275163606&4294967295,z=x+(w<<9&4294967295|w>>>23),w=V+(x^R&(z^x))+D[3]+4107603335&4294967295,V=z+(w<<14&4294967295|w>>>18),w=R+(z^x&(V^z))+D[8]+1163531501&4294967295,R=V+(w<<20&4294967295|w>>>12),w=x+(V^z&(R^V))+D[13]+2850285829&4294967295,x=R+(w<<5&4294967295|w>>>27),w=z+(R^V&(x^R))+D[2]+4243563512&4294967295,z=x+(w<<9&4294967295|w>>>23),w=V+(x^R&(z^x))+D[7]+1735328473&4294967295,V=z+(w<<14&4294967295|w>>>18),w=R+(z^x&(V^z))+D[12]+2368359562&4294967295,R=V+(w<<20&4294967295|w>>>12),w=x+(R^V^z)+D[5]+4294588738&4294967295,x=R+(w<<4&4294967295|w>>>28),w=z+(x^R^V)+D[8]+2272392833&4294967295,z=x+(w<<11&4294967295|w>>>21),w=V+(z^x^R)+D[11]+1839030562&4294967295,V=z+(w<<16&4294967295|w>>>16),w=R+(V^z^x)+D[14]+4259657740&4294967295,R=V+(w<<23&4294967295|w>>>9),w=x+(R^V^z)+D[1]+2763975236&4294967295,x=R+(w<<4&4294967295|w>>>28),w=z+(x^R^V)+D[4]+1272893353&4294967295,z=x+(w<<11&4294967295|w>>>21),w=V+(z^x^R)+D[7]+4139469664&4294967295,V=z+(w<<16&4294967295|w>>>16),w=R+(V^z^x)+D[10]+3200236656&4294967295,R=V+(w<<23&4294967295|w>>>9),w=x+(R^V^z)+D[13]+681279174&4294967295,x=R+(w<<4&4294967295|w>>>28),w=z+(x^R^V)+D[0]+3936430074&4294967295,z=x+(w<<11&4294967295|w>>>21),w=V+(z^x^R)+D[3]+3572445317&4294967295,V=z+(w<<16&4294967295|w>>>16),w=R+(V^z^x)+D[6]+76029189&4294967295,R=V+(w<<23&4294967295|w>>>9),w=x+(R^V^z)+D[9]+3654602809&4294967295,x=R+(w<<4&4294967295|w>>>28),w=z+(x^R^V)+D[12]+3873151461&4294967295,z=x+(w<<11&4294967295|w>>>21),w=V+(z^x^R)+D[15]+530742520&4294967295,V=z+(w<<16&4294967295|w>>>16),w=R+(V^z^x)+D[2]+3299628645&4294967295,R=V+(w<<23&4294967295|w>>>9),w=x+(V^(R|~z))+D[0]+4096336452&4294967295,x=R+(w<<6&4294967295|w>>>26),w=z+(R^(x|~V))+D[7]+1126891415&4294967295,z=x+(w<<10&4294967295|w>>>22),w=V+(x^(z|~R))+D[14]+2878612391&4294967295,V=z+(w<<15&4294967295|w>>>17),w=R+(z^(V|~x))+D[5]+4237533241&4294967295,R=V+(w<<21&4294967295|w>>>11),w=x+(V^(R|~z))+D[12]+1700485571&4294967295,x=R+(w<<6&4294967295|w>>>26),w=z+(R^(x|~V))+D[3]+2399980690&4294967295,z=x+(w<<10&4294967295|w>>>22),w=V+(x^(z|~R))+D[10]+4293915773&4294967295,V=z+(w<<15&4294967295|w>>>17),w=R+(z^(V|~x))+D[1]+2240044497&4294967295,R=V+(w<<21&4294967295|w>>>11),w=x+(V^(R|~z))+D[8]+1873313359&4294967295,x=R+(w<<6&4294967295|w>>>26),w=z+(R^(x|~V))+D[15]+4264355552&4294967295,z=x+(w<<10&4294967295|w>>>22),w=V+(x^(z|~R))+D[6]+2734768916&4294967295,V=z+(w<<15&4294967295|w>>>17),w=R+(z^(V|~x))+D[13]+1309151649&4294967295,R=V+(w<<21&4294967295|w>>>11),w=x+(V^(R|~z))+D[4]+4149444226&4294967295,x=R+(w<<6&4294967295|w>>>26),w=z+(R^(x|~V))+D[11]+3174756917&4294967295,z=x+(w<<10&4294967295|w>>>22),w=V+(x^(z|~R))+D[2]+718787259&4294967295,V=z+(w<<15&4294967295|w>>>17),w=R+(z^(V|~x))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(V+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+z&4294967295}r.prototype.v=function(C,x){x===void 0&&(x=C.length);const R=x-this.blockSize,D=this.C;let V=this.h,z=0;for(;z<x;){if(V==0)for(;z<=R;)o(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<x;)if(D[V++]=C.charCodeAt(z++),V==this.blockSize){o(this,D),V=0;break}}else for(;z<x;)if(D[V++]=C[z++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=x},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;x=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=x&255,x/=256;for(this.v(C),C=Array(16),x=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)C[x++]=this.g[R]>>>D&255;return C};function u(C,x){var R=m;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=x(C)}function c(C,x){this.h=x;const R=[];let D=!0;for(let V=C.length-1;V>=0;V--){const z=C[V]|0;D&&z==x||(R[V]=z,D=!1)}this.g=R}var m={};function g(C){return-128<=C&&C<128?u(C,function(x){return new c([x|0],x<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return F(p(-C));const x=[];let R=1;for(let D=0;C>=R;D++)x[D]=C/R|0,R*=4294967296;return new c(x,0)}function T(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return F(T(C.substring(1),x));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(x,8));let D=E;for(let z=0;z<C.length;z+=8){var V=Math.min(8,C.length-z);const w=parseInt(C.substring(z,z+V),x);V<8?(V=p(Math.pow(x,V)),D=D.j(V).add(p(w))):(D=D.j(R),D=D.add(p(w)))}return D}var E=g(0),I=g(1),k=g(16777216);s=c.prototype,s.m=function(){if(Y(this))return-F(this).m();let C=0,x=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);C+=(D>=0?D:4294967296+D)*x,x*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if($(this))return"0";if(Y(this))return"-"+F(this).toString(C);const x=p(Math.pow(C,6));var R=this;let D="";for(;;){const V=Te(R,x).g;R=se(R,V.j(x));let z=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=V,$(R))return z+D;for(;z.length<6;)z="0"+z;D=z+D}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function $(C){if(C.h!=0)return!1;for(let x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function Y(C){return C.h==-1}s.l=function(C){return C=se(this,C),Y(C)?-1:$(C)?0:1};function F(C){const x=C.g.length,R=[];for(let D=0;D<x;D++)R[D]=~C.g[D];return new c(R,~C.h).add(I)}s.abs=function(){return Y(this)?F(this):this},s.add=function(C){const x=Math.max(this.g.length,C.g.length),R=[];let D=0;for(let V=0;V<=x;V++){let z=D+(this.i(V)&65535)+(C.i(V)&65535),w=(z>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);D=w>>>16,z&=65535,w&=65535,R[V]=w<<16|z}return new c(R,R[R.length-1]&-2147483648?-1:0)};function se(C,x){return C.add(F(x))}s.j=function(C){if($(this)||$(C))return E;if(Y(this))return Y(C)?F(this).j(F(C)):F(F(this).j(C));if(Y(C))return F(this.j(F(C)));if(this.l(k)<0&&C.l(k)<0)return p(this.m()*C.m());const x=this.g.length+C.g.length,R=[];for(var D=0;D<2*x;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<C.g.length;V++){const z=this.i(D)>>>16,w=this.i(D)&65535,ue=C.i(V)>>>16,Ae=C.i(V)&65535;R[2*D+2*V]+=w*Ae,re(R,2*D+2*V),R[2*D+2*V+1]+=z*Ae,re(R,2*D+2*V+1),R[2*D+2*V+1]+=w*ue,re(R,2*D+2*V+1),R[2*D+2*V+2]+=z*ue,re(R,2*D+2*V+2)}for(C=0;C<x;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=x;C<2*x;C++)R[C]=0;return new c(R,0)};function re(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function ie(C,x){this.g=C,this.h=x}function Te(C,x){if($(x))throw Error("division by zero");if($(C))return new ie(E,E);if(Y(C))return x=Te(F(C),x),new ie(F(x.g),F(x.h));if(Y(x))return x=Te(C,F(x)),new ie(F(x.g),x.h);if(C.g.length>30){if(Y(C)||Y(x))throw Error("slowDivide_ only works with positive integers.");for(var R=I,D=x;D.l(C)<=0;)R=be(R),D=be(D);var V=ge(R,1),z=ge(D,1);for(D=ge(D,2),R=ge(R,2);!$(D);){var w=z.add(D);w.l(C)<=0&&(V=V.add(R),z=w),D=ge(D,1),R=ge(R,1)}return x=se(C,V.j(x)),new ie(V,x)}for(V=E;C.l(x)>=0;){for(R=Math.max(1,Math.floor(C.m()/x.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),z=p(R),w=z.j(x);Y(w)||w.l(C)>0;)R-=D,z=p(R),w=z.j(x);$(z)&&(z=I),V=V.add(z),C=se(C,w)}return new ie(V,C)}s.B=function(C){return Te(this,C).h},s.and=function(C){const x=Math.max(this.g.length,C.g.length),R=[];for(let D=0;D<x;D++)R[D]=this.i(D)&C.i(D);return new c(R,this.h&C.h)},s.or=function(C){const x=Math.max(this.g.length,C.g.length),R=[];for(let D=0;D<x;D++)R[D]=this.i(D)|C.i(D);return new c(R,this.h|C.h)},s.xor=function(C){const x=Math.max(this.g.length,C.g.length),R=[];for(let D=0;D<x;D++)R[D]=this.i(D)^C.i(D);return new c(R,this.h^C.h)};function be(C){const x=C.g.length+1,R=[];for(let D=0;D<x;D++)R[D]=C.i(D)<<1|C.i(D-1)>>>31;return new c(R,C.h)}function ge(C,x){const R=x>>5;x%=32;const D=C.g.length-R,V=[];for(let z=0;z<D;z++)V[z]=x>0?C.i(z+R)>>>x|C.i(z+R+1)<<32-x:C.i(z+R);return new c(V,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=T,ds=c}).apply(typeof VT<"u"?VT:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jb,Su,Wb,Wh,Gg,e1,t1,n1;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var U=h[S];if(!(U in v))break e;v=v[U]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function T(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function E(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,U,H){for(var te=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)te[Re-2]=arguments[Re];return y.prototype[U].apply(S,te)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function $(h,y){for(let S=1;S<arguments.length;S++){const U=arguments[S];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=h.length||0;const H=U.length||0;h.length=v+H;for(let te=0;te<H;te++)h[v+te]=U[te]}else h.push(U)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(h){c.setTimeout(()=>{throw h},0)}function se(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class re{constructor(){this.h=this.g=null}add(y,v){const S=ie.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ie=new Y(()=>new Te,h=>h.reset());class Te{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ge=!1,C=new re,x=()=>{const h=Promise.resolve(void 0);be=()=>{h.then(R)}};function R(){for(var h;h=se();){try{h.h.call(h.g)}catch(v){F(v)}var y=ie;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ge=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function w(h){return/^[\s\xa0]*$/.test(h)}function ue(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(ue,V),ue.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),K=0;function ne(h,y,v,S,U){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=U,this.key=++K,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ue(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Xe(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function M(h){const y={};for(const v in h)y[v]=h[v];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,y){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)h[v]=S[v];for(let H=0;H<J.length;H++)v=J[H],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,v,S,U){const H=h.toString();h=this.g[H],h||(h=this.g[H]=[],this.h++);const te=Ne(h,y,S,U);return te>-1?(y=h[te],v||(y.fa=!1)):(y=new ne(y,this.src,H,!!S,U),y.fa=v,h.push(y)),y};function we(h,y){const v=y.type;if(v in h.g){var S=h.g[v],U=Array.prototype.indexOf.call(S,y,void 0),H;(H=U>=0)&&Array.prototype.splice.call(S,U,1),H&&(ye(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ne(h,y,v,S){for(let U=0;U<h.length;++U){const H=h[U];if(!H.da&&H.listener==y&&H.capture==!!v&&H.ha==S)return U}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),zt={};function ct(h,y,v,S,U){if(Array.isArray(y)){for(let H=0;H<y.length;H++)ct(h,y[H],v,S,U);return null}return v=ml(v),h&&h[Ae]?h.J(y,v,m(S)?!!S.capture:!1,U):ws(h,y,v,!1,S,U)}function ws(h,y,v,S,U,H){if(!y)throw Error("Invalid event type");const te=m(U)?!!U.capture:!!U;let Re=Is(h);if(Re||(h[qe]=Re=new ce(h)),v=Re.add(y,v,S,te,H),v.proxy)return v;if(S=Na(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)z||(U=te),U===void 0&&(U=!1),h.addEventListener(y.toString(),S,U);else if(h.attachEvent)h.attachEvent(mi(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Na(){function h(v){return y.call(h.src,h.listener,v)}const y=fl;return h}function Da(h,y,v,S,U){if(Array.isArray(y))for(var H=0;H<y.length;H++)Da(h,y[H],v,S,U);else S=m(S)?!!S.capture:!!S,v=ml(v),h&&h[Ae]?(h=h.i,H=String(y).toString(),H in h.g&&(y=h.g[H],v=Ne(y,v,S,U),v>-1&&(ye(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[H],h.h--)))):h&&(h=Is(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ne(y,v,S,U)),(v=h>-1?y[h]:null)&&Va(v))}function Va(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ae])we(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(mi(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Is(y))?(we(v,h),v.h==0&&(v.src=null,y[qe]=null)):ye(h)}}}function mi(h){return h in zt?zt[h]:zt[h]="on"+h}function fl(h,y){if(h.da)h=!0;else{y=new ue(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Va(h),h=v.call(S,y)}return h}function Is(h){return h=h[qe],h instanceof ce?h:null}var dl="__closure_events_fn_"+(Math.random()*1e9>>>0);function ml(h){return typeof h=="function"?h:(h[dl]||(h[dl]=function(y){return h.handleEvent(y)}),h[dl])}function wt(){D.call(this),this.i=new ce(this),this.M=this,this.G=null}E(wt,D),wt.prototype[Ae]=!0,wt.prototype.removeEventListener=function(h,y,v,S){Da(this,h,y,v,S)};function Lt(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var U=y;y=new V(S,h),ae(y,U)}U=!0;let H,te;if(v)for(te=v.length-1;te>=0;te--)H=y.g=v[te],U=br(H,S,!0,y)&&U;if(H=y.g=h,U=br(H,S,!0,y)&&U,U=br(H,S,!1,y)&&U,v)for(te=0;te<v.length;te++)H=y.g=v[te],U=br(H,S,!1,y)&&U}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)ye(v[S]);delete h.g[y],h.h--}}this.G=null},wt.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},wt.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function br(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let H=0;H<y.length;++H){const te=y[H];if(te&&!te.da&&te.capture==v){const Re=te.listener,Tt=te.ha||te.src;te.fa&&we(h.i,te),U=Re.call(Tt,S)!==!1&&U}}return U&&!S.defaultPrevented}function gd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function hc(h){h.g=gd(()=>{h.g=null,h.i&&(h.i=!1,hc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class un extends D{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:hc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(h){D.call(this),this.h=h,this.g={}}E(xs,D);var gl=[];function pl(h){Ue(h.g,function(y,v){this.g.hasOwnProperty(v)&&Va(y)},h),h.g={}}xs.prototype.N=function(){xs.Z.N.call(this),pl(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sr=c.JSON.stringify,pd=c.JSON.parse,fc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function dc(){}function mc(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){V.call(this,"d")}E(Qt,V);function kn(){V.call(this,"c")}E(kn,V);var vt={},gc=null;function Oa(){return gc=gc||new wt}vt.Ia="serverreachability";function pc(h){V.call(this,vt.Ia,h)}E(pc,V);function gi(h){const y=Oa();Lt(y,new pc(y))}vt.STAT_EVENT="statevent";function Rs(h,y){V.call(this,vt.STAT_EVENT,h),this.stat=y}E(Rs,V);function It(h){const y=Oa();Lt(y,new Rs(y,h))}vt.Ja="timingevent";function pi(h,y){V.call(this,vt.Ja,h),this.size=y}E(pi,V);function yi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function yd(h,y,v,S,U,H){h.info(function(){if(h.g)if(H){var te="",Re=H.split("&");for(let Ke=0;Ke<Re.length;Ke++){var Tt=Re[Ke].split("=");if(Tt.length>1){const ht=Tt[0];Tt=Tt[1];const Un=ht.split("_");te=Un.length>=2&&Un[1]=="type"?te+(ht+"="+Tt+"&"):te+(ht+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+y+`
`+v+`
`+te})}function yc(h,y,v,S,U,H,te){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+y+`
`+v+`
`+H+" "+te})}function _i(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+_d(h,v)+(S?" "+S:"")})}function Cs(h,y){h.info(function(){return"TIMEOUT: "+y})}Jn.prototype.info=function(){};function _d(h,y){if(!h.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(h=0;h<H.length;h++)if(Array.isArray(H[h])){var v=H[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let te=1;te<S.length;te++)S[te]=""}}}}return Sr(H)}catch{return y}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_l;function Ds(){}E(Ds,dc),Ds.prototype.g=function(){return new XMLHttpRequest},_l=new Ds;function Gi(h){return encodeURIComponent(String(h))}function _c(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Wn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var xt={},qt={};function vi(h,y,v){h.M=1,h.A=Vs(Ct(y)),h.u=v,h.R=!0,Ma(h,null)}function Ma(h,y){h.F=Date.now(),Ti(h),h.B=Ct(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),La(v.i,"t",S),h.C=0,v=h.j.L,h.h=new ei,h.g=Oc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new un(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(gl[0]=U.toString()),U=gl);for(let H=0;H<U.length;H++){const te=ct(v,U[H],S||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),gi(),yd(h.i,h.v,h.B,h.l,h.S,h.u)}Wn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ii(h)==3?y.j():this.Y(h)},Wn.prototype.Y=function(h){try{if(h==this.g)e:{const Re=ii(this.g),Tt=this.g.ya(),Ke=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Re!=4||Tt==7||(Tt==8||Ke<=0?gi(3):gi(2)),Ei(this);var y=this.g.ca();this.X=y;var v=vd(this);if(this.o=y==200,yc(this.i,this.v,this.B,this.l,this.S,Re,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(S)){var H=S;break t}}H=null}if(h=H)_i(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bi(this,h);else{this.o=!1,this.m=3,It(12),bn(this),Pn(this);break e}}if(this.R){h=!0;let ht;for(;!this.K&&this.C<v.length;)if(ht=Tc(this,v),ht==qt){Re==4&&(this.m=4,It(14),h=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==xt){this.m=4,It(15),_i(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else _i(this.i,this.l,ht,null),bi(this,ht);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||v.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)_i(this.i,this.l,v,"[Invalid Chunked Response]"),bn(this),Pn(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ol(te),te.P=!0,It(11))}}else _i(this.i,this.l,v,null),bi(this,v);Re==4&&bn(this),this.o&&!this.K&&(Re==4?Cc(this.j,this):(this.o=!1,Ti(this)))}else Qi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),bn(this),Pn(this)}}}catch{}finally{}};function vd(h){if(!vc(h))return h.g.la();const y=Yt(h.g);if(y==="")return"";let v="";const S=y.length,U=ii(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bn(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let H=0;H<S;H++)h.h.h=!0,v+=h.h.i.decode(y[H],{stream:!(U&&H==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function vc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Tc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?qt:(v=Number(y.substring(v,S)),isNaN(v)?xt:(S+=1,S+v>y.length?qt:(y=y.slice(S,S+v),h.C=S+v,y)))}Wn.prototype.cancel=function(){this.K=!0,bn(this)};function Ti(h){h.T=Date.now()+h.H,ka(h,h.H)}function ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yi(p(h.aa,h),y)}function Ei(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Wn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Cs(this.i,this.B),this.M!=2&&(gi(),It(17)),bn(this),this.m=2,Pn(this)):ka(this,this.T-h)};function Pn(h){h.j.I==0||h.K||Cc(h.j,h)}function bn(h){Ei(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,pl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function bi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ai(v.h,h))){if(!h.L&&Ai(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Fa(v),Dr(v);else break e;Us(v),It(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=yi(p(v.Va,v),6e3));Si(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ni(v,11)}else if((h.L||v.g==h)&&Fa(v),!w(y))for(U=v.Ba.g.parse(y),y=0;y<U.length;y++){let Ke=U[y];const ht=Ke[0];if(!(ht<=v.K))if(v.K=ht,Ke=Ke[1],v.I==2)if(Ke[0]=="c"){v.M=Ke[1],v.ba=Ke[2];const Un=Ke[3];Un!=null&&(v.ka=Un,v.j.info("VER="+v.ka));const Di=Ke[4];Di!=null&&(v.za=Di,v.j.info("SVER="+v.za));const ri=Ke[5];ri!=null&&typeof ri=="number"&&ri>0&&(S=1.5*ri,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const si=h.g;if(si){const js=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(js){var H=S.h;H.g||js.indexOf("spdy")==-1&&js.indexOf("quic")==-1&&js.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(El(H,H.h),H.h=null))}if(S.G){const Ha=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(S.wa=Ha,$e(S.J,S.G,Ha))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var te=h;if(S.na=Vc(S,S.L?S.ba:null,S.W),te.L){bl(S.h,te);var Re=te,Tt=S.O;Tt&&(Re.H=Tt),Re.D&&(Ei(Re),Ti(Re)),S.g=te}else xc(S);v.i.length>0&&Ci(v)}else Ke[0]!="stop"&&Ke[0]!="close"||Ni(v,7);else v.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ni(v,7):Dl(v):Ke[0]!="noop"&&v.l&&v.l.qa(Ke),v.A=0)}}gi(4)}catch{}}var Rt=class{constructor(h,y){this.g=h,this.map=y}};function vl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Si(h){return h.h?1:h.g?h.g.size:0}function Ai(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function El(h,y){h.g?h.g.add(y):h.h=y}function bl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}vl.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return k(h.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let U,H=null;S>=0?(U=h[v].substring(0,S),H=h[v].substring(S+1)):U=h[v],y(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Sn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Sn?(this.l=h.l,Ft(this,h.j),this.o=h.o,this.g=h.g,Ar(this,h.u),this.h=h.h,Al(this,wc(h.i)),this.m=h.m):h&&(y=String(h).match(Ec))?(this.l=!1,Ft(this,y[1]||"",!0),this.o=wi(y[2]||""),this.g=wi(y[3]||"",!0),Ar(this,y[4]),this.h=wi(y[5]||"",!0),Al(this,y[6]||"",!0),this.m=wi(y[7]||"")):(this.l=!1,this.i=new Ir(null,this.l))}Sn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Os(y,za,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Os(y,za,!0),"@"),h.push(Gi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Os(v,v.charAt(0)=="/"?wl:bc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Os(v,Sc)),h.join("")},Sn.prototype.resolve=function(h){const y=Ct(this);let v=!!h.j;v?Ft(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Ar(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=y.h.lastIndexOf("/");U!=-1&&(S=y.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let te=0;te<U.length;){const Re=U[te++];Re=="."?S&&te==U.length&&H.push(""):Re==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&te==U.length&&H.push("")):(H.push(Re),S=!0)}S=H.join("/")}else S=U}return v?y.h=S:v=h.i.toString()!=="",v?Al(y,wc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Ct(h){return new Sn(h)}function Ft(h,y,v){h.j=v?wi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ar(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Al(h,y,v){y instanceof Ir?(h.i=y,Ua(h.i,h.l)):(v||(y=Os(y,wr)),h.i=new Ir(y,h.l))}function $e(h,y,v){h.i.set(y,v)}function Vs(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function wi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Os(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,dn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var za=/[#\/\?@]/g,bc=/[#\?:]/g,wl=/[#\?]/g,wr=/[#\?@]/g,Sc=/#/g;function Ir(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&Pa(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Ir.prototype,s.add=function(h,y){mn(this),this.i=null,h=xr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ac(h,y){mn(h),y=xr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Il(h,y){return mn(h),y=xr(h,y),h.g.has(y)}s.forEach=function(h,y){mn(this),this.g.forEach(function(v,S){v.forEach(function(U){h.call(y,U,S,this)},this)},this)};function xl(h,y){mn(h);let v=[];if(typeof y=="string")Il(h,y)&&(v=v.concat(h.g.get(xr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return mn(this),this.i=null,h=xr(this,h),Il(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=xl(this,h),h.length>0?String(h[0]):y):y};function La(h,y,v){Ac(h,y),v.length>0&&(h.i=null,h.g.set(xr(h,y),k(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const U=Gi(v);v=xl(this,v);for(let H=0;H<v.length;H++){let te=U;v[H]!==""&&(te+="="+Gi(v[H])),h.push(te)}}return this.i=h.join("&")};function wc(h){const y=new Ir;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function xr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ua(h,y){y&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(v,S){const U=S.toLowerCase();S!=U&&(Ac(this,S),La(this,U,v))},h)),h.j=y}function ti(h,y){const v=new Jn;if(c.Image){const S=new Image;S.onload=T(zn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=T(zn,v,"TestLoadImage: error",!1,y,S),S.onabort=T(zn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=T(zn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Rl(h,y){const v=new Jn,S=new AbortController,U=setTimeout(()=>{S.abort(),zn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(H=>{clearTimeout(U),H.ok?zn(v,"TestPingServer: ok",!0,y):zn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),zn(v,"TestPingServer: error",!1,y)})}function zn(h,y,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Rr(){this.g=new fc}function Ii(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ii,dc),Ii.prototype.g=function(){return new Ms(this.i,this.h)};function Ms(h,y){wt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ms,wt),s=Ms.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ni(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Cr(this):ni(this),this.readyState==3&&ja(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Cr(this))},s.Na=function(h){this.g&&(this.response=h,Cr(this))},s.ga=function(){this.g&&Cr(this)};function Cr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ni(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ms.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Ue(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function ks(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ln(v),typeof h=="string"?v!=null&&Gi(v):$e(h,y,v))}function tt(h){wt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(tt,wt);var xi=/^https?$/i,Cl=["POST","PUT"];s=tt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_l.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(H){Ps(this,H);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())v.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),U=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Cl,y,void 0)>=0)||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of v)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(H){Ps(this,H)}};function Ps(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Nl(h),Ki(h)}function Nl(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Lt(this,"complete"),Lt(this,"abort"),Ki(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),tt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zs(this):this.Xa())},s.Xa=function(){zs(this)};function zs(h){if(h.h&&typeof u<"u"){if(h.v&&ii(h)==4)setTimeout(h.Ca.bind(h),0);else if(Lt(h,"readystatechange"),ii(h)==4){h.h=!1;try{const H=h.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=H===0){let te=String(h.D).match(Ec)[1]||null;!te&&c.self&&c.self.location&&(te=c.self.location.protocol.slice(0,-1)),S=!xi.test(te?te.toLowerCase():"")}v=S}if(v)Lt(h,"complete"),Lt(h,"success");else{h.o=6;try{var U=ii(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",Nl(h)}}finally{Ki(h)}}}}function Ki(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Lt(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ii(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),pd(y)}};function Yt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(h){const y={};h=(h.g&&ii(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(w(h[S]))continue;var v=_c(h[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=y[U]||[];y[U]=H,H.push(v)}Xe(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Nr(h){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,h),this.Za=Ri("retryDelaySeedMs",1e4,h),this.Ta=Ri("forwardChannelMaxRetries",2,h),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new vl(h&&h.concurrentRequestLimit),this.Ba=new Rr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Nr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){It(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Vc(this,null,this.W),Ci(this)};function Dl(h){if(Ba(h),h.I==3){var y=h.V++,v=Ct(h.J);if($e(v,"SID",h.M),$e(v,"RID",y),$e(v,"TYPE","terminate"),Ls(h,v),y=new Wn(h,h.j,y),y.M=2,y.A=Vs(Ct(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Oc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ti(y)}Dc(h)}function Dr(h){h.g&&(Ol(h),h.g.cancel(),h.g=null)}function Ba(h){Dr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Fa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ci(h){if(!Tl(h.h)&&!h.m){h.m=!0;var y=h.Ea;be||x(),ge||(be(),ge=!0),C.add(y,h),h.D=0}}function qa(h,y){return Si(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yi(p(h.Ea,h,y),Nc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new Wn(this,this.j,h);let H=this.o;if(this.U&&(H?(H=M(H),ae(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Ic(this,U,y),v=Ct(this.J),$e(v,"RID",h),$e(v,"CVER",22),this.G&&$e(v,"X-HTTP-Session-Id",this.G),Ls(this,v),H&&(this.R?y="headers="+Gi(Ln(H))+"&"+y:this.u&&ks(v,this.u,H)),El(this.h,U),this.Ra&&$e(v,"TYPE","init"),this.S?($e(v,"$req",y),$e(v,"SID","null"),U.U=!0,vi(U,v,null)):vi(U,v,y),this.I=2}}else this.I==3&&(h?Vl(this,h):this.i.length==0||Tl(this.h)||Vl(this))};function Vl(h,y){var v;y?v=y.l:v=h.V++;const S=Ct(h.J);$e(S,"SID",h.M),$e(S,"RID",v),$e(S,"AID",h.K),Ls(h,S),h.u&&h.o&&ks(S,h.u,h.o),v=new Wn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ic(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),El(h.h,v),vi(v,S,y)}function Ls(h,y){h.H&&Ue(h.H,function(v,S){$e(y,S,v)}),h.l&&Ue({},function(v,S){$e(y,S,v)})}function Ic(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var U=h.i;let Re=-1;for(;;){const Tt=["count="+v];Re==-1?v>0?(Re=U[0].g,Tt.push("ofs="+Re)):Re=0:Tt.push("ofs="+Re);let Ke=!0;for(let ht=0;ht<v;ht++){var H=U[ht].g;const Un=U[ht].map;if(H-=Re,H<0)Re=Math.max(0,U[ht].g-100),Ke=!1;else try{H="req"+H+"_"||"";try{var te=Un instanceof Map?Un:Object.entries(Un);for(const[Di,ri]of te){let si=ri;m(ri)&&(si=Sr(ri)),Tt.push(H+Di+"="+encodeURIComponent(si))}}catch(Di){throw Tt.push(H+"type="+encodeURIComponent("_badmap")),Di}}catch{S&&S(Un)}}if(Ke){te=Tt.join("&");break e}}te=void 0}return h=h.i.splice(0,v),y.G=h,te}function xc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;be||x(),ge||(be(),ge=!0),C.add(y,h),h.A=0}}function Us(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yi(p(h.Da,h),Nc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Rc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yi(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Dr(this),Rc(this))};function Ol(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Rc(h){h.g=new Wn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ct(h.na);$e(y,"RID","rpc"),$e(y,"SID",h.M),$e(y,"AID",h.K),$e(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(y,"TO",h.ia),$e(y,"TYPE","xmlhttp"),Ls(h,y),h.u&&h.o&&ks(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Vs(Ct(y)),v.u=null,v.R=!0,Ma(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Dr(this),Us(this),It(19))};function Fa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Cc(h,y){var v=null;if(h.g==y){Fa(h),Ol(h),h.g=null;var S=2}else if(Ai(h.h,y))v=y.G,bl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var U=h.D;S=Oa(),Lt(S,new pi(S,v)),Ci(h)}else xc(h);else if(U=y.m,U==3||U==0&&y.X>0||!(S==1&&qa(h,y)||S==2&&Us(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),U){case 1:Ni(h,5);break;case 4:Ni(h,10);break;case 3:Ni(h,6);break;default:Ni(h,2)}}}function Nc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ni(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const U=!S;S=new Sn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(S,"https"),Vs(S),U?ti(S.toString(),v):Rl(S.toString(),v)}else It(2);h.I=0,h.l&&h.l.pa(y),Dc(h),Ba(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Dc(h){if(h.I=0,h.ja=[],h.l){const y=Sl(h.h);(y.length!=0||h.i.length!=0)&&($(h.ja,y),$(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function Vc(h,y,v){var S=v instanceof Sn?Ct(v):new Sn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ar(S,S.u);else{var U=c.location;S=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const H=new Sn(null);S&&Ft(H,S),y&&(H.g=y),U&&Ar(H,U),v&&(H.h=v),S=H}return v=h.G,y=h.wa,v&&y&&$e(S,v,y),$e(S,"VER",h.ka),Ls(h,S),S}function Oc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new tt(new Ii({ab:v})):new tt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}s=Mc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Vr(){}Vr.prototype.g=function(h,y){return new cn(h,y)};function cn(h,y){wt.call(this),this.g=new Nr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!w(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Yi(this)}E(cn,wt),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Dl(this.g)},cn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Sr(h),h=v);y.i.push(new Rt(y.Ya++,h)),y.I==3&&Ci(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,Dl(this.g),delete this.g,cn.Z.N.call(this)};function kc(h){Qt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(kc,Qt);function Pc(){kn.call(this),this.status=1}E(Pc,kn);function Yi(h){this.g=h}E(Yi,Mc),Yi.prototype.ra=function(){Lt(this.g,"a")},Yi.prototype.qa=function(h){Lt(this.g,new kc(h))},Yi.prototype.pa=function(h){Lt(this.g,new Pc)},Yi.prototype.oa=function(){Lt(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,n1=function(){return new Vr},t1=function(){return Oa()},e1=vt,Gg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Wh=Ns,yl.COMPLETE="complete",Wb=yl,mc.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Su=mc,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,Jb=tt}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const OT="@firebase/firestore",MT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Sp("@firebase/firestore");function xo(){return Ea.logLevel}function ee(s,...e){if(Ea.logLevel<=Le.DEBUG){const t=e.map(Pp);Ea.debug(`Firestore (${ol}): ${s}`,...t)}}function St(s,...e){if(Ea.logLevel<=Le.ERROR){const t=e.map(Pp);Ea.error(`Firestore (${ol}): ${s}`,...t)}}function Bu(s,...e){if(Ea.logLevel<=Le.WARN){const t=e.map(Pp);Ea.warn(`Firestore (${ol}): ${s}`,...t)}}function Pp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,i1(s,r,t)}function i1(s,e,t){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw St(r),new Error(r)}function pe(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||i1(e,o,r)}function de(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends vr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rn.UNAUTHENTICATED)))}shutdown(){}}class Z2{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ms,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ms)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new X2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class J2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new J2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pe(this.o===void 0,3512);const r=u=>{u.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=tC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function Ie(s,e){return s<e?-1:s>e?1:0}function Kg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Ig(o)===Ig(u)?Ie(o,u):Ig(o)?1:-1}return Ie(s.length,e.length)}const nC=55296,iC=57343;function Ig(s){const e=s.charCodeAt(0);return e>=nC&&e<=iC}function jo(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}function r1(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="__name__";class Pi{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=Pi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ie(e.length,t.length)}static compareSegments(e,t){const r=Pi.isNumericId(e),o=Pi.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):Kg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class Ye extends Pi{construct(e,t,r){return new Ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const rC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends Pi{construct(e,t,r){return new gt(e,t,r)}static isValidIdentifier(e){return rC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PT}static keyField(){return new gt([PT])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new le(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new le(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(t)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ye.fromString(e))}static fromName(e){return new oe(Ye.fromString(e).popFirst(5))}static empty(){return new oe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(s,e,t){if(!t)throw new le(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function sC(s,e,t,r){if(e===!0&&r===!0)throw new le(W.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function zT(s){if(!oe.isDocumentKey(s))throw new le(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function LT(s){if(oe.isDocumentKey(s))throw new le(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function a1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Lp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":he(12329,{type:typeof s})}function mr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lp(s);throw new le(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(s,e){const t={typeString:s};return e&&(t.value=e),t}function rc(s,e){if(!a1(s))throw new le(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new le(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=-62135596800,jT=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jT);return new We(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UT)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jT}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rc(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:kt("string",We._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new We(0,0))}static max(){return new ve(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=-1;class vf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Qg(s){return s.fields.find((e=>e.kind===2))}function ra(s){return s.fields.filter((e=>e.kind!==2))}vf.UNKNOWN_ID=-1;class ef{constructor(e,t){this.fieldPath=e,this.kind=t}}class qu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qu(0,Mn.min())}}function o1(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=ve.fromTimestamp(r===1e9?new We(t+1,0):new We(t,r));return new Mn(o,oe.empty(),e)}function l1(s){return new Mn(s.readTime,s.key,Bo)}class Mn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Mn(ve.min(),oe.empty(),Bo)}static max(){return new Mn(ve.max(),oe.empty(),Bo)}}function Up(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(s.documentKey,e.documentKey),t!==0?t:Ie(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Es(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==u1)throw s;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,r)=>{t(e)}))}static reject(e){return new L(((t,r)=>{r(e)}))}static waitFor(e){return new L(((t,r)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>r(g)))})),c=!0,u===o&&t()}))}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next((o=>o?L.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new L(((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((T=>{c[p]=T,++m,m===u&&r(c)}),(T=>o(T)))}}))}static doWhile(e,t){return new L(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="SimpleDb";class qf{static open(e,t,r,o){try{return new qf(t,e.transaction(o,r))}catch(u){throw new Nu(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ms,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Nu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=jp(r.target.error);this.S.reject(new Nu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oC(t)}}class gs{static delete(e){return ee(Dn,"Removing database:",e),aa(lb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gb())return!1;if(gs.F())return!0;const e=jt(),t=gs.M(e),r=0<t&&t<10,o=h1(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,gs.M(jt())===12.2&&St("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Dn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{r(new Nu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new le(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new le(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Nu(e,c))},o.onupgradeneeded=u=>{ee(Dn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ee(Dn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=qf.open(this.db,e,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),L.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ee(Dn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function h1(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class aC{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return aa(this.U.delete())}}class Nu extends le{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bs(s){return s.name==="IndexedDbTransactionError"}class oC{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ee(Dn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ee(Dn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return ee(Dn,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(Dn,"GET",this.store.name,e,t),t)))}delete(e){return ee(Dn,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return ee(Dn,"COUNT",this.store.name),aa(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new L(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){ee(Dn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}te(e){const t=this.cursor({});return new L(((r,o)=>{t.onerror=u=>{const c=jp(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(e,t){const r=[];return new L(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new aC(m),p=t(m.primaryKey,m.value,g);if(p instanceof L){const T=p.catch((E=>(g.done(),L.reject(E))));r.push(T)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>L.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function aa(s){return new L(((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=jp(r.target.error);t(o)}}))}let BT=!1;function jp(s){const e=gs.M(jt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BT||(BT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Du="IndexBackfiller";class lC{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(Du,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ee(Du,`Documents written: ${t}`)}catch(t){bs(t)?ee(Du,"Ignoring IndexedDB error during index backfill: ",t):await Es(t)}await this.re(6e4)}))}}class uC{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,u=!0;return L.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ee(Du,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ee(Du,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,u)=>{const c=l1(u);Up(c,r)>0&&(r=c)})),new Mn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=-1;function Ff(s){return s==null}function Fu(s){return s===0&&1/s==-1/0}function f1(s){return typeof s=="number"&&Number.isInteger(s)&&!Fu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="";function ln(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=qT(e)),e=cC(s.get(t),e);return qT(e)}function cC(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case Tf:t+="";break;default:t+=u}}return t}function qT(s){return s+Tf+""}function Li(s){const e=s.length;if(pe(e>=2,64408,{path:s}),e===2)return pe(s.charAt(0)===Tf&&s.charAt(1)==="",56145,{path:s}),Ye.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=s.indexOf(Tf,u);switch((c<0||c>t)&&he(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:he(61167,{path:s})}u=c+2}return new Ye(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="remoteDocuments",sc="owner",Eo="owner",Hu="mutationQueues",hC="userId",ui="mutations",FT="batchId",ha="userMutationsIndex",HT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(s,e){return[s,ln(e)]}function d1(s,e,t){return[s,ln(e),t]}const fC={},qo="documentMutations",Ef="remoteDocumentsV14",dC=["prefixPath","collectionGroup","readTime","documentId"],nf="documentKeyIndex",mC=["prefixPath","collectionGroup","documentId"],m1="collectionGroupIndex",gC=["collectionGroup","readTime","prefixPath","documentId"],Gu="remoteDocumentGlobal",Yg="remoteDocumentGlobalKey",Fo="targets",g1="queryTargetsIndex",pC=["canonicalId","targetId"],Ho="targetDocuments",yC=["targetId","path"],Bp="documentTargetsIndex",_C=["path","targetId"],bf="targetGlobalKey",ga="targetGlobal",Ku="collectionParents",vC=["collectionId","parent"],Go="clientMetadata",TC="clientId",Hf="bundles",EC="bundleId",Gf="namedQueries",bC="name",qp="indexConfiguration",SC="indexId",Xg="collectionGroupIndex",AC="collectionGroup",Vu="indexState",wC=["indexId","uid"],p1="sequenceNumberIndex",IC=["uid","sequenceNumber"],Ou="indexEntries",xC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y1="documentKeyIndex",RC=["indexId","uid","orderedDocumentKey"],Kf="documentOverlays",CC=["userId","collectionPath","documentId"],$g="collectionPathOverlayIndex",NC=["userId","collectionPath","largestBatchId"],_1="collectionGroupOverlayIndex",DC=["userId","collectionGroup","largestBatchId"],Fp="globals",VC="name",v1=[Hu,ui,qo,sa,Fo,sc,ga,Ho,Go,Gu,Ku,Hf,Gf],OC=[...v1,Kf],T1=[Hu,ui,qo,Ef,Fo,sc,ga,Ho,Go,Gu,Ku,Hf,Gf,Kf],E1=T1,Hp=[...E1,qp,Vu,Ou],MC=Hp,b1=[...Hp,Fp],kC=b1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends c1{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Bt(s,e){const t=de(s);return gs.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ss(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function S1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Wt.RED,this.left=o??Wt.EMPTY,this.right=u??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Wt(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new KT(this.data.getIterator())}getIteratorFrom(e){return new KT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class KT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new En([])}unionWith(e){let t=new et(gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new A1("Invalid base64 string: "+u):u}})(e);return new At(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new At(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const PC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(s){if(pe(!!s,39018),typeof s=="string"){let e=0;const t=PC.exec(s);if(pe(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(s.seconds),nanos:mt(s.nanos)}}function mt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function _r(s){return typeof s=="string"?At.fromBase64String(s):At.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="server_timestamp",I1="__type__",x1="__previous_value__",R1="__local_write_time__";function Gp(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[I1])==null?void 0:r.stringValue)===w1}function Qf(s){const e=s.mapValue.fields[x1];return Gp(e)?Qf(e):e}function Qu(s){const e=yr(s.mapValue.fields[R1].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t,r,o,u,c,m,g,p,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=T}}const Sf="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||Sf}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Sf}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="__type__",C1="__max__",us={mapValue:{fields:{__type__:{stringValue:C1}}}},Qp="__vector__",Ko="value",rf={nullValue:"NULL_VALUE"};function ys(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Gp(s)?4:N1(s)?9007199254740991:Yf(s)?10:11:he(28295,{value:s})}function Hi(s,e){if(s===e)return!0;const t=ys(s);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Qu(s).isEqual(Qu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=yr(o.timestampValue),m=yr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return _r(o.bytesValue).isEqual(_r(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return mt(o.geoPointValue.latitude)===mt(u.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return mt(o.integerValue)===mt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=mt(o.doubleValue),m=mt(u.doubleValue);return c===m?Fu(c)===Fu(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return jo(s.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(GT(c)!==GT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Hi(c[g],m[g])))return!1;return!0})(s,e);default:return he(52216,{left:s})}}function Yu(s,e){return(s.values||[]).find((t=>Hi(t,e)))!==void 0}function _s(s,e){if(s===e)return 0;const t=ys(s),r=ys(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(s.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=mt(u.integerValue||u.doubleValue),g=mt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return QT(s.timestampValue,e.timestampValue);case 4:return QT(Qu(s),Qu(e));case 5:return Kg(s.stringValue,e.stringValue);case 6:return(function(u,c){const m=_r(u),g=_r(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const T=Ie(m[p],g[p]);if(T!==0)return T}return Ie(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Ie(mt(u.latitude),mt(c.latitude));return m!==0?m:Ie(mt(u.longitude),mt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return YT(s.arrayValue,e.arrayValue);case 10:return(function(u,c){var I,k,$,Y;const m=u.fields||{},g=c.fields||{},p=(I=m[Ko])==null?void 0:I.arrayValue,T=(k=g[Ko])==null?void 0:k.arrayValue,E=Ie((($=p==null?void 0:p.values)==null?void 0:$.length)||0,((Y=T==null?void 0:T.values)==null?void 0:Y.length)||0);return E!==0?E:YT(p,T)})(s.mapValue,e.mapValue);case 11:return(function(u,c){if(u===us.mapValue&&c===us.mapValue)return 0;if(u===us.mapValue)return 1;if(c===us.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},T=Object.keys(p);g.sort(),T.sort();for(let E=0;E<g.length&&E<T.length;++E){const I=Kg(g[E],T[E]);if(I!==0)return I;const k=_s(m[g[E]],p[T[E]]);if(k!==0)return k}return Ie(g.length,T.length)})(s.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function QT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ie(s,e);const t=yr(s),r=yr(e),o=Ie(t.seconds,r.seconds);return o!==0?o:Ie(t.nanos,r.nanos)}function YT(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=_s(t[o],r[o]);if(u)return u}return Ie(t.length,r.length)}function Qo(s){return Jg(s)}function Jg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=yr(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return _r(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return oe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=Jg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Jg(t.fields[c])}`;return o+"}"})(s.mapValue):he(61005,{value:s})}function sf(s){switch(ys(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qf(s);return e?16+sf(e):16;case 5:return 2*s.stringValue.length;case 6:return _r(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+sf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Ss(r.fields,((u,c)=>{o+=u.length+sf(c)})),o})(s.mapValue);default:throw he(13486,{value:s})}}function Yp(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Wg(s){return!!s&&"integerValue"in s}function Xu(s){return!!s&&"arrayValue"in s}function XT(s){return!!s&&"nullValue"in s}function $T(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function af(s){return!!s&&"mapValue"in s}function Yf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Kp])==null?void 0:r.stringValue)===Qp}function Mu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ss(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Mu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mu(s.arrayValue.values[t]);return e}return{...s}}function N1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===C1}const D1={mapValue:{fields:{[Kp]:{stringValue:Qp},[Ko]:{arrayValue:{}}}}};function LC(s){return"nullValue"in s?rf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Yp(ba.empty(),oe.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Yf(s)?D1:{mapValue:{}}:he(35942,{value:s})}function UC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Yp(ba.empty(),oe.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?D1:"mapValue"in s?Yf(s)?{mapValue:{}}:us:he(61959,{value:s})}function ZT(s,e){const t=_s(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function JT(s,e){const t=_s(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(t)}setAll(e){let t=gt.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Mu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ss(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new an(Mu(this.value))}}function V1(s){const e=[];return Ss(s.fields,((t,r)=>{const o=new gt([t]);if(af(r)){const u=V1(r.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new _t(e,0,ve.min(),ve.min(),ve.min(),an.empty(),0)}static newFoundDocument(e,t,r,o){return new _t(e,1,t,ve.min(),r,o,0)}static newNoDocument(e,t){return new _t(e,2,t,ve.min(),ve.min(),an.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,ve.min(),ve.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.position=e,this.inclusive=t}}function WT(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],c=s.position[o];if(u.field.isKeyField()?r=oe.comparator(oe.fromName(c.referenceValue),t.key):r=_s(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function eE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Hi(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t="asc"){this.field=e,this.dir=t}}function jC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{}class Be extends O1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new BC(e,t,r):t==="array-contains"?new HC(e,r):t==="in"?new U1(e,r):t==="not-in"?new GC(e,r):t==="array-contains-any"?new KC(e,r):new Be(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qC(e,r):new FC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_s(t,this.value)):t!==null&&ys(this.value)===ys(t)&&this.matchesComparison(_s(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends O1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new st(e,t)}matches(e){return Xo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xo(s){return s.op==="and"}function ep(s){return s.op==="or"}function Xp(s){return M1(s)&&Xo(s)}function M1(s){for(const e of s.filters)if(e instanceof st)return!1;return!0}function tp(s){if(s instanceof Be)return s.field.canonicalString()+s.op.toString()+Qo(s.value);if(Xp(s))return s.filters.map((e=>tp(e))).join(",");{const e=s.filters.map((t=>tp(t))).join(",");return`${s.op}(${e})`}}function k1(s,e){return s instanceof Be?(function(r,o){return o instanceof Be&&r.op===o.op&&r.field.isEqual(o.field)&&Hi(r.value,o.value)})(s,e):s instanceof st?(function(r,o){return o instanceof st&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&k1(c,o.filters[m])),!0):!1})(s,e):void he(19439)}function P1(s,e){const t=s.filters.concat(e);return st.create(t,s.op)}function z1(s){return s instanceof Be?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(s):s instanceof st?(function(t){return t.op.toString()+" {"+t.getFilters().map(z1).join(" ,")+"}"})(s):"Filter"}class BC extends Be{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class qC extends Be{constructor(e,t){super(e,"in",t),this.keys=L1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FC extends Be{constructor(e,t){super(e,"not-in",t),this.keys=L1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L1(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>oe.fromName(r.referenceValue)))}class HC extends Be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xu(t)&&Yu(t.arrayValue,this.value)}}class U1 extends Be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yu(this.value.arrayValue,t)}}class GC extends Be{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yu(this.value.arrayValue,t)}}class KC extends Be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function np(s,e=null,t=[],r=[],o=null,u=null,c=null){return new QC(s,e,t,r,o,u,c)}function Sa(s){const e=de(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>tp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Qo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Qo(r))).join(",")),e.Te=t}return e.Te}function ac(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!jC(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!k1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!eE(s.startAt,e.startAt)&&eE(s.endAt,e.endAt)}function wf(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function If(s,e){return s.filters.filter((t=>t instanceof Be&&t.field.isEqual(e)))}function tE(s,e,t){let r=rf,o=!0;for(const u of If(s,e)){let c=rf,m=!0;switch(u.op){case"<":case"<=":c=LC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=rf}ZT({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];ZT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function nE(s,e,t){let r=us,o=!0;for(const u of If(s,e)){let c=us,m=!0;switch(u.op){case">=":case">":c=UC(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=us}JT({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];JT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function j1(s,e,t,r,o,u,c,m){return new Xf(s,e,t,r,o,u,c,m)}function $f(s){return new Xf(s)}function iE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function YC(s){return s.collectionGroup!==null}function ku(s){const e=de(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new et(gt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Af(u,r))})),t.has(gt.keyField().canonicalString())||e.Ie.push(new Af(gt.keyField(),r))}return e.Ie}function On(s){const e=de(s);return e.Ee||(e.Ee=XC(e,ku(s))),e.Ee}function XC(s,e){if(s.limitType==="F")return np(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Af(o.field,u)}));const t=s.endAt?new Yo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Yo(s.startAt.position,s.startAt.inclusive):null;return np(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function ip(s,e,t){return new Xf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Zf(s,e){return ac(On(s),On(e))&&s.limitType===e.limitType}function B1(s){return`${Sa(On(s))}|lt:${s.limitType}`}function Ro(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>z1(o))).join(", ")}]`),Ff(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Qo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Qo(o))).join(",")),`Target(${r})`})(On(s))}; limitType=${s.limitType})`}function oc(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):oe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of ku(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=WT(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,ku(r),o)||r.endAt&&!(function(c,m,g){const p=WT(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,ku(r),o))})(s,e)}function q1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function F1(s){return(e,t)=>{let r=!1;for(const o of ku(s)){const u=$C(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function $C(s,e,t){const r=s.field.isKeyField()?oe.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?_s(g,p):he(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return S1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new ot(oe.comparator);function Vn(){return ZC}const H1=new ot(oe.comparator);function Au(...s){let e=H1;for(const t of s)e=e.insert(t.key,t);return e}function G1(s){let e=H1;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ui(){return Pu()}function K1(){return Pu()}function Pu(){return new Tr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const JC=new ot(oe.comparator),WC=new et(oe.comparator);function Ve(...s){let e=WC;for(const t of s)e=e.add(t);return e}const eN=new et(Ie);function $p(){return eN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function Q1(s){return{integerValue:""+s}}function tN(s,e){return f1(e)?Q1(e):Zp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function nN(s,e,t){return s instanceof $o?(function(o,u){const c={fields:{[I1]:{stringValue:w1},[R1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Gp(u)&&(u=Qf(u)),u&&(c.fields[x1]=u),{mapValue:c}})(t,e):s instanceof Zo?X1(s,e):s instanceof Jo?$1(s,e):(function(o,u){const c=Y1(o,u),m=rE(c)+rE(o.Ae);return Wg(c)&&Wg(o.Ae)?Q1(m):Zp(o.serializer,m)})(s,e)}function iN(s,e,t){return s instanceof Zo?X1(s,e):s instanceof Jo?$1(s,e):t}function Y1(s,e){return s instanceof $u?(function(r){return Wg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class $o extends Jf{}class Zo extends Jf{constructor(e){super(),this.elements=e}}function X1(s,e){const t=Z1(e);for(const r of s.elements)t.some((o=>Hi(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Jo extends Jf{constructor(e){super(),this.elements=e}}function $1(s,e){let t=Z1(e);for(const r of s.elements)t=t.filter((o=>!Hi(o,r)));return{arrayValue:{values:t}}}class $u extends Jf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rE(s){return mt(s.integerValue||s.doubleValue)}function Z1(s){return Xu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t){this.field=e,this.transform=t}}function rN(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Zo&&o instanceof Zo||r instanceof Jo&&o instanceof Jo?jo(r.elements,o.elements,Hi):r instanceof $u&&o instanceof $u?Hi(r.Ae,o.Ae):r instanceof $o&&o instanceof $o})(s.transform,e.transform)}class sN{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function of(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Wf{}function W1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ed(s.key,on.none()):new ll(s.key,s.data,on.none());{const t=s.data,r=an.empty();let o=new et(gt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Er(s.key,r,new En(o.toArray()),on.none())}}function aN(s,e,t){s instanceof ll?(function(o,u,c){const m=o.value.clone(),g=aE(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Er?(function(o,u,c){if(!of(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=aE(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(eS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function zu(s,e,t,r){return s instanceof ll?(function(u,c,m,g){if(!of(u.precondition,c))return m;const p=u.value.clone(),T=oE(u.fieldTransforms,g,c);return p.setAll(T),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof Er?(function(u,c,m,g){if(!of(u.precondition,c))return m;const p=oE(u.fieldTransforms,g,c),T=c.data;return T.setAll(eS(u)),T.setAll(p),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(u,c,m){return of(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function oN(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=Y1(r.transform,o||null);u!=null&&(t===null&&(t=an.empty()),t.set(r.field,u))}return t||null}function sE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jo(r,o,((u,c)=>rN(u,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ll extends Wf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Er extends Wf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function eS(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function aE(s,e,t){const r=new Map;pe(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,iN(c,m,t[o]))}return r}function oE(s,e,t){const r=new Map;for(const o of s){const u=o.transform,c=t.data.field(o.field);r.set(o.field,nN(u,c,e))}return r}class ed extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tS extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&aN(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=K1();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=W1(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(ve.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((t,r)=>sE(t,r)))&&jo(this.baseMutations,e.baseMutations,((t,r)=>sE(t,r)))}}class Wp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return JC})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Wp(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Fe;function uN(s){switch(s){case W.OK:return he(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return he(15467,{code:s})}}function nS(s){if(s===void 0)return St("GRPC error has no .code"),W.UNKNOWN;switch(s){case Mt.OK:return W.OK;case Mt.CANCELLED:return W.CANCELLED;case Mt.UNKNOWN:return W.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return W.INTERNAL;case Mt.UNAVAILABLE:return W.UNAVAILABLE;case Mt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Mt.NOT_FOUND:return W.NOT_FOUND;case Mt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Mt.ABORTED:return W.ABORTED;case Mt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Mt.DATA_LOSS:return W.DATA_LOSS;default:return he(39323,{code:s})}}(Fe=Mt||(Mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new ds([4294967295,4294967295],0);function lE(s){const e=cN().encode(s),t=new Zb;return t.update(e),new Uint8Array(t.digest())}function uE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ds([t,r],0),new ds([o,u],0)]}class ty{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ds.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(ds.fromNumber(r)));return o.compare(hN)===1&&(o=new ds([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lE(e),[r,o]=uE(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new ty(u,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=lE(e),[r,o]=uE(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lc(ve.min(),o,new ot(Ie),Vn(),Ve())}}class uc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new uc(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class iS{constructor(e,t){this.targetId=e,this.Ce=t}}class rS{constructor(e,t,r=At.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class cE{constructor(){this.ve=0,this.Fe=hE(),this.Me=At.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),r=Ve();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:he(38017,{changeType:u})}})),new uc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=hE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vn(),this.Je=Fh(),this.He=Fh(),this.Ye=new ot(Ie)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(wf(u))if(r===0){const c=new oe(u.path);this.et(t,c,_t.newNoDocument(c,ve.min()))}else pe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=_r(r).toUint8Array()}catch(g){if(g instanceof A1)return Bu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ty(c,o,u)}catch(g){return Bu(g instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&wf(m.target)){const g=new oe(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,_t.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let r=Ve();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new lc(e,t,this.Ye,this.je,r);return this.je=Vn(),this.Je=Fh(),this.He=Fh(),this.Ye=new ot(Ie),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new cE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new et(Ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new et(Ie),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Fh(){return new ot(oe.comparator)}function hE(){return new ot(oe.comparator)}const dN={asc:"ASCENDING",desc:"DESCENDING"},mN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gN={and:"AND",or:"OR"};class pN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rp(s,e){return s.useProto3Json||Ff(e)?e:{value:e}}function Wo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function yN(s,e){return Wo(s,e.toTimestamp())}function fn(s){return pe(!!s,49232),ve.fromTimestamp((function(t){const r=yr(t);return new We(r.seconds,r.nanos)})(s))}function ny(s,e){return sp(s,e).canonicalString()}function sp(s,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function aS(s){const e=Ye.fromString(s);return pe(gS(e),10190,{key:e.toString()}),e}function xf(s,e){return ny(s.databaseId,e.path)}function pa(s,e){const t=aS(e);if(t.get(1)!==s.databaseId.projectId)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new oe(uS(t))}function oS(s,e){return ny(s.databaseId,e)}function lS(s){const e=aS(s);return e.length===4?Ye.emptyPath():uS(e)}function ap(s){return new Ye(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function uS(s){return pe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function fE(s,e,t){return{name:xf(s,e),fields:t.value.mapValue.fields}}function _N(s,e,t){const r=pa(s,e.name),o=fn(e.updateTime),u=e.createTime?fn(e.createTime):ve.min(),c=new an({mapValue:{fields:e.fields}}),m=_t.newFoundDocument(r,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function vN(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:he(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,T){return p.useProto3Json?(pe(T===void 0||typeof T=="string",58123),At.fromBase64String(T||"")):(pe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),At.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const T=p.code===void 0?W.UNKNOWN:nS(p.code);return new le(T,p.message||"")})(c);t=new rS(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=pa(s,r.document.name),u=fn(r.document.updateTime),c=r.document.createTime?fn(r.document.createTime):ve.min(),m=new an({mapValue:{fields:r.document.fields}}),g=_t.newFoundDocument(o,u,c,m),p=r.targetIds||[],T=r.removedTargetIds||[];t=new lf(p,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=pa(s,r.document),u=r.readTime?fn(r.readTime):ve.min(),c=_t.newNoDocument(o,u),m=r.removedTargetIds||[];t=new lf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=pa(s,r.document),u=r.removedTargetIds||[];t=new lf([],u,o,null)}else{if(!("filter"in e))return he(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new lN(o,u),m=r.targetId;t=new iS(m,c)}}return t}function Rf(s,e){let t;if(e instanceof ll)t={update:fE(s,e.key,e.value)};else if(e instanceof ed)t={delete:xf(s,e.key)};else if(e instanceof Er)t={update:fE(s,e.key,e.data),updateMask:wN(e.fieldMask)};else{if(!(e instanceof tS))return he(16599,{Vt:e.type});t={verify:xf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof $o)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Zo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Jo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $u)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw he(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:yN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:he(27497)})(s,e.precondition)),t}function op(s,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?on.updateTime(fn(u.updateTime)):u.exists!==void 0?on.exists(u.exists):on.none()})(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)pe(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new $o;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];g=new Zo(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];g=new Jo(T)}else"increment"in m?g=new $u(c,m.increment):he(16584,{proto:m});const p=gt.fromServerFormat(m.fieldPath);return new J1(p,g)})(s,o))):[];if(e.update){e.update.name;const o=pa(s,e.update.name),u=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new En(p.map((T=>gt.fromServerFormat(T))))})(e.updateMask);return new Er(o,u,c,t,r)}return new ll(o,u,t,r)}if(e.delete){const o=pa(s,e.delete);return new ed(o,t)}if(e.verify){const o=pa(s,e.verify);return new tS(o,t)}return he(1463,{proto:e})}function TN(s,e){return s&&s.length>0?(pe(e!==void 0,14353),s.map((t=>(function(o,u){let c=o.updateTime?fn(o.updateTime):fn(u);return c.isEqual(ve.min())&&(c=fn(u)),new sN(c,o.transformResults||[])})(t,e)))):[]}function cS(s,e){return{documents:[oS(s,e.path)]}}function hS(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oS(s,o);const u=(function(p){if(p.length!==0)return mS(st.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((T=>(function(I){return{field:Co(I.field),direction:bN(I.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=rp(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function fS(s){let e=lS(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){pe(r===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=(function(E){const I=dS(E);return I instanceof st&&Xp(I)?I.getFilters():[I]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((I=>(function($){return new Af(No($.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(I)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let I;return I=typeof E=="object"?E.value:E,Ff(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,k=E.values||[];return new Yo(k,I)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const I=!E.before,k=E.values||[];return new Yo(k,I)})(t.endAt)),j1(e,o,c,u,m,"F",g,p)}function EN(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=No(t.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return Be.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=No(t.unaryFilter.field);return Be.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return Be.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Be.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return st.create(t.compositeFilter.filters.map((r=>dS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(s):he(30097,{filter:s})}function bN(s){return dN[s]}function SN(s){return mN[s]}function AN(s){return gN[s]}function Co(s){return{fieldPath:s.canonicalString()}}function No(s){return gt.fromServerFormat(s.fieldPath)}function mS(s){return s instanceof Be?(function(t){if(t.op==="=="){if($T(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(XT(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($T(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(XT(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:SN(t.op),value:t.value}}})(s):s instanceof st?(function(t){const r=t.getFilters().map((o=>mS(o)));return r.length===1?r[0]:{compositeFilter:{op:AN(t.op),filters:r}}})(s):he(54877,{filter:s})}function wN(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t,r,o,u=ve.min(),c=ve.min(),m=At.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.yt=e}}function IN(s,e){let t;if(e.document)t=_N(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),o=wa(e.noDocument.readTime);t=_t.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const r=oe.fromSegments(e.unknownDocument.path),o=wa(e.unknownDocument.version);t=_t.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const u=new We(o[0],o[1]);return ve.fromTimestamp(u)})(e.readTime)),t}function dE(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(u,c){return{name:xf(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Wo(u,c.version.toTimestamp()),createTime:Wo(u,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Aa(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Aa(e.version)}}return r}function Cf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Aa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wa(s){const e=new We(s.seconds,s.nanoseconds);return ve.fromTimestamp(e)}function oa(s,e){const t=(e.baseMutations||[]).map((u=>op(s.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map((u=>op(s.yt,u))),o=We.fromMillis(e.localWriteTimeMs);return new Jp(e.batchId,o,t,r)}function Iu(s){const e=wa(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?wa(s.lastLimboFreeSnapshotVersion):ve.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return pe(c===1,1966,{count:c}),On($f(lS(u.documents[0])))})(s.query):(function(u){return On(fS(u))})(s.query),new dr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,At.fromBase64String(s.resumeToken))}function yS(s,e){const t=Aa(e.snapshotVersion),r=Aa(e.lastLimboFreeSnapshotVersion);let o;o=wf(e.target)?cS(s.yt,e.target):hS(s.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sa(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function _S(s){const e=fS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ip(e,e.limit,"L"):e}function xg(s,e){return new ey(e.largestBatchId,op(s.yt,e.overlayMutation))}function mE(s,e){const t=e.path.lastSegment();return[s,ln(e.path.popLast()),t]}function gE(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Aa(r.readTime),documentKey:ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{getBundleMetadata(e,t){return pE(e).get(t).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:wa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(e,t){return pE(e).put((function(o){return{bundleId:o.id,createTime:Aa(fn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return yE(e).get(t).next((r=>{if(r)return(function(u){return{name:u.name,query:_S(u.bundledQuery),readTime:wa(u.readTime)}})(r)}))}saveNamedQuery(e,t){return yE(e).put((function(o){return{name:o.name,readTime:Aa(fn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function pE(s){return Bt(s,Hf)}function yE(s){return Bt(s,Gf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new td(e,r)}getOverlay(e,t){return _u(e).get(mE(this.userId,t)).next((r=>r?xg(this.serializer,r):null))}getOverlays(e,t){const r=Ui();return L.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((u,c)=>{const m=new ey(t,c);o.push(this.St(e,m))})),L.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(ln(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(_u(e).Z($g,m))})),L.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ui(),u=ln(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return _u(e).J($g,c).next((m=>{for(const g of m){const p=xg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const u=Ui();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _u(e).ee({index:_1,range:m},((g,p,T)=>{const E=xg(this.serializer,p);u.size()<o||E.largestBatchId===c?(u.set(E.getKey(),E),c=E.largestBatchId):T.done()})).next((()=>u))}St(e,t){return _u(e).put((function(o,u,c){const[m,g,p]=mE(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Rf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function _u(s){return Bt(s,Kf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{bt(e){return Bt(e,Fp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?At.fromUint8Array(r):At.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Fu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=yr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_r(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?N1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Yf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):he(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){var c,m;const r=e.fields||{};this.Ft(t,53);const o=Ko,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(t,15),t.Mt(mt(u)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}la.Kt=new la;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=255;function CN(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function _E(s){const e=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=CN(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(e/8)}class NN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),r=_E(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=_E(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(So),this.sn(255)}_n(){this.an(So),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===So?(this.sn(So),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===So?(this.an(So),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class DN{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class VN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class vu{constructor(){this.cn=new NN,this.ln=new DN(this.cn),this.hn=new VN(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t,r,o){this.Tn=e,this.In=t,this.En=r,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ua(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:uf(this.En),directionalValue:uf(this.dn),orderedDocumentKey:uf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function ns(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=vE(s.En,e.En),t!==0?t:(t=vE(s.dn,e.dn),t!==0?t:oe.comparator(s.In,e.In)))}function vE(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function uf(s){return mb()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(s):s}function TE(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(s)}class EE{constructor(e){this.mn=new et(((t,r)=>gt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(pe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Qg(e);if(t!==void 0&&!this.wn(t))return!1;const r=ra(e);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new et(gt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ef(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ef(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ef(r.field,r.dir==="asc"?0:1)));return new vf(vf.UNKNOWN_ID,this.collectionId,t,qu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(s){var t,r;if(pe(s instanceof Be||s instanceof st,20012),s instanceof Be){if(s instanceof U1){const o=((r=(t=s.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((u=>Be.create(s.field,"==",u))))||[];return st.create(o,"or")}return s}const e=s.filters.map((o=>vS(o)));return st.create(e,s.op)}function ON(s){if(s.getFilters().length===0)return[];const e=cp(vS(s));return pe(TS(e),7391),lp(e)||up(e)?[e]:e.getFilters()}function lp(s){return s instanceof Be}function up(s){return s instanceof st&&Xp(s)}function TS(s){return lp(s)||up(s)||(function(t){if(t instanceof st&&ep(t)){for(const r of t.getFilters())if(!lp(r)&&!up(r))return!1;return!0}return!1})(s)}function cp(s){if(pe(s instanceof Be||s instanceof st,34018),s instanceof Be)return s;if(s.filters.length===1)return cp(s.filters[0]);const e=s.filters.map((r=>cp(r)));let t=st.create(e,s.op);return t=Nf(t),TS(t)?t:(pe(t instanceof st,64498),pe(Xo(t),40251),pe(t.filters.length>1,57927),t.filters.reduce(((r,o)=>iy(r,o))))}function iy(s,e){let t;return pe(s instanceof Be||s instanceof st,38388),pe(e instanceof Be||e instanceof st,25473),t=s instanceof Be?e instanceof Be?(function(o,u){return st.create([o,u],"and")})(s,e):bE(s,e):e instanceof Be?bE(e,s):(function(o,u){if(pe(o.filters.length>0&&u.filters.length>0,48005),Xo(o)&&Xo(u))return P1(o,u.getFilters());const c=ep(o)?o:u,m=ep(o)?u:o,g=c.filters.map((p=>iy(p,m)));return st.create(g,"or")})(s,e),Nf(t)}function bE(s,e){if(Xo(e))return P1(e,s.getFilters());{const t=e.filters.map((r=>iy(s,r)));return st.create(t,"or")}}function Nf(s){if(pe(s instanceof Be||s instanceof st,11850),s instanceof Be)return s;const e=s.getFilters();if(e.length===1)return Nf(e[0]);if(M1(s))return s;const t=e.map((o=>Nf(o))),r=[];return t.forEach((o=>{o instanceof Be?r.push(o):o instanceof st&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:st.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.Cn=new ry}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Mn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Mn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class ry{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new et(Ye.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new et(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="IndexedDbIndexManager",Hh=new Uint8Array(0);class kN{constructor(e,t){this.databaseId=t,this.vn=new ry,this.Fn=new Tr((r=>Sa(r)),((r,o)=>ac(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:r,parent:ln(o)};return AE(e).put(u)}return L.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[r1(t),""],!1,!0);return AE(e).J(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Li(c.parent))}return r}))}addFieldIndex(e,t){const r=Tu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=r.add(o);if(t.indexState){const c=wo(e);return u.next((m=>{c.put(gE(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const r=Tu(e),o=wo(e),u=Ao(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Tu(e),r=Ao(e),o=wo(e);return t.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const u=new EE(r).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const r=Ao(e);let o=!0;const u=new Map;return L.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Ve();const m=[];return L.forEach(u,((g,p)=>{ee(SE,`Using index ${(function(ie){return`id=${ie.indexId}|cg=${ie.collectionGroup}|f=${ie.fields.map((Te=>`${Te.fieldPath}:${Te.kind}`)).join(",")}`})(g)} to execute ${Sa(t)}`);const T=(function(ie,Te){const be=Qg(Te);if(be===void 0)return null;for(const ge of If(ie,be.fieldPath))switch(ge.op){case"array-contains-any":return ge.value.arrayValue.values||[];case"array-contains":return[ge.value]}return null})(p,g),E=(function(ie,Te){const be=new Map;for(const ge of ra(Te))for(const C of If(ie,ge.fieldPath))switch(C.op){case"==":case"in":be.set(ge.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return be.set(ge.fieldPath.canonicalString(),C.value),Array.from(be.values())}return null})(p,g),I=(function(ie,Te){const be=[];let ge=!0;for(const C of ra(Te)){const x=C.kind===0?tE(ie,C.fieldPath,ie.startAt):nE(ie,C.fieldPath,ie.startAt);be.push(x.value),ge&&(ge=x.inclusive)}return new Yo(be,ge)})(p,g),k=(function(ie,Te){const be=[];let ge=!0;for(const C of ra(Te)){const x=C.kind===0?nE(ie,C.fieldPath,ie.endAt):tE(ie,C.fieldPath,ie.endAt);be.push(x.value),ge&&(ge=x.inclusive)}return new Yo(be,ge)})(p,g),$=this.On(g,p,I),Y=this.On(g,p,k),F=this.Nn(g,p,E),se=this.Bn(g.indexId,T,$,I.inclusive,Y,k.inclusive,F);return L.forEach(se,(re=>r.Y(re,t.limit).next((ie=>{ie.forEach((Te=>{const be=oe.fromSegments(Te.documentKey);c.has(be)||(c=c.add(be),m.push(be))}))}))))})).next((()=>m))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=ON(st.create(e.filters,"and")).map((r=>np(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(r.length,u.length),p=g/(t!=null?t.length:1),T=[];for(let E=0;E<g;++E){const I=t?this.Ln(t[E/p]):Hh,k=this.kn(e,I,r[E%p],o),$=this.qn(e,I,u[E%p],c),Y=m.map((F=>this.kn(e,I,F,!0)));T.push(...this.createRange(k,$,Y))}return T}kn(e,t,r,o){const u=new ua(e,oe.empty(),t,r);return o?u:u.An()}qn(e,t,r,o){const u=new ua(e,oe.empty(),t,r);return o?u.An():u}xn(e,t){const r=new EE(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let r=2;const o=this.Mn(t);return L.forEach(o,(u=>this.xn(e,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new et(gt.comparator),T=!1;for(const E of g.filters)for(const I of E.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?T=!0:p=p.add(I.field));for(const E of g.orderBy)E.field.isKeyField()||(p=p.add(E.field));return p.size+(T?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}Qn(e,t){const r=new vu;for(const o of ra(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);la.Kt.Dt(u,c)}return r.un()}Ln(e){const t=new vu;return la.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new vu;return la.Kt.Dt(Yp(this.databaseId,t),r.Pn((function(u){const c=ra(u);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let o=[];o.push(new vu);let u=0;for(const c of ra(e)){const m=r[u++];for(const g of o)if(this.Un(t,c.fieldPath)&&Xu(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);la.Kt.Dt(m,p)}}return this.Wn(o)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new vu;g.seed(m.un()),la.Kt.Dt(c,g.Pn(t.kind)),u.push(g)}return u}Un(e,t){return!!e.filters.find((r=>r instanceof Be&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Tu(e),o=wo(e);return(t?r.J(Xg,IDBKeyRange.bound(t,t)):r.J()).next((u=>{const c=[];return L.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(T,E){const I=E?new qu(E.sequenceNumber,new Mn(wa(E.readTime),new oe(Li(E.documentKey)),E.largestBatchId)):qu.empty(),k=T.fields.map((([$,Y])=>new ef(gt.fromServerFormat($),Y)));return new vf(T.indexId,T.collectionGroup,k,I)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Ie(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=Tu(e),u=wo(e);return this.Gn(e).next((c=>o.J(Xg,IDBKeyRange.bound(t,t)).next((m=>L.forEach(m,(g=>u.put(gE(g.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,((o,u)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),L.forEach(m,(g=>this.zn(e,o,g).next((p=>{const T=this.jn(u,g);return p.isEqual(T)?L.resolve():this.Jn(e,u,g,p,T)})))))))}))}Hn(e,t,r,o){return Ao(e).put(o.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,o){return Ao(e).delete(o.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const o=Ao(e);let u=new et(ns);return o.ee({index:y1,range:IDBKeyRange.only([r.indexId,this.uid,uf(this.$n(r,t))])},((c,m)=>{u=u.add(new ua(r.indexId,t,TE(m.arrayValue),TE(m.directionalValue)))})).next((()=>u))}jn(e,t){let r=new et(ns);const o=this.Qn(t,e);if(o==null)return r;const u=Qg(t);if(u!=null){const c=e.data.field(u.fieldPath);if(Xu(c))for(const m of c.arrayValue.values||[])r=r.add(new ua(t.indexId,e.key,this.Ln(m),o))}else r=r.add(new ua(t.indexId,e.key,Hh,o));return r}Jn(e,t,r,o,u){ee(SE,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,T,E,I){const k=g.getIterator(),$=p.getIterator();let Y=bo(k),F=bo($);for(;Y||F;){let se=!1,re=!1;if(Y&&F){const ie=T(Y,F);ie<0?re=!0:ie>0&&(se=!0)}else Y!=null?re=!0:se=!0;se?(E(F),F=bo($)):re?(I(Y),Y=bo(k)):(Y=bo(k),F=bo($))}})(o,u,ns,(m=>{c.push(this.Hn(e,t,r,m))}),(m=>{c.push(this.Yn(e,t,r,m))})),L.waitFor(c)}Gn(e){let t=1;return wo(e).ee({index:p1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,m)=>ns(c,m))).filter(((c,m,g)=>!m||ns(c,g[m-1])!==0));const o=[];o.push(e);for(const c of r){const m=ns(c,e),g=ns(c,t);if(m===0)o[0]=e.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Hh,oe.empty()),g=o[c+1].Vn(this.uid,Hh,oe.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(e,t){return ns(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wE)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(r=>this.xn(e,r).next((o=>o||he(44426))))).next(wE)}}function AE(s){return Bt(s,Ku)}function Ao(s){return Bt(s,Ou)}function Tu(s){return Bt(s,qp)}function wo(s){return Bt(s,Vu)}function wE(s){pe(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Up(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Mn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ES=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(s,e,t){const r=s.store(ui),o=s.store(qo),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=r.ee({range:c},((T,E,I)=>(m++,I.delete())));u.push(g.next((()=>{pe(m===1,47070,{batchId:t.batchId})})));const p=[];for(const T of t.mutations){const E=d1(e,T.key.path,t.batchId);u.push(o.delete(E)),p.push(T.key)}return L.waitFor(u).next((()=>p))}function Df(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw he(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(ES,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class nd{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(e,t,r,o){pe(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new nd(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return is(e).ee({index:ha,range:r},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const u=Do(e),c=is(e);return c.add({}).next((m=>{pe(typeof m=="number",49019);const g=new Jp(m,t,r,o),p=(function(k,$,Y){const F=Y.baseMutations.map((re=>Rf(k.yt,re))),se=Y.mutations.map((re=>Rf(k.yt,re)));return{userId:$,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:F,mutations:se}})(this.serializer,this.userId,g),T=[];let E=new et(((I,k)=>Ie(I.canonicalString(),k.canonicalString())));for(const I of o){const k=d1(this.userId,I.key.path,m);E=E.add(I.key.path.popLast()),T.push(c.put(p)),T.push(u.put(k,fC))}return E.forEach((I=>{T.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),L.waitFor(T).next((()=>g))}))}lookupMutationBatch(e,t){return is(e).get(t).next((r=>r?(pe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),oa(this.serializer,r)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return is(e).ee({index:ha,range:o},((c,m,g)=>{m.userId===this.userId&&(pe(m.batchId>=r,47524,{tr:r}),u=oa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ma;return is(e).ee({index:ha,range:t,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ma],[this.userId,Number.POSITIVE_INFINITY]);return is(e).J(ha,t).next((r=>r.map((o=>oa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Do(e).ee({range:o},((c,m,g)=>{const[p,T,E]=c,I=Li(T);if(p===this.userId&&t.path.isEqual(I))return is(e).get(E).next((k=>{if(!k)throw he(61480,{nr:c,batchId:E});pe(k.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:k.userId,batchId:E}),u.push(oa(this.serializer,k))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Ie);const o=[];return t.forEach((u=>{const c=tf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Do(e).ee({range:m},((p,T,E)=>{const[I,k,$]=p,Y=Li(k);I===this.userId&&u.path.isEqual(Y)?r=r.add($):E.done()}));o.push(g)})),L.waitFor(o).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=tf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new et(Ie);return Do(e).ee({range:c},((g,p,T)=>{const[E,I,k]=g,$=Li(I);E===this.userId&&r.isPrefixOf($)?$.length===o&&(m=m.add(k)):T.done()})).next((()=>this.rr(e,m)))}rr(e,t){const r=[],o=[];return t.forEach((u=>{o.push(is(e).get(u).next((c=>{if(c===null)throw he(35274,{batchId:u});pe(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(oa(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return bS(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Do(e).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Li(u[1]);o.push(g)}else m.done()})).next((()=>{pe(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return SS(e,this.userId,t)}_r(e){return AS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ma,lastStreamToken:""}))}}function SS(s,e,t){const r=tf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Do(s).ee({range:u,X:!0},((m,g,p)=>{const[T,E,I]=m;T===e&&E===o&&(c=!0),p.done()})).next((()=>c))}function is(s){return Bt(s,ui)}function Do(s){return Bt(s,qo)}function AS(s){return Bt(s,Hu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ia(0)}static cr(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Ia(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ve.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Io(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(pe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let o=0;const u=[];return Io(e).ee(((c,m)=>{const g=Iu(m);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>L.waitFor(u))).next((()=>o))}forEachTarget(e,t){return Io(e).ee(((r,o)=>{const u=Iu(o);t(u)}))}lr(e){return xE(e).get(bf).next((t=>(pe(t!==null,2888),t)))}hr(e,t){return xE(e).put(bf,t)}Pr(e,t){return Io(e).put(yS(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Sa(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Io(e).ee({range:o,index:g1},((c,m,g)=>{const p=Iu(m);ac(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,r){const o=[],u=ls(e);return t.forEach((c=>{const m=ln(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))})),L.waitFor(o)}removeMatchingKeys(e,t,r){const o=ls(e);return L.forEach(t,(u=>{const c=ln(u.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])}))}removeMatchingKeysForTargetId(e,t){const r=ls(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ls(e);let u=Ve();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Li(c[1]),T=new oe(p);u=u.add(T)})).next((()=>u))}containsKey(e,t){const r=ln(t.path),o=IDBKeyRange.bound([r],[r1(r)],!1,!0);let u=0;return ls(e).ee({index:Bp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return Io(e).get(t).next((r=>r?Iu(r):null))}}function Io(s){return Bt(s,Fo)}function xE(s){return Bt(s,ga)}function ls(s){return Bt(s,Ho)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="LruGarbageCollector",wS=1048576;function CE([s,e],[t,r]){const o=Ie(s,t);return o===0?Ie(e,r):o}class zN{constructor(e){this.Ir=e,this.buffer=new et(CE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();CE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(RE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bs(t)?ee(RE,"Ignoring IndexedDB error during garbage collection: ",t):await Es(t)}await this.Vr(3e5)}))}}class LN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Tn.ce);const r=new zN(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(IE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,u,c,m,g,p;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,m=Date.now(),this.removeTargets(e,r,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),xo()<=Le.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-T}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function xS(s,e){return new LN(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t){this.db=e,this.garbageCollector=xS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,o)=>t(o)))}addReference(e,t,r){return Gh(e,r)}removeReference(e,t,r){return Gh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Gh(e,t)}br(e,t){return(function(o,u){let c=!1;return AS(o).te((m=>SS(o,m,u).next((g=>(g&&(c=!0),L.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return u++,r.getEntry(e,c).next((()=>(r.removeEntry(c,ve.min()),ls(e).delete((function(E){return[0,ln(E.path)]})(c)))))}));o.push(g)}})).next((()=>L.waitFor(o))).next((()=>r.apply(e))).next((()=>u))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Gh(e,t)}Sr(e,t){const r=ls(e);let o,u=Tn.ce;return r.ee({index:Bp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==Tn.ce&&t(new oe(Li(o)),u),u=p,o=g):u=Tn.ce})).next((()=>{u!==Tn.ce&&t(new oe(Li(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gh(s,e){return ls(s).put((function(r,o){return{targetId:0,path:ln(r.path),sequenceNumber:o}})(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.changes=new Tr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return na(e).put(r)}removeEntry(e,t,r){return na(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Cf(c),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=_t.newInvalidDocument(t);return na(e).ee({index:nf,range:IDBKeyRange.only(Eu(t))},((o,u)=>{r=this.Cr(t,u)})).next((()=>r))}vr(e,t){let r={size:0,document:_t.newInvalidDocument(t)};return na(e).ee({index:nf,range:IDBKeyRange.only(Eu(t))},((o,u)=>{r={document:this.Cr(t,u),size:Df(u)}})).next((()=>r))}getEntries(e,t){let r=Vn();return this.Fr(e,t,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(e,t){let r=Vn(),o=new ot(oe.comparator);return this.Fr(e,t,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Df(c))})).next((()=>({documents:r,Or:o})))}Fr(e,t,r){if(t.isEmpty())return L.resolve();let o=new et(VE);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Eu(o.first()),Eu(o.last())),c=o.getIterator();let m=c.getNext();return na(e).ee({index:nf,range:u},((g,p,T)=>{const E=oe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&VE(m,E)<0;)r(m,null),m=c.getNext();m&&m.isEqual(E)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?T.j(Eu(m)):T.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Cf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return na(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let T=Vn();for(const E of p){const I=this.Cr(oe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);I.isFoundDocument()&&(oc(t,I)||o.has(I.key))&&(T=T.insert(I.key,I))}return T}))}getAllFromCollectionGroup(e,t,r,o){let u=Vn();const c=DE(t,r),m=DE(t,Mn.max());return na(e).ee({index:m1,range:IDBKeyRange.bound(c,m,!0)},((g,p,T)=>{const E=this.Cr(oe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(E.key,E),u.size===o&&T.done()})).next((()=>u))}newChangeBuffer(e){return new BN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return NE(e).get(Yg).next((t=>(pe(!!t,20021),t)))}Dr(e,t){return NE(e).put(Yg,t)}Cr(e,t){if(t){const r=IN(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ve.min())))return r}return _t.newInvalidDocument(e)}}function CS(s){return new jN(s)}class BN extends RS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Tr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new et(((u,c)=>Ie(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=dE(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Df(g);r+=p-m.size,t.push(this.Nr.addEntry(e,u,g))}else if(r-=m.size,this.trackRemovals){const g=dE(this.Nr.serializer,c.convertToNoDocument(ve.min()));t.push(this.Nr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function NE(s){return Bt(s,Gu)}function na(s){return Bt(s,Ef)}function Eu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DE(s,e){const t=e.documentKey.path.toArray();return[s,Cf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VE(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ie(t[u],r[u]),o)return o;return o=Ie(t.length,r.length),o||(o=Ie(t[t.length-2],r[r.length-2]),o||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&zu(r.mutation,o,En.empty(),We.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const o=Ui();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let c=Au();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Ui();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let u=Vn();const c=Pu(),m=(function(){return Pu()})();return t.forEach(((g,p)=>{const T=r.get(p.key);o.has(p.key)&&(T===void 0||T.mutation instanceof Er)?u=u.insert(p.key,p):T!==void 0?(c.set(p.key,T.mutation.getFieldMask()),zu(T.mutation,p,T.mutation.getFieldMask(),We.now())):c.set(p.key,En.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,T)=>c.set(p,T))),t.forEach(((p,T)=>m.set(p,new qN(T,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Pu();let o=new ot(((c,m)=>c-m)),u=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let T=r.get(g)||En.empty();T=m.applyToLocalView(p,T),r.set(g,T);const E=(o.get(m.batchId)||Ve()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,T=g.value,E=K1();T.forEach((I=>{if(!u.has(I)){const k=W1(t.get(I),r.get(I));k!==null&&E.set(I,k),u=u.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):L.resolve(Ui());let m=Bo,g=u;return c.next((p=>L.forEach(p,((T,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(T)?L.resolve():this.remoteDocumentCache.getEntry(e,T).next((I=>{g=g.insert(T,I)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Ve()))).next((T=>({batchId:m,changes:G1(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((r=>{let o=Au();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let c=Au();return this.indexManager.getCollectionParents(e,u).next((m=>L.forEach(m,(g=>{const p=(function(E,I){return new Xf(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((T=>{T.forEach(((E,I)=>{c=c.insert(E,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const T=p.getKey();c.get(T)===null&&(c=c.insert(T,_t.newInvalidDocument(T)))}));let m=Au();return c.forEach(((g,p)=>{const T=u.get(g);T!==void 0&&zu(T.mutation,p,En.empty(),We.now()),oc(t,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:fn(o.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:_S(o.bundledQuery),readTime:fn(o.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.overlays=new ot(oe.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ui();return L.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.St(e,t,u)})),L.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const o=Ui(),u=t.length+1,c=new oe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ot(((p,T)=>p-T));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let T=u.get(p.largestBatchId);T===null&&(T=Ui(),u=u.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const m=Ui(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,T)=>m.set(p,T))),!(m.size()>=o)););return L.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ey(t,r));let u=this.qr.get(t);u===void 0&&(u=Ve(),this.qr.set(t,u)),this.qr.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.Qr=new et(Gt.$r),this.Ur=new et(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new oe(new Ye([])),r=new Gt(t,e),o=new Gt(t,e+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new Ye([])),r=new Gt(t,e),o=new Gt(t,e+1);let u=Ve();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Gt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||Ie(e.Yr,t.Yr)}static Kr(e,t){return Ie(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new et(Gt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Jp(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Gt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),u=o<0?0:o;return L.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ma:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),L.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Ie);return t.forEach((o=>{const u=new Gt(o,0),c=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;oe.isDocumentKey(u)||(u=u.child(""));const c=new Gt(new oe(u),0);let m=new et(Ie);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),L.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(t.mutations,(o=>{const u=new Gt(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Gt(t,0),o=this.Zr.firstAfterOrEqual(r);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.ri=e,this.docs=(function(){return new ot(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():_t.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Vn();const c=t.path,m=new oe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:T}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Up(l1(T),r)<=0||(o.has(T.key)||oc(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return L.resolve(u)}getAllFromCollectionGroup(e,t,r,o){he(9500)}ii(e,t){return L.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new YN(this)}getSize(e){return L.resolve(this.size)}}class YN extends RS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.persistence=e,this.si=new Tr((t=>Sa(t)),ac),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new sy,this.targetCount=0,this.ai=Ia.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ia(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),L.waitFor(u).next((()=>o))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),L.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){this.ui={},this.overlays={},this.ci=new Tn(0),this.li=!1,this.li=!0,this.hi=new GN,this.referenceDelegate=e(this),this.Pi=new XN(this),this.indexManager=new MN,this.remoteDocumentCache=(function(o){return new QN(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new pS(t),this.Ii=new FN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new KN(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const o=new $N(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return L.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class $N extends c1{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Ri=new sy,this.Vi=null}static mi(e){return new id(e)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(r=>{const o=oe.fromPath(r);return this.gi(e,o).next((u=>{u||t.removeEntry(o,ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Vf{constructor(e,t){this.persistence=e,this.pi=new Tr((r=>ln(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=xS(this,t)}static mi(e,t){return new Vf(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?L.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,u.removeEntry(c,ve.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sf(e.data.value)),t}br(e,t,r){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.serializer=e}k(e,t,r,o){const u=new qf("createOrUpgrade",t);r<1&&o>=1&&((function(g){g.createObjectStore(sc)})(e),(function(g){g.createObjectStore(Hu,{keyPath:hC}),g.createObjectStore(ui,{keyPath:FT,autoIncrement:!0}).createIndex(ha,HT,{unique:!0}),g.createObjectStore(qo)})(e),OE(e),(function(g){g.createObjectStore(sa)})(e));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Ho),g.deleteObjectStore(Fo),g.deleteObjectStore(ga)})(e),OE(e)),c=c.next((()=>(function(g){const p=g.store(ga),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return p.put(bf,T)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(ui).J().next((E=>{g.deleteObjectStore(ui),g.createObjectStore(ui,{keyPath:FT,autoIncrement:!0}).createIndex(ha,HT,{unique:!0});const I=p.store(ui),k=E.map(($=>I.put($)));return L.waitFor(k)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Go,{keyPath:TC})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Gu)})(e),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(e,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Hf,{keyPath:EC})})(e),(function(g){g.createObjectStore(Gf,{keyPath:bC})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Kf,{keyPath:CC});p.createIndex($g,NC,{unique:!1}),p.createIndex(_1,DC,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Ef,{keyPath:dC});p.createIndex(nf,mC),p.createIndex(m1,gC)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(sa)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(e,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(qp,{keyPath:SC,autoIncrement:!0}).createIndex(Xg,AC,{unique:!1}),g.createObjectStore(Vu,{keyPath:wC}).createIndex(p1,IC,{unique:!1}),g.createObjectStore(Ou,{keyPath:xC}).createIndex(y1,RC,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(Vu).clear()})).next((()=>{t.objectStore(Ou).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Fp,{keyPath:VC})})(e)}))),r<18&&o>=18&&mb()&&(c=c.next((()=>{t.objectStore(Vu).clear()})).next((()=>{t.objectStore(Ou).clear()}))),c}wi(e){let t=0;return e.store(sa).ee(((r,o)=>{t+=Df(o)})).next((()=>{const r={byteSize:t};return e.store(Gu).put(Yg,r)}))}yi(e){const t=e.store(Hu),r=e.store(ui);return t.J().next((o=>L.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ma],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ha,c).next((m=>L.forEach(m,(g=>{pe(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=oa(this.serializer,g);return bS(e,u.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ho),r=e.store(sa);return e.store(ga).get(bf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Ye(c),p=(function(E){return[0,ln(E)]})(g);u.push(t.get(p).next((T=>T?L.resolve():(E=>t.put({targetId:0,path:ln(E),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>L.waitFor(u)))}))}bi(e,t){e.createObjectStore(Ku,{keyPath:vC});const r=t.store(Ku),o=new ry,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:ln(g)})}};return t.store(sa).ee({X:!0},((c,m)=>{const g=new Ye(c);return u(g.popLast())})).next((()=>t.store(qo).ee({X:!0},(([c,m,g],p)=>{const T=Li(m);return u(T.popLast())}))))}Di(e){const t=e.store(Fo);return t.ee(((r,o)=>{const u=Iu(o),c=yS(this.serializer,u);return t.put(c)}))}Ci(e,t){const r=t.store(sa),o=[];return r.ee(((u,c)=>{const m=t.store(Ef),g=(function(E){return E.document?new oe(Ye.fromString(E.document.name).popFirst(5)):E.noDocument?oe.fromSegments(E.noDocument.path):E.unknownDocument?oe.fromSegments(E.unknownDocument.path):he(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>L.waitFor(o)))}Fi(e,t){const r=t.store(ui),o=CS(this.serializer),u=new ay(id.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Ve();oa(this.serializer,g).keys().forEach((T=>p=p.add(T))),m.set(g.userId,p)})),L.forEach(m,((g,p)=>{const T=new rn(p),E=td.wt(this.serializer,T),I=u.getIndexManager(T),k=nd.wt(T,this.serializer,I,u.referenceDelegate);return new NS(o,k,E,I).recalculateAndSaveOverlaysForDocumentKeys(new Zg(t,Tn.ce),g).next()}))}))}}function OE(s){s.createObjectStore(Ho,{keyPath:yC}).createIndex(Bp,_C,{unique:!0}),s.createObjectStore(Fo,{keyPath:"targetId"}).createIndex(g1,pC,{unique:!0}),s.createObjectStore(ga)}const rs="IndexedDbPersistence",Rg=18e5,Cg=5e3,Ng="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JN="main";class oy{constructor(e,t,r,o,u,c,m,g,p,T,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=T,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!oy.v())throw new le(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UN(this,o),this.$i=t+JN,this.serializer=new pS(g),this.Ui=new gs(this.$i,this.Ni,new ZN(this.serializer)),this.hi=new RN,this.Pi=new PN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CS(this.serializer),this.Ii=new xN,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,T===!1&&St(rs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Ng);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Tn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Kh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(bs(e))return ee(rs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(rs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return bu(e).get(Eo).next((t=>L.resolve(this.es(t))))}ts(e){return Kh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Rg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Bt(t,Go);return r.J().next((o=>{const u=this.ss(o,Rg),c=o.filter((m=>u.indexOf(m)===-1));return L.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):bu(e).get(Eo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Ng);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kh(e).J().next((r=>this.ss(r,Cg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(rs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[sc,Go],(e=>{const t=new Zg(e,Tn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Kh(e).J().next((t=>this.ss(t,Rg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return nd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return td.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ee(rs,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?kC:g===17?b1:g===16?MC:g===15?Hp:g===14?E1:g===13?T1:g===12?OC:g===11?v1:void he(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,u,(m=>(c=new Zg(m,this.ci?this.ci.next():Tn.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw St(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new le(W.FAILED_PRECONDITION,u1);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return bu(e).get(Eo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(W.FAILED_PRECONDITION,Ng)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bu(e).put(Eo,t)}static v(){return gs.v()}Zi(e){const t=bu(e);return t.get(Eo).next((r=>this.es(r)?(ee(rs,"Releasing primary lease."),t.delete(Eo)):L.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(St(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;db()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ee(rs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return St(rs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){St("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bu(s){return Bt(s,sc)}function Kh(s){return Bt(s,Go)}function DS(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Ve(),o=Ve();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ly(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return db()?8:h1(jt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new WN;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(xo()<=Le.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(xo()<=Le.DEBUG&&ee("QueryEngine","Query:",Ro(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(xo()<=Le.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(t))):L.resolve())}ys(e,t){if(iE(t))return L.resolve(null);let r=On(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=ip(t,null,"F"),r=On(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const c=Ve(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,ip(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return iE(t)||o.isEqual(ve.min())?L.resolve(null):this.ps.getDocuments(e,r).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,r,o)?L.resolve(null):(xo()<=Le.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(t)),this.vs(e,c,t,o1(o,Bo)).next((m=>m)))}))}Ds(e,t){let r=new et(F1(e));return t.forEach(((o,u)=>{oc(e,u)&&(r=r.add(u))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,r){return xo()<=Le.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.ps.getDocumentsMatchingQuery(e,t,Mn.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="LocalStore",eD=3e8;class tD{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ot(Ie),this.xs=new Tr((u=>Sa(u)),ac),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function OS(s,e,t,r){return new tD(s,e,t,r)}async function MS(s,e){const t=de(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Ve();for(const p of o){c.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}for(const p of u){m.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function nD(s,e){const t=de(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,T){const E=p.batch,I=E.keys();let k=L.resolve();return I.forEach(($=>{k=k.next((()=>T.getEntry(g,$))).next((Y=>{const F=p.docVersions.get($);pe(F!==null,48541),Y.version.compareTo(F)<0&&(E.applyToRemoteDocument(Y,p),Y.isValidDocument()&&(Y.setReadTime(p.commitVersion),T.addEntry(Y)))}))})),k.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Ve();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function kS(s){const e=de(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function iD(s,e){const t=de(s),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((T,E)=>{const I=o.get(E);if(!I)return;m.push(t.Pi.removeMatchingKeys(u,T.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(u,T.addedDocuments,E))));let k=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?k=k.withResumeToken(At.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):T.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(T.resumeToken,r)),o=o.insert(E,k),(function(Y,F,se){return Y.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=eD?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(I,k,T)&&m.push(t.Pi.updateTargetData(u,k))}));let g=Vn(),p=Ve();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(rD(u,c,e.documentUpdates).next((T=>{g=T.ks,p=T.qs}))),!r.isEqual(ve.min())){const T=t.Pi.getLastRemoteSnapshotVersion(u).next((E=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return L.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function rD(s,e,t){let r=Ve(),o=Ve();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let c=Vn();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ve.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ee(uy,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function sD(s,e){const t=de(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ma),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Of(s,e){const t=de(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((u=>u?(o=u,L.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new dr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function el(s,e,t){const r=de(s),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!bs(c))throw c;ee(uy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function hp(s,e,t){const r=de(s);let o=ve.min(),u=Ve();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,T){const E=de(g),I=E.xs.get(T);return I!==void 0?L.resolve(E.Ms.get(I)):E.Pi.getTargetData(p,T)})(r,c,On(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:ve.min(),t?u:Ve()))).next((m=>(LS(r,q1(e),m),{documents:m,Qs:u})))))}function PS(s,e){const t=de(s),r=de(t.Pi),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,e).next((c=>c?c.target:null))))}function zS(s,e){const t=de(s),r=t.Os.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.Ns.getAllFromCollectionGroup(o,e,o1(r,Bo),Number.MAX_SAFE_INTEGER))).then((o=>(LS(t,e,o),o)))}function LS(s,e,t){let r=s.Os.get(e)||ve.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firestore_clients";function ME(s,e){return`${US}_${s}_${e}`}const jS="firestore_mutations";function kE(s,e,t){let r=`${jS}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const BS="firestore_targets";function Dg(s,e){return`${BS}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="SharedClientState";class Mf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ws(e,t,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new le(o.error.code,o.error.message))),c?new Mf(e,t,o.state,u):(St(zi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new le(r.error.code,r.error.message))),u?new Lu(e,r.state,o):(St(zi,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=$p();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=f1(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new kf(e,u):(St(zi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class cy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new cy(t.clientId,t.onlineState):(St(zi,`Failed to parse online state: ${e}`),null)}}class fp{constructor(){this.activeTargetIds=$p()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vg{constructor(e,t,r,o,u){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ot(Ie),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=ME(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new fp),this.ro=new RegExp(`^${US}_${c}_([^_]*)$`),this.io=new RegExp(`^${jS}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${BS}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const o=this.getItem(ME(this.persistenceKey,r));if(o){const u=kf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Dg(this.persistenceKey,e));if(o){const u=Lu.Ws(e,o);u&&(r=u.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((o=>{this.Po(o)})),this.currentUser=e,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee(zi,"READ",e,t),t}setItem(e,t){ee(zi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee(zi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ee(zi,"EVENT",t.key,t.newValue),t.key===this.eo)return void St("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(u){let c=Tn.ce;if(u!=null)try{const m=JSON.parse(u);pe(typeof m=="number",30636,{So:u}),c=m}catch(m){St(zi,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);r!==Tn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const o=new Mf(this.currentUser,e,t,r),u=kE(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Gs())}Po(e){const t=kE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const o=Dg(this.persistenceKey,e),u=new Lu(e,t,r);this.setItem(o,u.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return kf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Mf.Ws(new rn(u),o,t)}yo(e,t){const r=this.so.exec(e),o=Number(r[1]);return Lu.Ws(o,t)}uo(e){return cy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ee(zi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=$p();return e.forEach(((r,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class qS{constructor(){this.Mo=new fp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="ConnectivityMonitor";class zE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(PE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(PE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function dp(){return Qh===null?Qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="RestConnection",oD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Sf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,u){const c=dp(),m=this.zo(e,t.toUriEncodedString());ee(Og,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),T=rl(p);return this.Jo(e,m,g,r,T).then((E=>(ee(Og,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Bu(Og,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",r),E}))}Ho(e,t,r,o,u,c){return this.Go(e,t,r,o,u)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const r=oD[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class cD extends lD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,u){const c=dp();return new Promise(((m,g)=>{const p=new Jb;p.setWithCredentials(!0),p.listenOnce(Wb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Wh.NO_ERROR:const E=p.getResponseJson();ee(nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Wh.TIMEOUT:ee(nn,`RPC '${e}' ${c} timed out`),g(new le(W.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const I=p.getStatus();if(ee(nn,`RPC '${e}' ${c} failed with status:`,I,"response text:",p.getResponseText()),I>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const $=k==null?void 0:k.error;if($&&$.status&&$.message){const Y=(function(se){const re=se.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(re)>=0?re:W.UNKNOWN})($.status);g(new le(Y,$.message))}else g(new le(W.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new le(W.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ee(nn,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(o);ee(nn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",T,r,15)}))}T_(e,t,r){const o=dp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=n1(),m=t1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const T=u.join("");ee(nn,`Creating RPC '${e}' stream ${o}: ${T}`,g);const E=c.createWebChannel(T,g);this.I_(E);let I=!1,k=!1;const $=new uD({Yo:F=>{k?ee(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(I||(ee(nn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),ee(nn,`RPC '${e}' stream ${o} sending:`,F),E.send(F))},Zo:()=>E.close()}),Y=(F,se,re)=>{F.listen(se,(ie=>{try{re(ie)}catch(Te){setTimeout((()=>{throw Te}),0)}}))};return Y(E,Su.EventType.OPEN,(()=>{k||(ee(nn,`RPC '${e}' stream ${o} transport opened.`),$.o_())})),Y(E,Su.EventType.CLOSE,(()=>{k||(k=!0,ee(nn,`RPC '${e}' stream ${o} transport closed`),$.a_(),this.E_(E))})),Y(E,Su.EventType.ERROR,(F=>{k||(k=!0,Bu(nn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),$.a_(new le(W.UNAVAILABLE,"The operation could not be completed")))})),Y(E,Su.EventType.MESSAGE,(F=>{var se;if(!k){const re=F.data[0];pe(!!re,16349);const ie=re,Te=(ie==null?void 0:ie.error)||((se=ie[0])==null?void 0:se.error);if(Te){ee(nn,`RPC '${e}' stream ${o} received error:`,Te);const be=Te.status;let ge=(function(R){const D=Mt[R];if(D!==void 0)return nS(D)})(be),C=Te.message;ge===void 0&&(ge=W.INTERNAL,C="Unknown error status: "+be+" with message "+Te.message),k=!0,$.a_(new le(ge,C)),E.close()}else ee(nn,`RPC '${e}' stream ${o} received:`,re),$.u_(re)}})),Y(m,e1.STAT_EVENT,(F=>{F.stat===Gg.PROXY?ee(nn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Gg.NOPROXY&&ee(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof window<"u"?window:null}function cf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(s){return new pN(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="PersistentStream";class GS{constructor(e,t,r,o,u,c,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(St(t.toString()),St("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new le(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(LE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ee(LE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hD extends GS{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vN(this.serializer,e),r=(function(u){if(!("targetChange"in u))return ve.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?ve.min():c.readTime?fn(c.readTime):ve.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=ap(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=wf(g)?{documents:cS(u,g)}:{query:hS(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=sS(u,c.resumeToken);const p=rp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(ve.min())>0){m.readTime=Wo(u,c.snapshotVersion.toTimestamp());const p=rp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=EN(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=ap(this.serializer),t.removeTarget=e,this.q_(t)}}class fD extends GS{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=TN(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ap(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Rf(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{}class mD extends dD{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,sp(t,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(W.UNKNOWN,u.toString())}))}Ho(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,sp(t,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(St(t),this.aa=!1):ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="RemoteStore";class pD{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ca(this)&&(ee(xa,"Restarting streams for network reachability change."),await(async function(g){const p=de(g);p.Ea.add(4),await cc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await sd(p)})(this))}))})),this.Ra=new gD(r,o)}}async function sd(s){if(Ca(s))for(const e of s.da)await e(!0)}async function cc(s){for(const e of s.da)await e(!1)}function ad(s,e){const t=de(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dy(t)?fy(t):cl(t).O_()&&hy(t,e))}function tl(s,e){const t=de(s),r=cl(t);t.Ia.delete(e),r.O_()&&KS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ca(t)&&t.Ra.set("Unknown"))}function hy(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(s).Y_(e)}function KS(s,e){s.Va.Ue(e),cl(s).Z_(e)}function fy(s){s.Va=new fN({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),cl(s).start(),s.Ra.ua()}function dy(s){return Ca(s)&&!cl(s).x_()&&s.Ia.size>0}function Ca(s){return de(s).Ea.size===0}function QS(s){s.Va=void 0}async function yD(s){s.Ra.set("Online")}async function _D(s){s.Ia.forEach(((e,t)=>{hy(s,e)}))}async function vD(s,e){QS(s),dy(s)?(s.Ra.ha(e),fy(s)):s.Ra.set("Unknown")}async function TD(s,e,t){if(s.Ra.set("Online"),e instanceof rS&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){ee(xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pf(s,r)}else if(e instanceof lf?s.Va.Ze(e):e instanceof iS?s.Va.st(e):s.Va.tt(e),!t.isEqual(ve.min()))try{const r=await kS(s.localStore);t.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(p);T&&u.Ia.set(p,T.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(At.EMPTY_BYTE_STRING,T.snapshotVersion)),KS(u,g);const E=new dr(T.target,g,p,T.sequenceNumber);hy(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){ee(xa,"Failed to raise snapshot:",r),await Pf(s,r)}}async function Pf(s,e,t){if(!bs(e))throw e;s.Ea.add(1),await cc(s),s.Ra.set("Offline"),t||(t=()=>kS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ee(xa,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await sd(s)}))}function YS(s,e){return e().catch((t=>Pf(s,t,e)))}async function ul(s){const e=de(s),t=vs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ma;for(;ED(e);)try{const o=await sD(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,bD(e,o)}catch(o){await Pf(e,o)}XS(e)&&$S(e)}function ED(s){return Ca(s)&&s.Ta.length<10}function bD(s,e){s.Ta.push(e);const t=vs(s);t.O_()&&t.X_&&t.ea(e.mutations)}function XS(s){return Ca(s)&&!vs(s).x_()&&s.Ta.length>0}function $S(s){vs(s).start()}async function SD(s){vs(s).ra()}async function AD(s){const e=vs(s);for(const t of s.Ta)e.ea(t.mutations)}async function wD(s,e,t){const r=s.Ta.shift(),o=Wp.from(r,e,t);await YS(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ul(s)}async function ID(s,e){e&&vs(s).X_&&await(async function(r,o){if((function(c){return uN(c)&&c!==W.ABORTED})(o.code)){const u=r.Ta.shift();vs(r).B_(),await YS(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ul(r)}})(s,e),XS(s)&&$S(s)}async function UE(s,e){const t=de(s);t.asyncQueue.verifyOperationInProgress(),ee(xa,"RemoteStore received new credentials");const r=Ca(t);t.Ea.add(3),await cc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sd(t)}async function mp(s,e){const t=de(s);e?(t.Ea.delete(2),await sd(t)):e||(t.Ea.add(2),await cc(t),t.Ra.set("Unknown"))}function cl(s){return s.ma||(s.ma=(function(t,r,o){const u=de(t);return u.sa(),new hD(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:yD.bind(null,s),t_:_D.bind(null,s),r_:vD.bind(null,s),H_:TD.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),dy(s)?fy(s):s.Ra.set("Unknown")):(await s.ma.stop(),QS(s))}))),s.ma}function vs(s){return s.fa||(s.fa=(function(t,r,o){const u=de(t);return u.sa(),new fD(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:SD.bind(null,s),r_:ID.bind(null,s),ta:AD.bind(null,s),na:wD.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await ul(s)):(await s.fa.stop(),s.Ta.length>0&&(ee(xa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new my(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gy(s,e){if(St("AsyncQueue",`${e}: ${s}`),bs(s))return new le(W.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=Au(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.ga=new ot(oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class nl{constructor(e,t,r,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new nl(e,t,Po.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class RD{constructor(){this.queries=BE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=de(t),u=o.queries;o.queries=BE(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new le(W.ABORTED,"Firestore shutting down"))}}function BE(){return new Tr((s=>B1(s)),Zf)}async function CD(s,e){const t=de(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new xD,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=gy(c,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&py(t)}async function ND(s,e){const t=de(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function DD(s,e){const t=de(s);let r=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&py(t)}function VD(s,e,t){const r=de(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);r.queries.delete(e)}function py(s){s.Ca.forEach((e=>{e.next()}))}var gp,qE;(qE=gp||(gp={})).Ma="default",qE.Cache="cache";class OD{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.key=e}}class JS{constructor(e){this.key=e}}class MD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=F1(e),this.tu=new Po(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new jE,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,E)=>{const I=o.get(T),k=oc(this.query,E)?E:null,$=!!I&&this.mutatedKeys.has(I.key),Y=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let F=!1;I&&k?I.data.isEqual(k.data)?$!==Y&&(r.track({type:3,doc:k}),F=!0):this.su(I,k)||(r.track({type:2,doc:k}),F=!0,(g&&this.eu(k,g)>0||p&&this.eu(k,p)<0)&&(m=!0)):!I&&k?(r.track({type:0,doc:k}),F=!0):I&&!k&&(r.track({type:1,doc:I}),F=!0,(g||p)&&(m=!0)),F&&(k?(c=c.add(k),u=Y?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,E)=>(function(k,$){const Y=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:F})}};return Y(k)-Y($)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new nl(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new JS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new ZS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hl="SyncEngine";class kD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PD{constructor(e){this.key=e,this.hu=!1}}class zD{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Tr((m=>B1(m)),Zf),this.Iu=new Map,this.Eu=new Set,this.du=new ot(oe.comparator),this.Au=new Map,this.Ru=new sy,this.Vu={},this.mu=new Map,this.fu=Ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LD(s,e,t=!0){const r=od(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await WS(r,e,t,!0),o}async function UD(s,e){const t=od(s);await WS(t,e,!0,!1)}async function WS(s,e,t,r){const o=await Of(s.localStore,On(e)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await yy(s,e,u,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&ad(s.remoteStore,o),m}async function yy(s,e,t,r,o){s.pu=(E,I,k)=>(async function(Y,F,se,re){let ie=F.view.ru(se);ie.Cs&&(ie=await hp(Y.localStore,F.query,!1).then((({documents:C})=>F.view.ru(C,ie))));const Te=re&&re.targetChanges.get(F.targetId),be=re&&re.targetMismatches.get(F.targetId)!=null,ge=F.view.applyChanges(ie,Y.isPrimaryClient,Te,be);return pp(Y,F.targetId,ge.au),ge.snapshot})(s,E,I,k);const u=await hp(s.localStore,e,!0),c=new MD(e,u.Qs),m=c.ru(u.documents),g=uc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);pp(s,t,p.au);const T=new kD(e,t,c);return s.Tu.set(e,T),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function jD(s,e,t){const r=de(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!Zf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await el(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&tl(r.remoteStore,o.targetId),il(r,o.targetId)})).catch(Es)):(il(r,o.targetId),await el(r.localStore,o.targetId,!0))}async function BD(s,e){const t=de(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tl(t.remoteStore,r.targetId))}async function qD(s,e,t){const r=Ey(s);try{const o=await(function(c,m){const g=de(c),p=We.now(),T=m.reduce(((k,$)=>k.add($.key)),Ve());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let $=Vn(),Y=Ve();return g.Ns.getEntries(k,T).next((F=>{$=F,$.forEach(((se,re)=>{re.isValidDocument()||(Y=Y.add(se))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,$))).next((F=>{E=F;const se=[];for(const re of m){const ie=oN(re,E.get(re.key).overlayedDocument);ie!=null&&se.push(new Er(re.key,ie,V1(ie.value.mapValue),on.exists(!0)))}return g.mutationQueue.addMutationBatch(k,p,se,m)})).next((F=>{I=F;const se=F.applyToLocalDocumentSet(E,Y);return g.documentOverlayCache.saveOverlays(k,F.batchId,se)}))})).then((()=>({batchId:I.batchId,changes:G1(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new ot(Ie)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,t),await As(r,o.changes),await ul(r.remoteStore)}catch(o){const u=gy(o,"Failed to persist write");t.reject(u)}}async function eA(s,e){const t=de(s);try{const r=await iD(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(pe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?pe(c.hu,14607):o.removedDocuments.size>0&&(pe(c.hu,42227),c.hu=!1))})),await As(t,r,e)}catch(r){await Es(r)}}function FE(s,e,t){const r=de(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=de(c);g.onlineState=m;let p=!1;g.queries.forEach(((T,E)=>{for(const I of E.Sa)I.va(m)&&(p=!0)})),p&&py(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FD(s,e,t){const r=de(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let c=new ot(oe.comparator);c=c.insert(u,_t.newNoDocument(u,ve.min()));const m=Ve().add(u),g=new lc(ve.min(),new Map,new ot(Ie),c,m);await eA(r,g),r.du=r.du.remove(u),r.Au.delete(e),Ty(r)}else await el(r.localStore,e,!1).then((()=>il(r,e,t))).catch(Es)}async function HD(s,e){const t=de(s),r=e.batch.batchId;try{const o=await nD(t.localStore,e);vy(t,r,null),_y(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await As(t,o)}catch(o){await Es(o)}}async function GD(s,e,t){const r=de(s);try{const o=await(function(c,m){const g=de(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let T;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(pe(E!==null,37113),T=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T))).next((()=>g.localDocuments.getDocuments(p,T)))}))})(r.localStore,e);vy(r,e,t),_y(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await As(r,o)}catch(o){await Es(o)}}function _y(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function vy(s,e,t){const r=de(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function il(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||tA(s,r)}))}function tA(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(tl(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Ty(s))}function pp(s,e,t){for(const r of t)r instanceof ZS?(s.Ru.addReference(r.key,e),KD(s,r)):r instanceof JS?(ee(hl,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||tA(s,r.key)):he(19791,{wu:r})}function KD(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(ee(hl,"New document in limbo: "+t),s.Eu.add(r),Ty(s))}function Ty(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new oe(Ye.fromString(e)),r=s.fu.next();s.Au.set(r,new PD(t)),s.du=s.du.insert(t,r),ad(s.remoteStore,new dr(On($f(t.path)),r,"TargetPurposeLimboResolution",Tn.ce))}}async function As(s,e,t){const r=de(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{var T;if((p||t)&&r.isPrimaryClient){const E=p?!p.fromCache:(T=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=ly.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const T=de(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>L.forEach(p,(I=>L.forEach(I.Es,(k=>T.persistence.referenceDelegate.addReference(E,I.targetId,k))).next((()=>L.forEach(I.ds,(k=>T.persistence.referenceDelegate.removeReference(E,I.targetId,k)))))))))}catch(E){if(!bs(E))throw E;ee(uy,"Failed to update sequence numbers: "+E)}for(const E of p){const I=E.targetId;if(!E.fromCache){const k=T.Ms.get(I),$=k.snapshotVersion,Y=k.withLastLimboFreeSnapshotVersion($);T.Ms=T.Ms.insert(I,Y)}}})(r.localStore,u))}async function QD(s,e){const t=de(s);if(!t.currentUser.isEqual(e)){ee(hl,"User change. New user:",e.toKey());const r=await MS(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new le(W.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await As(t,r.Ls)}}function YD(s,e){const t=de(s),r=t.Au.get(e);if(r&&r.hu)return Ve().add(r.key);{let o=Ve();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function XD(s,e){const t=de(s),r=await hp(t.localStore,e.query,!0),o=e.view.cu(r);return t.isPrimaryClient&&pp(t,e.targetId,o.au),o}async function $D(s,e){const t=de(s);return zS(t.localStore,e).then((r=>As(t,r)))}async function ZD(s,e,t,r){const o=de(s),u=await(function(m,g){const p=de(m),T=de(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(E=>T.er(E,g).next((I=>I?p.localDocuments.getDocuments(E,I):L.resolve(null)))))})(o.localStore,e);u!==null?(t==="pending"?await ul(o.remoteStore):t==="acknowledged"||t==="rejected"?(vy(o,e,r||null),_y(o,e),(function(m,g){de(de(m).mutationQueue).ir(g)})(o.localStore,e)):he(6720,"Unknown batchState",{Su:t}),await As(o,u)):ee(hl,"Cannot apply mutation batch with id: "+e)}async function JD(s,e){const t=de(s);if(od(t),Ey(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),o=await HE(t,r.toArray());t.gu=!0,await mp(t.remoteStore,!0);for(const u of o)ad(t.remoteStore,u)}else if(e===!1&&t.gu!==!1){const r=[];let o=Promise.resolve();t.Iu.forEach(((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(il(t,c),el(t.localStore,c,!0)))),tl(t.remoteStore,c)})),await o,await HE(t,r),(function(c){const m=de(c);m.Au.forEach(((g,p)=>{tl(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new ot(oe.comparator)})(t),t.gu=!1,await mp(t.remoteStore,!1)}}async function HE(s,e,t){const r=de(s),o=[],u=[];for(const c of e){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await Of(r.localStore,On(g[0]));for(const p of g){const T=r.Tu.get(p),E=await XD(r,T);E.snapshot&&u.push(E.snapshot)}}else{const p=await PS(r.localStore,c);m=await Of(r.localStore,p),await yy(r,nA(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function nA(s){return j1(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function WD(s){return(function(t){return de(de(t).persistence).Ts()})(de(s).localStore)}async function eV(s,e,t,r){const o=de(s);if(o.gu)return void ee(hl,"Ignoring unexpected query state notification.");const u=o.Iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await zS(o.localStore,q1(u[0])),m=lc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",At.EMPTY_BYTE_STRING);await As(o,c,m);break}case"rejected":await el(o.localStore,e,!0),il(o,e,r);break;default:he(64155,t)}}async function tV(s,e,t){const r=od(s);if(r.gu){for(const o of e){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){ee(hl,"Adding an already active target "+o);continue}const u=await PS(r.localStore,o),c=await Of(r.localStore,u);await yy(r,nA(u),c.targetId,!1,c.resumeToken),ad(r.remoteStore,c)}for(const o of t)r.Iu.has(o)&&await el(r.localStore,o,!1).then((()=>{tl(r.remoteStore,o),il(r,o)})).catch(Es)}}function od(s){const e=de(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=eA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FD.bind(null,e),e.Pu.H_=DD.bind(null,e.eventManager),e.Pu.yu=VD.bind(null,e.eventManager),e}function Ey(s){const e=de(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GD.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OS(this.persistence,new VS,e.initialUser,this.serializer)}Cu(e){return new ay(id.mi,this.serializer)}Du(e){return new qS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class nV extends Zu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pe(this.persistence.referenceDelegate instanceof Vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IS(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new ay((r=>Vf.mi(r,t)),this.serializer)}}class iA extends Zu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Ey(this.xu.syncEngine),await ul(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return OS(this.persistence,new VS,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new IS(r,e.asyncQueue,t)}Mu(e,t){const r=new uC(t,this.persistence);return new lC(e.asyncQueue,r)}Cu(e){const t=DS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new oy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,FS(),cf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qS}}class iV extends iA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Vg&&(this.sharedClientState.syncEngine={Co:ZD.bind(null,t),vo:eV.bind(null,t),Fo:tV.bind(null,t),Ts:WD.bind(null,t),Do:$D.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await JD(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=FS();if(!Vg.v(t))throw new le(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=DS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ju{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QD.bind(null,this.syncEngine),await mp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new RD})()}createDatastore(e){const t=rd(e.databaseInfo.databaseId),r=(function(u){return new cD(u)})(e.databaseInfo);return(function(u,c,m,g){return new mD(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,c,m){return new pD(r,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>FE(this.syncEngine,t,0)),(function(){return zE.v()?new zE:new aD})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,T){const E=new zD(o,u,c,m,g,p);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=de(o);ee(xa,"RemoteStore shutting down."),u.Ea.add(5),await cc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ju.provider={build:()=>new Ju};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):St("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="FirestoreClient";class sV{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=zp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{ee(Ts,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ee(Ts,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=gy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Mg(s,e){s.asyncQueue.verifyOperationInProgress(),ee(Ts,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await MS(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function GE(s,e){s.asyncQueue.verifyOperationInProgress();const t=await aV(s);ee(Ts,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>UE(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>UE(e.remoteStore,o))),s._onlineComponents=e}async function aV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ee(Ts,"Using user provided OfflineComponentProvider");try{await Mg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Bu("Error using user provided cache. Falling back to memory cache: "+t),await Mg(s,new Zu)}}else ee(Ts,"Using default OfflineComponentProvider"),await Mg(s,new nV(void 0));return s._offlineComponents}async function rA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ee(Ts,"Using user provided OnlineComponentProvider"),await GE(s,s._uninitializedComponentsProvider._online)):(ee(Ts,"Using default OnlineComponentProvider"),await GE(s,new Ju))),s._onlineComponents}function oV(s){return rA(s).then((e=>e.syncEngine))}async function KE(s){const e=await rA(s),t=e.eventManager;return t.onListen=LD.bind(null,e.syncEngine),t.onUnlisten=jD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BD.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="firestore.googleapis.com",YE=!0;class XE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lV,this.ssl=YE}else this.host=e.host,this.ssl=e.ssl??YE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ES;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wS)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class by{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $2;switch(r.type){case"firstParty":return new W2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=QE.get(t);r&&(ee("ComponentProvider","Removing Datastore"),QE.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ld(this.firestore,e,this._query)}}class Pt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(rc(t,Pt._jsonSchema))return new Pt(e,r||null,new oe(Ye.fromString(t.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:kt("string",Pt._jsonSchemaVersion),referencePath:kt("string")};class ps extends ld{constructor(e,t,r){super(e,t,$f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new oe(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function $E(s,e,...t){if(s=en(s),s1("collection","path",e),s instanceof by){const r=Ye.fromString(e,...t);return LT(r),new ps(s,null,r)}{if(!(s instanceof Pt||s instanceof ps))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ye.fromString(e,...t));return LT(r),new ps(s.firestore,null,r)}}function hi(s,e,...t){if(s=en(s),arguments.length===1&&(e=zp.newId()),s1("doc","path",e),s instanceof by){const r=Ye.fromString(e,...t);return zT(r),new Pt(s,null,new oe(r))}{if(!(s instanceof Pt||s instanceof ps))throw new le(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ye.fromString(e,...t));return zT(r),new Pt(s.firestore,s instanceof ps?s.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="AsyncQueue";class JE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HS(this,"async_queue_retry"),this._c=()=>{const r=cf();r&&ee(ZE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=cf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=cf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ms;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bs(e))throw e;ee(ZE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,St("INTERNAL UNHANDLED ERROR: ",WE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=my.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&he(47125,{Pc:WE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function WE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Ra extends by{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new JE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JE(e),this._firestoreClient=void 0,await e}}}function uV(s,e,t){t||(t=Sf);const r=wp(s,"firestore");if(r.isInitialized(t)){const o=r.getImmediate({identifier:t}),u=r.getOptions(t);if(_a(u,e))return o;throw new le(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new le(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wS)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&rl(e.host)&&hb(e.host),r.initialize({options:e,instanceIdentifier:t})}function aA(s){if(s._terminated)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||cV(s),s._firestoreClient}function cV(s){var r,o,u;const e=s._freezeSettings(),t=(function(m,g,p,T){return new zC(m,g,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,sA(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new sV(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(At.fromBase64String(e))}catch(t){throw new le(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:kt("string",Yn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(rc(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:kt("string",Bi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rc(e,qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new qi(e.vectorValues);throw new le(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qi._jsonSchemaVersion="firestore/vectorValue/1.0",qi._jsonSchema={type:kt("string",qi._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=/^__.*__$/;class fV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}class oA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Er(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:s})}}class Sy{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lA(this.Ac)&&hV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rd(e)}Cc(e,t,r,o=!1){return new Sy({Ac:e,methodName:t,Dc:r,path:gt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ay(s){const e=s._freezeSettings(),t=rd(s._databaseId);return new dV(s._databaseId,!!e.ignoreUndefinedProperties,t)}function uA(s,e,t,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);Iy("Data must be an object, but it was:",c,r);const m=cA(r,c);let g,p;if(u.merge)g=new En(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const E of u.mergeFields){const I=yp(e,E,t);if(!c.contains(I))throw new le(W.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);fA(T,I)||T.push(I)}g=new En(T),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new fV(new an(m),g,p)}class hd extends cd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}class wy extends cd{_toFieldTransform(e){return new J1(e.path,new $o)}isEqual(e){return e instanceof wy}}function mV(s,e,t,r){const o=s.Cc(1,e,t);Iy("Data must be an object, but it was:",o,r);const u=[],c=an.empty();Ss(r,((g,p)=>{const T=xy(e,g,t);p=en(p);const E=o.yc(T);if(p instanceof hd)u.push(T);else{const I=fd(p,E);I!=null&&(u.push(T),c.set(T,I))}}));const m=new En(u);return new oA(c,m,o.fieldTransforms)}function gV(s,e,t,r,o,u){const c=s.Cc(1,e,t),m=[yp(e,r,t)],g=[o];if(u.length%2!=0)throw new le(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(yp(e,u[I])),g.push(u[I+1]);const p=[],T=an.empty();for(let I=m.length-1;I>=0;--I)if(!fA(p,m[I])){const k=m[I];let $=g[I];$=en($);const Y=c.yc(k);if($ instanceof hd)p.push(k);else{const F=fd($,Y);F!=null&&(p.push(k),T.set(k,F))}}const E=new En(p);return new oA(T,E,c.fieldTransforms)}function fd(s,e){if(hA(s=en(s)))return Iy("Unsupported field value:",e,s),cA(s,e);if(s instanceof cd)return(function(r,o){if(!lA(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=fd(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=We.fromDate(r);return{timestampValue:Wo(o.serializer,u)}}if(r instanceof We){const u=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wo(o.serializer,u)}}if(r instanceof Bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:sS(o.serializer,r._byteString)};if(r instanceof Pt){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ny(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof qi)return(function(c,m){return{mapValue:{fields:{[Kp]:{stringValue:Qp},[Ko]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Zp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Lp(r)}`)})(s,e)}function cA(s,e){const t={};return S1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(s,((r,o)=>{const u=fd(o,e.mc(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function hA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof We||s instanceof Bi||s instanceof Yn||s instanceof Pt||s instanceof cd||s instanceof qi)}function Iy(s,e,t){if(!hA(t)||!a1(t)){const r=Lp(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function yp(s,e,t){if((e=en(e))instanceof ud)return e._internalPath;if(typeof e=="string")return xy(s,e);throw zf("Field path arguments must be of type string or ",s,!1,void 0,t)}const pV=new RegExp("[~\\*/\\[\\]]");function xy(s,e,t){if(e.search(pV)>=0)throw zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new ud(...e.split("."))._internalPath}catch{throw zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function zf(s,e,t,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new le(W.INVALID_ARGUMENT,m+s+g)}function fA(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yV extends dA{data(){return super.data()}}function mA(s,e){return typeof e=="string"?xy(s,e):e instanceof ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vV{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ss(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){var r,o,u;const t=(u=(o=(r=e.fields)==null?void 0:r[Ko].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>mt(c.doubleValue)));return new qi(t)}convertGeoPoint(e){return new Bi(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Qf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qu(e));default:return null}}convertTimestamp(e){const t=yr(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ye.fromString(e);pe(gS(r),9688,{name:e});const o=new ba(r.get(1),r.get(3)),u=new oe(r.popFirst(5));return o.isEqual(t)||St(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends dA{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:kt("string",ya._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class hf extends ya{data(e={}){return super.data(e)}}class zo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new hf(this._firestore,this._userDataWriter,r.key,r,new xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,T=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:TV(m.type),doc:g,oldIndex:p,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:s})}}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:kt("string",zo._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class pA extends vV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}function tb(s,e,t){s=mr(s,Pt);const r=mr(s.firestore,Ra),o=gA(s.converter,e);return dd(r,[uA(Ay(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,on.none())])}function fa(s,e,t,...r){s=mr(s,Pt);const o=mr(s.firestore,Ra),u=Ay(o);let c;return c=typeof(e=en(e))=="string"||e instanceof ud?gV(u,"updateDoc",s._key,e,t,r):mV(u,"updateDoc",s._key,e),dd(o,[c.toMutation(s._key,on.exists(!0))])}function yA(s){return dd(mr(s.firestore,Ra),[new ed(s._key,on.none())])}function EV(s,e){const t=mr(s.firestore,Ra),r=hi(s),o=gA(s.converter,e);return dd(t,[uA(Ay(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function _A(s,...e){var g,p,T;s=en(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||eb(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(eb(e[r])){const E=e[r];e[r]=(g=E.next)==null?void 0:g.bind(E),e[r+1]=(p=E.error)==null?void 0:p.bind(E),e[r+2]=(T=E.complete)==null?void 0:T.bind(E)}let u,c,m;if(s instanceof Pt)c=mr(s.firestore,Ra),m=$f(s._key.path),u={next:E=>{e[r]&&e[r](bV(c,s,E))},error:e[r+1],complete:e[r+2]};else{const E=mr(s,ld);c=mr(E.firestore,Ra),m=E._query;const I=new pA(c);u={next:k=>{e[r]&&e[r](new zo(c,I,E,k))},error:e[r+1],complete:e[r+2]},_V(s._query)}return(function(I,k,$,Y){const F=new rV(Y),se=new OD(k,F,$);return I.asyncQueue.enqueueAndForget((async()=>CD(await KE(I),se))),()=>{F.Nu(),I.asyncQueue.enqueueAndForget((async()=>ND(await KE(I),se)))}})(aA(c),m,o,u)}function dd(s,e){return(function(r,o){const u=new ms;return r.asyncQueue.enqueueAndForget((async()=>qD(await oV(r),o,u))),u.promise})(aA(s),e)}function bV(s,e,t){const r=t.docs.get(e._key),o=new pA(s);return new ya(s,o,e._key,r,new xu(t.hasPendingWrites,t.fromCache),e.converter)}class SV{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=xV(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function AV(s){return new SV(s)}class wV{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ju.provider,this._offlineComponentProvider={build:t=>new iA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class IV{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ju.provider,this._offlineComponentProvider={build:t=>new iV(t,e==null?void 0:e.cacheSizeBytes)}}}function xV(s){return new wV(s==null?void 0:s.forceOwnership)}function RV(){return new IV}function Vo(){return new wy("serverTimestamp")}(function(e,t=!0){(function(o){ol=o})(sl),Lo(new va("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Ra(new Z2(r.getProvider("auth-internal")),new eC(c,r.getProvider("app-check-internal")),(function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new le(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(p.options.projectId,T)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),fs(OT,MT,e),fs(OT,MT,"esm2020")})();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NV=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),nb=s=>{const e=NV(s);return e.charAt(0).toUpperCase()+e.slice(1)},vA=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),DV=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=Oe.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>Oe.createElement("svg",{ref:g,...VV,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:vA("lucide",o),...!u&&!DV(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,T])=>Oe.createElement(p,T)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=(s,e)=>{const t=Oe.forwardRef(({className:r,...o},u)=>Oe.createElement(OV,{ref:u,iconNode:e,className:vA(`lucide-${CV(nb(s))}`,`lucide-${s}`,r),...o}));return t.displayName=nb(s),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],TA=Kt("circle-check",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],EA=Kt("circle-x",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M2 3v18",key:"pzttux"}],["rect",{width:"12",height:"18",x:"6",y:"3",rx:"2",key:"btr8bg"}],["path",{d:"M22 3v18",key:"6jf3v"}]],zV=Kt("gallery-horizontal",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],_p=Kt("hand",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],bA=Kt("image",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],vp=Kt("keyboard",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],qV=Kt("layout-grid",BV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],HV=Kt("loader-circle",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],KV=Kt("lock",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],YV=Kt("mouse-pointer-2",QV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],SA=Kt("play",XV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tp=Kt("plus",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],JV=Kt("sparkles",ZV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kg=Kt("trash-2",WV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],t4=Kt("triangle-alert",e4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ep=Kt("trophy",n4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],r4=Kt("user",i4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],a4=Kt("users",s4),o4={apiKey:"AIzaSyAYtsSzPBLdZ6gnsFJZvyXEwBvq5xxsahY",authDomain:"mohoot-007.firebaseapp.com",projectId:"mohoot-007",storageBucket:"mohoot-007.firebasestorage.app",messagingSenderId:"277114765994",appId:"1:277114765994:web:5d5beff3bb4be86d8dc6d3"},l4=typeof __firebase_config<"u"?JSON.parse(__firebase_config):o4,AA=_b(l4),Pg=Q2(AA),Xn=uV(AA,{localCache:AV({tabManager:RV()})}),$n=typeof __app_id<"u"?__app_id:"mohoot-prod",dt={bg:"bg-[#020617]",glassCard:"bg-[#0F172A]/60 backdrop-blur-xl border border-white/10 shadow-2xl",primaryGradient:"bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white shadow-violet-500/20",textGradient:"text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-fuchsia-400",input:"bg-[#020617] border border-white/10 text-white focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all",danger:"text-rose-400 hover:bg-rose-500/10 border border-transparent hover:border-rose-500/20"},wA=[{id:0,color:"bg-gradient-to-br from-rose-700 to-rose-900 border-rose-600/50"},{id:1,color:"bg-gradient-to-br from-blue-700 to-blue-900 border-blue-600/50"},{id:2,color:"bg-gradient-to-br from-amber-700 to-amber-900 border-amber-600/50"},{id:3,color:"bg-gradient-to-br from-emerald-700 to-emerald-900 border-emerald-600/50"}],ib=[{bg:"bg-slate-900",border:"border-violet-500/30",glow:"shadow-violet-900/20"},{bg:"bg-slate-900",border:"border-fuchsia-500/30",glow:"shadow-fuchsia-900/20"},{bg:"bg-slate-900",border:"border-cyan-500/30",glow:"shadow-cyan-900/20"}],Yh=()=>A.jsx("style",{children:`
    /* PREMIUM SCROLLBAR - GLOBAL */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(2, 6, 23, 0.5);
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(139, 92, 246, 0.3);
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(139, 92, 246, 0.6);
    }
    
    .custom-scrollbar::-webkit-scrollbar {
        width: 4px;
    }
    
    @keyframes fall {
      0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
    }
  `}),u4=()=>{const s=Array.from({length:50}).map((e,t)=>({left:Math.random()*100+"%",animationDelay:Math.random()*5+"s",backgroundColor:["#f43f5e","#3b82f6","#10b981","#f59e0b","#8b5cf6"][Math.floor(Math.random()*5)]}));return A.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:s.map((e,t)=>A.jsx("div",{className:"absolute top-0 w-3 h-3 rounded-full animate-[fall_5s_linear_infinite]",style:{left:e.left,animationDelay:e.animationDelay,backgroundColor:e.backgroundColor,opacity:.7}},t))})},c4=({quiz:s,index:e,onHost:t,onEdit:r})=>{var u;const o=ib[e%ib.length];return A.jsxs("div",{onClick:()=>r(s),className:`${o.bg} border ${o.border} ${o.glow} h-64 rounded-3xl p-6 relative flex flex-col justify-between shadow-lg cursor-pointer hover:scale-[1.02] hover:shadow-2xl transition-all duration-300 select-none group overflow-hidden`,children:[A.jsx("div",{className:"flex-1 flex items-center justify-center w-full text-center px-2",children:A.jsx("h3",{className:"font-bold text-2xl text-white leading-tight break-words line-clamp-3 group-hover:text-violet-200 transition-colors",children:s.title||"Untitled"})}),A.jsxs("div",{className:"w-full flex items-center justify-between pt-4 border-t border-white/5 mt-2 relative z-10",children:[A.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest group-hover:text-slate-200 transition-colors",children:[((u=s.questions)==null?void 0:u.length)||0," Questions"]}),A.jsx("button",{onClick:c=>{c.stopPropagation(),t(s)},className:`
            opacity-0 group-hover:opacity-100 
            translate-y-4 group-hover:translate-y-0
            transition-all duration-300 ease-out
            p-3 rounded-xl shadow-lg hover:scale-110 active:scale-95 
            ${dt.primaryGradient} shadow-violet-500/30
          `,title:"Host Live",children:A.jsx(SA,{size:20,fill:"currentColor",className:"ml-0.5"})})]})]})},h4=({user:s,onSignOut:e})=>A.jsxs("nav",{className:"bg-[#020617]/80 backdrop-blur-xl border-b border-white/5 px-8 py-5 flex justify-between items-center sticky top-0 z-20",children:[A.jsxs("div",{className:"font-black text-2xl tracking-tighter",children:[A.jsx("span",{className:"text-violet-500",children:"M"}),A.jsx("span",{className:dt.textGradient,children:"ohoot"}),A.jsx("span",{className:"text-white",children:"!"})]}),A.jsx("div",{className:"flex items-center gap-4",children:A.jsxs("button",{onClick:e,className:"relative group rounded-full transition-all focus:outline-none",title:"Sign Out",children:[A.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-full opacity-0 group-hover:opacity-100 blur transition duration-500"}),A.jsx("div",{className:"relative rounded-full ring-2 ring-white/10 group-hover:ring-transparent bg-[#020617] p-0.5 transition-all",children:s!=null&&s.photoURL?A.jsx("img",{src:s.photoURL,className:"w-9 h-9 rounded-full object-cover",alt:"Profile"}):A.jsx("div",{className:"w-9 h-9 bg-slate-800 rounded-full flex items-center justify-center text-violet-400",children:A.jsx(r4,{size:18})})})]})})]}),md=({onClose:s})=>A.jsxs("div",{className:"fixed top-0 left-0 right-0 p-6 flex justify-between items-center z-50 pointer-events-none",children:[A.jsxs("div",{className:"font-black text-xl tracking-tighter text-white/20 pointer-events-auto select-none",children:["M",A.jsx("span",{className:"text-white/10",children:"ohoot"}),A.jsx("span",{className:"text-white/30",children:"!"})]}),A.jsx("div",{className:"pointer-events-auto group relative",children:A.jsx("button",{onClick:s,className:"bg-black/40 backdrop-blur border border-white/10 p-3 rounded-full text-slate-400 hover:bg-rose-500/20 hover:text-rose-400 hover:border-rose-500/50 transition-all",children:A.jsx(EA,{size:24})})})]}),f4=({pin:s,players:e,onStart:t,onClose:r})=>A.jsxs("div",{className:`min-h-screen ${dt.bg} flex flex-col items-center justify-center relative overflow-hidden`,children:[A.jsx(md,{onClose:r}),A.jsx("div",{className:"absolute top-0 -left-40 w-96 h-96 bg-violet-600/20 rounded-full blur-[128px]"}),A.jsx("div",{className:"absolute bottom-0 -right-40 w-96 h-96 bg-fuchsia-600/20 rounded-full blur-[128px]"}),A.jsxs("div",{className:`${dt.glassCard} p-12 rounded-[2.5rem] flex flex-col items-center text-center relative z-10 mb-10 animate-in fade-in zoom-in duration-500`,children:[A.jsx("div",{className:"text-xs font-bold text-violet-400 uppercase tracking-[0.4em] mb-6",children:"Join at mohoot.sbs"}),A.jsx("div",{className:"text-[7rem] md:text-[9rem] font-black leading-none text-white tabular-nums tracking-tighter drop-shadow-[0_0_30px_rgba(139,92,246,0.3)]",children:s}),A.jsxs("div",{className:"mt-8 flex items-center gap-3 text-slate-400 font-bold bg-white/5 px-6 py-2 rounded-full border border-white/5",children:[A.jsx(a4,{size:18})," ",e.length," Players Ready"]})]}),A.jsx("div",{className:"flex flex-wrap gap-3 justify-center max-w-5xl mb-24 relative z-10 px-4",children:e.map((o,u)=>A.jsx("div",{className:"bg-[#1e293b]/80 border border-violet-500/20 px-5 py-2.5 rounded-xl shadow-lg font-bold text-base text-violet-200 animate-in zoom-in duration-300",children:o.nickname},u))}),A.jsx("div",{className:"fixed bottom-10 z-20",children:A.jsx("button",{disabled:e.length===0,onClick:t,className:`px-16 py-5 rounded-2xl font-black text-xl tracking-wide shadow-2xl transition-all ${e.length>0?dt.primaryGradient+" hover:scale-105 hover:shadow-violet-500/40":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:"START GAME"})})]}),d4=({snap:s,players:e,timeLeft:t,onSkip:r,onClose:o})=>{var x;const u=s.quizSnapshot.questions[s.currentQuestionIndex],c=u.type||"CHOICE",m=u.imageLayout||"GRID",g=u.images&&u.images.length>0?u.images:u.image?[u.image]:[],[p,T]=Oe.useState(0),[E,I]=Oe.useState(!1),[k,$]=Oe.useState(!1),[Y,F]=Oe.useState(!1),[se,re]=Oe.useState(""),ie=Oe.useRef(0),Te=Oe.useRef(new Set),be=e.filter(R=>R.lastAnsweredRoundId===s.roundId),ge=c==="BUZZER"?0:be.length;Oe.useEffect(()=>{I(!1),T(0)},[u]),Oe.useEffect(()=>{if(m==="CAROUSEL"&&g.length>1){const R=setInterval(()=>T(D=>(D+1)%g.length),4e3);return()=>clearInterval(R)}},[g.length,m]),Oe.useEffect(()=>{if(c!=="BUZZER"){if(ge>ie.current&&ge>0){const R=be.find(D=>!Te.current.has(D.uid||D.nickname));if(R){re(`${R.nickname} answered!`),F(!0);const D=setTimeout(()=>F(!1),3e3);return()=>clearTimeout(D)}}ie.current=ge,Te.current=new Set(be.map(R=>R.uid||R.nickname))}},[ge,be,c]),Oe.useEffect(()=>{c!=="BUZZER"&&e.length>0&&ge===e.length&&!k&&$(!0)},[ge,e.length,k,c]),Oe.useEffect(()=>{if(k&&c!=="BUZZER"){const R=setTimeout(()=>{fa(hi(Xn,"artifacts",$n,"sessions",s.pin),{endTime:Date.now()})},1500);return()=>clearTimeout(R)}},[k,s.pin,c]);const C=async R=>{var Ae,K;if(!s.buzzedPlayer)return;const D=s.buzzedPlayer.uid,V=hi(Xn,"artifacts",$n,"sessions",s.pin),z=Math.max(1e3,(u.duration||1)*1e3),w=Math.max(0,(s.endTime||Date.now())-Date.now()),ue=Number.isFinite(w/z)?w/z:0;if(R){const ne=Math.round(5+5*ue),ye=(((Ae=s.players[D])==null?void 0:Ae.score)||0)+ne;await fa(V,{[`players.${D}.score`]:ye,[`players.${D}.lastAnsweredRoundId`]:s.roundId,status:"LEADERBOARD",lastUpdated:Vo()})}else{const ye=Math.max(0,(((K=s.players[D])==null?void 0:K.score)||0)-10),Ue=s.lockedPlayers||[];await fa(V,{[`players.${D}.score`]:ye,buzzedPlayer:null,lockedPlayers:[...Ue,D]})}};return A.jsxs("div",{className:`min-h-screen ${dt.bg} relative flex flex-col`,children:[A.jsx(md,{onClose:o}),A.jsxs("div",{className:"flex-1 flex flex-col items-center pt-20 px-6 animate-in fade-in",children:[A.jsxs("div",{className:"w-full flex justify-between items-center max-w-6xl mb-8 relative",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("div",{className:"text-white/30 font-black text-2xl tracking-widest drop-shadow-sm",children:["Q",s.currentQuestionIndex+1]}),c==="BUZZER"&&A.jsxs("div",{className:"bg-rose-500/20 text-rose-400 px-3 py-1 rounded-full text-xs font-bold border border-rose-500/30 flex items-center gap-2",children:[A.jsx(_p,{size:14})," BUZZER MODE"]}),c==="TYPING"&&A.jsxs("div",{className:"bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-xs font-bold border border-blue-500/30 flex items-center gap-2",children:[A.jsx(vp,{size:14})," TYPING MODE"]})]}),A.jsx("div",{className:"absolute left-1/2 -translate-x-1/2",children:A.jsxs("div",{className:"relative group",children:[A.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-2xl opacity-50 blur group-hover:opacity-75 transition duration-1000"}),A.jsx("div",{className:"relative text-5xl font-black text-white bg-[#020617] px-8 py-3 rounded-xl border border-white/10",children:t})]})}),A.jsx("div",{className:"w-10"})]}),A.jsxs("div",{className:"flex-1 w-full max-w-6xl flex flex-col items-center justify-center text-center pb-20",children:[g.length>0&&A.jsx("div",{className:"w-full mb-8",children:m==="GRID"&&g.length>1?A.jsx("div",{className:`grid gap-4 w-full ${g.length===2?"grid-cols-2":"grid-cols-2 md:grid-cols-3"}`,children:g.map((R,D)=>A.jsxs("div",{className:"relative aspect-video rounded-2xl border border-white/10 bg-black/40 overflow-hidden shadow-2xl",children:[A.jsx("img",{src:R,className:"w-full h-full object-contain",alt:`Visual ${D+1}`}),A.jsx("div",{className:"absolute bottom-2 right-2 bg-black/60 px-2 py-0.5 rounded text-[10px] font-bold text-white/50",children:D+1})]},D))}):A.jsxs("div",{className:"relative w-full h-[35vh] flex items-center justify-center z-10",children:[A.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-2xl opacity-20 blur z-0 max-w-3xl mx-auto"}),E?A.jsxs("div",{className:"relative w-full max-w-3xl h-full flex flex-col items-center justify-center rounded-2xl border border-white/10 bg-black/40 z-20 text-slate-500",children:[A.jsx(bA,{size:48,className:"mb-2 opacity-50"}),A.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Image Unavailable"})]}):A.jsx("img",{src:g[p],onError:()=>I(!0),className:"relative max-h-full max-w-3xl object-contain rounded-2xl shadow-2xl border border-white/10 bg-black/40 z-20",alt:"Question Visual"},g[p]),g.length>1&&!E&&A.jsxs("div",{className:"absolute bottom-4 bg-black/60 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold text-white border border-white/10 shadow-lg z-30",children:[p+1," / ",g.length]})]})}),A.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white leading-tight mb-12 drop-shadow-lg max-w-4xl",children:u.text}),c==="CHOICE"&&A.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:u.answers.map((R,D)=>A.jsx("div",{className:`${wA[D].color} p-8 rounded-2xl text-white text-2xl font-black flex items-center justify-center shadow-lg border-2 border-white/10 transform transition-transform`,children:R},D))}),c==="TYPING"&&A.jsxs("div",{className:"w-full max-w-2xl bg-[#0F172A] border border-blue-500/30 p-8 rounded-3xl flex flex-col items-center gap-4 animate-in slide-in-from-bottom-5",children:[A.jsx(vp,{size:48,className:"text-blue-500 mb-2"}),A.jsx("div",{className:"text-xl text-slate-400 font-bold",children:"Instruction"}),A.jsx("div",{className:"text-2xl font-bold text-white/90 bg-black/30 px-6 py-4 rounded-xl border border-white/5 w-full tracking-wide",children:"Type your answer (case insensitive)"})]}),c==="BUZZER"&&A.jsx("div",{className:"w-full flex flex-col items-center justify-center min-h-[200px]",children:s.buzzedPlayer?A.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 border border-violet-500/50 p-10 rounded-3xl flex flex-col items-center gap-8 animate-in zoom-in duration-300 shadow-[0_0_50px_rgba(139,92,246,0.2)]",children:[A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("span",{className:"text-slate-400 text-sm font-bold uppercase tracking-[0.2em] mb-2",children:"Buzzed In By"}),A.jsx("div",{className:"text-5xl font-black text-white",children:(x=s.players[s.buzzedPlayer.uid])==null?void 0:x.nickname})]}),A.jsxs("div",{className:"flex gap-4 w-full",children:[A.jsxs("button",{onClick:()=>C(!1),className:"flex-1 bg-rose-600 hover:bg-rose-500 text-white py-6 rounded-2xl font-black text-2xl flex items-center justify-center gap-3 transition-transform hover:scale-[1.02] active:scale-95",children:[A.jsx(EA,{size:32})," WRONG"]}),A.jsxs("button",{onClick:()=>C(!0),className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white py-6 rounded-2xl font-black text-2xl flex items-center justify-center gap-3 transition-transform hover:scale-[1.02] active:scale-95",children:[A.jsx(TA,{size:32})," CORRECT"]})]})]}):A.jsx("div",{className:"flex flex-col items-center animate-pulse",children:A.jsx("div",{className:"bg-rose-500/10 border border-rose-500/20 px-8 py-4 rounded-full backdrop-blur-md",children:A.jsxs("h3",{className:"text-2xl font-black text-rose-400 uppercase tracking-[0.2em] flex items-center gap-3",children:[A.jsxs("span",{className:"relative flex h-3 w-3",children:[A.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),A.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-rose-500"})]}),"Waiting for Buzzer"]})})})})]}),Y&&A.jsx("div",{className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-5 fade-in duration-300",children:A.jsx("div",{className:"bg-[#0f172a]/90 backdrop-blur-xl border border-violet-500/30 text-white pl-6 pr-6 py-3 rounded-full shadow-[0_0_30px_rgba(124,58,237,0.3)] flex items-center gap-3",children:A.jsx("span",{className:"font-bold text-sm tracking-wide",children:se})})}),A.jsx("div",{className:"fixed bottom-6 right-6",children:A.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white px-6 py-3 font-bold text-sm uppercase tracking-wider transition-colors",children:"Skip "})})]})]})},m4=({snap:s,sortedPlayers:e,onNext:t,onClose:r})=>{const o=s.quizSnapshot.questions.length-(s.currentQuestionIndex+1),u=o<3&&o>=0,[c,m]=Oe.useState(5),[g,p]=Oe.useState(!1),T=s.quizSnapshot.questions[s.currentQuestionIndex],E=T&&T.type==="BUZZER"&&T.buzzerAnswer;return Oe.useEffect(()=>{if(c>0&&!g){const I=setTimeout(()=>m(k=>k-1),1e3);return()=>clearTimeout(I)}else c===0&&!g&&t()},[c,g]),A.jsxs("div",{className:`min-h-screen ${dt.bg} pt-12 px-6 relative flex flex-col items-center`,children:[A.jsx(md,{onClose:r}),E&&A.jsx("div",{className:"w-full max-w-4xl mb-8 animate-in slide-in-from-top-10 duration-700",children:A.jsxs("div",{className:"bg-gradient-to-r from-violet-900/40 to-fuchsia-900/40 border border-violet-500/30 p-6 rounded-2xl text-center shadow-[0_0_40px_rgba(139,92,246,0.15)]",children:[A.jsx("div",{className:"text-violet-300 font-bold uppercase tracking-widest text-xs mb-2",children:"The Answer Was"}),A.jsx("div",{className:"text-3xl md:text-4xl font-black text-white",children:T.buzzerAnswer})]})}),A.jsxs("div",{className:"max-w-3xl w-full mx-auto animate-in slide-in-from-bottom-8",children:[A.jsxs("div",{className:"text-center mb-10",children:[A.jsx(Ep,{size:48,className:"mx-auto text-yellow-500 mb-4 drop-shadow-[0_0_25px_rgba(234,179,8,0.4)]"}),A.jsx("h2",{className:"text-5xl font-black text-white tracking-tight",children:"Leaderboard"})]}),u&&A.jsxs("div",{className:"bg-violet-900/20 border border-violet-500/50 p-4 rounded-xl mb-6 text-center text-violet-300 font-bold uppercase tracking-widest animate-pulse",children:[A.jsx(KV,{size:16,className:"inline mr-2 mb-1"})," The Podium is Hidden..."]}),A.jsx("div",{className:"space-y-3 mb-20",children:e.slice(0,5).map((I,k)=>u&&k<3?A.jsx("div",{className:"p-4 rounded-xl flex justify-between items-center bg-[#020617] border border-white/5 opacity-50",children:A.jsxs("div",{className:"flex items-center gap-6",children:[A.jsx("span",{className:"font-black text-xl w-10 text-center text-slate-700",children:"?"}),A.jsx("span",{className:"font-bold text-xl text-slate-700",children:"----------------"})]})},k):A.jsxs("div",{className:`p-4 rounded-xl flex justify-between items-center border transition-all ${k===0?"bg-gradient-to-r from-yellow-500/10 to-transparent border-yellow-500/30":"bg-slate-900/50 border-white/5"}`,children:[A.jsxs("div",{className:"flex items-center gap-6",children:[A.jsx("span",{className:`font-black text-xl w-10 text-center ${k===0?"text-yellow-400":"text-slate-600"}`,children:k===0?A.jsx(Ep,{size:20,className:"mx-auto"}):k+1}),A.jsx("span",{className:"font-bold text-xl text-white",children:I.nickname})]}),A.jsx("span",{className:`font-mono font-black text-xl ${k===0?"text-yellow-400":"text-violet-400"}`,children:I.score})]},k))}),A.jsx("div",{className:"fixed bottom-10 inset-x-0 flex justify-center",children:A.jsxs("button",{onClick:()=>g?t():p(!0),className:`group relative ${dt.primaryGradient} pl-8 pr-10 py-4 rounded-2xl font-black text-lg shadow-2xl hover:scale-105 active:scale-95 transition-all flex items-center gap-3 overflow-hidden`,children:[A.jsx("span",{className:"relative z-10",children:!g&&c>0?`Auto Next (${c}s)`:"Next Round"}),A.jsx(SA,{size:18,fill:"currentColor",className:"relative z-10"}),!g&&c>0&&A.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-white/40 transition-all duration-1000 ease-linear w-full",style:{width:`${c/5*100}%`}})]})})]})]})},g4=({sortedPlayers:s,onClose:e})=>{const t=s.slice(0,3);return A.jsxs("div",{className:`min-h-screen ${dt.bg} flex flex-col items-center justify-center pt-10 overflow-hidden relative`,children:[A.jsx(md,{onClose:e}),A.jsx(u4,{}),A.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-violet-900/20 via-slate-950 to-slate-950 pointer-events-none"}),A.jsxs("div",{className:"flex items-end justify-center gap-4 md:gap-8 w-full max-w-5xl px-4 mb-20 relative z-10",children:[t[1]&&A.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-20 duration-[1500ms]",children:[A.jsx("div",{className:"text-xl font-black text-slate-400 mb-4",children:t[1].nickname}),A.jsxs("div",{className:"w-full h-44 bg-slate-800 rounded-t-2xl flex items-end justify-center pb-4 border-t border-slate-600 relative shadow-2xl",children:[A.jsx("span",{className:"text-5xl font-black text-white/10",children:"2"}),A.jsx("div",{className:"absolute top-0 inset-x-0 h-1 bg-slate-500 shadow-[0_0_20px_rgba(100,116,139,0.5)]"})]}),A.jsxs("div",{className:"mt-4 font-bold text-slate-500",children:[t[1].score," pts"]})]}),t[0]&&A.jsxs("div",{className:"flex flex-col items-center w-1/3 -mt-10 z-10 animate-in slide-in-from-bottom-32 duration-[2000ms]",children:[A.jsxs("div",{className:"relative",children:[A.jsx(Ep,{size:80,className:"text-yellow-400 mb-6 drop-shadow-[0_0_50px_rgba(250,204,21,0.6)] animate-bounce",fill:"currentColor"}),A.jsx("div",{className:"absolute -top-10 -right-10 bg-yellow-500 text-black font-black text-xs px-2 py-1 rounded rotate-12",children:"MVP!"})]}),A.jsx("div",{className:"text-4xl font-black text-white mb-4 tracking-tight drop-shadow-md",children:t[0].nickname}),A.jsxs("div",{className:"w-full h-72 bg-gradient-to-b from-yellow-500 to-yellow-700 rounded-t-3xl flex items-end justify-center pb-6 border-t-4 border-yellow-300 shadow-[0_0_80px_rgba(234,179,8,0.4)] relative overflow-hidden",children:[A.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20 mix-blend-overlay"}),A.jsx("span",{className:"text-8xl font-black text-white drop-shadow-xl relative z-10",children:"1"})]}),A.jsx("div",{className:"mt-6 font-black text-3xl text-yellow-400 bg-yellow-900/10 px-8 py-3 rounded-2xl border border-yellow-500/20 backdrop-blur-md shadow-[0_0_30px_rgba(234,179,8,0.2)]",children:t[0].score})]}),t[2]&&A.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-16 duration-[1200ms]",children:[A.jsx("div",{className:"text-xl font-black text-amber-700 mb-4",children:t[2].nickname}),A.jsx("div",{className:"w-full h-36 bg-amber-900/20 rounded-t-2xl flex items-end justify-center pb-4 border-t border-amber-800 relative shadow-xl",children:A.jsx("span",{className:"text-5xl font-black text-white/10",children:"3"})}),A.jsxs("div",{className:"mt-4 font-bold text-slate-500",children:[t[2].score," pts"]})]})]})]})};function p4(){const[s,e]=Oe.useState(null),[t,r]=Oe.useState("DASHBOARD"),[o,u]=Oe.useState(null),[c,m]=Oe.useState([]),[g,p]=Oe.useState(null);Oe.useEffect(()=>{const Y=kR(Pg,F=>{e(F),F&&T(F.uid)});return()=>Y()},[]);const T=Y=>{_A($E(Xn,"artifacts",$n,"users",Y,"quizzes"),F=>{m(F.docs.map(se=>({id:se.id,...se.data()})))})},E=async()=>{try{await n2(Pg,new cr)}catch(Y){console.error(Y)}},I=()=>{u({title:"New Quiz",questions:[{text:"",image:"",images:[],answers:["","","",""],correct:0,duration:20,type:"CHOICE"}]}),r("EDITOR")},k=async Y=>{const F=s.uid;Y.id?await tb(hi(Xn,"artifacts",$n,"users",F,"quizzes",Y.id),Y):await EV($E(Xn,"artifacts",$n,"users",F,"quizzes"),Y),r("DASHBOARD")},$=async Y=>{const F=Math.floor(1e5+Math.random()*9e5).toString(),se={pin:F,hostId:s.uid,quizId:Y.id,quizSnapshot:Y,currentQuestionIndex:-1,status:"LOBBY",players:{},createdAt:Vo(),buzzedPlayer:null,lockedPlayers:[]};await tb(hi(Xn,"artifacts",$n,"sessions",F),se),p(se),r("GAME")};return s?t==="GAME"?A.jsxs(A.Fragment,{children:[A.jsx(Yh,{}),A.jsx(_4,{user:s,sessionData:g,onExit:()=>r("DASHBOARD")})]}):t==="EDITOR"?A.jsxs(A.Fragment,{children:[A.jsx(Yh,{}),A.jsx(y4,{user:s,quiz:o,onSave:k,onCancel:()=>r("DASHBOARD")})]}):A.jsxs("div",{className:`min-h-screen ${dt.bg} font-sans pb-20`,children:[A.jsx(Yh,{}),A.jsx(h4,{user:s,onSignOut:()=>PR(Pg)}),A.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-10",children:[A.jsxs("div",{className:"flex justify-between items-end mb-10",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-4xl font-black text-white tracking-tight mb-2",children:"My Library"}),A.jsx("p",{className:"text-slate-400 font-medium",children:"Create, edit, and host your masterpieces."})]}),A.jsxs("button",{onClick:I,className:`${dt.primaryGradient} pl-6 pr-8 py-3 rounded-2xl font-bold flex items-center gap-2 transition-transform hover:scale-105 active:scale-95 shadow-lg shadow-violet-500/20`,children:[A.jsx(Tp,{size:24})," Create Quiz"]})]}),c.length===0?A.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 border-2 border-dashed border-white/10 rounded-3xl",children:[A.jsx(JV,{size:48,className:"text-violet-500 mb-4"}),A.jsx("div",{className:"text-xl font-bold text-slate-500",children:"No quizzes yet"}),A.jsx("div",{className:"text-sm text-slate-600",children:'Click "Create Quiz" to get started'})]}):A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((Y,F)=>A.jsx(c4,{quiz:Y,index:F,onHost:$,onEdit:se=>{u(se),r("EDITOR")}},Y.id||F))})]})]}):A.jsxs("div",{className:`h-screen ${dt.bg} flex items-center justify-center p-6 text-center`,children:[A.jsx(Yh,{}),A.jsxs("div",{className:`${dt.glassCard} p-10 rounded-3xl max-w-md`,children:[A.jsx("h1",{className:"text-5xl font-black text-white mb-2 tracking-tighter",children:"Mohoot!"}),A.jsx("p",{className:"text-slate-400 mb-8 font-medium",children:"The Ultimate Quiz Platform"}),A.jsx("button",{onClick:E,className:`${dt.primaryGradient} w-full py-4 rounded-xl font-bold text-lg`,children:"Login with Google"})]})]})}const y4=({user:s,quiz:e,onSave:t,onCancel:r})=>{const[o,u]=Oe.useState(e),[c,m]=Oe.useState(0),[g,p]=Oe.useState(""),[T,E]=Oe.useState(null),[I,k]=Oe.useState(!1),[$,Y]=Oe.useState(""),F=o.questions[c],se=F.images||(F.image?[F.image]:[]),re=(w,ue)=>{const Ae=[...o.questions];w==="images"?Ae[c]={...F,images:ue,image:""}:Ae[c]={...F,[w]:ue},u({...o,questions:Ae})},ie=()=>{g.trim()&&(re("images",[...se,g.trim()]),p(""))},Te=w=>{const ue=se.filter((Ae,K)=>K!==w);re("images",ue)},be=()=>{const w=o.questions[c],ue={text:"",image:"",images:[],answers:["","","",""],correct:0,duration:(w==null?void 0:w.duration)||20,type:(w==null?void 0:w.type)||"CHOICE",correctText:"",buzzerAnswer:"",imageLayout:"GRID"},Ae=[...o.questions,ue];u({...o,questions:Ae}),m(Ae.length-1)},ge=(w,ue)=>{if(w.stopPropagation(),o.questions.length<=1){re("text","");return}const Ae=o.questions.filter((K,ne)=>ne!==ue);u({...o,questions:Ae}),ue===c?m(Math.max(0,ue-1)):ue<c&&m(c-1)},C=(w,ue)=>{E(ue),w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("text/plain",ue)},x=(w,ue)=>{w.preventDefault(),w.dataTransfer.dropEffect="move"},R=(w,ue)=>{if(w.preventDefault(),T===null||T===ue){E(null);return}const Ae=[...o.questions],[K]=Ae.splice(T,1);Ae.splice(ue,0,K),u({...o,questions:Ae}),T===c?m(ue):c>T&&c<=ue?m(c-1):c<T&&c>=ue&&m(c+1),E(null)},D=w=>{switch(w){case"BUZZER":return A.jsx(_p,{size:14,className:"text-rose-400"});case"TYPING":return A.jsx(vp,{size:14,className:"text-blue-400"});default:return A.jsx(YV,{size:14,className:"text-violet-400"})}},V=()=>{k(!0),Y("")},z=async()=>{$==="CONFIRM"&&(o.id&&await yA(hi(Xn,"artifacts",$n,"users",s.uid,"quizzes",o.id)),k(!1),r())};return A.jsxs("div",{className:"flex gap-6 h-screen p-6 bg-[#020617] relative",children:[I&&A.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-[#0F172A] border border-rose-500/30 p-8 rounded-3xl max-w-md w-full shadow-[0_0_50px_rgba(225,29,72,0.2)] animate-in zoom-in duration-200",children:[A.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[A.jsx("div",{className:"bg-rose-500/10 p-4 rounded-full mb-4",children:A.jsx(t4,{size:32,className:"text-rose-500"})}),A.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Delete Quiz?"}),A.jsx("p",{className:"text-slate-400",children:"This action cannot be undone. All questions and data will be permanently lost."})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"text-xs font-bold text-rose-400 uppercase tracking-wider block mb-2",children:'Type "CONFIRM" to proceed'}),A.jsx("input",{className:"w-full bg-black/40 border border-rose-500/30 rounded-xl p-3 text-white font-bold text-center outline-none focus:border-rose-500 transition-all placeholder-white/20",value:$,onChange:w=>Y(w.target.value),placeholder:"CONFIRM"})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-3 rounded-xl font-bold text-slate-400 hover:bg-white/5 transition-colors",children:"Cancel"}),A.jsx("button",{disabled:$!=="CONFIRM",onClick:z,className:`flex-1 py-3 rounded-xl font-bold text-white transition-all ${$==="CONFIRM"?"bg-rose-600 hover:bg-rose-500 shadow-lg shadow-rose-600/20":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:"Delete Quiz"})]})]})}),A.jsx("div",{className:"w-80 flex flex-col gap-2",children:A.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-2 mt-4",children:[o.questions.map((w,ue)=>A.jsxs("div",{draggable:!0,onDragStart:Ae=>C(Ae,ue),onDragOver:Ae=>x(Ae),onDrop:Ae=>R(Ae,ue),onClick:()=>m(ue),className:`
                group w-full text-left p-4 rounded-xl border transition-all cursor-grab active:cursor-grabbing relative flex items-start gap-3 select-none
                ${ue===c?"border-violet-500/50 bg-violet-500/10 shadow-[0_0_15px_rgba(139,92,246,0.1)]":"border-white/5 bg-white/0 hover:bg-white/5 hover:border-white/10"}
                ${T===ue?"opacity-50 scale-95 border-violet-500 border-dashed":"opacity-100"}
              `,children:[A.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg border transition-colors ${ue===c?"bg-black/40 border-violet-500/30":"bg-transparent border-transparent group-hover:border-white/10"}`,children:D(w.type)}),A.jsx("div",{className:"flex-1 min-w-0",children:A.jsx("div",{className:`text-sm font-medium break-words leading-relaxed ${ue===c?"text-white":"text-slate-400 group-hover:text-slate-300"}`,children:w.text||A.jsx("span",{className:"italic opacity-30",children:"Type question..."})})}),A.jsx("button",{onClick:Ae=>ge(Ae,ue),className:"opacity-0 group-hover:opacity-100 p-1.5 text-slate-500 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all",title:"Delete Question",children:A.jsx(kg,{size:14})})]},ue)),A.jsxs("button",{onClick:be,className:"w-full py-4 border border-dashed border-slate-800 rounded-xl text-slate-600 font-bold text-sm hover:border-violet-500/50 hover:text-violet-400 transition-all flex items-center justify-center gap-2 mt-2 opacity-50 hover:opacity-100",children:[A.jsx(Tp,{size:16})," New Question"]})]})}),A.jsxs("div",{className:`${dt.glassCard} flex-1 rounded-3xl p-10 flex flex-col overflow-y-auto custom-scrollbar`,children:[A.jsx("div",{className:"mb-8 border-b border-white/5 pb-8",children:A.jsx("input",{className:"w-full text-4xl font-black bg-transparent border-none focus:ring-0 outline-none text-white placeholder-slate-700",value:o.title,onChange:w=>u({...o,title:w.target.value}),placeholder:"Enter Quiz Title..."})}),A.jsxs("div",{className:"flex-1 space-y-8",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block tracking-wider",children:"Question Text"}),A.jsx("textarea",{className:`${dt.input} w-full p-6 rounded-2xl text-xl font-bold resize-none shadow-inner`,rows:"2",value:F.text,onChange:w=>re("text",w.target.value),placeholder:"What is the meaning of..."})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block tracking-wider",children:"Settings"}),A.jsxs("div",{className:`${dt.input} p-4 rounded-xl flex items-center justify-between`,children:[A.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Question Type"}),A.jsxs("select",{value:F.type||"CHOICE",onChange:w=>re("type",w.target.value),className:"bg-black/30 text-white text-sm font-bold p-2 rounded-lg outline-none border border-white/10",children:[A.jsx("option",{value:"CHOICE",children:"Multiple Choice"}),A.jsx("option",{value:"BUZZER",children:"Buzzer Mode"}),A.jsx("option",{value:"TYPING",children:"Typing Mode"})]})]}),A.jsxs("div",{className:`${dt.input} flex flex-col gap-3 p-4 rounded-xl`,children:[A.jsxs("div",{className:"flex justify-between items-center mb-2",children:[A.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[A.jsx(bA,{size:16})," Visuals"]}),se.length>1&&A.jsxs("div",{className:"flex bg-black/30 rounded-lg p-1 border border-white/5",children:[A.jsx("button",{onClick:()=>re("imageLayout","CAROUSEL"),className:`p-1.5 rounded transition-all ${!F.imageLayout||F.imageLayout==="CAROUSEL"?"bg-white/10 text-white shadow":"text-slate-500 hover:text-slate-300"}`,title:"Carousel View",children:A.jsx(zV,{size:14})}),A.jsx("button",{onClick:()=>re("imageLayout","GRID"),className:`p-1.5 rounded transition-all ${F.imageLayout==="GRID"?"bg-white/10 text-white shadow":"text-slate-500 hover:text-slate-300"}`,title:"Grid View",children:A.jsx(qV,{size:14})})]})]}),A.jsxs("div",{className:"flex gap-2 mb-2",children:[A.jsx("input",{className:"bg-black/20 w-full outline-none text-sm text-white placeholder-slate-600 px-3 py-2 rounded-lg border border-white/5 focus:border-violet-500/50 transition-colors",value:g,onChange:w=>p(w.target.value),onKeyDown:w=>w.key==="Enter"&&ie(),placeholder:"Paste image URL here..."}),A.jsx("button",{onClick:ie,className:"bg-white/10 hover:bg-white/20 text-white p-2 rounded-lg transition-colors",children:A.jsx(Tp,{size:18})})]}),se.length===0?A.jsx("div",{className:"text-center py-4 text-slate-700 text-xs font-bold italic",children:"No images linked."}):A.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:se.map((w,ue)=>A.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden group border border-white/10 bg-black/20",children:[A.jsx("img",{src:w,className:"w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity"}),A.jsx("button",{onClick:()=>Te(ue),className:"absolute top-1 right-1 bg-rose-500/90 p-1 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-rose-600 shadow-md",title:"Remove Link",children:A.jsx(kg,{size:12})}),A.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/60 px-2 py-1 text-[9px] text-white/70 truncate",children:w})]},ue))})]}),A.jsxs("div",{className:`${dt.input} p-4 rounded-xl`,children:[A.jsx("span",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Duration (Seconds)"}),A.jsx("input",{type:"number",className:"bg-transparent w-full font-black text-xl outline-none text-white",value:F.duration,onChange:w=>re("duration",parseInt(w.target.value)||0)})]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block tracking-wider",children:F.type==="TYPING"?"Acceptable Answer":"Answer Options"}),(F.type==="CHOICE"||!F.type)&&A.jsx("div",{className:"grid gap-3",children:F.answers.map((w,ue)=>A.jsxs("div",{className:`group flex items-center gap-3 p-1.5 rounded-xl border transition-all ${F.correct===ue?"bg-violet-500/10 border-violet-500/50":"bg-[#020617] border-white/5 hover:border-white/10"}`,children:[A.jsx("button",{onClick:()=>re("correct",ue),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${F.correct===ue?wA[ue].color:"bg-slate-800 text-slate-600 hover:text-slate-400 group-hover:scale-105"}`,children:A.jsx(TA,{size:20,className:F.correct===ue?"text-white":"text-current"})}),A.jsx("input",{className:"bg-transparent flex-1 font-bold text-sm py-2 outline-none text-white placeholder-slate-700 transition-colors focus:placeholder-slate-500",value:w,onChange:Ae=>{const K=[...F.answers];K[ue]=Ae.target.value,re("answers",K)},placeholder:`Option ${ue+1}`})]},ue))}),F.type==="TYPING"&&A.jsxs("div",{className:`${dt.input} p-4 rounded-xl`,children:[A.jsx("span",{className:"text-xs font-bold text-slate-500 block mb-2",children:"Exact Match Text (Case Insensitive)"}),A.jsx("input",{className:"bg-black/30 w-full p-4 rounded-lg font-bold text-lg text-white border border-white/10 focus:border-blue-500 outline-none",value:F.correctText||"",onChange:w=>re("correctText",w.target.value),placeholder:"e.g. Paris"})]}),F.type==="BUZZER"&&A.jsxs("div",{className:`${dt.input} p-8 rounded-xl flex flex-col items-center justify-center gap-6`,children:[A.jsxs("div",{className:"text-center opacity-75",children:[A.jsx(_p,{size:32,className:"text-slate-600 mb-2 mx-auto"}),A.jsx("h4",{className:"text-white font-bold mb-1",children:"Buzzer Mode"}),A.jsx("p",{className:"text-slate-500 text-xs",children:"Verify the answer verbally."})]}),A.jsxs("div",{className:"w-full",children:[A.jsx("span",{className:"text-xs font-bold text-violet-400 block mb-2 uppercase tracking-wide",children:"The Answer (For Reveal)"}),A.jsx("input",{className:"bg-black/30 w-full p-3 rounded-lg font-bold text-base text-white border border-white/10 focus:border-violet-500 outline-none",value:F.buzzerAnswer||"",onChange:w=>re("buzzerAnswer",w.target.value),placeholder:"Displayed after round..."})]})]})]})]})]}),A.jsxs("div",{className:"mt-8 flex justify-between items-center pt-6 border-t border-white/5",children:[o.id&&A.jsxs("button",{onClick:V,className:dt.danger+" font-bold px-4 py-2 rounded-lg transition flex items-center gap-2",children:[A.jsx(kg,{size:18})," Delete Quiz"]}),A.jsxs("div",{className:"flex gap-4 ml-auto",children:[A.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:text-white transition",children:"Discard"}),A.jsx("button",{onClick:()=>t(o),className:`${dt.primaryGradient} px-8 py-3 rounded-xl font-bold`,children:"Save Quiz"})]})]})]})]})},_4=({user:s,sessionData:e,onExit:t})=>{const[r,o]=Oe.useState(null),[u,c]=Oe.useState(0),m=e.pin;Oe.useEffect(()=>_A(hi(Xn,"artifacts",$n,"sessions",m),E=>E.exists()?o({...E.data(),pin:m}):t()),[m]),Oe.useEffect(()=>{if((r==null?void 0:r.status)==="QUESTION"){const E=setInterval(()=>{var k,$,Y;const I=Math.ceil((r.endTime-Date.now())/1e3);if(c(Math.max(0,I)),I<=0){clearInterval(E);const F=($=(k=r.quizSnapshot)==null?void 0:k.questions)==null?void 0:$[r.currentQuestionIndex],se=(F==null?void 0:F.type)||"CHOICE",re=hi(Xn,"artifacts",$n,"sessions",m);if(se==="BUZZER"&&r.buzzedPlayer){const ie=r.buzzedPlayer.uid,Te=((Y=r.players[ie])==null?void 0:Y.score)||0,be=Math.max(0,Te-10);fa(re,{status:"LEADERBOARD",[`players.${ie}.score`]:be,buzzedPlayer:null,lastUpdated:Vo()})}else fa(re,{status:"LEADERBOARD",lastUpdated:Vo()})}},100);return()=>clearInterval(E)}},[r==null?void 0:r.status,r==null?void 0:r.endTime]);const g=()=>{const E=r.currentQuestionIndex+1,I=r.quizSnapshot.questions[E],k=I?{status:"QUESTION",currentQuestionIndex:E,roundId:Date.now(),startTime:Date.now()+2e3,endTime:Date.now()+2e3+I.duration*1e3,buzzedPlayer:null,lockedPlayers:[]}:{status:"FINISHED"};fa(hi(Xn,"artifacts",$n,"sessions",m),{...k,lastUpdated:Vo()})};if(!r)return A.jsx("div",{className:`h-screen flex items-center justify-center ${dt.bg}`,children:A.jsx(HV,{className:"animate-spin text-violet-500"})});const p=Object.values(r.players||{}),T=[...p].sort((E,I)=>(I.score||0)-(E.score||0));return r.status==="LOBBY"?A.jsx(f4,{pin:m,players:p,onStart:()=>g(),onClose:()=>yA(hi(Xn,"artifacts",$n,"sessions",m))}):r.status==="QUESTION"?A.jsx(d4,{snap:r,players:p,timeLeft:u,onSkip:()=>fa(hi(Xn,"artifacts",$n,"sessions",m),{status:"LEADERBOARD",lastUpdated:Vo()}),onClose:()=>t()}):r.status==="LEADERBOARD"?A.jsx(m4,{snap:r,sortedPlayers:T,onNext:g,onClose:()=>t()}):r.status==="FINISHED"?A.jsx(g4,{sortedPlayers:T,onClose:()=>t()}):null};class v4 extends Oe.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?A.jsxs("div",{style:{padding:20,color:"white",background:"#0f172a",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[A.jsx("h1",{children:"Something went wrong."}),A.jsx("p",{style:{color:"#f87171"},children:(e=this.state.error)==null?void 0:e.toString()}),A.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:20,padding:"10px 20px",borderRadius:8,border:"none",background:"#4f46e5",color:"white",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}hI.createRoot(document.getElementById("root")).render(A.jsx(Oe.StrictMode,{children:A.jsx(v4,{children:A.jsx(p4,{})})}));

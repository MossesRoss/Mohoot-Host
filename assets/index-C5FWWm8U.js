(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();var fg={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function Ww(){if(G0)return du;G0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return du.Fragment=t,du.jsx=e,du.jsxs=e,du}var K0;function tI(){return K0||(K0=1,fg.exports=Ww()),fg.exports}var j=tI(),dg={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function eI(){if(Q0)return wt;Q0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function O(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,W={};function ht(V,J,st){this.props=V,this.context=J,this.refs=W,this.updater=st||Q}ht.prototype.isReactComponent={},ht.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},ht.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function nt(){}nt.prototype=ht.prototype;function et(V,J,st){this.props=V,this.context=J,this.refs=W,this.updater=st||Q}var _t=et.prototype=new nt;_t.constructor=et,Z(_t,ht.prototype),_t.isPureReactComponent=!0;var At=Array.isArray;function Tt(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(V,J,st){var lt=st.ref;return{$$typeof:s,type:V,key:J,ref:lt!==void 0?lt:null,props:st}}function M(V,J){return C(V.type,J,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function k(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(st){return J[st]})}var R=/\/+/g;function le(V,J){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):J.toString(36)}function Pe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Tt,Tt):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function K(V,J,st,lt,bt){var xt=typeof V;(xt==="undefined"||xt==="boolean")&&(V=null);var Lt=!1;if(V===null)Lt=!0;else switch(xt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(V.$$typeof){case s:case t:Lt=!0;break;case T:return Lt=V._init,K(Lt(V._payload),J,st,lt,bt)}}if(Lt)return bt=bt(V),Lt=lt===""?"."+le(V,0):lt,At(bt)?(st="",Lt!=null&&(st=Lt.replace(R,"$&/")+"/"),K(bt,J,st,"",function(bs){return bs})):bt!=null&&(N(bt)&&(bt=M(bt,st+(bt.key==null||V&&V.key===bt.key?"":(""+bt.key).replace(R,"$&/")+"/")+Lt)),J.push(bt)),1;Lt=0;var ke=lt===""?".":lt+":";if(At(V))for(var ue=0;ue<V.length;ue++)lt=V[ue],xt=ke+le(lt,ue),Lt+=K(lt,J,st,xt,bt);else if(ue=O(V),typeof ue=="function")for(V=ue.call(V),ue=0;!(lt=V.next()).done;)lt=lt.value,xt=ke+le(lt,ue++),Lt+=K(lt,J,st,xt,bt);else if(xt==="object"){if(typeof V.then=="function")return K(Pe(V),J,st,lt,bt);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function rt(V,J,st){if(V==null)return V;var lt=[],bt=0;return K(V,lt,"","",function(xt){return J.call(st,xt,bt++)}),lt}function yt(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(st){(V._status===0||V._status===-1)&&(V._status=1,V._result=st)},function(st){(V._status===0||V._status===-1)&&(V._status=2,V._result=st)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var Bt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Kt={map:rt,forEach:function(V,J,st){rt(V,function(){J.apply(this,arguments)},st)},count:function(V){var J=0;return rt(V,function(){J++}),J},toArray:function(V){return rt(V,function(J){return J})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return wt.Activity=E,wt.Children=Kt,wt.Component=ht,wt.Fragment=e,wt.Profiler=o,wt.PureComponent=et,wt.StrictMode=r,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,wt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},wt.cache=function(V){return function(){return V.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(V,J,st){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var lt=Z({},V.props),bt=V.key;if(J!=null)for(xt in J.key!==void 0&&(bt=""+J.key),J)!w.call(J,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&J.ref===void 0||(lt[xt]=J[xt]);var xt=arguments.length-2;if(xt===1)lt.children=st;else if(1<xt){for(var Lt=Array(xt),ke=0;ke<xt;ke++)Lt[ke]=arguments[ke+2];lt.children=Lt}return C(V.type,bt,lt)},wt.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},wt.createElement=function(V,J,st){var lt,bt={},xt=null;if(J!=null)for(lt in J.key!==void 0&&(xt=""+J.key),J)w.call(J,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(bt[lt]=J[lt]);var Lt=arguments.length-2;if(Lt===1)bt.children=st;else if(1<Lt){for(var ke=Array(Lt),ue=0;ue<Lt;ue++)ke[ue]=arguments[ue+2];bt.children=ke}if(V&&V.defaultProps)for(lt in Lt=V.defaultProps,Lt)bt[lt]===void 0&&(bt[lt]=Lt[lt]);return C(V,xt,bt)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(V){return{$$typeof:m,render:V}},wt.isValidElement=N,wt.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:yt}},wt.memo=function(V,J){return{$$typeof:p,type:V,compare:J===void 0?null:J}},wt.startTransition=function(V){var J=I.T,st={};I.T=st;try{var lt=V(),bt=I.S;bt!==null&&bt(st,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(Tt,Bt)}catch(xt){Bt(xt)}finally{J!==null&&st.types!==null&&(J.types=st.types),I.T=J}},wt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},wt.use=function(V){return I.H.use(V)},wt.useActionState=function(V,J,st){return I.H.useActionState(V,J,st)},wt.useCallback=function(V,J){return I.H.useCallback(V,J)},wt.useContext=function(V){return I.H.useContext(V)},wt.useDebugValue=function(){},wt.useDeferredValue=function(V,J){return I.H.useDeferredValue(V,J)},wt.useEffect=function(V,J){return I.H.useEffect(V,J)},wt.useEffectEvent=function(V){return I.H.useEffectEvent(V)},wt.useId=function(){return I.H.useId()},wt.useImperativeHandle=function(V,J,st){return I.H.useImperativeHandle(V,J,st)},wt.useInsertionEffect=function(V,J){return I.H.useInsertionEffect(V,J)},wt.useLayoutEffect=function(V,J){return I.H.useLayoutEffect(V,J)},wt.useMemo=function(V,J){return I.H.useMemo(V,J)},wt.useOptimistic=function(V,J){return I.H.useOptimistic(V,J)},wt.useReducer=function(V,J,st){return I.H.useReducer(V,J,st)},wt.useRef=function(V){return I.H.useRef(V)},wt.useState=function(V){return I.H.useState(V)},wt.useSyncExternalStore=function(V,J,st){return I.H.useSyncExternalStore(V,J,st)},wt.useTransition=function(){return I.H.useTransition()},wt.version="19.2.3",wt}var Y0;function _p(){return Y0||(Y0=1,dg.exports=eI()),dg.exports}var $t=_p(),mg={exports:{}},mu={},gg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function nI(){return X0||(X0=1,(function(s){function t(K,rt){var yt=K.length;K.push(rt);t:for(;0<yt;){var Bt=yt-1>>>1,Kt=K[Bt];if(0<o(Kt,rt))K[Bt]=rt,K[yt]=Kt,yt=Bt;else break t}}function e(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var rt=K[0],yt=K.pop();if(yt!==rt){K[0]=yt;t:for(var Bt=0,Kt=K.length,V=Kt>>>1;Bt<V;){var J=2*(Bt+1)-1,st=K[J],lt=J+1,bt=K[lt];if(0>o(st,yt))lt<Kt&&0>o(bt,st)?(K[Bt]=bt,K[lt]=yt,Bt=lt):(K[Bt]=st,K[J]=yt,Bt=J);else if(lt<Kt&&0>o(bt,yt))K[Bt]=bt,K[lt]=yt,Bt=lt;else break t}}return rt}function o(K,rt){var yt=K.sortIndex-rt.sortIndex;return yt!==0?yt:K.id-rt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],T=1,E=null,A=3,O=!1,Q=!1,Z=!1,W=!1,ht=typeof setTimeout=="function"?setTimeout:null,nt=typeof clearTimeout=="function"?clearTimeout:null,et=typeof setImmediate<"u"?setImmediate:null;function _t(K){for(var rt=e(p);rt!==null;){if(rt.callback===null)r(p);else if(rt.startTime<=K)r(p),rt.sortIndex=rt.expirationTime,t(g,rt);else break;rt=e(p)}}function At(K){if(Z=!1,_t(K),!Q)if(e(g)!==null)Q=!0,Tt||(Tt=!0,k());else{var rt=e(p);rt!==null&&Pe(At,rt.startTime-K)}}var Tt=!1,I=-1,w=5,C=-1;function M(){return W?!0:!(s.unstable_now()-C<w)}function N(){if(W=!1,Tt){var K=s.unstable_now();C=K;var rt=!0;try{t:{Q=!1,Z&&(Z=!1,nt(I),I=-1),O=!0;var yt=A;try{e:{for(_t(K),E=e(g);E!==null&&!(E.expirationTime>K&&M());){var Bt=E.callback;if(typeof Bt=="function"){E.callback=null,A=E.priorityLevel;var Kt=Bt(E.expirationTime<=K);if(K=s.unstable_now(),typeof Kt=="function"){E.callback=Kt,_t(K),rt=!0;break e}E===e(g)&&r(g),_t(K)}else r(g);E=e(g)}if(E!==null)rt=!0;else{var V=e(p);V!==null&&Pe(At,V.startTime-K),rt=!1}}break t}finally{E=null,A=yt,O=!1}rt=void 0}}finally{rt?k():Tt=!1}}}var k;if(typeof et=="function")k=function(){et(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,le=R.port2;R.port1.onmessage=N,k=function(){le.postMessage(null)}}else k=function(){ht(N,0)};function Pe(K,rt){I=ht(function(){K(s.unstable_now())},rt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(K){switch(A){case 1:case 2:case 3:var rt=3;break;default:rt=A}var yt=A;A=rt;try{return K()}finally{A=yt}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(K,rt){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var yt=A;A=K;try{return rt()}finally{A=yt}},s.unstable_scheduleCallback=function(K,rt,yt){var Bt=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Bt+yt:Bt):yt=Bt,K){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=yt+Kt,K={id:T++,callback:rt,priorityLevel:K,startTime:yt,expirationTime:Kt,sortIndex:-1},yt>Bt?(K.sortIndex=yt,t(p,K),e(g)===null&&K===e(p)&&(Z?(nt(I),I=-1):Z=!0,Pe(At,yt-Bt))):(K.sortIndex=Kt,t(g,K),Q||O||(Q=!0,Tt||(Tt=!0,k()))),K},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(K){var rt=A;return function(){var yt=A;A=rt;try{return K.apply(this,arguments)}finally{A=yt}}}})(pg)),pg}var $0;function iI(){return $0||($0=1,gg.exports=nI()),gg.exports}var yg={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function rI(){if(J0)return tn;J0=1;var s=_p();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:T}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(g,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,T)},tn.flushSync=function(g){var p=c.T,T=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=T,r.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:O}):T==="script"&&r.d.X(g,{crossOrigin:E,integrity:A,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin);r.d.L(g,T,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var T=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},tn.requestFormReset=function(g){r.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,T){return c.H.useFormState(g,p,T)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var Z0;function sI(){if(Z0)return yg.exports;Z0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),yg.exports=rI(),yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function aI(){if(W0)return mu;W0=1;var s=iI(),t=_p(),e=sI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function T(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=T(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),ht=Symbol.for("react.profiler"),nt=Symbol.for("react.consumer"),et=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),Tt=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function le(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Z:return"Fragment";case ht:return"Profiler";case W:return"StrictMode";case At:return"Suspense";case Tt:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Q:return"Portal";case et:return n.displayName||"Context";case nt:return(n._context.displayName||"Context")+".Consumer";case _t:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:le(n.type)||"Memo";case w:i=n._payload,n=n._init;try{return le(n(i))}catch{}}return null}var Pe=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},Bt=[],Kt=-1;function V(n){return{current:n}}function J(n){0>Kt||(n.current=Bt[Kt],Bt[Kt]=null,Kt--)}function st(n,i){Kt++,Bt[Kt]=n.current,n.current=i}var lt=V(null),bt=V(null),xt=V(null),Lt=V(null);function ke(n,i){switch(st(xt,i),st(bt,n),st(lt,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?m0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=m0(i),n=g0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(lt),st(lt,n)}function ue(){J(lt),J(bt),J(xt)}function bs(n){n.memoizedState!==null&&st(Lt,n);var i=lt.current,a=g0(i,n.type);i!==a&&(st(bt,n),st(lt,a))}function xa(n){bt.current===n&&(J(lt),J(bt)),Lt.current===n&&(J(Lt),uu._currentValue=yt)}var Ca,Da;function ui(n){if(Ca===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ca=i&&i[1]||"",Da=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ca+n+Da}var ul=!1;function Ss(n,i){if(!n||ul)return"";ul=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var q=H}Reflect.construct(n,[],X)}else{try{X.call()}catch(H){q=H}n.call(X.prototype)}}else{try{throw Error()}catch(H){q=H}(X=n())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var x=_.split(`
`),B=b.split(`
`);for(f=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===x.length||f===B.length)for(l=x.length-1,f=B.length-1;1<=l&&0<=f&&x[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(x[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||x[l]!==B[f]){var G=`
`+x[l].replace(" at new "," at ");return n.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",n.displayName)),G}while(1<=l&&0<=f);break}}}finally{ul=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ui(a):""}function cl(n,i){switch(n.tag){case 26:case 27:case 5:return ui(n.type);case 16:return ui("Lazy");case 13:return n.child!==i&&i!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return Ss(n.type,!1);case 11:return Ss(n.type.render,!1);case 1:return Ss(n.type,!0);case 31:return ui("Activity");default:return""}}function hl(n){try{var i="",a=null;do i+=cl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Se=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,_r=s.unstable_cancelCallback,md=s.unstable_shouldYield,lc=s.unstable_requestPaint,on=s.unstable_now,As=s.unstable_getCurrentPriorityLevel,fl=s.unstable_ImmediatePriority,dl=s.unstable_UserBlockingPriority,vr=s.unstable_NormalPriority,gd=s.unstable_LowPriority,uc=s.unstable_IdlePriority,cc=s.log,hc=s.unstable_setDisableYieldValue,Qn=null,Ke=null;function On(n){if(typeof cc=="function"&&hc(n),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Qn,n)}catch{}}var ye=Math.clz32?Math.clz32:dc,fc=Math.log,Na=Math.LN2;function dc(n){return n>>>=0,n===0?32:31-(fc(n)/Na|0)|0}var ci=256,ws=262144,Ae=4194304;function hi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function fi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=hi(l):(_&=b,_!==0?f=hi(_):a||(a=b&~n,a!==0&&(f=hi(a))))):(b=l&~d,b!==0?f=hi(b):_!==0?f=hi(_):a||(a=l&~n,a!==0&&(f=hi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Yn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function pd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mc(){var n=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),n}function di(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Is(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,x=n.expirationTimes,B=n.hiddenUpdates;for(a=_&~a;0<a;){var G=31-ye(a),X=1<<G;b[G]=0,x[G]=-1;var q=B[G];if(q!==null)for(B[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~X}l!==0&&Rs(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Rs(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-ye(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function ml(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-ye(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function gl(n,i){var a=i&-i;return a=(a&42)!==0?1:xs(a),(a&(n.suspendedLanes|i))!==0?0:a}function xs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function qi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gc(){var n=rt.p;return n!==0?n:(n=window.event,n===void 0?32:L0(n.type))}function Xn(n,i){var a=rt.p;try{return rt.p=n,i()}finally{rt.p=a}}var $n=Math.random().toString(36).slice(2),we="__reactFiber$"+$n,je="__reactProps$"+$n,mi="__reactContainer$"+$n,Va="__reactEvents$"+$n,_d="__reactListeners$"+$n,pc="__reactHandles$"+$n,yc="__reactResources$"+$n,gi="__reactMarker$"+$n;function Oa(n){delete n[we],delete n[je],delete n[Va],delete n[_d],delete n[pc]}function pi(n){var i=n[we];if(i)return i;for(var a=n.parentNode;a;){if(i=a[mi]||a[we]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=b0(n);n!==null;){if(a=n[we])return a;n=b0(n)}return i}n=a,a=n.parentNode}return null}function Mn(n){if(n=n[we]||n[mi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Tn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function yi(n){var i=n[yc];return i||(i=n[yc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ie(n){n[gi]=!0}var pl=new Set,yl={};function _i(n,i){vi(n,i),vi(n+"Capture",i)}function vi(n,i){for(yl[n]=i,n=0;n<i.length;n++)pl.add(i[n])}var _l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},Tl={};function _c(n){return Se.call(Tl,n)?!0:Se.call(vl,n)?!1:_l.test(n)?Tl[n]=!0:(vl[n]=!0,!1)}function Ma(n,i,a){if(_c(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function En(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Re(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function qe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Tr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function El(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Qt(n){if(!n._valueTracker){var i=Tr(n)?"checked":"value";n._valueTracker=El(n,i,""+n[i])}}function Cs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Tr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ti(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ds=/[\n"\\]/g;function hn(n){return n.replace(Ds,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Pa(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+qe(i)):n.value!==""+qe(i)&&(n.value=""+qe(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?bl(n,_,qe(i)):a!=null?bl(n,_,qe(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+qe(b):n.removeAttribute("name")}function vc(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Qt(n);return}a=a!=null?""+qe(a):"",i=i!=null?""+qe(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Qt(n)}function bl(n,i,a){i==="number"&&Ti(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Er(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+qe(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Tc(n,i,a){if(i!=null&&(i=""+qe(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+qe(a):""}function br(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Pe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=qe(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Qt(n)}function fn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Ec.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Al(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Sl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Sl(n,d,i[d])}function ka(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(n){return Sr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Jn(){}var wl=null;function Pn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ar=null,Ei=null;function Ns(n){var i=Mn(n);if(i&&(n=i.stateNode)){var a=n[je]||null;t:switch(n=i.stateNode,i.type){case"input":if(Pa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[je]||null;if(!f)throw Error(r(90));Pa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Cs(l)}break t;case"textarea":Tc(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Er(n,!!a.multiple,i,!1)}}}var La=!1;function wr(n,i,a){if(La)return n(i,a);La=!0;try{var l=n(i);return l}finally{if(La=!1,(Ar!==null||Ei!==null)&&(gh(),Ar&&(i=Ar,n=Ei,Ei=Ar=null,Ns(i),n)))for(i=0;i<n.length;i++)Ns(n[i])}}function Zn(n,i){var a=n.stateNode;if(a===null)return null;var l=a[je]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(kn)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Vs=!1}var bi=null,Il=null,Os=null;function Rl(){if(Os)return Os;var n,i=Il,a=i.length,l,f="value"in bi?bi.value:bi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Os=f.slice(n,1<l?1-l:void 0)}function Ms(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Fi(){return!0}function Wn(){return!1}function Qe(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Fi:Wn,this.isPropagationStopped=Wn,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),i}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=Qe(Hi),Ir=E({},Hi,{view:0,detail:0}),xl=Qe(Ir),Rr,za,Ai,Ba=E({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ai&&(Ai&&n.type==="mousemove"?(Rr=n.screenX-Ai.screenX,za=n.screenY-Ai.screenY):za=Rr=0,Ai=n),Rr)},movementY:function(n){return"movementY"in n?n.movementY:za}}),Cl=Qe(Ba),Ps=E({},Ba,{dataTransfer:0}),Sc=Qe(Ps),Ac=E({},Ir,{relatedTarget:0}),ks=Qe(Ac),Dl=E({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),wc=Qe(Dl),ja=E({},Hi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ic=Qe(ja),Rc=E({},Hi,{data:0}),wi=Qe(Rc),xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Dc[n])?!!i[n]:!1}function xr(){return Nc}var ln=E({},Ir,{key:function(n){if(n.key){var i=xc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ms(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Cc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(n){return n.type==="keypress"?Ms(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ms(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Vc=Qe(ln),Oc=E({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gi=Qe(Oc),h=E({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),y=Qe(h),v=E({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Qe(v),L=E({},Ba,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Qe(L),it=E({},Hi,{newState:0,oldState:0}),It=Qe(it),_e=[9,13,27,32],Ft=kn&&"CompositionEvent"in window,ce=null;kn&&"documentMode"in document&&(ce=document.documentMode);var Un=kn&&"TextEvent"in window&&!ce,Ii=kn&&(!Ft||ce&&8<ce&&11>=ce),ti=" ",ei=!1;function Us(n,i){switch(n){case"keyup":return _e.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fa=!1;function S1(n,i){switch(n){case"compositionend":return qa(i);case"keypress":return i.which!==32?null:(ei=!0,ti);case"textInput":return n=i.data,n===ti&&ei?null:n;default:return null}}function A1(n,i){if(Fa)return n==="compositionend"||!Ft&&Us(n,i)?(n=Rl(),Os=Il=bi=null,Fa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ii&&i.locale!=="ko"?null:i.data;default:return null}}var w1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!w1[n.type]:i==="textarea"}function Iy(n,i,a,l){Ar?Ei?Ei.push(l):Ei=[l]:Ar=l,i=bh(i,"onChange"),0<i.length&&(a=new Si("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Nl=null,Vl=null;function I1(n){l0(n,0)}function Mc(n){var i=Tn(n);if(Cs(i))return n}function Ry(n,i){if(n==="change")return i}var xy=!1;if(kn){var vd;if(kn){var Td="oninput"in document;if(!Td){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),Td=typeof Cy.oninput=="function"}vd=Td}else vd=!1;xy=vd&&(!document.documentMode||9<document.documentMode)}function Dy(){Nl&&(Nl.detachEvent("onpropertychange",Ny),Vl=Nl=null)}function Ny(n){if(n.propertyName==="value"&&Mc(Vl)){var i=[];Iy(i,Vl,n,Pn(n)),wr(I1,i)}}function R1(n,i,a){n==="focusin"?(Dy(),Nl=i,Vl=a,Nl.attachEvent("onpropertychange",Ny)):n==="focusout"&&Dy()}function x1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Mc(Vl)}function C1(n,i){if(n==="click")return Mc(i)}function D1(n,i){if(n==="input"||n==="change")return Mc(i)}function N1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var bn=typeof Object.is=="function"?Object.is:N1;function Ol(n,i){if(bn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Se.call(i,f)||!bn(n[f],i[f]))return!1}return!0}function Vy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Oy(n,i){var a=Vy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Vy(a)}}function My(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?My(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Py(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ti(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ti(n.document)}return i}function Ed(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var V1=kn&&"documentMode"in document&&11>=document.documentMode,Ha=null,bd=null,Ml=null,Sd=!1;function ky(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sd||Ha==null||Ha!==Ti(l)||(l=Ha,"selectionStart"in l&&Ed(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ml&&Ol(Ml,l)||(Ml=l,l=bh(bd,"onSelect"),0<l.length&&(i=new Si("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ha)))}function Ls(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ga={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},Ad={},Uy={};kn&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function zs(n){if(Ad[n])return Ad[n];if(!Ga[n])return n;var i=Ga[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Uy)return Ad[n]=i[a];return n}var Ly=zs("animationend"),zy=zs("animationiteration"),By=zs("animationstart"),O1=zs("transitionrun"),M1=zs("transitionstart"),P1=zs("transitioncancel"),jy=zs("transitionend"),qy=new Map,wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wd.push("scrollEnd");function ni(n,i){qy.set(n,i),_i(i,[n])}var Pc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ln=[],Ka=0,Id=0;function kc(){for(var n=Ka,i=Id=Ka=0;i<n;){var a=Ln[i];Ln[i++]=null;var l=Ln[i];Ln[i++]=null;var f=Ln[i];Ln[i++]=null;var d=Ln[i];if(Ln[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Fy(a,f,d)}}function Uc(n,i,a,l){Ln[Ka++]=n,Ln[Ka++]=i,Ln[Ka++]=a,Ln[Ka++]=l,Id|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Rd(n,i,a,l){return Uc(n,i,a,l),Lc(n)}function Bs(n,i){return Uc(n,null,null,i),Lc(n)}function Fy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-ye(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Lc(n){if(50<nu)throw nu=0,km=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Qa={};function k1(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,i,a,l){return new k1(n,i,a,l)}function xd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ki(n,i){var a=n.alternate;return a===null?(a=Sn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Hy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function zc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")xd(n)&&(_=1);else if(typeof n=="string")_=jw(n,a,lt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case C:return n=Sn(31,a,i,f),n.elementType=C,n.lanes=d,n;case Z:return js(a.children,f,d,i);case W:_=8,f|=24;break;case ht:return n=Sn(12,a,i,f|2),n.elementType=ht,n.lanes=d,n;case At:return n=Sn(13,a,i,f),n.elementType=At,n.lanes=d,n;case Tt:return n=Sn(19,a,i,f),n.elementType=Tt,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case et:_=10;break t;case nt:_=9;break t;case _t:_=11;break t;case I:_=14;break t;case w:_=16,l=null;break t}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Sn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function js(n,i,a,l){return n=Sn(7,n,l,i),n.lanes=a,n}function Cd(n,i,a){return n=Sn(6,n,null,i),n.lanes=a,n}function Gy(n){var i=Sn(18,null,null,0);return i.stateNode=n,i}function Dd(n,i,a){return i=Sn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ky=new WeakMap;function zn(n,i){if(typeof n=="object"&&n!==null){var a=Ky.get(n);return a!==void 0?a:(i={value:n,source:i,stack:hl(i)},Ky.set(n,i),i)}return{value:n,source:i,stack:hl(i)}}var Ya=[],Xa=0,Bc=null,Pl=0,Bn=[],jn=0,Cr=null,Ri=1,xi="";function Qi(n,i){Ya[Xa++]=Pl,Ya[Xa++]=Bc,Bc=n,Pl=i}function Qy(n,i,a){Bn[jn++]=Ri,Bn[jn++]=xi,Bn[jn++]=Cr,Cr=n;var l=Ri;n=xi;var f=32-ye(l)-1;l&=~(1<<f),a+=1;var d=32-ye(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Ri=1<<32-ye(i)+f|a<<f|l,xi=d+n}else Ri=1<<d|a<<f|l,xi=n}function Nd(n){n.return!==null&&(Qi(n,1),Qy(n,1,0))}function Vd(n){for(;n===Bc;)Bc=Ya[--Xa],Ya[Xa]=null,Pl=Ya[--Xa],Ya[Xa]=null;for(;n===Cr;)Cr=Bn[--jn],Bn[jn]=null,xi=Bn[--jn],Bn[jn]=null,Ri=Bn[--jn],Bn[jn]=null}function Yy(n,i){Bn[jn++]=Ri,Bn[jn++]=xi,Bn[jn++]=Cr,Ri=i.id,xi=i.overflow,Cr=n}var Ye=null,ae=null,kt=!1,Dr=null,qn=!1,Od=Error(r(519));function Nr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(zn(i,n)),Od}function Xy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[we]=n,i[je]=l,a){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(a=0;a<ru.length;a++)Vt(ru[a],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),vc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),br(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||f0(i.textContent,a)?(l.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),l.onScroll!=null&&Vt("scroll",i),l.onScrollEnd!=null&&Vt("scrollend",i),l.onClick!=null&&(i.onclick=Jn),i=!0):i=!1,i||Nr(n,!0)}function $y(n){for(Ye=n.return;Ye;)switch(Ye.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Ye=Ye.return}}function $a(n){if(n!==Ye)return!1;if(!kt)return $y(n),kt=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Jm(n.type,n.memoizedProps)),a=!a),a&&ae&&Nr(n),$y(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ae=E0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ae=E0(n)}else i===27?(i=ae,Gr(n.type)?(n=ng,ng=null,ae=n):ae=i):ae=Ye?Hn(n.stateNode.nextSibling):null;return!0}function qs(){ae=Ye=null,kt=!1}function Md(){var n=Dr;return n!==null&&(pn===null?pn=n:pn.push.apply(pn,n),Dr=null),n}function kl(n){Dr===null?Dr=[n]:Dr.push(n)}var Pd=V(null),Fs=null,Yi=null;function Vr(n,i,a){st(Pd,i._currentValue),i._currentValue=a}function Xi(n){n._currentValue=Pd.current,J(Pd)}function kd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Ud(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var x=0;x<i.length;x++)if(b.context===i[x]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),kd(d.return,a,n),l||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),kd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ja(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=f.type;bn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===Lt.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(uu):n=[uu])}f=f.return}n!==null&&Ud(i,n,a,l),i.flags|=262144}function jc(n){for(n=n.firstContext;n!==null;){if(!bn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hs(n){Fs=n,Yi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xe(n){return Jy(Fs,n)}function qc(n,i){return Fs===null&&Hs(n),Jy(n,i)}function Jy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Yi===null){if(n===null)throw Error(r(308));Yi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Yi=Yi.next=i;return a}var U1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},L1=s.unstable_scheduleCallback,z1=s.unstable_NormalPriority,xe={$$typeof:et,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new U1,data:new Map,refCount:0}}function Ul(n){n.refCount--,n.refCount===0&&L1(z1,function(){n.controller.abort()})}var Ll=null,zd=0,Za=0,Wa=null;function B1(n,i){if(Ll===null){var a=Ll=[];zd=0,Za=qm(),Wa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return zd++,i.then(Zy,Zy),i}function Zy(){if(--zd===0&&Ll!==null){Wa!==null&&(Wa.status="fulfilled");var n=Ll;Ll=null,Za=0,Wa=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function j1(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Wy=K.S;K.S=function(n,i){kv=on(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&B1(n,i),Wy!==null&&Wy(n,i)};var Gs=V(null);function Bd(){var n=Gs.current;return n!==null?n:re.pooledCache}function Fc(n,i){i===null?st(Gs,Gs.current):st(Gs,i.pool)}function t_(){var n=Bd();return n===null?null:{parent:xe._currentValue,pool:n}}var to=Error(r(460)),jd=Error(r(474)),Hc=Error(r(542)),Gc={then:function(){}};function e_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function n_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Jn,Jn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,r_(n),n;default:if(typeof i.status=="string")i.then(Jn,Jn);else{if(n=re,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,r_(n),n}throw Qs=i,to}}function Ks(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Qs=a,to):a}}var Qs=null;function i_(){if(Qs===null)throw Error(r(459));var n=Qs;return Qs=null,n}function r_(n){if(n===to||n===Hc)throw Error(r(483))}var eo=null,zl=0;function Kc(n){var i=zl;return zl+=1,eo===null&&(eo=[]),n_(eo,n,i)}function Bl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Qc(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function s_(n){function i(P,D){if(n){var z=P.deletions;z===null?(P.deletions=[D],P.flags|=16):z.push(D)}}function a(P,D){if(!n)return null;for(;D!==null;)i(P,D),D=D.sibling;return null}function l(P){for(var D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function f(P,D){return P=Ki(P,D),P.index=0,P.sibling=null,P}function d(P,D,z){return P.index=z,n?(z=P.alternate,z!==null?(z=z.index,z<D?(P.flags|=67108866,D):z):(P.flags|=67108866,D)):(P.flags|=1048576,D)}function _(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function b(P,D,z,Y){return D===null||D.tag!==6?(D=Cd(z,P.mode,Y),D.return=P,D):(D=f(D,z),D.return=P,D)}function x(P,D,z,Y){var gt=z.type;return gt===Z?G(P,D,z.props.children,Y,z.key):D!==null&&(D.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===w&&Ks(gt)===D.type)?(D=f(D,z.props),Bl(D,z),D.return=P,D):(D=zc(z.type,z.key,z.props,null,P.mode,Y),Bl(D,z),D.return=P,D)}function B(P,D,z,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=Dd(z,P.mode,Y),D.return=P,D):(D=f(D,z.children||[]),D.return=P,D)}function G(P,D,z,Y,gt){return D===null||D.tag!==7?(D=js(z,P.mode,Y,gt),D.return=P,D):(D=f(D,z),D.return=P,D)}function X(P,D,z){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Cd(""+D,P.mode,z),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case O:return z=zc(D.type,D.key,D.props,null,P.mode,z),Bl(z,D),z.return=P,z;case Q:return D=Dd(D,P.mode,z),D.return=P,D;case w:return D=Ks(D),X(P,D,z)}if(Pe(D)||k(D))return D=js(D,P.mode,z,null),D.return=P,D;if(typeof D.then=="function")return X(P,Kc(D),z);if(D.$$typeof===et)return X(P,qc(P,D),z);Qc(P,D)}return null}function q(P,D,z,Y){var gt=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return gt!==null?null:b(P,D,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return z.key===gt?x(P,D,z,Y):null;case Q:return z.key===gt?B(P,D,z,Y):null;case w:return z=Ks(z),q(P,D,z,Y)}if(Pe(z)||k(z))return gt!==null?null:G(P,D,z,Y,null);if(typeof z.then=="function")return q(P,D,Kc(z),Y);if(z.$$typeof===et)return q(P,D,qc(P,z),Y);Qc(P,z)}return null}function H(P,D,z,Y,gt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return P=P.get(z)||null,b(D,P,""+Y,gt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case O:return P=P.get(Y.key===null?z:Y.key)||null,x(D,P,Y,gt);case Q:return P=P.get(Y.key===null?z:Y.key)||null,B(D,P,Y,gt);case w:return Y=Ks(Y),H(P,D,z,Y,gt)}if(Pe(Y)||k(Y))return P=P.get(z)||null,G(D,P,Y,gt,null);if(typeof Y.then=="function")return H(P,D,z,Kc(Y),gt);if(Y.$$typeof===et)return H(P,D,z,qc(D,Y),gt);Qc(D,Y)}return null}function ct(P,D,z,Y){for(var gt=null,jt=null,dt=D,Ct=D=0,Mt=null;dt!==null&&Ct<z.length;Ct++){dt.index>Ct?(Mt=dt,dt=null):Mt=dt.sibling;var qt=q(P,dt,z[Ct],Y);if(qt===null){dt===null&&(dt=Mt);break}n&&dt&&qt.alternate===null&&i(P,dt),D=d(qt,D,Ct),jt===null?gt=qt:jt.sibling=qt,jt=qt,dt=Mt}if(Ct===z.length)return a(P,dt),kt&&Qi(P,Ct),gt;if(dt===null){for(;Ct<z.length;Ct++)dt=X(P,z[Ct],Y),dt!==null&&(D=d(dt,D,Ct),jt===null?gt=dt:jt.sibling=dt,jt=dt);return kt&&Qi(P,Ct),gt}for(dt=l(dt);Ct<z.length;Ct++)Mt=H(dt,P,Ct,z[Ct],Y),Mt!==null&&(n&&Mt.alternate!==null&&dt.delete(Mt.key===null?Ct:Mt.key),D=d(Mt,D,Ct),jt===null?gt=Mt:jt.sibling=Mt,jt=Mt);return n&&dt.forEach(function($r){return i(P,$r)}),kt&&Qi(P,Ct),gt}function vt(P,D,z,Y){if(z==null)throw Error(r(151));for(var gt=null,jt=null,dt=D,Ct=D=0,Mt=null,qt=z.next();dt!==null&&!qt.done;Ct++,qt=z.next()){dt.index>Ct?(Mt=dt,dt=null):Mt=dt.sibling;var $r=q(P,dt,qt.value,Y);if($r===null){dt===null&&(dt=Mt);break}n&&dt&&$r.alternate===null&&i(P,dt),D=d($r,D,Ct),jt===null?gt=$r:jt.sibling=$r,jt=$r,dt=Mt}if(qt.done)return a(P,dt),kt&&Qi(P,Ct),gt;if(dt===null){for(;!qt.done;Ct++,qt=z.next())qt=X(P,qt.value,Y),qt!==null&&(D=d(qt,D,Ct),jt===null?gt=qt:jt.sibling=qt,jt=qt);return kt&&Qi(P,Ct),gt}for(dt=l(dt);!qt.done;Ct++,qt=z.next())qt=H(dt,P,Ct,qt.value,Y),qt!==null&&(n&&qt.alternate!==null&&dt.delete(qt.key===null?Ct:qt.key),D=d(qt,D,Ct),jt===null?gt=qt:jt.sibling=qt,jt=qt);return n&&dt.forEach(function(Zw){return i(P,Zw)}),kt&&Qi(P,Ct),gt}function ne(P,D,z,Y){if(typeof z=="object"&&z!==null&&z.type===Z&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case O:t:{for(var gt=z.key;D!==null;){if(D.key===gt){if(gt=z.type,gt===Z){if(D.tag===7){a(P,D.sibling),Y=f(D,z.props.children),Y.return=P,P=Y;break t}}else if(D.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===w&&Ks(gt)===D.type){a(P,D.sibling),Y=f(D,z.props),Bl(Y,z),Y.return=P,P=Y;break t}a(P,D);break}else i(P,D);D=D.sibling}z.type===Z?(Y=js(z.props.children,P.mode,Y,z.key),Y.return=P,P=Y):(Y=zc(z.type,z.key,z.props,null,P.mode,Y),Bl(Y,z),Y.return=P,P=Y)}return _(P);case Q:t:{for(gt=z.key;D!==null;){if(D.key===gt)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(P,D.sibling),Y=f(D,z.children||[]),Y.return=P,P=Y;break t}else{a(P,D);break}else i(P,D);D=D.sibling}Y=Dd(z,P.mode,Y),Y.return=P,P=Y}return _(P);case w:return z=Ks(z),ne(P,D,z,Y)}if(Pe(z))return ct(P,D,z,Y);if(k(z)){if(gt=k(z),typeof gt!="function")throw Error(r(150));return z=gt.call(z),vt(P,D,z,Y)}if(typeof z.then=="function")return ne(P,D,Kc(z),Y);if(z.$$typeof===et)return ne(P,D,qc(P,z),Y);Qc(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,D!==null&&D.tag===6?(a(P,D.sibling),Y=f(D,z),Y.return=P,P=Y):(a(P,D),Y=Cd(z,P.mode,Y),Y.return=P,P=Y),_(P)):a(P,D)}return function(P,D,z,Y){try{zl=0;var gt=ne(P,D,z,Y);return eo=null,gt}catch(dt){if(dt===to||dt===Hc)throw dt;var jt=Sn(29,dt,null,P.mode);return jt.lanes=Y,jt.return=P,jt}finally{}}}var Ys=s_(!0),a_=s_(!1),Or=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Mr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Pr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ht&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Lc(n),Fy(n,null,a),i}return Uc(n,l,i,a),Lc(n)}function jl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}function Hd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Gd=!1;function ql(){if(Gd){var n=Wa;if(n!==null)throw n}}function Fl(n,i,a,l){Gd=!1;var f=n.updateQueue;Or=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var x=b,B=x.next;x.next=null,_===null?d=B:_.next=B,_=x;var G=n.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==_&&(b===null?G.firstBaseUpdate=B:b.next=B,G.lastBaseUpdate=x))}if(d!==null){var X=f.baseState;_=0,G=B=x=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(Ot&q)===q:(l&q)===q){q!==0&&q===Za&&(Gd=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var ct=n,vt=b;q=i;var ne=a;switch(vt.tag){case 1:if(ct=vt.payload,typeof ct=="function"){X=ct.call(ne,X,q);break t}X=ct;break t;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=vt.payload,q=typeof ct=="function"?ct.call(ne,X,q):ct,q==null)break t;X=E({},X,q);break t;case 2:Or=!0}}q=b.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(B=G=H,x=X):G=G.next=H,_|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;H=b,b=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);G===null&&(x=X),f.baseState=x,f.firstBaseUpdate=B,f.lastBaseUpdate=G,d===null&&(f.shared.lanes=0),Br|=_,n.lanes=_,n.memoizedState=X}}function o_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function l_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)o_(a[n],i)}var no=V(null),Yc=V(0);function u_(n,i){n=rr,st(Yc,n),st(no,i),rr=n|i.baseLanes}function Kd(){st(Yc,rr),st(no,no.current)}function Qd(){rr=Yc.current,J(no),J(Yc)}var An=V(null),Fn=null;function kr(n){var i=n.alternate;st(ve,ve.current&1),st(An,n),Fn===null&&(i===null||no.current!==null||i.memoizedState!==null)&&(Fn=n)}function Yd(n){st(ve,ve.current),st(An,n),Fn===null&&(Fn=n)}function c_(n){n.tag===22?(st(ve,ve.current),st(An,n),Fn===null&&(Fn=n)):Ur()}function Ur(){st(ve,ve.current),st(An,An.current)}function wn(n){J(An),Fn===n&&(Fn=null),J(ve)}var ve=V(0);function Xc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||tg(a)||eg(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $i=0,Rt=null,te=null,Ce=null,$c=!1,io=!1,Xs=!1,Jc=0,Hl=0,ro=null,q1=0;function me(){throw Error(r(321))}function Xd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!bn(n[a],i[a]))return!1;return!0}function $d(n,i,a,l,f,d){return $i=d,Rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?Q_:hm,Xs=!1,d=a(l,f),Xs=!1,io&&(d=f_(i,a,l,f)),h_(n),d}function h_(n){K.H=Ql;var i=te!==null&&te.next!==null;if($i=0,Ce=te=Rt=null,$c=!1,Hl=0,ro=null,i)throw Error(r(300));n===null||De||(n=n.dependencies,n!==null&&jc(n)&&(De=!0))}function f_(n,i,a,l){Rt=n;var f=0;do{if(io&&(ro=null),Hl=0,io=!1,25<=f)throw Error(r(301));if(f+=1,Ce=te=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=Y_,d=i(a,l)}while(io);return d}function F1(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Gl(i):i,n=n.useState()[0],(te!==null?te.memoizedState:null)!==n&&(Rt.flags|=1024),i}function Jd(){var n=Jc!==0;return Jc=0,n}function Zd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Wd(n){if($c){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}$c=!1}$i=0,Ce=te=Rt=null,io=!1,Hl=Jc=0,ro=null}function un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?Rt.memoizedState=Ce=n:Ce=Ce.next=n,Ce}function Te(){if(te===null){var n=Rt.alternate;n=n!==null?n.memoizedState:null}else n=te.next;var i=Ce===null?Rt.memoizedState:Ce.next;if(i!==null)Ce=i,te=n;else{if(n===null)throw Rt.alternate===null?Error(r(467)):Error(r(310));te=n,n={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},Ce===null?Rt.memoizedState=Ce=n:Ce=Ce.next=n}return Ce}function Zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(n){var i=Hl;return Hl+=1,ro===null&&(ro=[]),n=n_(ro,n,i),i=Rt,(Ce===null?i.memoizedState:Ce.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Q_:hm),n}function Wc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Gl(n);if(n.$$typeof===et)return Xe(n)}throw Error(r(438,String(n)))}function tm(n){var i=null,a=Rt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Rt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Zc(),Rt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=M;return i.index++,a}function Ji(n,i){return typeof i=="function"?i(n):i}function th(n){var i=Te();return em(i,te,n)}function em(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,x=null,B=i,G=!1;do{var X=B.lane&-536870913;if(X!==B.lane?(Ot&X)===X:($i&X)===X){var q=B.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),X===Za&&(G=!0);else if(($i&q)===q){B=B.next,q===Za&&(G=!0);continue}else X={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(b=x=X,_=d):x=x.next=X,Rt.lanes|=q,Br|=q;X=B.action,Xs&&a(d,X),d=B.hasEagerState?B.eagerState:a(d,X)}else q={lane:X,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(b=x=q,_=d):x=x.next=q,Rt.lanes|=X,Br|=X;B=B.next}while(B!==null&&B!==i);if(x===null?_=d:x.next=b,!bn(d,n.memoizedState)&&(De=!0,G&&(a=Wa,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=x,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function nm(n){var i=Te(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);bn(d,i.memoizedState)||(De=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function d_(n,i,a){var l=Rt,f=Te(),d=kt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!bn((te||f).memoizedState,a);if(_&&(f.memoizedState=a,De=!0),f=f.queue,sm(p_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||Ce!==null&&Ce.memoizedState.tag&1){if(l.flags|=2048,so(9,{destroy:void 0},g_.bind(null,l,f,a,i),null),re===null)throw Error(r(349));d||($i&127)!==0||m_(l,i,a)}return a}function m_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Rt.updateQueue,i===null?(i=Zc(),Rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function g_(n,i,a,l){i.value=a,i.getSnapshot=l,y_(i)&&__(n)}function p_(n,i,a){return a(function(){y_(i)&&__(n)})}function y_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!bn(n,a)}catch{return!0}}function __(n){var i=Bs(n,2);i!==null&&yn(i,n,2)}function im(n){var i=un();if(typeof n=="function"){var a=n;if(n=a(),Xs){On(!0);try{a()}finally{On(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:n},i}function v_(n,i,a,l){return n.baseState=a,em(n,te,typeof l=="function"?l:Ji)}function H1(n,i,a,l,f){if(ih(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,T_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function T_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var b=a(f,l),x=K.S;x!==null&&x(_,b),E_(n,i,b)}catch(B){rm(n,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(f,l),E_(n,i,d)}catch(B){rm(n,i,B)}}function E_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){b_(n,i,l)},function(l){return rm(n,i,l)}):b_(n,i,a)}function b_(n,i,a){i.status="fulfilled",i.value=a,S_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,T_(n,a)))}function rm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,S_(i),i=i.next;while(i!==l)}n.action=null}function S_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function A_(n,i){return i}function w_(n,i){if(kt){var a=re.formState;if(a!==null){t:{var l=Rt;if(kt){if(ae){e:{for(var f=ae,d=qn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Hn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ae=Hn(f.nextSibling),l=f.data==="F!";break t}}Nr(l)}l=!1}l&&(i=a[0])}}return a=un(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A_,lastRenderedState:i},a.queue=l,a=H_.bind(null,Rt,l),l.dispatch=a,l=im(!1),d=cm.bind(null,Rt,!1,l.queue),l=un(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=H1.bind(null,Rt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function I_(n){var i=Te();return R_(i,te,n)}function R_(n,i,a){if(i=em(n,i,A_)[0],n=th(Ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Gl(i)}catch(_){throw _===to?Hc:_}else l=i;i=Te();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Rt.flags|=2048,so(9,{destroy:void 0},G1.bind(null,f,a),null)),[l,d,n]}function G1(n,i){n.action=i}function x_(n){var i=Te(),a=te;if(a!==null)return R_(i,a,n);Te(),i=i.memoizedState,a=Te();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function so(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Rt.updateQueue,i===null&&(i=Zc(),Rt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function C_(){return Te().memoizedState}function eh(n,i,a,l){var f=un();Rt.flags|=n,f.memoizedState=so(1|i,{destroy:void 0},a,l===void 0?null:l)}function nh(n,i,a,l){var f=Te();l=l===void 0?null:l;var d=f.memoizedState.inst;te!==null&&l!==null&&Xd(l,te.memoizedState.deps)?f.memoizedState=so(i,d,a,l):(Rt.flags|=n,f.memoizedState=so(1|i,d,a,l))}function D_(n,i){eh(8390656,8,n,i)}function sm(n,i){nh(2048,8,n,i)}function K1(n){Rt.flags|=4;var i=Rt.updateQueue;if(i===null)i=Zc(),Rt.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function N_(n){var i=Te().memoizedState;return K1({ref:i,nextImpl:n}),function(){if((Ht&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function V_(n,i){return nh(4,2,n,i)}function O_(n,i){return nh(4,4,n,i)}function M_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function P_(n,i,a){a=a!=null?a.concat([n]):null,nh(4,4,M_.bind(null,i,n),a)}function am(){}function k_(n,i){var a=Te();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Xd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function U_(n,i){var a=Te();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Xd(i,l[1]))return l[0];if(l=n(),Xs){On(!0);try{n()}finally{On(!1)}}return a.memoizedState=[l,i],l}function om(n,i,a){return a===void 0||($i&1073741824)!==0&&(Ot&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=Lv(),Rt.lanes|=n,Br|=n,a)}function L_(n,i,a,l){return bn(a,i)?a:no.current!==null?(n=om(n,a,l),bn(n,i)||(De=!0),n):($i&42)===0||($i&1073741824)!==0&&(Ot&261930)===0?(De=!0,n.memoizedState=a):(n=Lv(),Rt.lanes|=n,Br|=n,i)}function z_(n,i,a,l,f){var d=rt.p;rt.p=d!==0&&8>d?d:8;var _=K.T,b={};K.T=b,cm(n,!1,i,a);try{var x=f(),B=K.S;if(B!==null&&B(b,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var G=j1(x,l);Kl(n,i,G,xn(n))}else Kl(n,i,l,xn(n))}catch(X){Kl(n,i,{then:function(){},status:"rejected",reason:X},xn())}finally{rt.p=d,_!==null&&b.types!==null&&(_.types=b.types),K.T=_}}function Q1(){}function lm(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=B_(n).queue;z_(n,f,i,yt,a===null?Q1:function(){return j_(n),a(l)})}function B_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:yt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function j_(n){var i=B_(n);i.next===null&&(i=n.alternate.memoizedState),Kl(n,i.next.queue,{},xn())}function um(){return Xe(uu)}function q_(){return Te().memoizedState}function F_(){return Te().memoizedState}function Y1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();n=Mr(a);var l=Pr(i,n,a);l!==null&&(yn(l,i,a),jl(l,i,a)),i={cache:Ld()},n.payload=i;return}i=i.return}}function X1(n,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ih(n)?G_(i,a):(a=Rd(n,i,a,l),a!==null&&(yn(a,n,l),K_(a,i,l)))}function H_(n,i,a){var l=xn();Kl(n,i,a,l)}function Kl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ih(n))G_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,bn(b,_))return Uc(n,i,f,0),re===null&&kc(),!1}catch{}finally{}if(a=Rd(n,i,f,l),a!==null)return yn(a,n,l),K_(a,i,l),!0}return!1}function cm(n,i,a,l){if(l={lane:2,revertLane:qm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ih(n)){if(i)throw Error(r(479))}else i=Rd(n,a,l,2),i!==null&&yn(i,n,2)}function ih(n){var i=n.alternate;return n===Rt||i!==null&&i===Rt}function G_(n,i){io=$c=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function K_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}var Ql={readContext:Xe,use:Wc,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useLayoutEffect:me,useInsertionEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useSyncExternalStore:me,useId:me,useHostTransitionStatus:me,useFormState:me,useActionState:me,useOptimistic:me,useMemoCache:me,useCacheRefresh:me};Ql.useEffectEvent=me;var Q_={readContext:Xe,use:Wc,useCallback:function(n,i){return un().memoizedState=[n,i===void 0?null:i],n},useContext:Xe,useEffect:D_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,eh(4194308,4,M_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return eh(4194308,4,n,i)},useInsertionEffect:function(n,i){eh(4,2,n,i)},useMemo:function(n,i){var a=un();i=i===void 0?null:i;var l=n();if(Xs){On(!0);try{n()}finally{On(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=un();if(a!==void 0){var f=a(i);if(Xs){On(!0);try{a(i)}finally{On(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=X1.bind(null,Rt,n),[l.memoizedState,n]},useRef:function(n){var i=un();return n={current:n},i.memoizedState=n},useState:function(n){n=im(n);var i=n.queue,a=H_.bind(null,Rt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:am,useDeferredValue:function(n,i){var a=un();return om(a,n,i)},useTransition:function(){var n=im(!1);return n=z_.bind(null,Rt,n.queue,!0,!1),un().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Rt,f=un();if(kt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),re===null)throw Error(r(349));(Ot&127)!==0||m_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,D_(p_.bind(null,l,d,n),[n]),l.flags|=2048,so(9,{destroy:void 0},g_.bind(null,l,d,a,i),null),a},useId:function(){var n=un(),i=re.identifierPrefix;if(kt){var a=xi,l=Ri;a=(l&~(1<<32-ye(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Jc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=q1++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:um,useFormState:w_,useActionState:w_,useOptimistic:function(n){var i=un();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=cm.bind(null,Rt,!0,a),a.dispatch=i,[n,i]},useMemoCache:tm,useCacheRefresh:function(){return un().memoizedState=Y1.bind(null,Rt)},useEffectEvent:function(n){var i=un(),a={impl:n};return i.memoizedState=a,function(){if((Ht&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},hm={readContext:Xe,use:Wc,useCallback:k_,useContext:Xe,useEffect:sm,useImperativeHandle:P_,useInsertionEffect:V_,useLayoutEffect:O_,useMemo:U_,useReducer:th,useRef:C_,useState:function(){return th(Ji)},useDebugValue:am,useDeferredValue:function(n,i){var a=Te();return L_(a,te.memoizedState,n,i)},useTransition:function(){var n=th(Ji)[0],i=Te().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:d_,useId:q_,useHostTransitionStatus:um,useFormState:I_,useActionState:I_,useOptimistic:function(n,i){var a=Te();return v_(a,te,n,i)},useMemoCache:tm,useCacheRefresh:F_};hm.useEffectEvent=N_;var Y_={readContext:Xe,use:Wc,useCallback:k_,useContext:Xe,useEffect:sm,useImperativeHandle:P_,useInsertionEffect:V_,useLayoutEffect:O_,useMemo:U_,useReducer:nm,useRef:C_,useState:function(){return nm(Ji)},useDebugValue:am,useDeferredValue:function(n,i){var a=Te();return te===null?om(a,n,i):L_(a,te.memoizedState,n,i)},useTransition:function(){var n=nm(Ji)[0],i=Te().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:d_,useId:q_,useHostTransitionStatus:um,useFormState:x_,useActionState:x_,useOptimistic:function(n,i){var a=Te();return te!==null?v_(a,te,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:tm,useCacheRefresh:F_};Y_.useEffectEvent=N_;function fm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var dm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=xn(),f=Mr(l);f.payload=i,a!=null&&(f.callback=a),i=Pr(n,f,l),i!==null&&(yn(i,n,l),jl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=xn(),f=Mr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Pr(n,f,l),i!==null&&(yn(i,n,l),jl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=xn(),l=Mr(a);l.tag=2,i!=null&&(l.callback=i),i=Pr(n,l,a),i!==null&&(yn(i,n,a),jl(i,n,a))}};function X_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Ol(a,l)||!Ol(f,d):!0}function $_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&dm.enqueueReplaceState(i,i.state,null)}function $s(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function J_(n){Pc(n)}function Z_(n){console.error(n)}function W_(n){Pc(n)}function rh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function tv(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mm(n,i,a){return a=Mr(a),a.tag=3,a.payload={element:null},a.callback=function(){rh(n,i)},a}function ev(n){return n=Mr(n),n.tag=3,n}function nv(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){tv(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){tv(i,a,l),typeof f!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function $1(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ja(i,a,f,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return Fn===null?ph():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Gc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),zm(n,l,f)),!1;case 22:return a.flags|=65536,l===Gc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),zm(n,l,f)),!1}throw Error(r(435,a.tag))}return zm(n,l,f),ph(),!1}if(kt)return i=An.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Od&&(n=Error(r(422),{cause:l}),kl(zn(n,a)))):(l!==Od&&(i=Error(r(423),{cause:l}),kl(zn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=zn(l,a),f=mm(n.stateNode,l,f),Hd(n,f),ge!==4&&(ge=2)),!1;var d=Error(r(520),{cause:l});if(d=zn(d,a),eu===null?eu=[d]:eu.push(d),ge!==4&&(ge=2),i===null)return!0;l=zn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=mm(a.stateNode,l,n),Hd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(jr===null||!jr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=ev(f),nv(f,n,a,l),Hd(a,f),!1}a=a.return}while(a!==null);return!1}var gm=Error(r(461)),De=!1;function $e(n,i,a,l){i.child=n===null?a_(i,null,a,l):Ys(i,n.child,a,l)}function iv(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Hs(i),l=$d(n,i,a,_,d,f),b=Jd(),n!==null&&!De?(Zd(n,i,f),Zi(n,i,f)):(kt&&b&&Nd(i),i.flags|=1,$e(n,i,l,f),i.child)}function rv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!xd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,sv(n,i,d,l,f)):(n=zc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Sm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ol,a(_,l)&&n.ref===i.ref)return Zi(n,i,f)}return i.flags|=1,n=Ki(d,l),n.ref=i.ref,n.return=i,i.child=n}function sv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Ol(d,l)&&n.ref===i.ref)if(De=!1,i.pendingProps=l=d,Sm(n,f))(n.flags&131072)!==0&&(De=!0);else return i.lanes=n.lanes,Zi(n,i,f)}return pm(n,i,a,l,f)}function av(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return ov(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Fc(i,d!==null?d.cachePool:null),d!==null?u_(i,d):Kd(),c_(i);else return l=i.lanes=536870912,ov(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Fc(i,d.cachePool),u_(i,d),Ur(),i.memoizedState=null):(n!==null&&Fc(i,null),Kd(),Ur());return $e(n,i,f,a),i.child}function Yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ov(n,i,a,l,f){var d=Bd();return d=d===null?null:{parent:xe._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Fc(i,null),Kd(),c_(i),n!==null&&Ja(n,i,l,!0),i.childLanes=f,null}function sh(n,i){return i=oh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function lv(n,i,a){return Ys(i,n.child,null,a),n=sh(i,i.pendingProps),n.flags|=2,wn(i),i.memoizedState=null,n}function J1(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(kt){if(l.mode==="hidden")return n=sh(i,l),i.lanes=536870912,Yl(null,n);if(Yd(i),(n=ae)?(n=T0(n,qn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Cr!==null?{id:Ri,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=Gy(n),a.return=i,i.child=a,Ye=i,ae=null)):n=null,n===null)throw Nr(i);return i.lanes=536870912,null}return sh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Yd(i),f)if(i.flags&256)i.flags&=-257,i=lv(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(De||Ja(n,i,a,!1),f=(a&n.childLanes)!==0,De||f){if(l=re,l!==null&&(_=gl(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Bs(n,_),yn(l,n,_),gm;ph(),i=lv(n,i,a)}else n=d.treeContext,ae=Hn(_.nextSibling),Ye=i,kt=!0,Dr=null,qn=!1,n!==null&&Yy(i,n),i=sh(i,l),i.flags|=4096;return i}return n=Ki(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function ah(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function pm(n,i,a,l,f){return Hs(i),a=$d(n,i,a,l,void 0,f),l=Jd(),n!==null&&!De?(Zd(n,i,f),Zi(n,i,f)):(kt&&l&&Nd(i),i.flags|=1,$e(n,i,a,f),i.child)}function uv(n,i,a,l,f,d){return Hs(i),i.updateQueue=null,a=f_(i,l,a,f),h_(n),l=Jd(),n!==null&&!De?(Zd(n,i,d),Zi(n,i,d)):(kt&&l&&Nd(i),i.flags|=1,$e(n,i,a,d),i.child)}function cv(n,i,a,l,f){if(Hs(i),i.stateNode===null){var d=Qa,_=a.contextType;typeof _=="object"&&_!==null&&(d=Xe(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=dm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},qd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Xe(_):Qa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(fm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&dm.enqueueReplaceState(d,d.state,null),Fl(i,l,d,f),ql(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,x=$s(a,b);d.props=x;var B=d.context,G=a.contextType;_=Qa,typeof G=="object"&&G!==null&&(_=Xe(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&$_(i,d,l,_),Or=!1;var q=i.memoizedState;d.state=q,Fl(i,l,d,f),ql(),B=i.memoizedState,b||q!==B||Or?(typeof X=="function"&&(fm(i,a,X,l),B=i.memoizedState),(x=Or||X_(i,a,x,l,q,B,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Fd(n,i),_=i.memoizedProps,G=$s(a,_),d.props=G,X=i.pendingProps,q=d.context,B=a.contextType,x=Qa,typeof B=="object"&&B!==null&&(x=Xe(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==X||q!==x)&&$_(i,d,l,x),Or=!1,q=i.memoizedState,d.state=q,Fl(i,l,d,f),ql();var H=i.memoizedState;_!==X||q!==H||Or||n!==null&&n.dependencies!==null&&jc(n.dependencies)?(typeof b=="function"&&(fm(i,a,b,l),H=i.memoizedState),(G=Or||X_(i,a,G,l,q,H,x)||n!==null&&n.dependencies!==null&&jc(n.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=x,l=G):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,ah(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Ys(i,n.child,null,f),i.child=Ys(i,null,a,f)):$e(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Zi(n,i,f),n}function hv(n,i,a,l){return qs(),i.flags|=256,$e(n,i,a,l),i.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _m(n){return{baseLanes:n,cachePool:t_()}}function vm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Rn),n}function fv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(ve.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(kt){if(f?kr(i):Ur(),(n=ae)?(n=T0(n,qn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Cr!==null?{id:Ri,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=Gy(n),a.return=i,i.child=a,Ye=i,ae=null)):n=null,n===null)throw Nr(i);return eg(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Ur(),f=i.mode,b=oh({mode:"hidden",children:b},f),l=js(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=_m(a),l.childLanes=vm(n,_,a),i.memoizedState=ym,Yl(null,l)):(kr(i),Tm(i,b))}var x=n.memoizedState;if(x!==null&&(b=x.dehydrated,b!==null)){if(d)i.flags&256?(kr(i),i.flags&=-257,i=Em(n,i,a)):i.memoizedState!==null?(Ur(),i.child=n.child,i.flags|=128,i=null):(Ur(),b=l.fallback,f=i.mode,l=oh({mode:"visible",children:l.children},f),b=js(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Ys(i,n.child,null,a),l=i.child,l.memoizedState=_m(a),l.childLanes=vm(n,_,a),i.memoizedState=ym,i=Yl(null,l));else if(kr(i),eg(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,kl({value:l,source:null,stack:null}),i=Em(n,i,a)}else if(De||Ja(n,i,a,!1),_=(a&n.childLanes)!==0,De||_){if(_=re,_!==null&&(l=gl(_,a),l!==0&&l!==x.retryLane))throw x.retryLane=l,Bs(n,l),yn(_,n,l),gm;tg(b)||ph(),i=Em(n,i,a)}else tg(b)?(i.flags|=192,i.child=n.child,i=null):(n=x.treeContext,ae=Hn(b.nextSibling),Ye=i,kt=!0,Dr=null,qn=!1,n!==null&&Yy(i,n),i=Tm(i,l.children),i.flags|=4096);return i}return f?(Ur(),b=l.fallback,f=i.mode,x=n.child,B=x.sibling,l=Ki(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,B!==null?b=Ki(B,b):(b=js(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Yl(null,l),l=i.child,b=n.child.memoizedState,b===null?b=_m(a):(f=b.cachePool,f!==null?(x=xe._currentValue,f=f.parent!==x?{parent:x,pool:x}:f):f=t_(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=vm(n,_,a),i.memoizedState=ym,Yl(n.child,l)):(kr(i),a=n.child,n=a.sibling,a=Ki(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Tm(n,i){return i=oh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function oh(n,i){return n=Sn(22,n,null,i),n.lanes=0,n}function Em(n,i,a){return Ys(i,n.child,null,a),n=Tm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function dv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),kd(n.return,i,a)}function bm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function mv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=ve.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,st(ve,_),$e(n,i,l,a),l=kt?Pl:0,!b&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&dv(n,a,i);else if(n.tag===19)dv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Xc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),bm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Xc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}bm(i,!0,a,null,d,l);break;case"together":bm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Zi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Br|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Ja(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Ki(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ki(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Sm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&jc(n)))}function Z1(n,i,a){switch(i.tag){case 3:ke(i,i.stateNode.containerInfo),Vr(i,xe,n.memoizedState.cache),qs();break;case 27:case 5:bs(i);break;case 4:ke(i,i.stateNode.containerInfo);break;case 10:Vr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Yd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(kr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?fv(n,i,a):(kr(i),n=Zi(n,i,a),n!==null?n.sibling:null);kr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ja(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return mv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(ve,ve.current),l)break;return null;case 22:return i.lanes=0,av(n,i,a,i.pendingProps);case 24:Vr(i,xe,n.memoizedState.cache)}return Zi(n,i,a)}function gv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)De=!0;else{if(!Sm(n,a)&&(i.flags&128)===0)return De=!1,Z1(n,i,a);De=(n.flags&131072)!==0}else De=!1,kt&&(i.flags&1048576)!==0&&Qy(i,Pl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(n=Ks(i.elementType),i.type=n,typeof n=="function")xd(n)?(l=$s(n,l),i.tag=1,i=cv(null,i,n,l,a)):(i.tag=0,i=pm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===_t){i.tag=11,i=iv(null,i,n,l,a);break t}else if(f===I){i.tag=14,i=rv(null,i,n,l,a);break t}}throw i=le(n)||n,Error(r(306,i,""))}}return i;case 0:return pm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=$s(l,i.pendingProps),cv(n,i,l,f,a);case 3:t:{if(ke(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Fd(n,i),Fl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Vr(i,xe,l),l!==d.cache&&Ud(i,[xe],a,!0),ql(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=hv(n,i,l,a);break t}else if(l!==f){f=zn(Error(r(424)),i),kl(f),i=hv(n,i,l,a);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ae=Hn(n.firstChild),Ye=i,kt=!0,Dr=null,qn=!0,a=a_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qs(),l===f){i=Zi(n,i,a);break t}$e(n,i,l,a)}i=i.child}return i;case 26:return ah(n,i),n===null?(a=I0(i.type,null,i.pendingProps,null))?i.memoizedState=a:kt||(a=i.type,n=i.pendingProps,l=Sh(xt.current).createElement(a),l[we]=i,l[je]=n,Je(l,a,n),Ie(l),i.stateNode=l):i.memoizedState=I0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return bs(i),n===null&&kt&&(l=i.stateNode=S0(i.type,i.pendingProps,xt.current),Ye=i,qn=!0,f=ae,Gr(i.type)?(ng=f,ae=Hn(l.firstChild)):ae=f),$e(n,i,i.pendingProps.children,a),ah(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&kt&&((f=l=ae)&&(l=xw(l,i.type,i.pendingProps,qn),l!==null?(i.stateNode=l,Ye=i,ae=Hn(l.firstChild),qn=!1,f=!0):f=!1),f||Nr(i)),bs(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Jm(f,d)?l=null:_!==null&&Jm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=$d(n,i,F1,null,null,a),uu._currentValue=f),ah(n,i),$e(n,i,l,a),i.child;case 6:return n===null&&kt&&((n=a=ae)&&(a=Cw(a,i.pendingProps,qn),a!==null?(i.stateNode=a,Ye=i,ae=null,n=!0):n=!1),n||Nr(i)),null;case 13:return fv(n,i,a);case 4:return ke(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Ys(i,null,l,a):$e(n,i,l,a),i.child;case 11:return iv(n,i,i.type,i.pendingProps,a);case 7:return $e(n,i,i.pendingProps,a),i.child;case 8:return $e(n,i,i.pendingProps.children,a),i.child;case 12:return $e(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Vr(i,i.type,l.value),$e(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Hs(i),f=Xe(f),l=l(f),i.flags|=1,$e(n,i,l,a),i.child;case 14:return rv(n,i,i.type,i.pendingProps,a);case 15:return sv(n,i,i.type,i.pendingProps,a);case 19:return mv(n,i,a);case 31:return J1(n,i,a);case 22:return av(n,i,a,i.pendingProps);case 24:return Hs(i),l=Xe(xe),n===null?(f=Bd(),f===null&&(f=re,d=Ld(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},qd(i),Vr(i,xe,f)):((n.lanes&a)!==0&&(Fd(n,i),Fl(i,null,null,a),ql()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Vr(i,xe,l)):(l=d.cache,Vr(i,xe,l),l!==f.cache&&Ud(i,[xe],a,!0))),$e(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Wi(n){n.flags|=4}function Am(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(qv())n.flags|=8192;else throw Qs=Gc,jd}else n.flags&=-16777217}function pv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!N0(i))if(qv())n.flags|=8192;else throw Qs=Gc,jd}function lh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?mc():536870912,n.lanes|=i,uo|=i)}function Xl(n,i){if(!kt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function oe(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function W1(n,i,a){var l=i.pendingProps;switch(Vd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(i),null;case 1:return oe(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Xi(xe),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&($a(i)?Wi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Md())),oe(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(Wi(i),d!==null?(oe(i),pv(i,d)):(oe(i),Am(i,f,null,l,a))):d?d!==n.memoizedState?(Wi(i),oe(i),pv(i,d)):(oe(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&Wi(i),oe(i),Am(i,f,n,l,a)),null;case 27:if(xa(i),a=xt.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}n=lt.current,$a(i)?Xy(i):(n=S0(f,l,a),i.stateNode=n,Wi(i))}return oe(i),null;case 5:if(xa(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}if(d=lt.current,$a(i))Xy(i);else{var _=Sh(xt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[we]=i,d[je]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(Je(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Wi(i)}}return oe(i),Am(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=xt.current,$a(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Ye,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[we]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||f0(n.nodeValue,a)),n||Nr(i,!0)}else n=Sh(n).createTextNode(l),n[we]=i,i.stateNode=n}return oe(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=$a(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[we]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),n=!1}else a=Md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(wn(i),i):(wn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return oe(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=$a(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[we]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),f=!1}else f=Md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(wn(i),i):(wn(i),null)}return wn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),lh(i,i.updateQueue),oe(i),null);case 4:return ue(),n===null&&Km(i.stateNode.containerInfo),oe(i),null;case 10:return Xi(i.type),oe(i),null;case 19:if(J(ve),l=i.memoizedState,l===null)return oe(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Xl(l,!1);else{if(ge!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=Xc(n),d!==null){for(i.flags|=128,Xl(l,!1),n=d.updateQueue,i.updateQueue=n,lh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Hy(a,n),a=a.sibling;return st(ve,ve.current&1|2),kt&&Qi(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&on()>dh&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304)}else{if(!f)if(n=Xc(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,lh(i,n),Xl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!kt)return oe(i),null}else 2*on()-l.renderingStartTime>dh&&a!==536870912&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=on(),n.sibling=null,a=ve.current,st(ve,f?a&1|2:a&1),kt&&Qi(i,l.treeForkCount),n):(oe(i),null);case 22:case 23:return wn(i),Qd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(oe(i),i.subtreeFlags&6&&(i.flags|=8192)):oe(i),a=i.updateQueue,a!==null&&lh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&J(Gs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Xi(xe),oe(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function tw(n,i){switch(Vd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Xi(xe),ue(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return xa(i),null;case 31:if(i.memoizedState!==null){if(wn(i),i.alternate===null)throw Error(r(340));qs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(wn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));qs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(ve),null;case 4:return ue(),null;case 10:return Xi(i.type),null;case 22:case 23:return wn(i),Qd(),n!==null&&J(Gs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Xi(xe),null;case 25:return null;default:return null}}function yv(n,i){switch(Vd(i),i.tag){case 3:Xi(xe),ue();break;case 26:case 27:case 5:xa(i);break;case 4:ue();break;case 31:i.memoizedState!==null&&wn(i);break;case 13:wn(i);break;case 19:J(ve);break;case 10:Xi(i.type);break;case 22:case 23:wn(i),Qd(),n!==null&&J(Gs);break;case 24:Xi(xe)}}function $l(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){Xt(i,i.return,b)}}function Lr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var x=a,B=b;try{B()}catch(G){Xt(f,x,G)}}}l=l.next}while(l!==d)}}catch(G){Xt(i,i.return,G)}}function _v(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{l_(i,a)}catch(l){Xt(n,n.return,l)}}}function vv(n,i,a){a.props=$s(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Xt(n,i,l)}}function Jl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Xt(n,i,f)}}function Ci(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Xt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Xt(n,i,f)}else a.current=null}function Tv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Xt(n,n.return,f)}}function wm(n,i,a){try{var l=n.stateNode;bw(l,n.type,a,i),l[je]=i}catch(f){Xt(n,n.return,f)}}function Ev(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Gr(n.type)||n.tag===4}function Im(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Ev(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Gr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Jn));else if(l!==4&&(l===27&&Gr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Rm(n,i,a),n=n.sibling;n!==null;)Rm(n,i,a),n=n.sibling}function uh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Gr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(uh(n,i,a),n=n.sibling;n!==null;)uh(n,i,a),n=n.sibling}function bv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Je(i,l,a),i[we]=n,i[je]=a}catch(d){Xt(n,n.return,d)}}var tr=!1,Ne=!1,xm=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function ew(n,i){if(n=n.containerInfo,Xm=Dh,n=Py(n),Ed(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,b=-1,x=-1,B=0,G=0,X=n,q=null;e:for(;;){for(var H;X!==a||f!==0&&X.nodeType!==3||(b=_+f),X!==d||l!==0&&X.nodeType!==3||(x=_+l),X.nodeType===3&&(_+=X.nodeValue.length),(H=X.firstChild)!==null;)q=X,X=H;for(;;){if(X===n)break e;if(q===a&&++B===f&&(b=_),q===d&&++G===l&&(x=_),(H=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=H}a=b===-1||x===-1?null:{start:b,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for($m={focusedElem:n,selectionRange:a},Dh=!1,Fe=i;Fe!==null;)if(i=Fe,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Fe=n;else for(;Fe!==null;){switch(i=Fe,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ct=$s(a.type,f);n=l.getSnapshotBeforeUpdate(ct,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(vt){Xt(a,a.return,vt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Wm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Fe=n;break}Fe=i.return}}function Av(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:nr(n,a),l&4&&$l(5,a);break;case 1:if(nr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Xt(a,a.return,_)}else{var f=$s(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Xt(a,a.return,_)}}l&64&&_v(a),l&512&&Jl(a,a.return);break;case 3:if(nr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{l_(n,i)}catch(_){Xt(a,a.return,_)}}break;case 27:i===null&&l&4&&bv(a);case 26:case 5:nr(n,a),i===null&&l&4&&Tv(a),l&512&&Jl(a,a.return);break;case 12:nr(n,a);break;case 31:nr(n,a),l&4&&Rv(n,a);break;case 13:nr(n,a),l&4&&xv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=cw.bind(null,a),Dw(n,a))));break;case 22:if(l=a.memoizedState!==null||tr,!l){i=i!==null&&i.memoizedState!==null||Ne,f=tr;var d=Ne;tr=l,(Ne=i)&&!d?ir(n,a,(a.subtreeFlags&8772)!==0):nr(n,a),tr=f,Ne=d}break;case 30:break;default:nr(n,a)}}function wv(n){var i=n.alternate;i!==null&&(n.alternate=null,wv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Oa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var he=null,dn=!1;function er(n,i,a){for(a=a.child;a!==null;)Iv(n,i,a),a=a.sibling}function Iv(n,i,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Qn,a)}catch{}switch(a.tag){case 26:Ne||Ci(a,i),er(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ne||Ci(a,i);var l=he,f=dn;Gr(a.type)&&(he=a.stateNode,dn=!1),er(n,i,a),au(a.stateNode),he=l,dn=f;break;case 5:Ne||Ci(a,i);case 6:if(l=he,f=dn,he=null,er(n,i,a),he=l,dn=f,he!==null)if(dn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(d){Xt(a,i,d)}else try{he.removeChild(a.stateNode)}catch(d){Xt(a,i,d)}break;case 18:he!==null&&(dn?(n=he,_0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),_o(n)):_0(he,a.stateNode));break;case 4:l=he,f=dn,he=a.stateNode.containerInfo,dn=!0,er(n,i,a),he=l,dn=f;break;case 0:case 11:case 14:case 15:Lr(2,a,i),Ne||Lr(4,a,i),er(n,i,a);break;case 1:Ne||(Ci(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&vv(a,i,l)),er(n,i,a);break;case 21:er(n,i,a);break;case 22:Ne=(l=Ne)||a.memoizedState!==null,er(n,i,a),Ne=l;break;default:er(n,i,a)}}function Rv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_o(n)}catch(a){Xt(i,i.return,a)}}}function xv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_o(n)}catch(a){Xt(i,i.return,a)}}function nw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Sv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Sv),i;default:throw Error(r(435,n.tag))}}function ch(n,i){var a=nw(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=hw.bind(null,n,l);l.then(f,f)}})}function mn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Gr(b.type)){he=b.stateNode,dn=!1;break t}break;case 5:he=b.stateNode,dn=!1;break t;case 3:case 4:he=b.stateNode.containerInfo,dn=!0;break t}b=b.return}if(he===null)throw Error(r(160));Iv(d,_,f),he=null,dn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Cv(i,n),i=i.sibling}var ii=null;function Cv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:mn(i,n),gn(n),l&4&&(Lr(3,n,n.return),$l(3,n),Lr(5,n,n.return));break;case 1:mn(i,n),gn(n),l&512&&(Ne||a===null||Ci(a,a.return)),l&64&&tr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ii;if(mn(i,n),gn(n),l&512&&(Ne||a===null||Ci(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[gi]||d[we]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Je(d,l,a),d[we]=n,Ie(d),l=d;break t;case"link":var _=C0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(l),Je(d,l,a),f.head.appendChild(d);break;case"meta":if(_=C0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break e}}d=f.createElement(l),Je(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[we]=n,Ie(d),l=d}n.stateNode=l}else D0(f,n.type,n.stateNode);else n.stateNode=x0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?D0(f,n.type,n.stateNode):x0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&wm(n,n.memoizedProps,a.memoizedProps)}break;case 27:mn(i,n),gn(n),l&512&&(Ne||a===null||Ci(a,a.return)),a!==null&&l&4&&wm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,n),gn(n),l&512&&(Ne||a===null||Ci(a,a.return)),n.flags&32){f=n.stateNode;try{fn(f,"")}catch(ct){Xt(n,n.return,ct)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,wm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(xm=!0);break;case 6:if(mn(i,n),gn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ct){Xt(n,n.return,ct)}}break;case 3:if(Ih=null,f=ii,ii=Ah(i.containerInfo),mn(i,n),ii=f,gn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{_o(i.containerInfo)}catch(ct){Xt(n,n.return,ct)}xm&&(xm=!1,Dv(n));break;case 4:l=ii,ii=Ah(n.stateNode.containerInfo),mn(i,n),gn(n),ii=l;break;case 12:mn(i,n),gn(n);break;case 31:mn(i,n),gn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ch(n,l)));break;case 13:mn(i,n),gn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fh=on()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ch(n,l)));break;case 22:f=n.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,B=tr,G=Ne;if(tr=B||f,Ne=G||x,mn(i,n),Ne=G,tr=B,gn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||x||tr||Ne||Js(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=x.stateNode;var X=x.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ct){Xt(x,x.return,ct)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(ct){Xt(x,x.return,ct)}}}else if(i.tag===18){if(a===null){x=i;try{var H=x.stateNode;f?v0(H,!0):v0(x.stateNode,!1)}catch(ct){Xt(x,x.return,ct)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ch(n,a))));break;case 19:mn(i,n),gn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ch(n,l)));break;case 30:break;case 21:break;default:mn(i,n),gn(n)}}function gn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(Ev(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Im(n);uh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(fn(_,""),a.flags&=-33);var b=Im(n);uh(n,b,_);break;case 3:case 4:var x=a.stateNode.containerInfo,B=Im(n);Rm(n,B,x);break;default:throw Error(r(161))}}catch(G){Xt(n,n.return,G)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Dv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Dv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function nr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Av(n,i.alternate,i),i=i.sibling}function Js(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Lr(4,i,i.return),Js(i);break;case 1:Ci(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vv(i,i.return,a),Js(i);break;case 27:au(i.stateNode);case 26:case 5:Ci(i,i.return),Js(i);break;case 22:i.memoizedState===null&&Js(i);break;case 30:Js(i);break;default:Js(i)}n=n.sibling}}function ir(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:ir(f,d,a),$l(4,d);break;case 1:if(ir(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){Xt(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)o_(x[f],b)}catch(B){Xt(l,l.return,B)}}a&&_&64&&_v(d),Jl(d,d.return);break;case 27:bv(d);case 26:case 5:ir(f,d,a),a&&l===null&&_&4&&Tv(d),Jl(d,d.return);break;case 12:ir(f,d,a);break;case 31:ir(f,d,a),a&&_&4&&Rv(f,d);break;case 13:ir(f,d,a),a&&_&4&&xv(f,d);break;case 22:d.memoizedState===null&&ir(f,d,a),Jl(d,d.return);break;case 30:break;default:ir(f,d,a)}i=i.sibling}}function Cm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ul(a))}function Dm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ul(n))}function ri(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Nv(n,i,a,l),i=i.sibling}function Nv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ri(n,i,a,l),f&2048&&$l(9,i);break;case 1:ri(n,i,a,l);break;case 3:ri(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ul(n)));break;case 12:if(f&2048){ri(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){Xt(i,i.return,x)}}else ri(n,i,a,l);break;case 31:ri(n,i,a,l);break;case 13:ri(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ri(n,i,a,l):Zl(n,i):d._visibility&2?ri(n,i,a,l):(d._visibility|=2,ao(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Cm(_,i);break;case 24:ri(n,i,a,l),f&2048&&Dm(i.alternate,i);break;default:ri(n,i,a,l)}}function ao(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,x=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:ao(d,_,b,x,f),$l(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?ao(d,_,b,x,f):Zl(d,_):(G._visibility|=2,ao(d,_,b,x,f)),f&&B&2048&&Cm(_.alternate,_);break;case 24:ao(d,_,b,x,f),f&&B&2048&&Dm(_.alternate,_);break;default:ao(d,_,b,x,f)}i=i.sibling}}function Zl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Zl(a,l),f&2048&&Cm(l.alternate,l);break;case 24:Zl(a,l),f&2048&&Dm(l.alternate,l);break;default:Zl(a,l)}i=i.sibling}}var Wl=8192;function oo(n,i,a){if(n.subtreeFlags&Wl)for(n=n.child;n!==null;)Vv(n,i,a),n=n.sibling}function Vv(n,i,a){switch(n.tag){case 26:oo(n,i,a),n.flags&Wl&&n.memoizedState!==null&&qw(a,ii,n.memoizedState,n.memoizedProps);break;case 5:oo(n,i,a);break;case 3:case 4:var l=ii;ii=Ah(n.stateNode.containerInfo),oo(n,i,a),ii=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Wl,Wl=16777216,oo(n,i,a),Wl=l):oo(n,i,a));break;default:oo(n,i,a)}}function Ov(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function tu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Fe=l,Pv(l,n)}Ov(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mv(n),n=n.sibling}function Mv(n){switch(n.tag){case 0:case 11:case 15:tu(n),n.flags&2048&&Lr(9,n,n.return);break;case 3:tu(n);break;case 12:tu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,hh(n)):tu(n);break;default:tu(n)}}function hh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Fe=l,Pv(l,n)}Ov(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Lr(8,i,i.return),hh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,hh(i));break;default:hh(i)}n=n.sibling}}function Pv(n,i){for(;Fe!==null;){var a=Fe;switch(a.tag){case 0:case 11:case 15:Lr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Fe=l;else t:for(a=n;Fe!==null;){l=Fe;var f=l.sibling,d=l.return;if(wv(l),l===a){Fe=null;break t}if(f!==null){f.return=d,Fe=f;break t}Fe=d}}}var iw={getCacheForType:function(n){var i=Xe(xe),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Xe(xe).controller.signal}},rw=typeof WeakMap=="function"?WeakMap:Map,Ht=0,re=null,Nt=null,Ot=0,Yt=0,In=null,zr=!1,lo=!1,Nm=!1,rr=0,ge=0,Br=0,Zs=0,Vm=0,Rn=0,uo=0,eu=null,pn=null,Om=!1,fh=0,kv=0,dh=1/0,mh=null,jr=null,Le=0,qr=null,co=null,sr=0,Mm=0,Pm=null,Uv=null,nu=0,km=null;function xn(){return(Ht&2)!==0&&Ot!==0?Ot&-Ot:K.T!==null?qm():gc()}function Lv(){if(Rn===0)if((Ot&536870912)===0||kt){var n=ws;ws<<=1,(ws&3932160)===0&&(ws=262144),Rn=n}else Rn=536870912;return n=An.current,n!==null&&(n.flags|=32),Rn}function yn(n,i,a){(n===re&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)&&(ho(n,0),Fr(n,Ot,Rn,!1)),Is(n,a),((Ht&2)===0||n!==re)&&(n===re&&((Ht&2)===0&&(Zs|=a),ge===4&&Fr(n,Ot,Rn,!1)),Di(n))}function zv(n,i,a){if((Ht&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Yn(n,i),f=l?ow(n,i):Lm(n,i,!0),d=l;do{if(f===0){lo&&!l&&Fr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!sw(a)){f=Lm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var b=n;f=eu;var x=b.current.memoizedState.isDehydrated;if(x&&(ho(b,_).flags|=256),_=Lm(b,_,!1),_!==2){if(Nm&&!x){b.errorRecoveryDisabledLanes|=d,Zs|=d,f=4;break t}d=pn,pn=f,d!==null&&(pn===null?pn=d:pn.push.apply(pn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){ho(n,0),Fr(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Fr(l,i,Rn,!zr);break t;case 2:pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=fh+300-on(),10<f)){if(Fr(l,i,Rn,!zr),fi(l,0,!0)!==0)break t;sr=i,l.timeoutHandle=p0(Bv.bind(null,l,a,pn,mh,Om,i,Rn,Zs,uo,zr,d,"Throttled",-0,0),f);break t}Bv(l,a,pn,mh,Om,i,Rn,Zs,uo,zr,d,null,-0,0)}}break}while(!0);Di(n)}function Bv(n,i,a,l,f,d,_,b,x,B,G,X,q,H){if(n.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},Vv(i,d,X);var ct=(d&62914560)===d?fh-on():(d&4194048)===d?kv-on():0;if(ct=Fw(X,ct),ct!==null){sr=d,n.cancelPendingCommit=ct(Yv.bind(null,n,i,d,a,l,f,_,b,x,G,X,null,q,H)),Fr(n,d,_,!B);return}}Yv(n,i,d,a,l,f,_,b,x)}function sw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!bn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fr(n,i,a,l){i&=~Vm,i&=~Zs,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-ye(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Rs(n,a,i)}function gh(){return(Ht&6)===0?(iu(0),!1):!0}function Um(){if(Nt!==null){if(Yt===0)var n=Nt.return;else n=Nt,Yi=Fs=null,Wd(n),eo=null,zl=0,n=Nt;for(;n!==null;)yv(n.alternate,n),n=n.return;Nt=null}}function ho(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,ww(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),sr=0,Um(),re=n,Nt=a=Ki(n.current,null),Ot=i,Yt=0,In=null,zr=!1,lo=Yn(n,i),Nm=!1,uo=Rn=Vm=Zs=Br=ge=0,pn=eu=null,Om=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-ye(l),d=1<<f;i|=n[f],l&=~d}return rr=i,kc(),a}function jv(n,i){Rt=null,K.H=Ql,i===to||i===Hc?(i=i_(),Yt=3):i===jd?(i=i_(),Yt=4):Yt=i===gm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,In=i,Nt===null&&(ge=1,rh(n,zn(i,n.current)))}function qv(){var n=An.current;return n===null?!0:(Ot&4194048)===Ot?Fn===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?n===Fn:!1}function Fv(){var n=K.H;return K.H=Ql,n===null?Ql:n}function Hv(){var n=K.A;return K.A=iw,n}function ph(){ge=4,zr||(Ot&4194048)!==Ot&&An.current!==null||(lo=!0),(Br&134217727)===0&&(Zs&134217727)===0||re===null||Fr(re,Ot,Rn,!1)}function Lm(n,i,a){var l=Ht;Ht|=2;var f=Fv(),d=Hv();(re!==n||Ot!==i)&&(mh=null,ho(n,i)),i=!1;var _=ge;t:do try{if(Yt!==0&&Nt!==null){var b=Nt,x=In;switch(Yt){case 8:Um(),_=6;break t;case 3:case 2:case 9:case 6:An.current===null&&(i=!0);var B=Yt;if(Yt=0,In=null,fo(n,b,x,B),a&&lo){_=0;break t}break;default:B=Yt,Yt=0,In=null,fo(n,b,x,B)}}aw(),_=ge;break}catch(G){jv(n,G)}while(!0);return i&&n.shellSuspendCounter++,Yi=Fs=null,Ht=l,K.H=f,K.A=d,Nt===null&&(re=null,Ot=0,kc()),_}function aw(){for(;Nt!==null;)Gv(Nt)}function ow(n,i){var a=Ht;Ht|=2;var l=Fv(),f=Hv();re!==n||Ot!==i?(mh=null,dh=on()+500,ho(n,i)):lo=Yn(n,i);t:do try{if(Yt!==0&&Nt!==null){i=Nt;var d=In;e:switch(Yt){case 1:Yt=0,In=null,fo(n,i,d,1);break;case 2:case 9:if(e_(d)){Yt=0,In=null,Kv(i);break}i=function(){Yt!==2&&Yt!==9||re!==n||(Yt=7),Di(n)},d.then(i,i);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:e_(d)?(Yt=0,In=null,Kv(i)):(Yt=0,In=null,fo(n,i,d,7));break;case 5:var _=null;switch(Nt.tag){case 26:_=Nt.memoizedState;case 5:case 27:var b=Nt;if(_?N0(_):b.stateNode.complete){Yt=0,In=null;var x=b.sibling;if(x!==null)Nt=x;else{var B=b.return;B!==null?(Nt=B,yh(B)):Nt=null}break e}}Yt=0,In=null,fo(n,i,d,5);break;case 6:Yt=0,In=null,fo(n,i,d,6);break;case 8:Um(),ge=6;break t;default:throw Error(r(462))}}lw();break}catch(G){jv(n,G)}while(!0);return Yi=Fs=null,K.H=l,K.A=f,Ht=a,Nt!==null?0:(re=null,Ot=0,kc(),ge)}function lw(){for(;Nt!==null&&!md();)Gv(Nt)}function Gv(n){var i=gv(n.alternate,n,rr);n.memoizedProps=n.pendingProps,i===null?yh(n):Nt=i}function Kv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=uv(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=uv(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:Wd(i);default:yv(a,i),i=Nt=Hy(i,rr),i=gv(a,i,rr)}n.memoizedProps=n.pendingProps,i===null?yh(n):Nt=i}function fo(n,i,a,l){Yi=Fs=null,Wd(i),eo=null,zl=0;var f=i.return;try{if($1(n,f,i,a,Ot)){ge=1,rh(n,zn(a,n.current)),Nt=null;return}}catch(d){if(f!==null)throw Nt=f,d;ge=1,rh(n,zn(a,n.current)),Nt=null;return}i.flags&32768?(kt||l===1?n=!0:lo||(Ot&536870912)!==0?n=!1:(zr=n=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qv(i,n)):yh(i)}function yh(n){var i=n;do{if((i.flags&32768)!==0){Qv(i,zr);return}n=i.return;var a=W1(i.alternate,i,rr);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);ge===0&&(ge=5)}function Qv(n,i){do{var a=tw(n.alternate,n);if(a!==null){a.flags&=32767,Nt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Nt=n;return}Nt=n=a}while(n!==null);ge=6,Nt=null}function Yv(n,i,a,l,f,d,_,b,x){n.cancelPendingCommit=null;do _h();while(Le!==0);if((Ht&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Id,yd(n,a,d,_,b,x),n===re&&(Nt=re=null,Ot=0),co=i,qr=n,sr=a,Mm=d,Pm=f,Uv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,fw(vr,function(){return Wv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=rt.p,rt.p=2,_=Ht,Ht|=4;try{ew(n,i,a)}finally{Ht=_,rt.p=f,K.T=l}}Le=1,Xv(),$v(),Jv()}}function Xv(){if(Le===1){Le=0;var n=qr,i=co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=rt.p;rt.p=2;var f=Ht;Ht|=4;try{Cv(i,n);var d=$m,_=Py(n.containerInfo),b=d.focusedElem,x=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&My(b.ownerDocument.documentElement,b)){if(x!==null&&Ed(b)){var B=x.start,G=x.end;if(G===void 0&&(G=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(G,b.value.length);else{var X=b.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var H=q.getSelection(),ct=b.textContent.length,vt=Math.min(x.start,ct),ne=x.end===void 0?vt:Math.min(x.end,ct);!H.extend&&vt>ne&&(_=ne,ne=vt,vt=_);var P=Oy(b,vt),D=Oy(b,ne);if(P&&D&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==D.node||H.focusOffset!==D.offset)){var z=X.createRange();z.setStart(P.node,P.offset),H.removeAllRanges(),vt>ne?(H.addRange(z),H.extend(D.node,D.offset)):(z.setEnd(D.node,D.offset),H.addRange(z))}}}}for(X=[],H=b;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var Y=X[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Dh=!!Xm,$m=Xm=null}finally{Ht=f,rt.p=l,K.T=a}}n.current=i,Le=2}}function $v(){if(Le===2){Le=0;var n=qr,i=co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=rt.p;rt.p=2;var f=Ht;Ht|=4;try{Av(n,i.alternate,i)}finally{Ht=f,rt.p=l,K.T=a}}Le=3}}function Jv(){if(Le===4||Le===3){Le=0,lc();var n=qr,i=co,a=sr,l=Uv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Le=5:(Le=0,co=qr=null,Zv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(jr=null),qi(a),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Qn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=rt.p,rt.p=2,K.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{K.T=i,rt.p=f}}(sr&3)!==0&&_h(),Di(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===km?nu++:(nu=0,km=n):nu=0,iu(0)}}function Zv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ul(i)))}function _h(){return Xv(),$v(),Jv(),Wv()}function Wv(){if(Le!==5)return!1;var n=qr,i=Mm;Mm=0;var a=qi(sr),l=K.T,f=rt.p;try{rt.p=32>a?32:a,K.T=null,a=Pm,Pm=null;var d=qr,_=sr;if(Le=0,co=qr=null,sr=0,(Ht&6)!==0)throw Error(r(331));var b=Ht;if(Ht|=4,Mv(d.current),Nv(d,d.current,_,a),Ht=b,iu(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Qn,d)}catch{}return!0}finally{rt.p=f,K.T=l,Zv(n,i)}}function t0(n,i,a){i=zn(a,i),i=mm(n.stateNode,i,2),n=Pr(n,i,2),n!==null&&(Is(n,2),Di(n))}function Xt(n,i,a){if(n.tag===3)t0(n,n,a);else for(;i!==null;){if(i.tag===3){t0(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(jr===null||!jr.has(l))){n=zn(a,n),a=ev(2),l=Pr(i,a,2),l!==null&&(nv(a,l,i,n),Is(l,2),Di(l));break}}i=i.return}}function zm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new rw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Nm=!0,f.add(a),n=uw.bind(null,n,i,a),i.then(n,n))}function uw(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,re===n&&(Ot&a)===a&&(ge===4||ge===3&&(Ot&62914560)===Ot&&300>on()-fh?(Ht&2)===0&&ho(n,0):Vm|=a,uo===Ot&&(uo=0)),Di(n)}function e0(n,i){i===0&&(i=mc()),n=Bs(n,i),n!==null&&(Is(n,i),Di(n))}function cw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),e0(n,a)}function hw(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),e0(n,a)}function fw(n,i){return Ue(n,i)}var vh=null,mo=null,Bm=!1,Th=!1,jm=!1,Hr=0;function Di(n){n!==mo&&n.next===null&&(mo===null?vh=mo=n:mo=mo.next=n),Th=!0,Bm||(Bm=!0,mw())}function iu(n,i){if(!jm&&Th){jm=!0;do for(var a=!1,l=vh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-ye(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,s0(l,d))}else d=Ot,d=fi(l,l===re?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Yn(l,d)||(a=!0,s0(l,d));l=l.next}while(a);jm=!1}}function dw(){n0()}function n0(){Th=Bm=!1;var n=0;Hr!==0&&Aw()&&(n=Hr);for(var i=on(),a=null,l=vh;l!==null;){var f=l.next,d=i0(l,i);d===0?(l.next=null,a===null?vh=f:a.next=f,f===null&&(mo=a)):(a=l,(n!==0||(d&3)!==0)&&(Th=!0)),l=f}Le!==0&&Le!==5||iu(n),Hr!==0&&(Hr=0)}function i0(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-ye(d),b=1<<_,x=f[_];x===-1?((b&a)===0||(b&l)!==0)&&(f[_]=pd(b,i)):x<=i&&(n.expiredLanes|=b),d&=~b}if(i=re,a=Ot,a=fi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&_r(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Yn(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&_r(l),qi(a)){case 2:case 8:a=dl;break;case 32:a=vr;break;case 268435456:a=uc;break;default:a=vr}return l=r0.bind(null,n),a=Ue(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&_r(l),n.callbackPriority=2,n.callbackNode=null,2}function r0(n,i){if(Le!==0&&Le!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(_h()&&n.callbackNode!==a)return null;var l=Ot;return l=fi(n,n===re?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(zv(n,l,i),i0(n,on()),n.callbackNode!=null&&n.callbackNode===a?r0.bind(null,n):null)}function s0(n,i){if(_h())return null;zv(n,i,!0)}function mw(){Iw(function(){(Ht&6)!==0?Ue(fl,dw):n0()})}function qm(){if(Hr===0){var n=Za;n===0&&(n=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Hr=n}return Hr}function a0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ua(""+n)}function o0(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function gw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=a0((f[je]||null).action),_=l.submitter;_&&(i=(i=_[je]||null)?a0(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Si("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Hr!==0){var x=_?o0(f,_):new FormData(f);lm(a,{pending:!0,data:x,method:f.method,action:d},null,x)}}else typeof d=="function"&&(b.preventDefault(),x=_?o0(f,_):new FormData(f),lm(a,{pending:!0,data:x,method:f.method,action:d},d,x))},currentTarget:f}]})}}for(var Fm=0;Fm<wd.length;Fm++){var Hm=wd[Fm],pw=Hm.toLowerCase(),yw=Hm[0].toUpperCase()+Hm.slice(1);ni(pw,"on"+yw)}ni(Ly,"onAnimationEnd"),ni(zy,"onAnimationIteration"),ni(By,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(O1,"onTransitionRun"),ni(M1,"onTransitionStart"),ni(P1,"onTransitionCancel"),ni(jy,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_w=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function l0(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],x=b.instance,B=b.currentTarget;if(b=b.listener,x!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=B;try{d(f)}catch(G){Pc(G)}f.currentTarget=null,d=x}else for(_=0;_<l.length;_++){if(b=l[_],x=b.instance,B=b.currentTarget,b=b.listener,x!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=B;try{d(f)}catch(G){Pc(G)}f.currentTarget=null,d=x}}}}function Vt(n,i){var a=i[Va];a===void 0&&(a=i[Va]=new Set);var l=n+"__bubble";a.has(l)||(u0(i,n,2,!1),a.add(l))}function Gm(n,i,a){var l=0;i&&(l|=4),u0(a,n,l,i)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Km(n){if(!n[Eh]){n[Eh]=!0,pl.forEach(function(a){a!=="selectionchange"&&(_w.has(a)||Gm(a,!1,n),Gm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Eh]||(i[Eh]=!0,Gm("selectionchange",!1,i))}}function u0(n,i,a,l){switch(L0(i)){case 2:var f=Kw;break;case 8:f=Qw;break;default:f=og}a=f.bind(null,i,a,n),f=void 0,!Vs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Qm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=pi(b),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){l=d=_;continue t}b=b.parentNode}}l=l.return}wr(function(){var B=d,G=Pn(a),X=[];t:{var q=qy.get(n);if(q!==void 0){var H=Si,ct=n;switch(n){case"keypress":if(Ms(a)===0)break t;case"keydown":case"keyup":H=Vc;break;case"focusin":ct="focus",H=ks;break;case"focusout":ct="blur",H=ks;break;case"beforeblur":case"afterblur":H=ks;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Sc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=y;break;case Ly:case zy:case By:H=wc;break;case jy:H=S;break;case"scroll":case"scrollend":H=xl;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=Ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Gi;break;case"toggle":case"beforetoggle":H=It}var vt=(i&4)!==0,ne=!vt&&(n==="scroll"||n==="scrollend"),P=vt?q!==null?q+"Capture":null:q;vt=[];for(var D=B,z;D!==null;){var Y=D;if(z=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||z===null||P===null||(Y=Zn(D,P),Y!=null&&vt.push(su(D,Y,z))),ne)break;D=D.return}0<vt.length&&(q=new H(q,ct,null,a,G),X.push({event:q,listeners:vt}))}}if((i&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==wl&&(ct=a.relatedTarget||a.fromElement)&&(pi(ct)||ct[mi]))break t;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ct=a.relatedTarget||a.toElement,H=B,ct=ct?pi(ct):null,ct!==null&&(ne=u(ct),vt=ct.tag,ct!==ne||vt!==5&&vt!==27&&vt!==6)&&(ct=null)):(H=null,ct=B),H!==ct)){if(vt=Cl,Y="onMouseLeave",P="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(vt=Gi,Y="onPointerLeave",P="onPointerEnter",D="pointer"),ne=H==null?q:Tn(H),z=ct==null?q:Tn(ct),q=new vt(Y,D+"leave",H,a,G),q.target=ne,q.relatedTarget=z,Y=null,pi(G)===B&&(vt=new vt(P,D+"enter",ct,a,G),vt.target=z,vt.relatedTarget=ne,Y=vt),ne=Y,H&&ct)e:{for(vt=vw,P=H,D=ct,z=0,Y=P;Y;Y=vt(Y))z++;Y=0;for(var gt=D;gt;gt=vt(gt))Y++;for(;0<z-Y;)P=vt(P),z--;for(;0<Y-z;)D=vt(D),Y--;for(;z--;){if(P===D||D!==null&&P===D.alternate){vt=P;break e}P=vt(P),D=vt(D)}vt=null}else vt=null;H!==null&&c0(X,q,H,vt,!1),ct!==null&&ne!==null&&c0(X,ne,ct,vt,!0)}}t:{if(q=B?Tn(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var jt=Ry;else if(wy(q))if(xy)jt=D1;else{jt=x1;var dt=R1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ka(B.elementType)&&(jt=Ry):jt=C1;if(jt&&(jt=jt(n,B))){Iy(X,jt,a,G);break t}dt&&dt(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&bl(q,"number",q.value)}switch(dt=B?Tn(B):window,n){case"focusin":(wy(dt)||dt.contentEditable==="true")&&(Ha=dt,bd=B,Ml=null);break;case"focusout":Ml=bd=Ha=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,ky(X,a,G);break;case"selectionchange":if(V1)break;case"keydown":case"keyup":ky(X,a,G)}var Ct;if(Ft)t:{switch(n){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Fa?Us(n,a)&&(Mt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(Ii&&a.locale!=="ko"&&(Fa||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Fa&&(Ct=Rl()):(bi=G,Il="value"in bi?bi.value:bi.textContent,Fa=!0)),dt=bh(B,Mt),0<dt.length&&(Mt=new wi(Mt,n,null,a,G),X.push({event:Mt,listeners:dt}),Ct?Mt.data=Ct:(Ct=qa(a),Ct!==null&&(Mt.data=Ct)))),(Ct=Un?S1(n,a):A1(n,a))&&(Mt=bh(B,"onBeforeInput"),0<Mt.length&&(dt=new wi("onBeforeInput","beforeinput",null,a,G),X.push({event:dt,listeners:Mt}),dt.data=Ct)),gw(X,n,B,a,G)}l0(X,i)})}function su(n,i,a){return{instance:n,listener:i,currentTarget:a}}function bh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Zn(n,a),f!=null&&l.unshift(su(n,f,d)),f=Zn(n,i),f!=null&&l.push(su(n,f,d))),n.tag===3)return l;n=n.return}return[]}function vw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function c0(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,x=b.alternate,B=b.stateNode;if(b=b.tag,x!==null&&x===l)break;b!==5&&b!==26&&b!==27||B===null||(x=B,f?(B=Zn(a,d),B!=null&&_.unshift(su(a,B,x))):f||(B=Zn(a,d),B!=null&&_.push(su(a,B,x)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Tw=/\r\n?/g,Ew=/\u0000|\uFFFD/g;function h0(n){return(typeof n=="string"?n:""+n).replace(Tw,`
`).replace(Ew,"")}function f0(n,i){return i=h0(i),h0(n)===i}function ee(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||fn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&fn(n,""+l);break;case"className":En(n,"class",l);break;case"tabIndex":En(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(n,a,l);break;case"style":Al(n,l,d);break;case"data":if(i!=="object"){En(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ee(n,i,"name",f.name,f,null),ee(n,i,"formEncType",f.formEncType,f,null),ee(n,i,"formMethod",f.formMethod,f,null),ee(n,i,"formTarget",f.formTarget,f,null)):(ee(n,i,"encType",f.encType,f,null),ee(n,i,"method",f.method,f,null),ee(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Jn);break;case"onScroll":l!=null&&Vt("scroll",n);break;case"onScrollEnd":l!=null&&Vt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ua(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Vt("beforetoggle",n),Vt("toggle",n),Ma(n,"popover",l);break;case"xlinkActuate":Re(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Re(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Re(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Re(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Re(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Re(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Re(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Re(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Re(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ma(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bc.get(a)||a,Ma(n,a,l))}}function Ym(n,i,a,l,f,d){switch(a){case"style":Al(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?fn(n,l):(typeof l=="number"||typeof l=="bigint")&&fn(n,""+l);break;case"onScroll":l!=null&&Vt("scroll",n);break;case"onScrollEnd":l!=null&&Vt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[je]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ma(n,a,l)}}}function Je(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",n),Vt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,d,_,a,null)}}f&&ee(n,i,"srcSet",a.srcSet,a,null),l&&ee(n,i,"src",a.src,a,null);return;case"input":Vt("invalid",n);var b=d=_=f=null,x=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":f=G;break;case"type":_=G;break;case"checked":x=G;break;case"defaultChecked":B=G;break;case"value":d=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:ee(n,i,l,G,a,null)}}vc(n,d,b,x,B,_,f,!1);return;case"select":Vt("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:ee(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?Er(n,!!l,i,!1):a!=null&&Er(n,!!l,a,!0);return;case"textarea":Vt("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:ee(n,i,_,b,a,null)}br(n,l,f,d);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ee(n,i,x,l,a,null)}return;case"dialog":Vt("beforetoggle",n),Vt("toggle",n),Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":Vt("load",n);break;case"video":case"audio":for(l=0;l<ru.length;l++)Vt(ru[l],n);break;case"image":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"embed":case"source":case"link":Vt("error",n),Vt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,B,l,a,null)}return;default:if(ka(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&Ym(n,i,G,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ee(n,i,b,l,a,null))}function bw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,x=null,B=null,G=null;for(H in a){var X=a[H];if(a.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":x=X;default:l.hasOwnProperty(H)||ee(n,i,H,null,l,X)}}for(var q in l){var H=l[q];if(X=a[q],l.hasOwnProperty(q)&&(H!=null||X!=null))switch(q){case"type":d=H;break;case"name":f=H;break;case"checked":B=H;break;case"defaultChecked":G=H;break;case"value":_=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==X&&ee(n,i,q,H,l,X)}}Pa(n,_,b,x,B,G,d,f);return;case"select":H=_=b=q=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":H=x;default:l.hasOwnProperty(d)||ee(n,i,d,null,l,x)}for(f in l)if(d=l[f],x=a[f],l.hasOwnProperty(f)&&(d!=null||x!=null))switch(f){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==x&&ee(n,i,f,d,l,x)}i=b,a=_,l=H,q!=null?Er(n,!!a,q,!1):!!l!=!!a&&(i!=null?Er(n,!!a,i,!0):Er(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ee(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ee(n,i,_,f,l,d)}Tc(n,q,H);return;case"option":for(var ct in a)if(q=a[ct],a.hasOwnProperty(ct)&&q!=null&&!l.hasOwnProperty(ct))switch(ct){case"selected":n.selected=!1;break;default:ee(n,i,ct,null,l,q)}for(x in l)if(q=l[x],H=a[x],l.hasOwnProperty(x)&&q!==H&&(q!=null||H!=null))switch(x){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ee(n,i,x,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in a)q=a[vt],a.hasOwnProperty(vt)&&q!=null&&!l.hasOwnProperty(vt)&&ee(n,i,vt,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:ee(n,i,B,q,l,H)}return;default:if(ka(i)){for(var ne in a)q=a[ne],a.hasOwnProperty(ne)&&q!==void 0&&!l.hasOwnProperty(ne)&&Ym(n,i,ne,void 0,l,q);for(G in l)q=l[G],H=a[G],!l.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||Ym(n,i,G,q,l,H);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&ee(n,i,P,null,l,q);for(X in l)q=l[X],H=a[X],!l.hasOwnProperty(X)||q===H||q==null&&H==null||ee(n,i,X,q,l,H)}function d0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&d0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var x=a[l],B=x.startTime;if(B>b)break;var G=x.transferSize,X=x.initiatorType;G&&d0(X)&&(x=x.responseEnd,_+=G*(x<b?1:(b-B)/(x-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xm=null,$m=null;function Sh(n){return n.nodeType===9?n:n.ownerDocument}function m0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Zm=null;function Aw(){var n=window.event;return n&&n.type==="popstate"?n===Zm?!1:(Zm=n,!0):(Zm=null,!1)}var p0=typeof setTimeout=="function"?setTimeout:void 0,ww=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(n){return y0.resolve(null).then(n).catch(Rw)}:p0;function Rw(n){setTimeout(function(){throw n})}function Gr(n){return n==="head"}function _0(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),_o(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")au(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,au(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[gi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&au(n.ownerDocument.body);a=f}while(a);_o(i)}function v0(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Wm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wm(a),Oa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function xw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[gi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Hn(n.nextSibling),n===null)break}return null}function Cw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Hn(n.nextSibling),n===null))return null;return n}function T0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Hn(n.nextSibling),n===null))return null;return n}function tg(n){return n.data==="$?"||n.data==="$~"}function eg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Dw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Hn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ng=null;function E0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Hn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function b0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function S0(n,i,a){switch(i=Sh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function au(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Oa(n)}var Gn=new Map,A0=new Set;function Ah(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ar=rt.d;rt.d={f:Nw,r:Vw,D:Ow,C:Mw,L:Pw,m:kw,X:Lw,S:Uw,M:zw};function Nw(){var n=ar.f(),i=gh();return n||i}function Vw(n){var i=Mn(n);i!==null&&i.tag===5&&i.type==="form"?j_(i):ar.r(n)}var go=typeof document>"u"?null:document;function w0(n,i,a){var l=go;if(l&&typeof i=="string"&&i){var f=hn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),A0.has(f)||(A0.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Je(i,"link",n),Ie(i),l.head.appendChild(i)))}}function Ow(n){ar.D(n),w0("dns-prefetch",n,null)}function Mw(n,i){ar.C(n,i),w0("preconnect",n,i)}function Pw(n,i,a){ar.L(n,i,a);var l=go;if(l&&n&&i){var f='link[rel="preload"][as="'+hn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+hn(a.imageSizes)+'"]')):f+='[href="'+hn(n)+'"]';var d=f;switch(i){case"style":d=po(n);break;case"script":d=yo(n)}Gn.has(d)||(n=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Gn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(ou(d))||i==="script"&&l.querySelector(lu(d))||(i=l.createElement("link"),Je(i,"link",n),Ie(i),l.head.appendChild(i)))}}function kw(n,i){ar.m(n,i);var a=go;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+hn(l)+'"][href="'+hn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=yo(n)}if(!Gn.has(d)&&(n=E({rel:"modulepreload",href:n},i),Gn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(lu(d)))return}l=a.createElement("link"),Je(l,"link",n),Ie(l),a.head.appendChild(l)}}}function Uw(n,i,a){ar.S(n,i,a);var l=go;if(l&&n){var f=yi(l).hoistableStyles,d=po(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(ou(d)))b.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Gn.get(d))&&ig(n,a);var x=_=l.createElement("link");Ie(x),Je(x,"link",n),x._p=new Promise(function(B,G){x.onload=B,x.onerror=G}),x.addEventListener("load",function(){b.loading|=1}),x.addEventListener("error",function(){b.loading|=2}),b.loading|=4,wh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function Lw(n,i){ar.X(n,i);var a=go;if(a&&n){var l=yi(a).hoistableScripts,f=yo(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=E({src:n,async:!0},i),(i=Gn.get(f))&&rg(n,i),d=a.createElement("script"),Ie(d),Je(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function zw(n,i){ar.M(n,i);var a=go;if(a&&n){var l=yi(a).hoistableScripts,f=yo(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=E({src:n,async:!0,type:"module"},i),(i=Gn.get(f))&&rg(n,i),d=a.createElement("script"),Ie(d),Je(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function I0(n,i,a,l){var f=(f=xt.current)?Ah(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=po(a.href),a=yi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=po(a.href);var d=yi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(ou(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Gn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(n,a),d||Bw(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yo(a),a=yi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function po(n){return'href="'+hn(n)+'"'}function ou(n){return'link[rel="stylesheet"]['+n+"]"}function R0(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function Bw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Je(i,"link",a),Ie(i),n.head.appendChild(i))}function yo(n){return'[src="'+hn(n)+'"]'}function lu(n){return"script[async]"+n}function x0(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+hn(a.href)+'"]');if(l)return i.instance=l,Ie(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ie(l),Je(l,"style",f),wh(l,a.precedence,n),i.instance=l;case"stylesheet":f=po(a.href);var d=n.querySelector(ou(f));if(d)return i.state.loading|=4,i.instance=d,Ie(d),d;l=R0(a),(f=Gn.get(f))&&ig(l,f),d=(n.ownerDocument||n).createElement("link"),Ie(d);var _=d;return _._p=new Promise(function(b,x){_.onload=b,_.onerror=x}),Je(d,"link",l),i.state.loading|=4,wh(d,a.precedence,n),i.instance=d;case"script":return d=yo(a.src),(f=n.querySelector(lu(d)))?(i.instance=f,Ie(f),f):(l=a,(f=Gn.get(d))&&(l=E({},a),rg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ie(f),Je(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,wh(l,a.precedence,n));return i.instance}function wh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function ig(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function rg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ih=null;function C0(n,i,a){if(Ih===null){var l=new Map,f=Ih=new Map;f.set(a,l)}else f=Ih,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[gi]||d[we]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function D0(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function jw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function N0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function qw(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=po(l.href),d=i.querySelector(ou(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Rh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Ie(d);return}d=i.ownerDocument||i,l=R0(l),(f=Gn.get(f))&&ig(l,f),d=d.createElement("link"),Ie(d);var _=d;_._p=new Promise(function(b,x){_.onload=b,_.onerror=x}),Je(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Rh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var sg=0;function Fw(n,i){return n.stylesheets&&n.count===0&&Ch(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Ch(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&sg===0&&(sg=62500*Sw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ch(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>sg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var xh=null;function Ch(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,xh=new Map,i.forEach(Hw,n),xh=null,Rh.call(n))}function Hw(n,i){if(!(i.state.loading&4)){var a=xh.get(n);if(a)var l=a.get(null);else{a=new Map,xh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Rh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var uu={$$typeof:et,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function Gw(n,i,a,l,f,d,_,b,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function V0(n,i,a,l,f,d,_,b,x,B,G,X){return n=new Gw(n,i,a,_,x,B,G,X,b),i=1,d===!0&&(i|=24),d=Sn(3,null,null,i),n.current=d,d.stateNode=n,i=Ld(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},qd(d),n}function O0(n){return n?(n=Qa,n):Qa}function M0(n,i,a,l,f,d){f=O0(f),l.context===null?l.context=f:l.pendingContext=f,l=Mr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Pr(n,l,i),a!==null&&(yn(a,n,i),jl(a,n,i))}function P0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ag(n,i){P0(n,i),(n=n.alternate)&&P0(n,i)}function k0(n){if(n.tag===13||n.tag===31){var i=Bs(n,67108864);i!==null&&yn(i,n,67108864),ag(n,67108864)}}function U0(n){if(n.tag===13||n.tag===31){var i=xn();i=xs(i);var a=Bs(n,i);a!==null&&yn(a,n,i),ag(n,i)}}var Dh=!0;function Kw(n,i,a,l){var f=K.T;K.T=null;var d=rt.p;try{rt.p=2,og(n,i,a,l)}finally{rt.p=d,K.T=f}}function Qw(n,i,a,l){var f=K.T;K.T=null;var d=rt.p;try{rt.p=8,og(n,i,a,l)}finally{rt.p=d,K.T=f}}function og(n,i,a,l){if(Dh){var f=lg(l);if(f===null)Qm(n,i,l,Nh,a),z0(n,l);else if(Xw(f,n,i,a,l))l.stopPropagation();else if(z0(n,l),i&4&&-1<Yw.indexOf(n)){for(;f!==null;){var d=Mn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=hi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var x=1<<31-ye(_);b.entanglements[1]|=x,_&=~x}Di(d),(Ht&6)===0&&(dh=on()+500,iu(0))}}break;case 31:case 13:b=Bs(d,2),b!==null&&yn(b,d,2),gh(),ag(d,2)}if(d=lg(l),d===null&&Qm(n,i,l,Nh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Qm(n,i,l,null,a)}}function lg(n){return n=Pn(n),ug(n)}var Nh=null;function ug(n){if(Nh=null,n=pi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Nh=n,null}function L0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(As()){case fl:return 2;case dl:return 8;case vr:case gd:return 32;case uc:return 268435456;default:return 32}default:return 32}}var cg=!1,Kr=null,Qr=null,Yr=null,cu=new Map,hu=new Map,Xr=[],Yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function z0(n,i){switch(n){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(i.pointerId)}}function fu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Mn(i),i!==null&&k0(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Xw(n,i,a,l,f){switch(i){case"focusin":return Kr=fu(Kr,n,i,a,l,f),!0;case"dragenter":return Qr=fu(Qr,n,i,a,l,f),!0;case"mouseover":return Yr=fu(Yr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return cu.set(d,fu(cu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,hu.set(d,fu(hu.get(d)||null,n,i,a,l,f)),!0}return!1}function B0(n){var i=pi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Xn(n.priority,function(){U0(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Xn(n.priority,function(){U0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=lg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);wl=l,a.target.dispatchEvent(l),wl=null}else return i=Mn(a),i!==null&&k0(i),n.blockedOn=a,!1;i.shift()}return!0}function j0(n,i,a){Vh(n)&&a.delete(i)}function $w(){cg=!1,Kr!==null&&Vh(Kr)&&(Kr=null),Qr!==null&&Vh(Qr)&&(Qr=null),Yr!==null&&Vh(Yr)&&(Yr=null),cu.forEach(j0),hu.forEach(j0)}function Oh(n,i){n.blockedOn===i&&(n.blockedOn=null,cg||(cg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,$w)))}var Mh=null;function q0(n){Mh!==n&&(Mh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Mh===n&&(Mh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(ug(l||a)===null)continue;break}var d=Mn(a);d!==null&&(n.splice(i,3),i-=3,lm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function _o(n){function i(x){return Oh(x,n)}Kr!==null&&Oh(Kr,n),Qr!==null&&Oh(Qr,n),Yr!==null&&Oh(Yr,n),cu.forEach(i),hu.forEach(i);for(var a=0;a<Xr.length;a++){var l=Xr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Xr.length&&(a=Xr[0],a.blockedOn===null);)B0(a),a.blockedOn===null&&Xr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[je]||null;if(typeof d=="function")_||q0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[je]||null)b=_.formAction;else if(ug(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),q0(a)}}}function F0(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function hg(n){this._internalRoot=n}Ph.prototype.render=hg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=xn();M0(a,l,n,i,null,null)},Ph.prototype.unmount=hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;M0(n.current,2,null,n,null,null),gh(),i[mi]=null}};function Ph(n){this._internalRoot=n}Ph.prototype.unstable_scheduleHydration=function(n){if(n){var i=gc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Xr.length&&i!==0&&i<Xr[a].priority;a++);Xr.splice(a,0,n),a===0&&B0(n)}};var H0=t.version;if(H0!=="19.2.3")throw Error(r(527,H0,"19.2.3"));rt.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var Jw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{Qn=kh.inject(Jw),Ke=kh}catch{}}return mu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=J_,d=Z_,_=W_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=V0(n,1,!1,null,null,a,l,null,f,d,_,F0),n[mi]=i.current,Km(n),new hg(i)},mu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=J_,_=Z_,b=W_,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=V0(n,1,!0,i,a??null,l,f,x,d,_,b,F0),i.context=O0(null),a=i.current,l=xn(),l=xs(l),f=Mr(l),f.callback=null,Pr(a,f,l),a=l,i.current.lanes=a,Is(i,a),Di(i),n[mi]=i.current,Km(n),new Ph(i)},mu.version="19.2.3",mu}var tT;function oI(){if(tT)return mg.exports;tT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),mg.exports=aI(),mg.exports}var lI=oI();const uI=()=>{};var eT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},cI=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],c=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],c=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,T=u>>2,E=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,O=p&63;g||(O=64,c||(A=64)),r.push(e[T],e[E],e[A],e[O])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(tb(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):cI(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const p=o<s.length?e[s.charAt(o)]:64;++o;const E=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||E==null)throw new hI;const A=u<<2|m>>4;if(r.push(A),p!==64){const O=m<<4&240|p>>2;if(r.push(O),E!==64){const Q=p<<6&192|E;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class hI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fI=function(s){const t=tb(s);return eb.encodeByteArray(t,!0)},uf=function(s){return fI(s).replace(/\./g,"")},nb=function(s){try{return eb.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=()=>ib().__FIREBASE_DEFAULTS__,mI=()=>{if(typeof process>"u"||typeof eT>"u")return;const s=eT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},gI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&nb(s[1]);return t&&JSON.parse(t)},Pf=()=>{try{return uI()||dI()||mI()||gI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},rb=s=>{var t,e;return(e=(t=Pf())==null?void 0:t.emulatorHosts)==null?void 0:e[s]},pI=s=>{const t=rb(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},sb=()=>{var s;return(s=Pf())==null?void 0:s.config},ab=s=>{var t;return(t=Pf())==null?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vp(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[uf(JSON.stringify(e)),uf(JSON.stringify(c)),""].join(".")}const wu={};function vI(){const s={prod:[],emulator:[]};for(const t of Object.keys(wu))wu[t]?s.emulator.push(t):s.prod.push(t);return s}function TI(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let nT=!1;function ob(s,t){if(typeof window>"u"||typeof document>"u"||!Ia(window.location.host)||wu[s]===t||wu[s]||nT)return;wu[s]=t;function e(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=vI().prod.length>0;function c(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,O){A.setAttribute("width","24"),A.setAttribute("id",O),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{nT=!0,c()},A}function T(A,O){A.setAttribute("id",O),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=TI(r),O=e("text"),Q=document.getElementById(O)||document.createElement("span"),Z=e("learnmore"),W=document.getElementById(Z)||document.createElement("a"),ht=e("preprendIcon"),nt=document.getElementById(ht)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const et=A.element;m(et),T(W,Z);const _t=p();g(nt,ht),et.append(nt,Q,W,_t),document.body.appendChild(et)}u?(Q.innerText="Preview backend disconnected.",nt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(nt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function lb(){var t;const s=(t=Pf())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function AI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wI(){const s=ze();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function ub(){return!lb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cb(){return!lb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function hb(){try{return typeof indexedDB=="object"}catch{return!1}}function II(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="FirebaseError";class gr extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=RI,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$u.prototype.create)}}class $u{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?xI(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new gr(o,m,r)}}function xI(s,t){return s.replace(CI,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const CI=/\{\$([^}]+)}/g;function DI(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function ds(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],c=t[o];if(iT(u)&&iT(c)){if(!ds(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function iT(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function NI(s,t){const e=new VI(s,t);return e.subscribe.bind(e)}class VI{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");OI(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=_g),o.error===void 0&&(o.error=_g),o.complete===void 0&&(o.complete=_g);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OI(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(s){return s&&s._delegate?s._delegate:s}class pa{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new yI;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kI(t))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=ta){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ta){return this.instances.has(t)}getOptions(t=ta){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PI(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ta){return this.component?this.component.multipleInstances?t:ta:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(s){return s===ta?void 0:s}function kI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new MI(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const LI={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},zI=Pt.INFO,BI={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},jI=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=BI[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tp{constructor(t){this.name=t,this._logLevel=zI,this._logHandler=jI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?LI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const qI=(s,t)=>t.some(e=>s instanceof e);let rT,sT;function FI(){return rT||(rT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HI(){return sT||(sT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fb=new WeakMap,Pg=new WeakMap,db=new WeakMap,vg=new WeakMap,Ep=new WeakMap;function GI(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{e(as(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&fb.set(e,s)}).catch(()=>{}),Ep.set(t,s),t}function KI(s){if(Pg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Pg.set(s,t)}let kg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Pg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||db.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return as(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function QI(s){kg=s(kg)}function YI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(Tg(this),t,...e);return db.set(r,t.sort?t.sort():[t]),as(r)}:HI().includes(s)?function(...t){return s.apply(Tg(this),t),as(fb.get(this))}:function(...t){return as(s.apply(Tg(this),t))}}function XI(s){return typeof s=="function"?YI(s):(s instanceof IDBTransaction&&KI(s),qI(s,FI())?new Proxy(s,kg):s)}function as(s){if(s instanceof IDBRequest)return GI(s);if(vg.has(s))return vg.get(s);const t=XI(s);return t!==s&&(vg.set(s,t),Ep.set(t,s)),t}const Tg=s=>Ep.get(s);function $I(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,t),m=as(c);return r&&c.addEventListener("upgradeneeded",g=>{r(as(c.result),g.oldVersion,g.newVersion,as(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const JI=["get","getKey","getAll","getAllKeys","count"],ZI=["put","add","delete","clear"],Eg=new Map;function aT(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Eg.get(t))return Eg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=ZI.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||JI.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[e](...m),o&&g.done]))[0]};return Eg.set(t,u),u}QI(s=>({...s,get:(t,e,r)=>aT(t,e)||s.get(t,e,r),has:(t,e)=>!!aT(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(tR(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function tR(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ug="@firebase/app",oT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Tp("@firebase/app"),eR="@firebase/app-compat",nR="@firebase/analytics-compat",iR="@firebase/analytics",rR="@firebase/app-check-compat",sR="@firebase/app-check",aR="@firebase/auth",oR="@firebase/auth-compat",lR="@firebase/database",uR="@firebase/data-connect",cR="@firebase/database-compat",hR="@firebase/functions",fR="@firebase/functions-compat",dR="@firebase/installations",mR="@firebase/installations-compat",gR="@firebase/messaging",pR="@firebase/messaging-compat",yR="@firebase/performance",_R="@firebase/performance-compat",vR="@firebase/remote-config",TR="@firebase/remote-config-compat",ER="@firebase/storage",bR="@firebase/storage-compat",SR="@firebase/firestore",AR="@firebase/ai",wR="@firebase/firestore-compat",IR="firebase",RR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="[DEFAULT]",xR={[Ug]:"fire-core",[eR]:"fire-core-compat",[iR]:"fire-analytics",[nR]:"fire-analytics-compat",[sR]:"fire-app-check",[rR]:"fire-app-check-compat",[aR]:"fire-auth",[oR]:"fire-auth-compat",[lR]:"fire-rtdb",[uR]:"fire-data-connect",[cR]:"fire-rtdb-compat",[hR]:"fire-fn",[fR]:"fire-fn-compat",[dR]:"fire-iid",[mR]:"fire-iid-compat",[gR]:"fire-fcm",[pR]:"fire-fcm-compat",[yR]:"fire-perf",[_R]:"fire-perf-compat",[vR]:"fire-rc",[TR]:"fire-rc-compat",[ER]:"fire-gcs",[bR]:"fire-gcs-compat",[SR]:"fire-fst",[wR]:"fire-fst-compat",[AR]:"fire-vertex","fire-js":"fire-js",[IR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,CR=new Map,zg=new Map;function lT(s,t){try{s.container.addComponent(t)}catch(e){hr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function Po(s){const t=s.name;if(zg.has(t))return hr.debug(`There were multiple attempts to register component ${t}.`),!1;zg.set(t,s);for(const e of cf.values())lT(e,s);for(const e of CR.values())lT(e,s);return!0}function kf(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function ai(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new $u("app","Firebase",DR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=RR;function mb(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r={name:Lg,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw os.create("bad-app-name",{appName:String(o)});if(e||(e=sb()),!e)throw os.create("no-options");const u=cf.get(o);if(u){if(ds(e,u.options)&&ds(r,u.config))return u;throw os.create("duplicate-app",{appName:o})}const c=new UI(o);for(const g of zg.values())c.addComponent(g);const m=new NR(e,r,c);return cf.set(o,m),m}function gb(s=Lg){const t=cf.get(s);if(!t&&s===Lg&&sb())return mb();if(!t)throw os.create("no-app",{appName:s});return t}function ls(s,t,e){let r=xR[s]??s;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),hr.warn(c.join(" "));return}Po(new pa(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firebase-heartbeat-database",OR=1,ku="firebase-heartbeat-store";let bg=null;function pb(){return bg||(bg=$I(VR,OR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(ku)}catch(e){console.warn(e)}}}}).catch(s=>{throw os.create("idb-open",{originalErrorMessage:s.message})})),bg}async function MR(s){try{const e=(await pb()).transaction(ku),r=await e.objectStore(ku).get(yb(s));return await e.done,r}catch(t){if(t instanceof gr)hr.warn(t.message);else{const e=os.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});hr.warn(e.message)}}}async function uT(s,t){try{const r=(await pb()).transaction(ku,"readwrite");await r.objectStore(ku).put(t,yb(s)),await r.done}catch(e){if(e instanceof gr)hr.warn(e.message);else{const r=os.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});hr.warn(r.message)}}}function yb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=1024,kR=30;class UR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new zR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=cT();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>kR){const c=BR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cT(),{heartbeatsToSend:r,unsentEntries:o}=LR(this._heartbeatsCache.heartbeats),u=uf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return hr.warn(e),""}}}function cT(){return new Date().toISOString().substring(0,10)}function LR(s,t=PR){const e=[];let r=s.slice();for(const o of s){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),hT(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),hT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class zR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hb()?II().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await MR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return uT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return uT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function hT(s){return uf(JSON.stringify({version:2,heartbeats:s})).length}function BR(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(s){Po(new pa("platform-logger",t=>new WI(t),"PRIVATE")),Po(new pa("heartbeat",t=>new UR(t),"PRIVATE")),ls(Ug,oT,s),ls(Ug,oT,"esm2020"),ls("fire-js","")}jR("");var qR="firebase",FR="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(qR,FR,"app");function _b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HR=_b,vb=new $u("auth","Firebase",_b());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Tp("@firebase/auth");function GR(s,...t){hf.logLevel<=Pt.WARN&&hf.warn(`Auth (${nl}): ${s}`,...t)}function Kh(s,...t){hf.logLevel<=Pt.ERROR&&hf.error(`Auth (${nl}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(s,...t){throw Sp(s,...t)}function li(s,...t){return Sp(s,...t)}function bp(s,t,e){const r={...HR(),[t]:e};return new $u("auth","Firebase",r).create(t,{appName:s.name})}function ca(s){return bp(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KR(s,t,e){const r=e;if(!(t instanceof r))throw r.name!==t.constructor.name&&zi(s,"argument-error"),bp(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sp(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return vb.create(s,...t)}function Et(s,t,...e){if(!s)throw Sp(t,...e)}function lr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Kh(t),new Error(t)}function fr(s,t){s||lr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function QR(){return fT()==="http:"||fT()==="https:"}function fT(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QR()||SI()||"connection"in navigator)?navigator.onLine:!0}function XR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t,e){this.shortDelay=t,this.longDelay=e,fr(e>t,"Short delay should be less than long delay!"),this.isMobile=EI()||AI()}get(){return YR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s,t){fr(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZR=new Zu(3e4,6e4);function wp(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function il(s,t,e,r,o={}){return Eb(s,o,async()=>{let u={},c={};r&&(t==="GET"?c=r:u={body:JSON.stringify(r)});const m=Ju({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:t,headers:g,...u};return bI()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Ia(s.emulatorConfig.host)&&(p.credentials="include"),Tb.fetch()(await bb(s,s.config.apiHost,e,m),p)})}async function Eb(s,t,e){s._canInitEmulator=!1;const r={...$R,...t};try{const o=new t2(s),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Uh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Uh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw Uh(s,"user-disabled",c);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw bp(s,T,p);zi(s,T)}}catch(o){if(o instanceof gr)throw o;zi(s,"network-request-failed",{message:String(o)})}}async function WR(s,t,e,r,o={}){const u=await il(s,t,e,r,o);return"mfaPendingCredential"in u&&zi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function bb(s,t,e,r){const o=`${t}${e}?${r}`,u=s,c=u.config.emulator?Ap(s.config,o):`${s.config.apiScheme}://${o}`;return JR.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class t2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(li(this.auth,"network-request-failed")),ZR.get())})}}function Uh(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const o=li(s,t,r);return o.customData._tokenResponse=e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(s,t){return il(s,"POST","/v1/accounts:delete",t)}async function ff(s,t){return il(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function n2(s,t=!1){const e=We(s),r=await e.getIdToken(t),o=Ip(r);Et(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Iu(Sg(o.auth_time)),issuedAtTime:Iu(Sg(o.iat)),expirationTime:Iu(Sg(o.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Sg(s){return Number(s)*1e3}function Ip(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const o=nb(e);return o?JSON.parse(o):(Kh("Failed to decode base64 JWT payload"),null)}catch(o){return Kh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function dT(s){const t=Ip(s);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof gr&&i2(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function i2({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(s){var E;const t=s.auth,e=await s.getIdToken(),r=await Uu(s,ff(t,{idToken:e}));Et(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(E=o.providerUserInfo)!=null&&E.length?Sb(o.providerUserInfo):[],c=a2(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new jg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,T)}async function s2(s){const t=We(s);await df(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function a2(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function Sb(s){return s.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(s,t){const e=await Eb(s,{},async()=>{const r=Ju({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await bb(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Ia(s.emulatorConfig.host)&&(g.credentials="include"),Tb.fetch()(c,g)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function l2(s,t){return il(s,"POST","/v2/accounts:revokeToken",wp(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):dT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const e=dT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:o,expiresIn:u}=await o2(t,e);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:o,expirationTime:u}=e,c=new Do;return r&&(Et(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(Et(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(Et(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(s,t){Et(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class oi{constructor({uid:t,auth:e,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new r2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Uu(this,this.stsTokenManager.getToken(this.auth,t));return Et(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return n2(this,t)}reload(){return s2(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new oi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await df(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(ca(this.auth));const t=await this.getIdToken();return await Uu(this,e2(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,g=e._redirectEventId??void 0,p=e.createdAt??void 0,T=e.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:O,providerData:Q,stsTokenManager:Z}=e;Et(E&&Z,t,"internal-error");const W=Do.fromJSON(this.name,Z);Et(typeof E=="string",t,"internal-error"),Jr(r,t.name),Jr(o,t.name),Et(typeof A=="boolean",t,"internal-error"),Et(typeof O=="boolean",t,"internal-error"),Jr(u,t.name),Jr(c,t.name),Jr(m,t.name),Jr(g,t.name),Jr(p,t.name),Jr(T,t.name);const ht=new oi({uid:E,auth:t,email:o,emailVerified:A,displayName:r,isAnonymous:O,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:W,createdAt:p,lastLoginAt:T});return Q&&Array.isArray(Q)&&(ht.providerData=Q.map(nt=>({...nt}))),g&&(ht._redirectEventId=g),ht}static async _fromIdTokenResponse(t,e,r=!1){const o=new Do;o.updateFromServerResponse(e);const u=new oi({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await df(u),u}static async _fromGetAccountInfoResponse(t,e,r){const o=e.users[0];Et(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Sb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Do;m.updateFromIdToken(r);const g=new oi({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new Map;function ur(s){fr(s instanceof Function,"Expected a class definition");let t=mT.get(s);return t?(fr(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,mT.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Ab.type="NONE";const gT=Ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(s,t,e){return`firebase:${s}:${t}:${e}`}class No{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Qh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Qh("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await ff(this.auth,{idToken:t}).catch(()=>{});return e?oi._fromGetAccountInfoResponse(this.auth,e,t):null}return oi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new No(ur(gT),t,r);const o=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||ur(gT);const c=Qh(r,t.config.apiKey,t.name);let m=null;for(const p of e)try{const T=await p._get(c);if(T){let E;if(typeof T=="string"){const A=await ff(t,{idToken:T}).catch(()=>{});if(!A)break;E=await oi._fromGetAccountInfoResponse(t,A,T)}else E=oi._fromJSON(t,T);p!==u&&(m=E),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new No(u,t,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new No(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Db(t))return"Blackberry";if(Nb(t))return"Webos";if(Ib(t))return"Safari";if((t.includes("chrome/")||Rb(t))&&!t.includes("edge/"))return"Chrome";if(Cb(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wb(s=ze()){return/firefox\//i.test(s)}function Ib(s=ze()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Rb(s=ze()){return/crios\//i.test(s)}function xb(s=ze()){return/iemobile/i.test(s)}function Cb(s=ze()){return/android/i.test(s)}function Db(s=ze()){return/blackberry/i.test(s)}function Nb(s=ze()){return/webos/i.test(s)}function Rp(s=ze()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function u2(s=ze()){var t;return Rp(s)&&!!((t=window.navigator)!=null&&t.standalone)}function c2(){return wI()&&document.documentMode===10}function Vb(s=ze()){return Rp(s)||Cb(s)||Nb(s)||Db(s)||/windows phone/i.test(s)||xb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(s,t=[]){let e;switch(s){case"Browser":e=pT(ze());break;case"Worker":e=`${pT(ze())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((c,m)=>{try{const g=t(u);c(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(s,t={}){return il(s,"GET","/v2/passwordPolicy",wp(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=6;class m2{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??d2,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(t,e,r,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yT(this),this.idTokenSubscription=new yT(this),this.beforeStateQueue=new h2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ur(e)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await No.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await ff(this,{idToken:t}),r=await oi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var u;if(ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await df(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ai(this.app))return Promise.reject(ca(this));const e=t?We(t):null;return e&&Et(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(ca(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ai(this.app)?Promise.reject(ca(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await f2(this),e=new m2(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $u("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await l2(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ur(t)||this._popupRedirectResolver;Et(e,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[ur(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,o);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&GR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Uf(s){return We(s)}class yT{constructor(t){this.auth=t,this.observer=null,this.addObserver=NI(e=>this.observer=e)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function p2(s){xp=s}function y2(s){return xp.loadJS(s)}function _2(){return xp.gapiScript}function v2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(s,t){const e=kf(s,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(ds(u,t??{}))return o;zi(o,"already-initialized")}return e.initialize({options:t})}function E2(s,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(ur);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function b2(s,t,e){const r=Uf(s);Et(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=Mb(t),{host:c,port:m}=S2(t),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},T=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Et(ds(p,r.config.emulator)&&ds(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Ia(c)?(vp(`${u}//${c}${g}`),ob("Auth",!0)):A2()}function Mb(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function S2(s){const t=Mb(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:_T(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:_T(c)}}}function _T(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function A2(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return lr("not implemented")}_getIdTokenResponse(t){return lr("not implemented")}_linkToIdToken(t,e){return lr("not implemented")}_getReauthenticationResolver(t){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(s,t){return WR(s,"POST","/v1/accounts:signInWithIdp",wp(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="http://localhost";class ya extends Pb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ya(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):zi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=e;if(!r||!o)return null;const c=new ya(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Vo(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Vo(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Vo(t,e)}buildRequest(){const t={requestUri:w2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ju(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Cp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Wu{constructor(){super("facebook.com")}static credential(t){return ya._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return es.credentialFromTaggedObject(t)}static credentialFromError(t){return es.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return es.credential(t.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ya._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return or.credentialFromTaggedObject(t)}static credentialFromError(t){return or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return or.credential(e,r)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Wu{constructor(){super("github.com")}static credential(t){return ya._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ns.credentialFromTaggedObject(t)}static credentialFromError(t){return ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ns.credential(t.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Wu{constructor(){super("twitter.com")}static credential(t,e){return ya._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return is.credentialFromTaggedObject(t)}static credentialFromError(t){return is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return is.credential(e,r)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,o=!1){const u=await oi._fromIdTokenResponse(t,r,o),c=vT(r);return new ko({user:u,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const o=vT(r);return new ko({user:t,providerId:o,_tokenResponse:r,operationType:e})}}function vT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends gr{constructor(t,e,r,o){super(e.code,e.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,o){return new mf(t,e,r,o)}}function kb(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(s,u,t,r):u})}async function I2(s,t,e=!1){const r=await Uu(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return ko._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(s,t,e=!1){const{auth:r}=s;if(ai(r.app))return Promise.reject(ca(r));const o="reauthenticate";try{const u=await Uu(s,kb(r,o,t,s),e);Et(u.idToken,r,"internal-error");const c=Ip(u.idToken);Et(c,r,"internal-error");const{sub:m}=c;return Et(s.uid===m,r,"user-mismatch"),ko._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&zi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(s,t,e=!1){if(ai(s.app))return Promise.reject(ca(s));const r="signIn",o=await kb(s,r,t),u=await ko._fromIdTokenResponse(s,r,o);return e||await s._updateCurrentUser(u.user),u}function C2(s,t,e,r){return We(s).onIdTokenChanged(t,e,r)}function D2(s,t,e){return We(s).beforeAuthStateChanged(t,e)}function N2(s,t,e,r){return We(s).onAuthStateChanged(t,e,r)}function V2(s){return We(s).signOut()}const gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=1e3,M2=10;class Lb extends Ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),o=this.localCache[e];r!==o&&t(e,o,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);c2()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,M2):o()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},O2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Lb.type="LOCAL";const P2=Lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb extends Ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}zb.type="SESSION";const Bb=zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const r=new Lf(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(e.origin,u)),g=await k2(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Dp("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function L2(s){Pi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function z2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B2(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function j2(){return jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebaseLocalStorageDb",q2=1,pf="firebaseLocalStorage",Fb="fbase_key";class tc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function zf(s,t){return s.transaction([pf],t?"readwrite":"readonly").objectStore(pf)}function F2(){const s=indexedDB.deleteDatabase(qb);return new tc(s).toPromise()}function qg(){const s=indexedDB.open(qb,q2);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(pf,{keyPath:Fb})}catch(o){e(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(pf)?t(r):(r.close(),await F2(),t(await qg()))})})}async function TT(s,t,e){const r=zf(s,!0).put({[Fb]:t,value:e});return new tc(r).toPromise()}async function H2(s,t){const e=zf(s,!1).get(t),r=await new tc(e).toPromise();return r===void 0?null:r.value}function ET(s,t){const e=zf(s,!0).delete(t);return new tc(e).toPromise()}const G2=800,K2=3;class Hb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qg(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>K2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(j2()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await z2(),!this.activeServiceWorker)return;this.sender=new U2(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||B2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await qg();return await TT(t,gf,"1"),await ET(t,gf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>TT(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>H2(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>ET(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=zf(o,!1).getAll();return new tc(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Hb.type="LOCAL";const Q2=Hb;new Zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(s,t){return t?ur(t):(Et(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends Pb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Vo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Vo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Vo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Y2(s){return x2(s.auth,new Np(s),s.bypassAuthState)}function X2(s){const{auth:t,user:e}=s;return Et(e,t,"internal-error"),R2(e,new Np(s),s.bypassAuthState)}async function $2(s){const{auth:t,user:e}=s;return Et(e,t,"internal-error"),I2(e,new Np(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,e,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Y2;case"linkViaPopup":case"linkViaRedirect":return $2;case"reauthViaPopup":case"reauthViaRedirect":return X2;default:zi(this.auth,"internal-error")}}resolve(t){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Zu(2e3,1e4);async function Z2(s,t,e){if(ai(s.app))return Promise.reject(li(s,"operation-not-supported-in-this-environment"));const r=Uf(s);KR(s,t,Cp);const o=Gb(r,e);return new oa(r,"signInViaPopup",t,o).executeNotNull()}class oa extends Kb{constructor(t,e,r,o,u){super(t,e,o,u),this.provider=r,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const t=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,J2.get())};t()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="pendingRedirect",Yh=new Map;class tx extends Kb{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=Yh.get(this.auth._key());if(!t){try{const r=await ex(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}Yh.set(this.auth._key(),t)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ex(s,t){const e=rx(t),r=ix(s);if(!await r._isAvailable())return!1;const o=await r._get(e)==="true";return await r._remove(e),o}function nx(s,t){Yh.set(s._key(),t)}function ix(s){return ur(s._redirectPersistence)}function rx(s){return Qh(W2,s.config.apiKey,s.name)}async function sx(s,t,e=!1){if(ai(s.app))return Promise.reject(ca(s));const r=Uf(s),o=Gb(r,t),c=await new tx(r,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=600*1e3;class ox{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lx(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!Qb(t)){const o=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(li(this.auth,o))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ax&&this.cachedEventUids.clear(),this.cachedEventUids.has(bT(t))}saveEventToCache(t){this.cachedEventUids.add(bT(t)),this.lastProcessedEventTime=Date.now()}}function bT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function Qb({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function lx(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(s,t={}){return il(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hx=/^https?/;async function fx(s){if(s.config.emulator)return;const{authorizedDomains:t}=await ux(s);for(const e of t)try{if(dx(e))return}catch{}zi(s,"unauthorized-domain")}function dx(s){const t=Bg(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!hx.test(e))return!1;if(cx.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new Zu(3e4,6e4);function ST(){const s=Pi().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function gx(s){return new Promise((t,e)=>{var o,u,c;function r(){ST(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ST(),e(li(s,"network-request-failed"))},timeout:mx.get()})}if((u=(o=Pi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)t(gapi.iframes.getContext());else if((c=Pi().gapi)!=null&&c.load)r();else{const m=v2("iframefcb");return Pi()[m]=()=>{gapi.load?r():e(li(s,"network-request-failed"))},y2(`${_2()}?onload=${m}`).catch(g=>e(g))}}).catch(t=>{throw Xh=null,t})}let Xh=null;function px(s){return Xh=Xh||gx(s),Xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Zu(5e3,15e3),_x="__/auth/iframe",vx="emulator/auth/iframe",Tx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ex=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bx(s){const t=s.config;Et(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Ap(t,vx):`https://${s.config.authDomain}/${_x}`,r={apiKey:t.apiKey,appName:s.name,v:nl},o=Ex.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${Ju(r).slice(1)}`}async function Sx(s){const t=await px(s),e=Pi().gapi;return Et(e,s,"internal-error"),t.open({where:document.body,url:bx(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=li(s,"network-request-failed"),m=Pi().setTimeout(()=>{u(c)},yx.get());function g(){Pi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wx=500,Ix=600,Rx="_blank",xx="http://localhost";class AT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cx(s,t,e,r=wx,o=Ix){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...Ax,width:r.toString(),height:o.toString(),top:u,left:c},p=ze().toLowerCase();e&&(m=Rb(p)?Rx:e),wb(p)&&(t=t||xx,g.scrollbars="yes");const T=Object.entries(g).reduce((A,[O,Q])=>`${A}${O}=${Q},`,"");if(u2(p)&&m!=="_self")return Dx(t||"",m),new AT(null);const E=window.open(t||"",m,T);Et(E,s,"popup-blocked");try{E.focus()}catch{}return new AT(E)}function Dx(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="__/auth/handler",Vx="emulator/auth/handler",Ox=encodeURIComponent("fac");async function wT(s,t,e,r,o,u){Et(s.config.authDomain,s,"auth-domain-config-required"),Et(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:nl,eventId:o};if(t instanceof Cp){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",DI(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,E]of Object.entries({}))c[T]=E}if(t instanceof Wu){const T=t.getScopes().filter(E=>E!=="");T.length>0&&(c.scopes=T.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),p=g?`#${Ox}=${encodeURIComponent(g)}`:"";return`${Mx(s)}?${Ju(m).slice(1)}${p}`}function Mx({config:s}){return s.emulator?Ap(s,Vx):`https://${s.authDomain}/${Nx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class Px{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bb,this._completeRedirectFn=sx,this._overrideRedirectResult=nx}async _openPopup(t,e,r,o){var c;fr((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const u=await wT(t,e,r,Bg(),o);return Cx(t,u,Dp())}async _openRedirect(t,e,r,o){await this._originValidation(t);const u=await wT(t,e,r,Bg(),o);return L2(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(fr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await Sx(t),r=new ox(t);return e.register("authEvent",o=>(Et(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ag,{type:Ag},o=>{var c;const u=(c=o==null?void 0:o[0])==null?void 0:c[Ag];u!==void 0&&e(!!u),zi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=fx(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Vb()||Ib()||Rp()}}const kx=Px;var IT="@firebase/auth",RT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zx(s){Po(new pa("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ob(s)},p=new g2(r,o,u,g);return E2(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Po(new pa("auth-internal",t=>{const e=Uf(t.getProvider("auth").getImmediate());return(r=>new Ux(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(IT,RT,Lx(s)),ls(IT,RT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=300,jx=ab("authIdTokenMaxAge")||Bx;let xT=null;const qx=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>jx)return;const o=e==null?void 0:e.token;xT!==o&&(xT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Fx(s=gb()){const t=kf(s,"auth");if(t.isInitialized())return t.getImmediate();const e=T2(s,{popupRedirectResolver:kx,persistence:[Q2,P2,Bb]}),r=ab("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=qx(u.toString());D2(e,c,()=>c(e.currentUser)),C2(e,m=>c(m))}}const o=rb("auth");return o&&b2(e,`http://${o}`),e}function Hx(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}p2({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=li("internal-error");u.customData=o,e(u)},r.type="text/javascript",r.charset="UTF-8",Hx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zx("Browser");var CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,Yb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function C(){}C.prototype=w.prototype,I.F=w.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(M,N,k){for(var R=Array(arguments.length-2),le=2;le<arguments.length;le++)R[le-2]=arguments[le];return w.prototype[N].apply(M,R)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,C){C||(C=0);const M=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)M[N]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(N=0;N<16;++N)M[N]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=I.g[0],C=I.g[1],N=I.g[2];let k=I.g[3],R;R=w+(k^C&(N^k))+M[0]+3614090360&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+M[1]+3905402710&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+M[2]+606105819&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+M[3]+3250441966&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(k^C&(N^k))+M[4]+4118548399&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+M[5]+1200080426&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+M[6]+2821735955&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+M[7]+4249261313&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(k^C&(N^k))+M[8]+1770035416&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+M[9]+2336552879&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+M[10]+4294925233&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+M[11]+2304563134&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(k^C&(N^k))+M[12]+1804603682&4294967295,w=C+(R<<7&4294967295|R>>>25),R=k+(N^w&(C^N))+M[13]+4254626195&4294967295,k=w+(R<<12&4294967295|R>>>20),R=N+(C^k&(w^C))+M[14]+2792965006&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(w^N&(k^w))+M[15]+1236535329&4294967295,C=N+(R<<22&4294967295|R>>>10),R=w+(N^k&(C^N))+M[1]+4129170786&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+M[6]+3225465664&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+M[11]+643717713&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+M[0]+3921069994&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(N^k&(C^N))+M[5]+3593408605&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+M[10]+38016083&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+M[15]+3634488961&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+M[4]+3889429448&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(N^k&(C^N))+M[9]+568446438&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+M[14]+3275163606&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+M[3]+4107603335&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+M[8]+1163531501&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(N^k&(C^N))+M[13]+2850285829&4294967295,w=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(w^C))+M[2]+4243563512&4294967295,k=w+(R<<9&4294967295|R>>>23),R=N+(w^C&(k^w))+M[7]+1735328473&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^w&(N^k))+M[12]+2368359562&4294967295,C=N+(R<<20&4294967295|R>>>12),R=w+(C^N^k)+M[5]+4294588738&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+M[8]+2272392833&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+M[11]+1839030562&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+M[14]+4259657740&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(C^N^k)+M[1]+2763975236&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+M[4]+1272893353&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+M[7]+4139469664&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+M[10]+3200236656&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(C^N^k)+M[13]+681279174&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+M[0]+3936430074&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+M[3]+3572445317&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+M[6]+76029189&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(C^N^k)+M[9]+3654602809&4294967295,w=C+(R<<4&4294967295|R>>>28),R=k+(w^C^N)+M[12]+3873151461&4294967295,k=w+(R<<11&4294967295|R>>>21),R=N+(k^w^C)+M[15]+530742520&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^w)+M[2]+3299628645&4294967295,C=N+(R<<23&4294967295|R>>>9),R=w+(N^(C|~k))+M[0]+4096336452&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+M[7]+1126891415&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+M[14]+2878612391&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+M[5]+4237533241&4294967295,C=N+(R<<21&4294967295|R>>>11),R=w+(N^(C|~k))+M[12]+1700485571&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+M[3]+2399980690&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+M[10]+4293915773&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+M[1]+2240044497&4294967295,C=N+(R<<21&4294967295|R>>>11),R=w+(N^(C|~k))+M[8]+1873313359&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+M[15]+4264355552&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+M[6]+2734768916&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+M[13]+1309151649&4294967295,C=N+(R<<21&4294967295|R>>>11),R=w+(N^(C|~k))+M[4]+4149444226&4294967295,w=C+(R<<6&4294967295|R>>>26),R=k+(C^(w|~N))+M[11]+3174756917&4294967295,k=w+(R<<10&4294967295|R>>>22),R=N+(w^(k|~C))+M[2]+718787259&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~w))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.v=function(I,w){w===void 0&&(w=I.length);const C=w-this.blockSize,M=this.C;let N=this.h,k=0;for(;k<w;){if(N==0)for(;k<=C;)o(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<w;)if(M[N++]=I.charCodeAt(k++),N==this.blockSize){o(this,M),N=0;break}}else for(;k<w;)if(M[N++]=I[k++],N==this.blockSize){o(this,M),N=0;break}}this.h=N,this.o+=w},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)I[w++]=this.g[C]>>>M&255;return I};function u(I,w){var C=m;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=w(I)}function c(I,w){this.h=w;const C=[];let M=!0;for(let N=I.length-1;N>=0;N--){const k=I[N]|0;M&&k==w||(C[N]=k,M=!1)}this.g=C}var m={};function g(I){return-128<=I&&I<128?u(I,function(w){return new c([w|0],w<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return W(p(-I));const w=[];let C=1;for(let M=0;I>=C;M++)w[M]=I/C|0,C*=4294967296;return new c(w,0)}function T(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return W(T(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(w,8));let M=E;for(let k=0;k<I.length;k+=8){var N=Math.min(8,I.length-k);const R=parseInt(I.substring(k,k+N),w);N<8?(N=p(Math.pow(w,N)),M=M.j(N).add(p(R))):(M=M.j(C),M=M.add(p(R)))}return M}var E=g(0),A=g(1),O=g(16777216);s=c.prototype,s.m=function(){if(Z(this))return-W(this).m();let I=0,w=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);I+=(M>=0?M:4294967296+M)*w,w*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(Q(this))return"0";if(Z(this))return"-"+W(this).toString(I);const w=p(Math.pow(I,6));var C=this;let M="";for(;;){const N=_t(C,w).g;C=ht(C,N.j(w));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=N,Q(C))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function Q(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function Z(I){return I.h==-1}s.l=function(I){return I=ht(this,I),Z(I)?-1:Q(I)?0:1};function W(I){const w=I.g.length,C=[];for(let M=0;M<w;M++)C[M]=~I.g[M];return new c(C,~I.h).add(A)}s.abs=function(){return Z(this)?W(this):this},s.add=function(I){const w=Math.max(this.g.length,I.g.length),C=[];let M=0;for(let N=0;N<=w;N++){let k=M+(this.i(N)&65535)+(I.i(N)&65535),R=(k>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);M=R>>>16,k&=65535,R&=65535,C[N]=R<<16|k}return new c(C,C[C.length-1]&-2147483648?-1:0)};function ht(I,w){return I.add(W(w))}s.j=function(I){if(Q(this)||Q(I))return E;if(Z(this))return Z(I)?W(this).j(W(I)):W(W(this).j(I));if(Z(I))return W(this.j(W(I)));if(this.l(O)<0&&I.l(O)<0)return p(this.m()*I.m());const w=this.g.length+I.g.length,C=[];for(var M=0;M<2*w;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<I.g.length;N++){const k=this.i(M)>>>16,R=this.i(M)&65535,le=I.i(N)>>>16,Pe=I.i(N)&65535;C[2*M+2*N]+=R*Pe,nt(C,2*M+2*N),C[2*M+2*N+1]+=k*Pe,nt(C,2*M+2*N+1),C[2*M+2*N+1]+=R*le,nt(C,2*M+2*N+1),C[2*M+2*N+2]+=k*le,nt(C,2*M+2*N+2)}for(I=0;I<w;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=w;I<2*w;I++)C[I]=0;return new c(C,0)};function nt(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function et(I,w){this.g=I,this.h=w}function _t(I,w){if(Q(w))throw Error("division by zero");if(Q(I))return new et(E,E);if(Z(I))return w=_t(W(I),w),new et(W(w.g),W(w.h));if(Z(w))return w=_t(I,W(w)),new et(W(w.g),w.h);if(I.g.length>30){if(Z(I)||Z(w))throw Error("slowDivide_ only works with positive integers.");for(var C=A,M=w;M.l(I)<=0;)C=At(C),M=At(M);var N=Tt(C,1),k=Tt(M,1);for(M=Tt(M,2),C=Tt(C,2);!Q(M);){var R=k.add(M);R.l(I)<=0&&(N=N.add(C),k=R),M=Tt(M,1),C=Tt(C,1)}return w=ht(I,N.j(w)),new et(N,w)}for(N=E;I.l(w)>=0;){for(C=Math.max(1,Math.floor(I.m()/w.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=p(C),R=k.j(w);Z(R)||R.l(I)>0;)C-=M,k=p(C),R=k.j(w);Q(k)&&(k=A),N=N.add(k),I=ht(I,R)}return new et(N,I)}s.B=function(I){return _t(this,I).h},s.and=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)&I.i(M);return new c(C,this.h&I.h)},s.or=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)|I.i(M);return new c(C,this.h|I.h)},s.xor=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)^I.i(M);return new c(C,this.h^I.h)};function At(I){const w=I.g.length+1,C=[];for(let M=0;M<w;M++)C[M]=I.i(M)<<1|I.i(M-1)>>>31;return new c(C,I.h)}function Tt(I,w){const C=w>>5;w%=32;const M=I.g.length-C,N=[];for(let k=0;k<M;k++)N[k]=w>0?I.i(k+C)>>>w|I.i(k+C+1)<<32-w:I.i(k+C);return new c(N,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Yb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=T,us=c}).apply(typeof CT<"u"?CT:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xb,Tu,$b,$h,Fg,Jb,Zb,Wb;(function(){var s,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,y){if(y)t:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var L=h[S];if(!(L in v))break t;v=v[L]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function T(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function E(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,L,F){for(var it=Array(arguments.length-2),It=2;It<arguments.length;It++)it[It-2]=arguments[It];return y.prototype[L].apply(S,it)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function Q(h,y){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=h.length||0;const F=L.length||0;h.length=v+F;for(let it=0;it<F;it++)h[v+it]=L[it]}else h.push(L)}}class Z{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function W(h){c.setTimeout(()=>{throw h},0)}function ht(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class nt{constructor(){this.h=this.g=null}add(y,v){const S=et.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var et=new Z(()=>new _t,h=>h.reset());class _t{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let At,Tt=!1,I=new nt,w=()=>{const h=Promise.resolve(void 0);At=()=>{h.then(C)}};function C(){for(var h;h=ht();){try{h.h.call(h.g)}catch(v){W(v)}var y=et;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Tt=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function le(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(le,N),le.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),K=0;function rt(h,y,v,S,L){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=L,this.key=++K,this.da=this.fa=!1}function yt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Bt(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Kt(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function V(h){const y={};for(const v in h)y[v]=h[v];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(h,y){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)h[v]=S[v];for(let F=0;F<J.length;F++)v=J[F],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function lt(h){this.src=h,this.g={},this.h=0}lt.prototype.add=function(h,y,v,S,L){const F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);const it=xt(h,y,S,L);return it>-1?(y=h[it],v||(y.fa=!1)):(y=new rt(y,this.src,F,!!S,L),y.fa=v,h.push(y)),y};function bt(h,y){const v=y.type;if(v in h.g){var S=h.g[v],L=Array.prototype.indexOf.call(S,y,void 0),F;(F=L>=0)&&Array.prototype.splice.call(S,L,1),F&&(yt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function xt(h,y,v,S){for(let L=0;L<h.length;++L){const F=h[L];if(!F.da&&F.listener==y&&F.capture==!!v&&F.ha==S)return L}return-1}var Lt="closure_lm_"+(Math.random()*1e6|0),ke={};function ue(h,y,v,S,L){if(Array.isArray(y)){for(let F=0;F<y.length;F++)ue(h,y[F],v,S,L);return null}return v=hl(v),h&&h[Pe]?h.J(y,v,m(S)?!!S.capture:!1,L):bs(h,y,v,!1,S,L)}function bs(h,y,v,S,L,F){if(!y)throw Error("Invalid event type");const it=m(L)?!!L.capture:!!L;let It=Ss(h);if(It||(h[Lt]=It=new lt(h)),v=It.add(y,v,S,it,F),v.proxy)return v;if(S=xa(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)k||(L=it),L===void 0&&(L=!1),h.addEventListener(y.toString(),S,L);else if(h.attachEvent)h.attachEvent(ui(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xa(){function h(v){return y.call(h.src,h.listener,v)}const y=ul;return h}function Ca(h,y,v,S,L){if(Array.isArray(y))for(var F=0;F<y.length;F++)Ca(h,y[F],v,S,L);else S=m(S)?!!S.capture:!!S,v=hl(v),h&&h[Pe]?(h=h.i,F=String(y).toString(),F in h.g&&(y=h.g[F],v=xt(y,v,S,L),v>-1&&(yt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[F],h.h--)))):h&&(h=Ss(h))&&(y=h.g[y.toString()],h=-1,y&&(h=xt(y,v,S,L)),(v=h>-1?y[h]:null)&&Da(v))}function Da(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Pe])bt(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(ui(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Ss(y))?(bt(v,h),v.h==0&&(v.src=null,y[Lt]=null)):yt(h)}}}function ui(h){return h in ke?ke[h]:ke[h]="on"+h}function ul(h,y){if(h.da)h=!0;else{y=new le(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Da(h),h=v.call(S,y)}return h}function Ss(h){return h=h[Lt],h instanceof lt?h:null}var cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function hl(h){return typeof h=="function"?h:(h[cl]||(h[cl]=function(y){return h.handleEvent(y)}),h[cl])}function Se(){M.call(this),this.i=new lt(this),this.M=this,this.G=null}E(Se,M),Se.prototype[Pe]=!0,Se.prototype.removeEventListener=function(h,y,v,S){Ca(this,h,y,v,S)};function Ue(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var L=y;y=new N(S,h),st(y,L)}L=!0;let F,it;if(v)for(it=v.length-1;it>=0;it--)F=y.g=v[it],L=_r(F,S,!0,y)&&L;if(F=y.g=h,L=_r(F,S,!0,y)&&L,L=_r(F,S,!1,y)&&L,v)for(it=0;it<v.length;it++)F=y.g=v[it],L=_r(F,S,!1,y)&&L}Se.prototype.N=function(){if(Se.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)yt(v[S]);delete h.g[y],h.h--}}this.G=null},Se.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Se.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function _r(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let L=!0;for(let F=0;F<y.length;++F){const it=y[F];if(it&&!it.da&&it.capture==v){const It=it.listener,_e=it.ha||it.src;it.fa&&bt(h.i,it),L=It.call(_e,S)!==!1&&L}}return L&&!S.defaultPrevented}function md(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function lc(h){h.g=md(()=>{h.g=null,h.i&&(h.i=!1,lc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class on extends M{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:lc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(h){M.call(this),this.h=h,this.g={}}E(As,M);var fl=[];function dl(h){Bt(h.g,function(y,v){this.g.hasOwnProperty(v)&&Da(y)},h),h.g={}}As.prototype.N=function(){As.Z.N.call(this),dl(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=c.JSON.stringify,gd=c.JSON.parse,uc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function cc(){}function hc(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){N.call(this,"d")}E(Ke,N);function On(){N.call(this,"c")}E(On,N);var ye={},fc=null;function Na(){return fc=fc||new Se}ye.Ia="serverreachability";function dc(h){N.call(this,ye.Ia,h)}E(dc,N);function ci(h){const y=Na();Ue(y,new dc(y))}ye.STAT_EVENT="statevent";function ws(h,y){N.call(this,ye.STAT_EVENT,h),this.stat=y}E(ws,N);function Ae(h){const y=Na();Ue(y,new ws(y,h))}ye.Ja="timingevent";function hi(h,y){N.call(this,ye.Ja,h),this.size=y}E(hi,N);function fi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function pd(h,y,v,S,L,F){h.info(function(){if(h.g)if(F){var it="",It=F.split("&");for(let Ft=0;Ft<It.length;Ft++){var _e=It[Ft].split("=");if(_e.length>1){const ce=_e[0];_e=_e[1];const Un=ce.split("_");it=Un.length>=2&&Un[1]=="type"?it+(ce+"="+_e+"&"):it+(ce+"=redacted&")}}}else it=null;else it=F;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+y+`
`+v+`
`+it})}function mc(h,y,v,S,L,F,it){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+y+`
`+v+`
`+F+" "+it})}function di(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+yd(h,v)+(S?" "+S:"")})}function Is(h,y){h.info(function(){return"TIMEOUT: "+y})}Yn.prototype.info=function(){};function yd(h,y){if(!h.g)return y;if(!y)return null;try{const F=JSON.parse(y);if(F){for(h=0;h<F.length;h++)if(Array.isArray(F[h])){var v=F[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let it=1;it<S.length;it++)S[it]=""}}}}return vr(F)}catch{return y}}var Rs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gl;function xs(){}E(xs,cc),xs.prototype.g=function(){return new XMLHttpRequest},gl=new xs;function qi(h){return encodeURIComponent(String(h))}function gc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Xn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new As(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var we={},je={};function mi(h,y,v){h.M=1,h.A=Cs(Re(y)),h.u=v,h.R=!0,Va(h,null)}function Va(h,y){h.F=Date.now(),gi(h),h.B=Re(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),ka(v.i,"t",S),h.C=0,v=h.j.L,h.h=new $n,h.g=Dc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new on(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var L="readystatechange";Array.isArray(L)||(L&&(fl[0]=L.toString()),L=fl);for(let F=0;F<L.length;F++){const it=ue(v,L[F],S||y.handleEvent,!1,y.h||y);if(!it)break;y.g[it.key]=it}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ci(),pd(h.i,h.v,h.B,h.l,h.S,h.u)}Xn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Wn(h)==3?y.j():this.Y(h)},Xn.prototype.Y=function(h){try{if(h==this.g)t:{const It=Wn(this.g),_e=this.g.ya(),Ft=this.g.ca();if(!(It<3)&&(It!=3||this.g&&(this.h.h||this.g.la()||Qe(this.g)))){this.K||It!=4||_e==7||(_e==8||Ft<=0?ci(3):ci(2)),pi(this);var y=this.g.ca();this.X=y;var v=_d(this);if(this.o=y==200,mc(this.i,this.v,this.B,this.l,this.S,It,y),this.o){if(this.U&&!this.L){e:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var F=S;break e}}F=null}if(h=F)di(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,h);else{this.o=!1,this.m=3,Ae(12),Tn(this),Mn(this);break t}}if(this.R){h=!0;let ce;for(;!this.K&&this.C<v.length;)if(ce=yc(this,v),ce==je){It==4&&(this.m=4,Ae(14),h=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==we){this.m=4,Ae(15),di(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else di(this.i,this.l,ce,null),yi(this,ce);if(pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||v.length!=0||this.h.h||(this.m=1,Ae(16),h=!1),this.o=this.o&&h,!h)di(this.i,this.l,v,"[Invalid Chunked Response]"),Tn(this),Mn(this);else if(v.length>0&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.aa&&!it.P&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Dl(it),it.P=!0,Ae(11))}}else di(this.i,this.l,v,null),yi(this,v);It==4&&Tn(this),this.o&&!this.K&&(It==4?Ic(this.j,this):(this.o=!1,gi(this)))}else Hi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),Tn(this),Mn(this)}}}catch{}finally{}};function _d(h){if(!pc(h))return h.g.la();const y=Qe(h.g);if(y==="")return"";let v="";const S=y.length,L=Wn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Tn(h),Mn(h),"";h.h.i=new c.TextDecoder}for(let F=0;F<S;F++)h.h.h=!0,v+=h.h.i.decode(y[F],{stream:!(L&&F==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function pc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function yc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?je:(v=Number(y.substring(v,S)),isNaN(v)?we:(S+=1,S+v>y.length?je:(y=y.slice(S,S+v),h.C=S+v,y)))}Xn.prototype.cancel=function(){this.K=!0,Tn(this)};function gi(h){h.T=Date.now()+h.H,Oa(h,h.H)}function Oa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=fi(p(h.aa,h),y)}function pi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Xn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Is(this.i,this.B),this.M!=2&&(ci(),Ae(17)),Tn(this),this.m=2,Mn(this)):Oa(this,this.T-h)};function Mn(h){h.j.I==0||h.K||Ic(h.j,h)}function Tn(h){pi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,dl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function yi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||vi(v.h,h))){if(!h.L&&vi(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)ja(v),Rr(v);else break t;ks(v),Ae(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=fi(p(v.Va,v),6e3));_i(v.h)<=1&&v.ta&&(v.ta=void 0)}else wi(v,11)}else if((h.L||v.g==h)&&ja(v),!R(y))for(L=v.Ba.g.parse(y),y=0;y<L.length;y++){let Ft=L[y];const ce=Ft[0];if(!(ce<=v.K))if(v.K=ce,Ft=Ft[1],v.I==2)if(Ft[0]=="c"){v.M=Ft[1],v.ba=Ft[2];const Un=Ft[3];Un!=null&&(v.ka=Un,v.j.info("VER="+v.ka));const Ii=Ft[4];Ii!=null&&(v.za=Ii,v.j.info("SVER="+v.za));const ti=Ft[5];ti!=null&&typeof ti=="number"&&ti>0&&(S=1.5*ti,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ei=h.g;if(ei){const Us=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Us){var F=S.h;F.g||Us.indexOf("spdy")==-1&&Us.indexOf("quic")==-1&&Us.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(_l(F,F.h),F.h=null))}if(S.G){const qa=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(S.wa=qa,Qt(S.J,S.G,qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var it=h;if(S.na=Cc(S,S.L?S.ba:null,S.W),it.L){vl(S.h,it);var It=it,_e=S.O;_e&&(It.H=_e),It.D&&(pi(It),gi(It)),S.g=it}else Ac(S);v.i.length>0&&Ai(v)}else Ft[0]!="stop"&&Ft[0]!="close"||wi(v,7);else v.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?wi(v,7):xl(v):Ft[0]!="noop"&&v.l&&v.l.qa(Ft),v.A=0)}}ci(4)}catch{}}var Ie=class{constructor(h,y){this.g=h,this.map=y}};function pl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function _i(h){return h.h?1:h.g?h.g.size:0}function vi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function _l(h,y){h.g?h.g.add(y):h.h=y}function vl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}pl.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return O(h.i)}var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ma(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let L,F=null;S>=0?(L=h[v].substring(0,S),F=h[v].substring(S+1)):L=h[v],y(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function En(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof En?(this.l=h.l,qe(this,h.j),this.o=h.o,this.g=h.g,Tr(this,h.u),this.h=h.h,El(this,bc(h.i)),this.m=h.m):h&&(y=String(h).match(_c))?(this.l=!1,qe(this,y[1]||"",!0),this.o=Ti(y[2]||""),this.g=Ti(y[3]||"",!0),Tr(this,y[4]),this.h=Ti(y[5]||"",!0),El(this,y[6]||"",!0),this.m=Ti(y[7]||"")):(this.l=!1,this.i=new br(null,this.l))}En.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ds(y,Pa,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ds(y,Pa,!0),"@"),h.push(qi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ds(v,v.charAt(0)=="/"?bl:vc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ds(v,Tc)),h.join("")},En.prototype.resolve=function(h){const y=Re(this);let v=!!h.j;v?qe(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Tr(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=y.h.lastIndexOf("/");L!=-1&&(S=y.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let it=0;it<L.length;){const It=L[it++];It=="."?S&&it==L.length&&F.push(""):It==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),S&&it==L.length&&F.push("")):(F.push(It),S=!0)}S=F.join("/")}else S=L}return v?y.h=S:v=h.i.toString()!=="",v?El(y,bc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Re(h){return new En(h)}function qe(h,y,v){h.j=v?Ti(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Tr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function El(h,y,v){y instanceof br?(h.i=y,Ua(h.i,h.l)):(v||(y=Ds(y,Er)),h.i=new br(y,h.l))}function Qt(h,y,v){h.i.set(y,v)}function Cs(h){return Qt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ti(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ds(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,hn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Pa=/[#\/\?@]/g,vc=/[#\?:]/g,bl=/[#\?]/g,Er=/[#\?@]/g,Tc=/#/g;function br(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function fn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ma(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=br.prototype,s.add=function(h,y){fn(this),this.i=null,h=Sr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ec(h,y){fn(h),y=Sr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sl(h,y){return fn(h),y=Sr(h,y),h.g.has(y)}s.forEach=function(h,y){fn(this),this.g.forEach(function(v,S){v.forEach(function(L){h.call(y,L,S,this)},this)},this)};function Al(h,y){fn(h);let v=[];if(typeof y=="string")Sl(h,y)&&(v=v.concat(h.g.get(Sr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return fn(this),this.i=null,h=Sr(this,h),Sl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Al(this,h),h.length>0?String(h[0]):y):y};function ka(h,y,v){Ec(h,y),v.length>0&&(h.i=null,h.g.set(Sr(h,y),O(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const L=qi(v);v=Al(this,v);for(let F=0;F<v.length;F++){let it=L;v[F]!==""&&(it+="="+qi(v[F])),h.push(it)}}return this.i=h.join("&")};function bc(h){const y=new br;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Sr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ua(h,y){y&&!h.j&&(fn(h),h.i=null,h.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(Ec(this,S),ka(this,L,v))},h)),h.j=y}function Jn(h,y){const v=new Yn;if(c.Image){const S=new Image;S.onload=T(Pn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=T(Pn,v,"TestLoadImage: error",!1,y,S),S.onabort=T(Pn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=T(Pn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function wl(h,y){const v=new Yn,S=new AbortController,L=setTimeout(()=>{S.abort(),Pn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(F=>{clearTimeout(L),F.ok?Pn(v,"TestPingServer: ok",!0,y):Pn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),Pn(v,"TestPingServer: error",!1,y)})}function Pn(h,y,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function Ar(){this.g=new uc}function Ei(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ei,cc),Ei.prototype.g=function(){return new Ns(this.i,this.h)};function Ns(h,y){Se.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ns,Se),s=Ns.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Zn(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;La(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function La(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?wr(this):Zn(this),this.readyState==3&&La(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,wr(this))},s.Na=function(h){this.g&&(this.response=h,wr(this))},s.ga=function(){this.g&&wr(this)};function wr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Zn(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Zn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function kn(h){let y="";return Bt(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Vs(h,y,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=kn(v),typeof h=="string"?v!=null&&qi(v):Qt(h,y,v))}function Wt(h){Se.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Wt,Se);var bi=/^https?$/i,Il=["POST","PUT"];s=Wt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gl.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(F){Os(this,F);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())v.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),L=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Il,y,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,it]of v)this.g.setRequestHeader(F,it);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(F){Os(this,F)}};function Os(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Rl(h),Fi(h)}function Rl(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ue(this,"complete"),Ue(this,"abort"),Fi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),Wt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ms(this):this.Xa())},s.Xa=function(){Ms(this)};function Ms(h){if(h.h&&typeof u<"u"){if(h.v&&Wn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ue(h,"readystatechange"),Wn(h)==4){h.h=!1;try{const F=h.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var S;if(S=F===0){let it=String(h.D).match(_c)[1]||null;!it&&c.self&&c.self.location&&(it=c.self.location.protocol.slice(0,-1)),S=!bi.test(it?it.toLowerCase():"")}v=S}if(v)Ue(h,"complete"),Ue(h,"success");else{h.o=6;try{var L=Wn(h)>2?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.ca()+"]",Rl(h)}}finally{Fi(h)}}}}function Fi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ue(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Wn(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),gd(y)}};function Qe(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(h){const y={};h=(h.g&&Wn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(R(h[S]))continue;var v=gc(h[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=y[L]||[];y[L]=F,F.push(v)}Kt(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Ir(h){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,h),this.Za=Si("retryDelaySeedMs",1e4,h),this.Ta=Si("forwardChannelMaxRetries",2,h),this.va=Si("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new pl(h&&h.concurrentRequestLimit),this.Ba=new Ar,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ir.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){Ae(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Cc(this,null,this.W),Ai(this)};function xl(h){if(za(h),h.I==3){var y=h.V++,v=Re(h.J);if(Qt(v,"SID",h.M),Qt(v,"RID",y),Qt(v,"TYPE","terminate"),Ps(h,v),y=new Xn(h,h.j,y),y.M=2,y.A=Cs(Re(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Dc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),gi(y)}xc(h)}function Rr(h){h.g&&(Dl(h),h.g.cancel(),h.g=null)}function za(h){Rr(h),h.v&&(c.clearTimeout(h.v),h.v=null),ja(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ai(h){if(!yl(h.h)&&!h.m){h.m=!0;var y=h.Ea;At||w(),Tt||(At(),Tt=!0),I.add(y,h),h.D=0}}function Ba(h,y){return _i(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=fi(p(h.Ea,h,y),Rc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const L=new Xn(this,this.j,h);let F=this.o;if(this.U&&(F?(F=V(F),st(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Sc(this,L,y),v=Re(this.J),Qt(v,"RID",h),Qt(v,"CVER",22),this.G&&Qt(v,"X-HTTP-Session-Id",this.G),Ps(this,v),F&&(this.R?y="headers="+qi(kn(F))+"&"+y:this.u&&Vs(v,this.u,F)),_l(this.h,L),this.Ra&&Qt(v,"TYPE","init"),this.S?(Qt(v,"$req",y),Qt(v,"SID","null"),L.U=!0,mi(L,v,null)):mi(L,v,y),this.I=2}}else this.I==3&&(h?Cl(this,h):this.i.length==0||yl(this.h)||Cl(this))};function Cl(h,y){var v;y?v=y.l:v=h.V++;const S=Re(h.J);Qt(S,"SID",h.M),Qt(S,"RID",v),Qt(S,"AID",h.K),Ps(h,S),h.u&&h.o&&Vs(S,h.u,h.o),v=new Xn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Sc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),_l(h.h,v),mi(v,S,y)}function Ps(h,y){h.H&&Bt(h.H,function(v,S){Qt(y,S,v)}),h.l&&Bt({},function(v,S){Qt(y,S,v)})}function Sc(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;t:{var L=h.i;let It=-1;for(;;){const _e=["count="+v];It==-1?v>0?(It=L[0].g,_e.push("ofs="+It)):It=0:_e.push("ofs="+It);let Ft=!0;for(let ce=0;ce<v;ce++){var F=L[ce].g;const Un=L[ce].map;if(F-=It,F<0)It=Math.max(0,L[ce].g-100),Ft=!1;else try{F="req"+F+"_"||"";try{var it=Un instanceof Map?Un:Object.entries(Un);for(const[Ii,ti]of it){let ei=ti;m(ti)&&(ei=vr(ti)),_e.push(F+Ii+"="+encodeURIComponent(ei))}}catch(Ii){throw _e.push(F+"type="+encodeURIComponent("_badmap")),Ii}}catch{S&&S(Un)}}if(Ft){it=_e.join("&");break t}}it=void 0}return h=h.i.splice(0,v),y.G=h,it}function Ac(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;At||w(),Tt||(At(),Tt=!0),I.add(y,h),h.A=0}}function ks(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=fi(p(h.Da,h),Rc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=fi(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),Rr(this),wc(this))};function Dl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function wc(h){h.g=new Xn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Re(h.na);Qt(y,"RID","rpc"),Qt(y,"SID",h.M),Qt(y,"AID",h.K),Qt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qt(y,"TO",h.ia),Qt(y,"TYPE","xmlhttp"),Ps(h,y),h.u&&h.o&&Vs(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Cs(Re(y)),v.u=null,v.R=!0,Va(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Rr(this),ks(this),Ae(19))};function ja(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Ic(h,y){var v=null;if(h.g==y){ja(h),Dl(h),h.g=null;var S=2}else if(vi(h.h,y))v=y.G,vl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var L=h.D;S=Na(),Ue(S,new hi(S,v)),Ai(h)}else Ac(h);else if(L=y.m,L==3||L==0&&y.X>0||!(S==1&&Ba(h,y)||S==2&&ks(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),L){case 1:wi(h,5);break;case 4:wi(h,10);break;case 3:wi(h,6);break;default:wi(h,2)}}}function Rc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function wi(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const L=!S;S=new En(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qe(S,"https"),Cs(S),L?Jn(S.toString(),v):wl(S.toString(),v)}else Ae(2);h.I=0,h.l&&h.l.pa(y),xc(h),za(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function xc(h){if(h.I=0,h.ja=[],h.l){const y=Tl(h.h);(y.length!=0||h.i.length!=0)&&(Q(h.ja,y),Q(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function Cc(h,y,v){var S=v instanceof En?Re(v):new En(v);if(S.g!="")y&&(S.g=y+"."+S.g),Tr(S,S.u);else{var L=c.location;S=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;const F=new En(null);S&&qe(F,S),y&&(F.g=y),L&&Tr(F,L),v&&(F.h=v),S=F}return v=h.G,y=h.wa,v&&y&&Qt(S,v,y),Qt(S,"VER",h.ka),Ps(h,S),S}function Dc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Wt(new Ei({ab:v})):new Wt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nc(){}s=Nc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function xr(){}xr.prototype.g=function(h,y){return new ln(h,y)};function ln(h,y){Se.call(this),this.g=new Ir(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Gi(this)}E(ln,Se),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){xl(this.g)},ln.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=vr(h),h=v);y.i.push(new Ie(y.Ya++,h)),y.I==3&&Ai(y)},ln.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,ln.Z.N.call(this)};function Vc(h){Ke.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Vc,Ke);function Oc(){On.call(this),this.status=1}E(Oc,On);function Gi(h){this.g=h}E(Gi,Nc),Gi.prototype.ra=function(){Ue(this.g,"a")},Gi.prototype.qa=function(h){Ue(this.g,new Vc(h))},Gi.prototype.pa=function(h){Ue(this.g,new Oc)},Gi.prototype.oa=function(){Ue(this.g,"b")},xr.prototype.createWebChannel=xr.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Wb=function(){return new xr},Zb=function(){return Na()},Jb=ye,Fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,$h=Rs,ml.COMPLETE="complete",$b=ml,hc.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",Se.prototype.listen=Se.prototype.J,Tu=hc,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Xb=Wt}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});const DT="@firebase/firestore",NT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Tp("@firebase/firestore");function wo(){return _a.logLevel}function tt(s,...t){if(_a.logLevel<=Pt.DEBUG){const e=t.map(Vp);_a.debug(`Firestore (${rl}): ${s}`,...e)}}function Ee(s,...t){if(_a.logLevel<=Pt.ERROR){const e=t.map(Vp);_a.error(`Firestore (${rl}): ${s}`,...e)}}function Uo(s,...t){if(_a.logLevel<=Pt.WARN){const e=t.map(Vp);_a.warn(`Firestore (${rl}): ${s}`,...e)}}function Vp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(s,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,tS(s,r,e)}function tS(s,t,e){let r=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Ee(r),new Error(r)}function mt(s,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,s||tS(t,o,r)}function ft(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends gr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Gx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ge.UNAUTHENTICATED)))}shutdown(){}}class Kx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Qx{constructor(t){this.t=t,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){mt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new cs,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new cs)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new eS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new Ge(t)}}class Yx{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xx{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new Yx(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Ge.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class VT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $x{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){mt(this.o===void 0,3512);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new VT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(mt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new VT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Jx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function St(s,t){return s<t?-1:s>t?1:0}function Hg(s,t){const e=Math.min(s.length,t.length);for(let r=0;r<e;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return wg(o)===wg(u)?St(o,u):wg(o)?1:-1}return St(s.length,t.length)}const Zx=55296,Wx=57343;function wg(s){const t=s.charCodeAt(0);return t>=Zx&&t<=Wx}function Lo(s,t,e){return s.length===t.length&&s.every(((r,o)=>e(r,t[o])))}function nS(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="__name__";class Ni{constructor(t,e,r){e===void 0?e=0:e>t.length&&ut(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&ut(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Ni.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ni?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=Ni.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return St(t.length,e.length)}static compareSegments(t,e){const r=Ni.isNumericId(t),o=Ni.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?Ni.extractNumericId(t).compare(Ni.extractNumericId(e)):Hg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return us.fromString(t.substring(4,t.length-2))}}class Gt extends Ni{construct(t,e,r){return new Gt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new ot($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Gt(e)}static emptyPath(){return new Gt([])}}const tC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class de extends Ni{construct(t,e,r){return new de(t,e,r)}static isValidIdentifier(t){return tC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),de.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===OT}static keyField(){return new de([OT])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ot($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new ot($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ot($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new ot($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new de(e)}static emptyPath(){return new de([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.path=t}static fromPath(t){return new at(Gt.fromString(t))}static fromName(t){return new at(Gt.fromString(t).popFirst(5))}static empty(){return new at(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Gt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new at(new Gt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(s,t,e){if(!e)throw new ot($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function eC(s,t,e,r){if(t===!0&&r===!0)throw new ot($.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function MT(s){if(!at.isDocumentKey(s))throw new ot($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function PT(s){if(at.isDocumentKey(s))throw new ot($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function rS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Mp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ut(12329,{type:typeof s})}function ki(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ot($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Mp(s);throw new ot($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(s,t){const e={typeString:s};return t&&(e.value=t),e}function ec(s,t){if(!rS(s))throw new ot($.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){e=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new ot($.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=-62135596800,UT=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*UT);return new Jt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ot($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ot($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<kT)throw new ot($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UT}_compareTo(t){return this.seconds===t.seconds?St(this.nanoseconds,t.nanoseconds):St(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ec(t,Jt._jsonSchema))return new Jt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-kT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Oe("string",Jt._jsonSchemaVersion),seconds:Oe("number"),nanoseconds:Oe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static fromTimestamp(t){return new pt(t)}static min(){return new pt(new Jt(0,0))}static max(){return new pt(new Jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=-1;class yf{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Gg(s){return s.fields.find((t=>t.kind===2))}function ea(s){return s.fields.filter((t=>t.kind!==2))}yf.UNKNOWN_ID=-1;class Jh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Lu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Lu(0,Vn.min())}}function sS(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=pt.fromTimestamp(r===1e9?new Jt(e+1,0):new Jt(e,r));return new Vn(o,at.empty(),t)}function aS(s){return new Vn(s.readTime,s.key,zo)}class Vn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Vn(pt.min(),at.empty(),zo)}static max(){return new Vn(pt.max(),at.empty(),zo)}}function Pp(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=at.comparator(s.documentKey,t.documentKey),e!==0?e:St(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==oS)throw s;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new U(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof U?e:U.resolve(e)}catch(e){return U.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):U.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):U.reject(e)}static resolve(t){return new U(((e,r)=>{e(t)}))}static reject(t){return new U(((e,r)=>{r(t)}))}static waitFor(t){return new U(((e,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(g=>r(g)))})),c=!0,u===o&&e()}))}static or(t){let e=U.resolve(!1);for(const r of t)e=e.next((o=>o?U.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new U(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;e(t[p]).next((T=>{c[p]=T,++m,m===u&&r(c)}),(T=>o(T)))}}))}static doWhile(t,e){return new U(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="SimpleDb";class Bf{static open(t,e,r,o){try{return new Bf(e,t.transaction(o,r))}catch(u){throw new Ru(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new cs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Ru(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=kp(r.target.error);this.S.reject(new Ru(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(tt(Cn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new iC(e)}}class hs{static delete(t){return tt(Cn,"Removing database:",t),ia(ib().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!hb())return!1;if(hs.F())return!0;const t=ze(),e=hs.M(t),r=0<e&&e<10,o=uS(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,hs.M(ze())===12.2&&Ee("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(tt(Cn,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;e(c)},o.onblocked=()=>{r(new Ru(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new ot($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ot($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Ru(t,c))},o.onupgradeneeded=u=>{tt(Cn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{tt(Cn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=Bf.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),U.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(tt(Cn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function uS(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class nC{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return ia(this.U.delete())}}class Ru extends ot{constructor(t,e){super($.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function vs(s){return s.name==="IndexedDbTransactionError"}class iC{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(Cn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(Cn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ia(r)}add(t){return tt(Cn,"ADD",this.store.name,t,t),ia(this.store.add(t))}get(t){return ia(this.store.get(t)).next((e=>(e===void 0&&(e=null),tt(Cn,"GET",this.store.name,t,e),e)))}delete(t){return tt(Cn,"DELETE",this.store.name,t),ia(this.store.delete(t))}count(){return tt(Cn,"COUNT",this.store.name),ia(this.store.count())}J(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new U(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new U(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(t,e){tt(Cn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.H(o,e)}te(t){const e=this.cursor({});return new U(((r,o)=>{e.onerror=u=>{const c=kp(u.target.error);o(c)},e.onsuccess=u=>{const c=u.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(t,e){const r=[];return new U(((o,u)=>{t.onerror=c=>{u(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new nC(m),p=e(m.primaryKey,m.value,g);if(p instanceof U){const T=p.catch((E=>(g.done(),U.reject(E))));r.push(T)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>U.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ia(s){return new U(((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=kp(r.target.error);e(o)}}))}let LT=!1;function kp(s){const t=hs.M(ze());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LT||(LT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const xu="IndexBackfiller";class rC{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){tt(xu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();tt(xu,`Documents written: ${e}`)}catch(e){vs(e)?tt(xu,"Ignoring IndexedDB error during index backfill: ",e):await _s(e)}await this.re(6e4)}))}}class sC{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let o=e,u=!0;return U.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!r.has(c))return tt(xu,`Processing collection: ${c}`),this.oe(t,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>e-o))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(o,u))).next((m=>(tt(xu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((o,u)=>{const c=aS(u);Pp(c,r)>0&&(r=c)})),new Vn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}_n.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=-1;function jf(s){return s==null}function zu(s){return s===0&&1/s==-1/0}function cS(s){return typeof s=="number"&&Number.isInteger(s)&&!zu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="";function an(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=zT(t)),t=aC(s.get(e),t);return zT(t)}function aC(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case _f:e+="";break;default:e+=u}}return e}function zT(s){return s+_f+""}function Oi(s){const t=s.length;if(mt(t>=2,64408,{path:s}),t===2)return mt(s.charAt(0)===_f&&s.charAt(1)==="",56145,{path:s}),Gt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const c=s.indexOf(_f,u);switch((c<0||c>e)&&ut(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:ut(61167,{path:s})}u=c+2}return new Gt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="remoteDocuments",nc="owner",vo="owner",Bu="mutationQueues",oC="userId",si="mutations",BT="batchId",la="userMutationsIndex",jT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(s,t){return[s,an(t)]}function hS(s,t,e){return[s,an(t),e]}const lC={},Bo="documentMutations",vf="remoteDocumentsV14",uC=["prefixPath","collectionGroup","readTime","documentId"],Wh="documentKeyIndex",cC=["prefixPath","collectionGroup","documentId"],fS="collectionGroupIndex",hC=["collectionGroup","readTime","prefixPath","documentId"],ju="remoteDocumentGlobal",Kg="remoteDocumentGlobalKey",jo="targets",dS="queryTargetsIndex",fC=["canonicalId","targetId"],qo="targetDocuments",dC=["targetId","path"],Up="documentTargetsIndex",mC=["path","targetId"],Tf="targetGlobalKey",fa="targetGlobal",qu="collectionParents",gC=["collectionId","parent"],Fo="clientMetadata",pC="clientId",qf="bundles",yC="bundleId",Ff="namedQueries",_C="name",Lp="indexConfiguration",vC="indexId",Qg="collectionGroupIndex",TC="collectionGroup",Cu="indexState",EC=["indexId","uid"],mS="sequenceNumberIndex",bC=["uid","sequenceNumber"],Du="indexEntries",SC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gS="documentKeyIndex",AC=["indexId","uid","orderedDocumentKey"],Hf="documentOverlays",wC=["userId","collectionPath","documentId"],Yg="collectionPathOverlayIndex",IC=["userId","collectionPath","largestBatchId"],pS="collectionGroupOverlayIndex",RC=["userId","collectionGroup","largestBatchId"],zp="globals",xC="name",yS=[Bu,si,Bo,na,jo,nc,fa,qo,Fo,ju,qu,qf,Ff],CC=[...yS,Hf],_S=[Bu,si,Bo,vf,jo,nc,fa,qo,Fo,ju,qu,qf,Ff,Hf],vS=_S,Bp=[...vS,Lp,Cu,Du],DC=Bp,TS=[...Bp,zp],NC=TS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends lS{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Be(s,t){const e=ft(s);return hs.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function Ts(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function ES(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,e){this.comparator=t,this.root=e||Ze.EMPTY}insert(t,e){return new se(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zh(this.root,t,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zh(this.root,t,this.comparator,!0)}}class zh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ze{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Ze.RED,this.left=o??Ze.EMPTY,this.right=u??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Ze(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Ze.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ut(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ut(27949);return t+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw ut(57766)}get value(){throw ut(16141)}get color(){throw ut(16727)}get left(){throw ut(29726)}get right(){throw ut(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Ze(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new FT(this.data.getIterator())}getIteratorFrom(t){return new FT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Zt(this.comparator);return e.data=t,e}}class FT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function To(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.fields=t,t.sort(de.comparator)}static empty(){return new vn([])}unionWith(t){let e=new Zt(de.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new vn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Lo(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new bS("Invalid base64 string: "+u):u}})(t);return new be(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new be(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return St(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}be.EMPTY_BYTE_STRING=new be("");const VC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(s){if(mt(!!s,39018),typeof s=="string"){let t=0;const e=VC.exec(s);if(mt(!!e,46558,{timestamp:s}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fe(s.seconds),nanos:fe(s.nanos)}}function fe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function mr(s){return typeof s=="string"?be.fromBase64String(s):be.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="server_timestamp",AS="__type__",wS="__previous_value__",IS="__local_write_time__";function jp(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[AS])==null?void 0:r.stringValue)===SS}function Gf(s){const t=s.mapValue.fields[wS];return jp(t)?Gf(t):t}function Fu(s){const t=dr(s.mapValue.fields[IS].timestampValue);return new Jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t,e,r,o,u,c,m,g,p,T){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=T}}const Hu="(default)";class va{constructor(t,e){this.projectId=t,this.database=e||Hu}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===Hu}isEqual(t){return t instanceof va&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="__type__",RS="__max__",ss={mapValue:{fields:{__type__:{stringValue:RS}}}},Fp="__vector__",Ho="value",tf={nullValue:"NULL_VALUE"};function ms(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?jp(s)?4:xS(s)?9007199254740991:Kf(s)?10:11:ut(28295,{value:s})}function Bi(s,t){if(s===t)return!0;const e=ms(s);if(e!==ms(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Fu(s).isEqual(Fu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=dr(o.timestampValue),m=dr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return mr(o.bytesValue).isEqual(mr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return fe(o.geoPointValue.latitude)===fe(u.geoPointValue.latitude)&&fe(o.geoPointValue.longitude)===fe(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return fe(o.integerValue)===fe(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=fe(o.doubleValue),m=fe(u.doubleValue);return c===m?zu(c)===zu(m):isNaN(c)&&isNaN(m)}return!1})(s,t);case 9:return Lo(s.arrayValue.values||[],t.arrayValue.values||[],Bi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(qT(c)!==qT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Bi(c[g],m[g])))return!1;return!0})(s,t);default:return ut(52216,{left:s})}}function Gu(s,t){return(s.values||[]).find((e=>Bi(e,t)))!==void 0}function gs(s,t){if(s===t)return 0;const e=ms(s),r=ms(t);if(e!==r)return St(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return St(s.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=fe(u.integerValue||u.doubleValue),g=fe(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return HT(s.timestampValue,t.timestampValue);case 4:return HT(Fu(s),Fu(t));case 5:return Hg(s.stringValue,t.stringValue);case 6:return(function(u,c){const m=mr(u),g=mr(c);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const T=St(m[p],g[p]);if(T!==0)return T}return St(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=St(fe(u.latitude),fe(c.latitude));return m!==0?m:St(fe(u.longitude),fe(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return GT(s.arrayValue,t.arrayValue);case 10:return(function(u,c){var A,O,Q,Z;const m=u.fields||{},g=c.fields||{},p=(A=m[Ho])==null?void 0:A.arrayValue,T=(O=g[Ho])==null?void 0:O.arrayValue,E=St(((Q=p==null?void 0:p.values)==null?void 0:Q.length)||0,((Z=T==null?void 0:T.values)==null?void 0:Z.length)||0);return E!==0?E:GT(p,T)})(s.mapValue,t.mapValue);case 11:return(function(u,c){if(u===ss.mapValue&&c===ss.mapValue)return 0;if(u===ss.mapValue)return 1;if(c===ss.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},T=Object.keys(p);g.sort(),T.sort();for(let E=0;E<g.length&&E<T.length;++E){const A=Hg(g[E],T[E]);if(A!==0)return A;const O=gs(m[g[E]],p[T[E]]);if(O!==0)return O}return St(g.length,T.length)})(s.mapValue,t.mapValue);default:throw ut(23264,{he:e})}}function HT(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return St(s,t);const e=dr(s),r=dr(t),o=St(e.seconds,r.seconds);return o!==0?o:St(e.nanos,r.nanos)}function GT(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=gs(e[o],r[o]);if(u)return u}return St(e.length,r.length)}function Go(s){return $g(s)}function $g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const r=dr(e);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return mr(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return at.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=$g(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${$g(e.fields[c])}`;return o+"}"})(s.mapValue):ut(61005,{value:s})}function ef(s){switch(ms(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gf(s);return t?16+ef(t):16;case 5:return 2*s.stringValue.length;case 6:return mr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+ef(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Ts(r.fields,((u,c)=>{o+=u.length+ef(c)})),o})(s.mapValue);default:throw ut(13486,{value:s})}}function Hp(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Jg(s){return!!s&&"integerValue"in s}function Ku(s){return!!s&&"arrayValue"in s}function KT(s){return!!s&&"nullValue"in s}function QT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function nf(s){return!!s&&"mapValue"in s}function Kf(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[qp])==null?void 0:r.stringValue)===Fp}function Nu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Ts(s.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Nu(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Nu(s.arrayValue.values[e]);return t}return{...s}}function xS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===RS}const CS={mapValue:{fields:{[qp]:{stringValue:Fp},[Ho]:{arrayValue:{}}}}};function MC(s){return"nullValue"in s?tf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Hp(va.empty(),at.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Kf(s)?CS:{mapValue:{}}:ut(35942,{value:s})}function PC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Hp(va.empty(),at.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?CS:"mapValue"in s?Kf(s)?{mapValue:{}}:ss:ut(61959,{value:s})}function YT(s,t){const e=gs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function XT(s,t){const e=gs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.value=t}static empty(){return new rn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!nf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nu(e)}setAll(t){let e=de.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}c?r[m.lastSegment()]=Nu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());nf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Bi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];nf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){Ts(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new rn(Nu(this.value))}}function DS(s){const t=[];return Ts(s.fields,((e,r)=>{const o=new de([e]);if(nf(r)){const u=DS(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new vn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,e,r,o,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new pe(t,0,pt.min(),pt.min(),pt.min(),rn.empty(),0)}static newFoundDocument(t,e,r,o){return new pe(t,1,e,pt.min(),r,o,0)}static newNoDocument(t,e){return new pe(t,2,e,pt.min(),pt.min(),rn.empty(),0)}static newUnknownDocument(t,e){return new pe(t,3,e,pt.min(),pt.min(),rn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,e){this.position=t,this.inclusive=e}}function $T(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],c=s.position[o];if(u.field.isKeyField()?r=at.comparator(at.fromName(c.referenceValue),e.key):r=gs(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function JT(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Bi(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e="asc"){this.field=t,this.dir=e}}function kC(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{}class Ut extends NS{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new UC(t,e,r):e==="array-contains"?new BC(t,r):e==="in"?new US(t,r):e==="not-in"?new jC(t,r):e==="array-contains-any"?new qC(t,r):new Ut(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new LC(t,r):new zC(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(gs(e,this.value)):e!==null&&ms(this.value)===ms(e)&&this.matchesComparison(gs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ie extends NS{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ie(t,e)}matches(t){return Qo(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qo(s){return s.op==="and"}function Zg(s){return s.op==="or"}function Gp(s){return VS(s)&&Qo(s)}function VS(s){for(const t of s.filters)if(t instanceof ie)return!1;return!0}function Wg(s){if(s instanceof Ut)return s.field.canonicalString()+s.op.toString()+Go(s.value);if(Gp(s))return s.filters.map((t=>Wg(t))).join(",");{const t=s.filters.map((e=>Wg(e))).join(",");return`${s.op}(${t})`}}function OS(s,t){return s instanceof Ut?(function(r,o){return o instanceof Ut&&r.op===o.op&&r.field.isEqual(o.field)&&Bi(r.value,o.value)})(s,t):s instanceof ie?(function(r,o){return o instanceof ie&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&OS(c,o.filters[m])),!0):!1})(s,t):void ut(19439)}function MS(s,t){const e=s.filters.concat(t);return ie.create(e,s.op)}function PS(s){return s instanceof Ut?(function(e){return`${e.field.canonicalString()} ${e.op} ${Go(e.value)}`})(s):s instanceof ie?(function(e){return e.op.toString()+" {"+e.getFilters().map(PS).join(" ,")+"}"})(s):"Filter"}class UC extends Ut{constructor(t,e,r){super(t,e,r),this.key=at.fromName(r.referenceValue)}matches(t){const e=at.comparator(t.key,this.key);return this.matchesComparison(e)}}class LC extends Ut{constructor(t,e){super(t,"in",e),this.keys=kS("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class zC extends Ut{constructor(t,e){super(t,"not-in",e),this.keys=kS("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function kS(s,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((r=>at.fromName(r.referenceValue)))}class BC extends Ut{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ku(e)&&Gu(e.arrayValue,this.value)}}class US extends Ut{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Gu(this.value.arrayValue,e)}}class jC extends Ut{constructor(t,e){super(t,"not-in",e)}matches(t){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Gu(this.value.arrayValue,e)}}class qC extends Ut{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ku(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Gu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,e=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function tp(s,t=null,e=[],r=[],o=null,u=null,c=null){return new FC(s,t,e,r,o,u,c)}function Ta(s){const t=ft(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Wg(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),jf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Go(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Go(r))).join(",")),t.Te=e}return t.Te}function ic(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!kC(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!OS(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!JT(s.startAt,t.startAt)&&JT(s.endAt,t.endAt)}function bf(s){return at.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Sf(s,t){return s.filters.filter((e=>e instanceof Ut&&e.field.isEqual(t)))}function ZT(s,t,e){let r=tf,o=!0;for(const u of Sf(s,t)){let c=tf,m=!0;switch(u.op){case"<":case"<=":c=MC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=tf}YT({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];YT({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}function WT(s,t,e){let r=ss,o=!0;for(const u of Sf(s,t)){let c=ss,m=!0;switch(u.op){case">=":case">":c=PC(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=ss}XT({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];XT({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t,e=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LS(s,t,e,r,o,u,c,m){return new Qf(s,t,e,r,o,u,c,m)}function Yf(s){return new Qf(s)}function tE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function HC(s){return s.collectionGroup!==null}function Vu(s){const t=ft(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Zt(de.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Ef(u,r))})),e.has(de.keyField().canonicalString())||t.Ie.push(new Ef(de.keyField(),r))}return t.Ie}function Nn(s){const t=ft(s);return t.Ee||(t.Ee=GC(t,Vu(s))),t.Ee}function GC(s,t){if(s.limitType==="F")return tp(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Ef(o.field,u)}));const e=s.endAt?new Ko(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Ko(s.startAt.position,s.startAt.inclusive):null;return tp(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function ep(s,t,e){return new Qf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function Xf(s,t){return ic(Nn(s),Nn(t))&&s.limitType===t.limitType}function zS(s){return`${Ta(Nn(s))}|lt:${s.limitType}`}function Io(s){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>PS(o))).join(", ")}]`),jf(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>Go(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>Go(o))).join(",")),`Target(${r})`})(Nn(s))}; limitType=${s.limitType})`}function rc(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):at.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of Vu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=$T(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Vu(r),o)||r.endAt&&!(function(c,m,g){const p=$T(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Vu(r),o))})(s,t)}function BS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function jS(s){return(t,e)=>{let r=!1;for(const o of Vu(s)){const u=KC(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function KC(s,t,e){const r=s.field.isKeyField()?at.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?gs(g,p):ut(42886)})(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ut(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Ts(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return ES(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new se(at.comparator);function Dn(){return QC}const qS=new se(at.comparator);function Eu(...s){let t=qS;for(const e of s)t=t.insert(e.key,e);return t}function FS(s){let t=qS;return s.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Mi(){return Ou()}function HS(){return Ou()}function Ou(){return new pr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const YC=new se(at.comparator),XC=new Zt(at.comparator);function Dt(...s){let t=XC;for(const e of s)t=t.add(e);return t}const $C=new Zt(St);function Kp(){return $C}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zu(t)?"-0":t}}function GS(s){return{integerValue:""+s}}function JC(s,t){return cS(t)?GS(t):Qp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function ZC(s,t,e){return s instanceof Yo?(function(o,u){const c={fields:{[AS]:{stringValue:SS},[IS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&jp(u)&&(u=Gf(u)),u&&(c.fields[wS]=u),{mapValue:c}})(e,t):s instanceof Xo?QS(s,t):s instanceof $o?YS(s,t):(function(o,u){const c=KS(o,u),m=eE(c)+eE(o.Ae);return Jg(c)&&Jg(o.Ae)?GS(m):Qp(o.serializer,m)})(s,t)}function WC(s,t,e){return s instanceof Xo?QS(s,t):s instanceof $o?YS(s,t):e}function KS(s,t){return s instanceof Qu?(function(r){return Jg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Yo extends $f{}class Xo extends $f{constructor(t){super(),this.elements=t}}function QS(s,t){const e=XS(t);for(const r of s.elements)e.some((o=>Bi(o,r)))||e.push(r);return{arrayValue:{values:e}}}class $o extends $f{constructor(t){super(),this.elements=t}}function YS(s,t){let e=XS(t);for(const r of s.elements)e=e.filter((o=>!Bi(o,r)));return{arrayValue:{values:e}}}class Qu extends $f{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function eE(s){return fe(s.integerValue||s.doubleValue)}function XS(s){return Ku(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,e){this.field=t,this.transform=e}}function tD(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Xo&&o instanceof Xo||r instanceof $o&&o instanceof $o?Lo(r.elements,o.elements,Bi):r instanceof Qu&&o instanceof Qu?Bi(r.Ae,o.Ae):r instanceof Yo&&o instanceof Yo})(s.transform,t.transform)}class eD{constructor(t,e){this.version=t,this.transformResults=e}}class sn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new sn}static exists(t){return new sn(void 0,t)}static updateTime(t){return new sn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rf(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Jf{}function JS(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Zf(s.key,sn.none()):new sl(s.key,s.data,sn.none());{const e=s.data,r=rn.empty();let o=new Zt(de.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new yr(s.key,r,new vn(o.toArray()),sn.none())}}function nD(s,t,e){s instanceof sl?(function(o,u,c){const m=o.value.clone(),g=iE(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,e):s instanceof yr?(function(o,u,c){if(!rf(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=iE(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(ZS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Mu(s,t,e,r){return s instanceof sl?(function(u,c,m,g){if(!rf(u.precondition,c))return m;const p=u.value.clone(),T=rE(u.fieldTransforms,g,c);return p.setAll(T),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,t,e,r):s instanceof yr?(function(u,c,m,g){if(!rf(u.precondition,c))return m;const p=rE(u.fieldTransforms,g,c),T=c.data;return T.setAll(ZS(u)),T.setAll(p),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,t,e,r):(function(u,c,m){return rf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,t,e)}function iD(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=KS(r.transform,o||null);u!=null&&(e===null&&(e=rn.empty()),e.set(r.field,u))}return e||null}function nE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Lo(r,o,((u,c)=>tD(u,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class sl extends Jf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class yr extends Jf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ZS(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}})),t}function iE(s,t,e){const r=new Map;mt(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let o=0;o<e.length;o++){const u=s[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,WC(c,m,e[o]))}return r}function rE(s,t,e){const r=new Map;for(const o of s){const u=o.transform,c=e.data.field(o.field);r.set(o.field,ZC(u,c,t))}return r}class Zf extends Jf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WS extends Jf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&nD(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Mu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Mu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=HS();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const g=JS(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(pt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Dt())}isEqual(t){return this.batchId===t.batchId&&Lo(this.mutations,t.mutations,((e,r)=>nE(e,r)))&&Lo(this.baseMutations,t.baseMutations,((e,r)=>nE(e,r)))}}class Xp{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){mt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return YC})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Xp(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,zt;function sD(s){switch(s){case $.OK:return ut(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ut(15467,{code:s})}}function tA(s){if(s===void 0)return Ee("GRPC error has no .code"),$.UNKNOWN;switch(s){case Ve.OK:return $.OK;case Ve.CANCELLED:return $.CANCELLED;case Ve.UNKNOWN:return $.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return $.INTERNAL;case Ve.UNAVAILABLE:return $.UNAVAILABLE;case Ve.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ve.NOT_FOUND:return $.NOT_FOUND;case Ve.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ve.ABORTED:return $.ABORTED;case Ve.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ve.DATA_LOSS:return $.DATA_LOSS;default:return ut(39323,{code:s})}}(zt=Ve||(Ve={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=new us([4294967295,4294967295],0);function sE(s){const t=aD().encode(s),e=new Yb;return e.update(t),new Uint8Array(e.digest())}function aE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new us([e,r],0),new us([o,u],0)]}class Jp{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new bu(`Invalid padding: ${e}`);if(r<0)throw new bu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new bu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=us.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(us.fromNumber(r)));return o.compare(oD)===1&&(o=new us([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=sE(t),[r,o]=aE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Jp(u,o,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=sE(t),[r,o]=aE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,ac.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new sc(pt.min(),o,new se(St),Dn(),Dt())}}class ac{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new ac(r,e,Dt(),Dt(),Dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class eA{constructor(t,e){this.targetId=t,this.Ce=e}}class nA{constructor(t,e,r=be.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class oE{constructor(){this.ve=0,this.Fe=lE(),this.Me=be.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Dt(),e=Dt(),r=Dt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ut(38017,{changeType:u})}})),new ac(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=lE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lD{constructor(t){this.Ge=t,this.ze=new Map,this.je=Dn(),this.Je=Bh(),this.He=Bh(),this.Ye=new se(St)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:ut(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(bf(u))if(r===0){const c=new at(u.path);this.et(e,c,pe.newNoDocument(c,pt.min()))}else mt(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,p)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=mr(r).toUint8Array()}catch(g){if(g instanceof bS)return Uo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Jp(c,o,u)}catch(g){return Uo(g instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&bf(m.target)){const g=new at(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,pe.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=Dt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new sc(t,e,this.Ye,this.je,r);return this.je=Dn(),this.Je=Bh(),this.He=Bh(),this.Ye=new se(St),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new oE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Zt(St),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Zt(St),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new oE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Bh(){return new se(at.comparator)}function lE(){return new se(at.comparator)}const uD={asc:"ASCENDING",desc:"DESCENDING"},cD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hD={and:"AND",or:"OR"};class fD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function np(s,t){return s.useProto3Json||jf(t)?t:{value:t}}function Jo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function iA(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function dD(s,t){return Jo(s,t.toTimestamp())}function cn(s){return mt(!!s,49232),pt.fromTimestamp((function(e){const r=dr(e);return new Jt(r.seconds,r.nanos)})(s))}function Zp(s,t){return ip(s,t).canonicalString()}function ip(s,t){const e=(function(o){return new Gt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?e:e.child(t)}function rA(s){const t=Gt.fromString(s);return mt(dA(t),10190,{key:t.toString()}),t}function Af(s,t){return Zp(s.databaseId,t.path)}function da(s,t){const e=rA(t);if(e.get(1)!==s.databaseId.projectId)throw new ot($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new ot($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new at(oA(e))}function sA(s,t){return Zp(s.databaseId,t)}function aA(s){const t=rA(s);return t.length===4?Gt.emptyPath():oA(t)}function rp(s){return new Gt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function oA(s){return mt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function uE(s,t,e){return{name:Af(s,t),fields:e.value.mapValue.fields}}function mD(s,t,e){const r=da(s,t.name),o=cn(t.updateTime),u=t.createTime?cn(t.createTime):pt.min(),c=new rn({mapValue:{fields:t.fields}}),m=pe.newFoundDocument(r,o,u,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function gD(s,t){let e;if("targetChange"in t){t.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ut(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,T){return p.useProto3Json?(mt(T===void 0||typeof T=="string",58123),be.fromBase64String(T||"")):(mt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),be.fromUint8Array(T||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(p){const T=p.code===void 0?$.UNKNOWN:tA(p.code);return new ot(T,p.message||"")})(c);e=new nA(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=da(s,r.document.name),u=cn(r.document.updateTime),c=r.document.createTime?cn(r.document.createTime):pt.min(),m=new rn({mapValue:{fields:r.document.fields}}),g=pe.newFoundDocument(o,u,c,m),p=r.targetIds||[],T=r.removedTargetIds||[];e=new sf(p,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=da(s,r.document),u=r.readTime?cn(r.readTime):pt.min(),c=pe.newNoDocument(o,u),m=r.removedTargetIds||[];e=new sf([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=da(s,r.document),u=r.removedTargetIds||[];e=new sf([],u,o,null)}else{if(!("filter"in t))return ut(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new rD(o,u),m=r.targetId;e=new eA(m,c)}}return e}function wf(s,t){let e;if(t instanceof sl)e={update:uE(s,t.key,t.value)};else if(t instanceof Zf)e={delete:Af(s,t.key)};else if(t instanceof yr)e={update:uE(s,t.key,t.data),updateMask:ED(t.fieldMask)};else{if(!(t instanceof WS))return ut(16599,{Vt:t.type});e={verify:Af(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof Yo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Xo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof $o)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Qu)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ut(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:dD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ut(27497)})(s,t.precondition)),e}function sp(s,t){const e=t.currentDocument?(function(u){return u.updateTime!==void 0?sn.updateTime(cn(u.updateTime)):u.exists!==void 0?sn.exists(u.exists):sn.none()})(t.currentDocument):sn.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)mt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Yo;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];g=new Xo(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];g=new $o(T)}else"increment"in m?g=new Qu(c,m.increment):ut(16584,{proto:m});const p=de.fromServerFormat(m.fieldPath);return new $S(p,g)})(s,o))):[];if(t.update){t.update.name;const o=da(s,t.update.name),u=new rn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new vn(p.map((T=>de.fromServerFormat(T))))})(t.updateMask);return new yr(o,u,c,e,r)}return new sl(o,u,e,r)}if(t.delete){const o=da(s,t.delete);return new Zf(o,e)}if(t.verify){const o=da(s,t.verify);return new WS(o,e)}return ut(1463,{proto:t})}function pD(s,t){return s&&s.length>0?(mt(t!==void 0,14353),s.map((e=>(function(o,u){let c=o.updateTime?cn(o.updateTime):cn(u);return c.isEqual(pt.min())&&(c=cn(u)),new eD(c,o.transformResults||[])})(e,t)))):[]}function lA(s,t){return{documents:[sA(s,t.path)]}}function uA(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=sA(s,o);const u=(function(p){if(p.length!==0)return fA(ie.create(p,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((T=>(function(A){return{field:Ro(A.field),direction:_D(A.dir)}})(T)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=np(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:e,parent:o}}function cA(s){let t=aA(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){mt(r===1,65062);const T=e.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];e.where&&(u=(function(E){const A=hA(E);return A instanceof ie&&Gp(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((A=>(function(Q){return new Ef(xo(Q.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(A)))})(e.orderBy));let m=null;e.limit&&(m=(function(E){let A;return A=typeof E=="object"?E.value:E,jf(A)?null:A})(e.limit));let g=null;e.startAt&&(g=(function(E){const A=!!E.before,O=E.values||[];return new Ko(O,A)})(e.startAt));let p=null;return e.endAt&&(p=(function(E){const A=!E.before,O=E.values||[];return new Ko(O,A)})(e.endAt)),LS(t,o,c,u,m,"F",g,p)}function yD(s,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function hA(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=xo(e.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=xo(e.unaryFilter.field);return Ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=xo(e.unaryFilter.field);return Ut.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=xo(e.unaryFilter.field);return Ut.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ut(61313);default:return ut(60726)}})(s):s.fieldFilter!==void 0?(function(e){return Ut.create(xo(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ut(58110);default:return ut(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return ie.create(e.compositeFilter.filters.map((r=>hA(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ut(1026)}})(e.compositeFilter.op))})(s):ut(30097,{filter:s})}function _D(s){return uD[s]}function vD(s){return cD[s]}function TD(s){return hD[s]}function Ro(s){return{fieldPath:s.canonicalString()}}function xo(s){return de.fromServerFormat(s.fieldPath)}function fA(s){return s instanceof Ut?(function(e){if(e.op==="=="){if(QT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NAN"}};if(KT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(QT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NAN"}};if(KT(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(e.field),op:vD(e.op),value:e.value}}})(s):s instanceof ie?(function(e){const r=e.getFilters().map((o=>fA(o)));return r.length===1?r[0]:{compositeFilter:{op:TD(e.op),filters:r}}})(s):ut(54877,{filter:s})}function ED(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function dA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,e,r,o,u=pt.min(),c=pt.min(),m=be.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new cr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(t){this.yt=t}}function bD(s,t){let e;if(t.document)e=mD(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=at.fromSegments(t.noDocument.path),o=ba(t.noDocument.readTime);e=pe.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ut(56709);{const r=at.fromSegments(t.unknownDocument.path),o=ba(t.unknownDocument.version);e=pe.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime((function(o){const u=new Jt(o[0],o[1]);return pt.fromTimestamp(u)})(t.readTime)),e}function cE(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:If(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,c){return{name:Af(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Jo(u,c.version.toTimestamp()),createTime:Jo(u,c.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Ea(t.version)};else{if(!t.isUnknownDocument())return ut(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Ea(t.version)}}return r}function If(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function Ea(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ba(s){const t=new Jt(s.seconds,s.nanoseconds);return pt.fromTimestamp(t)}function ra(s,t){const e=(t.baseMutations||[]).map((u=>sp(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const c=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>sp(s.yt,u))),o=Jt.fromMillis(t.localWriteTimeMs);return new Yp(t.batchId,o,e,r)}function Su(s){const t=ba(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?ba(s.lastLimboFreeSnapshotVersion):pt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return mt(c===1,1966,{count:c}),Nn(Yf(aA(u.documents[0])))})(s.query):(function(u){return Nn(cA(u))})(s.query),new cr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,be.fromBase64String(s.resumeToken))}function gA(s,t){const e=Ea(t.snapshotVersion),r=Ea(t.lastLimboFreeSnapshotVersion);let o;o=bf(t.target)?lA(s.yt,t.target):uA(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ta(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function pA(s){const t=cA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ep(t,t.limit,"L"):t}function Ig(s,t){return new $p(t.largestBatchId,sp(s.yt,t.overlayMutation))}function hE(s,t){const e=t.path.lastSegment();return[s,an(t.path.popLast()),e]}function fE(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:Ea(r.readTime),documentKey:an(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{getBundleMetadata(t,e){return dE(t).get(e).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:ba(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,e){return dE(t).put((function(o){return{bundleId:o.id,createTime:Ea(cn(o.createTime)),version:o.version}})(e))}getNamedQuery(t,e){return mE(t).get(e).next((r=>{if(r)return(function(u){return{name:u.name,query:pA(u.bundledQuery),readTime:ba(u.readTime)}})(r)}))}saveNamedQuery(t,e){return mE(t).put((function(o){return{name:o.name,readTime:Ea(cn(o.readTime)),bundledQuery:o.bundledQuery}})(e))}}function dE(s){return Be(s,qf)}function mE(s){return Be(s,Ff)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new Wf(t,r)}getOverlay(t,e){return gu(t).get(hE(this.userId,e)).next((r=>r?Ig(this.serializer,r):null))}getOverlays(t,e){const r=Mi();return U.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){const o=[];return r.forEach(((u,c)=>{const m=new $p(e,c);o.push(this.St(t,m))})),U.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach((c=>o.add(an(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(gu(t).Z(Yg,m))})),U.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Mi(),u=an(e),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return gu(t).J(Yg,c).next((m=>{for(const g of m){const p=Ig(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(t,e,r,o){const u=Mi();let c;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gu(t).ee({index:pS,range:m},((g,p,T)=>{const E=Ig(this.serializer,p);u.size()<o||E.largestBatchId===c?(u.set(E.getKey(),E),c=E.largestBatchId):T.done()})).next((()=>u))}St(t,e){return gu(t).put((function(o,u,c){const[m,g,p]=hE(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:wf(o.yt,c.mutation)}})(this.serializer,this.userId,e))}}function gu(s){return Be(s,Hf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{bt(t){return Be(t,zp)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e==null?void 0:e.value;return r?be.fromUint8Array(r):be.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(fe(t.integerValue));else if("doubleValue"in t){const r=fe(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),zu(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=dr(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(mr(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?xS(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Kf(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):ut(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const o of Object.keys(r))this.Ot(o,e),this.Ct(r[o],e)}kt(t,e){var c,m;const r=t.fields||{};this.Ft(e,53);const o=Ho,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(e,15),e.Mt(fe(u)),this.Ot(o,e),this.Ct(r[o],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const o of r)this.Ct(o,e)}Lt(t,e){this.Ft(e,37),at.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}sa.Kt=new sa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=255;function wD(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function gE(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=wD(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(t/8)}class ID{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=e.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=e.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const e=this.en(t),r=gE(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}nn(t){const e=this.en(t),r=gE(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}rn(){this.sn(Eo),this.sn(255)}_n(){this.an(Eo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Eo?(this.sn(Eo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Eo?(this.an(Eo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class RD{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class xD{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class pu{constructor(){this.cn=new ID,this.ln=new RD(this.cn),this.hn=new xD(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t,e,r,o){this.Tn=t,this.In=e,this.En=r,this.dn=o}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new aa(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:af(this.En),directionalValue:af(this.dn),orderedDocumentKey:af(e),documentKey:r.path.toArray()}}Vn(t,e,r){const o=this.Rn(t,e,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Zr(s,t){let e=s.Tn-t.Tn;return e!==0?e:(e=pE(s.En,t.En),e!==0?e:(e=pE(s.dn,t.dn),e!==0?e:at.comparator(s.In,t.In)))}function pE(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}function af(s){return cb()?(function(e){let r="";for(let o=0;o<e.length;o++)r+=String.fromCharCode(e[o]);return r})(s):s}function yE(s){return typeof s!="string"?s:(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(s)}class _E{constructor(t){this.mn=new Zt(((e,r)=>de.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(mt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Gg(t);if(e!==void 0&&!this.wn(e))return!1;const r=ea(t);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new Zt(de.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new Jh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new Jh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new Jh(r.field,r.dir==="asc"?0:1)));return new yf(yf.UNKNOWN_ID,this.collectionId,e,Lu.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(s){var e,r;if(mt(s instanceof Ut||s instanceof ie,20012),s instanceof Ut){if(s instanceof US){const o=((r=(e=s.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map((u=>Ut.create(s.field,"==",u))))||[];return ie.create(o,"or")}return s}const t=s.filters.map((o=>yA(o)));return ie.create(t,s.op)}function CD(s){if(s.getFilters().length===0)return[];const t=lp(yA(s));return mt(_A(t),7391),ap(t)||op(t)?[t]:t.getFilters()}function ap(s){return s instanceof Ut}function op(s){return s instanceof ie&&Gp(s)}function _A(s){return ap(s)||op(s)||(function(e){if(e instanceof ie&&Zg(e)){for(const r of e.getFilters())if(!ap(r)&&!op(r))return!1;return!0}return!1})(s)}function lp(s){if(mt(s instanceof Ut||s instanceof ie,34018),s instanceof Ut)return s;if(s.filters.length===1)return lp(s.filters[0]);const t=s.filters.map((r=>lp(r)));let e=ie.create(t,s.op);return e=Rf(e),_A(e)?e:(mt(e instanceof ie,64498),mt(Qo(e),40251),mt(e.filters.length>1,57927),e.filters.reduce(((r,o)=>Wp(r,o))))}function Wp(s,t){let e;return mt(s instanceof Ut||s instanceof ie,38388),mt(t instanceof Ut||t instanceof ie,25473),e=s instanceof Ut?t instanceof Ut?(function(o,u){return ie.create([o,u],"and")})(s,t):vE(s,t):t instanceof Ut?vE(t,s):(function(o,u){if(mt(o.filters.length>0&&u.filters.length>0,48005),Qo(o)&&Qo(u))return MS(o,u.getFilters());const c=Zg(o)?o:u,m=Zg(o)?u:o,g=c.filters.map((p=>Wp(p,m)));return ie.create(g,"or")})(s,t),Rf(e)}function vE(s,t){if(Qo(t))return MS(t,s.getFilters());{const e=t.filters.map((r=>Wp(s,r)));return ie.create(e,"or")}}function Rf(s){if(mt(s instanceof Ut||s instanceof ie,11850),s instanceof Ut)return s;const t=s.getFilters();if(t.length===1)return Rf(t[0]);if(VS(s))return s;const e=t.map((o=>Rf(o))),r=[];return e.forEach((o=>{o instanceof Ut?r.push(o):o instanceof ie&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:ie.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.Cn=new ty}addToCollectionParentIndex(t,e){return this.Cn.add(e),U.resolve()}getCollectionParents(t,e){return U.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return U.resolve()}deleteFieldIndex(t,e){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,e){return U.resolve()}getDocumentsMatchingTarget(t,e){return U.resolve(null)}getIndexType(t,e){return U.resolve(0)}getFieldIndexes(t,e){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,e){return U.resolve(Vn.min())}getMinOffsetFromCollectionGroup(t,e){return U.resolve(Vn.min())}updateCollectionGroup(t,e,r){return U.resolve()}updateIndexEntries(t,e){return U.resolve()}}class ty{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Zt(Gt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Zt(Gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="IndexedDbIndexManager",jh=new Uint8Array(0);class ND{constructor(t,e){this.databaseId=e,this.vn=new ty,this.Fn=new pr((r=>Ta(r)),((r,o)=>ic(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const u={collectionId:r,parent:an(o)};return EE(t).put(u)}return U.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[nS(e),""],!1,!0);return EE(t).J(o).next((u=>{for(const c of u){if(c.collectionId!==e)break;r.push(Oi(c.parent))}return r}))}addFieldIndex(t,e){const r=yu(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(e);delete o.indexId;const u=r.add(o);if(e.indexState){const c=So(t);return u.next((m=>{c.put(fE(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return u.next()}deleteFieldIndex(t,e){const r=yu(t),o=So(t),u=bo(t);return r.delete(e.indexId).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=yu(t),r=bo(t),o=So(t);return e.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,e){return U.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new _E(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,e){const r=bo(t);let o=!0;const u=new Map;return U.forEach(this.Mn(e),(c=>this.xn(t,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Dt();const m=[];return U.forEach(u,((g,p)=>{tt(TE,`Using index ${(function(et){return`id=${et.indexId}|cg=${et.collectionGroup}|f=${et.fields.map((_t=>`${_t.fieldPath}:${_t.kind}`)).join(",")}`})(g)} to execute ${Ta(e)}`);const T=(function(et,_t){const At=Gg(_t);if(At===void 0)return null;for(const Tt of Sf(et,At.fieldPath))switch(Tt.op){case"array-contains-any":return Tt.value.arrayValue.values||[];case"array-contains":return[Tt.value]}return null})(p,g),E=(function(et,_t){const At=new Map;for(const Tt of ea(_t))for(const I of Sf(et,Tt.fieldPath))switch(I.op){case"==":case"in":At.set(Tt.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return At.set(Tt.fieldPath.canonicalString(),I.value),Array.from(At.values())}return null})(p,g),A=(function(et,_t){const At=[];let Tt=!0;for(const I of ea(_t)){const w=I.kind===0?ZT(et,I.fieldPath,et.startAt):WT(et,I.fieldPath,et.startAt);At.push(w.value),Tt&&(Tt=w.inclusive)}return new Ko(At,Tt)})(p,g),O=(function(et,_t){const At=[];let Tt=!0;for(const I of ea(_t)){const w=I.kind===0?WT(et,I.fieldPath,et.endAt):ZT(et,I.fieldPath,et.endAt);At.push(w.value),Tt&&(Tt=w.inclusive)}return new Ko(At,Tt)})(p,g),Q=this.On(g,p,A),Z=this.On(g,p,O),W=this.Nn(g,p,E),ht=this.Bn(g.indexId,T,Q,A.inclusive,Z,O.inclusive,W);return U.forEach(ht,(nt=>r.Y(nt,e.limit).next((et=>{et.forEach((_t=>{const At=at.fromSegments(_t.documentKey);c.has(At)||(c=c.add(At),m.push(At))}))}))))})).next((()=>m))}return U.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=CD(ie.create(t.filters,"and")).map((r=>tp(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,o,u,c,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),p=g/(e!=null?e.length:1),T=[];for(let E=0;E<g;++E){const A=e?this.Ln(e[E/p]):jh,O=this.kn(t,A,r[E%p],o),Q=this.qn(t,A,u[E%p],c),Z=m.map((W=>this.kn(t,A,W,!0)));T.push(...this.createRange(O,Q,Z))}return T}kn(t,e,r,o){const u=new aa(t,at.empty(),e,r);return o?u:u.An()}qn(t,e,r,o){const u=new aa(t,at.empty(),e,r);return o?u.An():u}xn(t,e){const r=new _E(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let r=2;const o=this.Mn(e);return U.forEach(o,(u=>this.xn(t,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new Zt(de.comparator),T=!1;for(const E of g.filters)for(const A of E.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?T=!0:p=p.add(A.field));for(const E of g.orderBy)E.field.isKeyField()||(p=p.add(E.field));return p.size+(T?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(e)&&o.length>1&&r===2?1:r))}Qn(t,e){const r=new pu;for(const o of ea(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);sa.Kt.Dt(u,c)}return r.un()}Ln(t){const e=new pu;return sa.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new pu;return sa.Kt.Dt(Hp(this.databaseId,e),r.Pn((function(u){const c=ea(u);return c.length===0?0:c[c.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let o=[];o.push(new pu);let u=0;for(const c of ea(t)){const m=r[u++];for(const g of o)if(this.Un(e,c.fieldPath)&&Ku(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);sa.Kt.Dt(m,p)}}return this.Wn(o)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const o=[...t],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new pu;g.seed(m.un()),sa.Kt.Dt(c,g.Pn(e.kind)),u.push(g)}return u}Un(t,e){return!!t.filters.find((r=>r instanceof Ut&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=yu(t),o=So(t);return(e?r.J(Qg,IDBKeyRange.bound(e,e)):r.J()).next((u=>{const c=[];return U.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(T,E){const A=E?new Lu(E.sequenceNumber,new Vn(ba(E.readTime),new at(Oi(E.documentKey)),E.largestBatchId)):Lu.empty(),O=T.fields.map((([Q,Z])=>new Jh(de.fromServerFormat(Q),Z)));return new yf(T.indexId,T.collectionGroup,O,A)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:St(r.collectionGroup,o.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const o=yu(t),u=So(t);return this.Gn(t).next((c=>o.J(Qg,IDBKeyRange.bound(e,e)).next((m=>U.forEach(m,(g=>u.put(fE(g.indexId,this.uid,c,r))))))))}updateIndexEntries(t,e){const r=new Map;return U.forEach(e,((o,u)=>{const c=r.get(o.collectionGroup);return(c?U.resolve(c):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),U.forEach(m,(g=>this.zn(t,o,g).next((p=>{const T=this.jn(u,g);return p.isEqual(T)?U.resolve():this.Jn(t,u,g,p,T)})))))))}))}Hn(t,e,r,o){return bo(t).put(o.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,o){return bo(t).delete(o.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const o=bo(t);let u=new Zt(Zr);return o.ee({index:gS,range:IDBKeyRange.only([r.indexId,this.uid,af(this.$n(r,e))])},((c,m)=>{u=u.add(new aa(r.indexId,e,yE(m.arrayValue),yE(m.directionalValue)))})).next((()=>u))}jn(t,e){let r=new Zt(Zr);const o=this.Qn(e,t);if(o==null)return r;const u=Gg(e);if(u!=null){const c=t.data.field(u.fieldPath);if(Ku(c))for(const m of c.arrayValue.values||[])r=r.add(new aa(e.indexId,t.key,this.Ln(m),o))}else r=r.add(new aa(e.indexId,t.key,jh,o));return r}Jn(t,e,r,o,u){tt(TE,"Updating index entries for document '%s'",e.key);const c=[];return(function(g,p,T,E,A){const O=g.getIterator(),Q=p.getIterator();let Z=To(O),W=To(Q);for(;Z||W;){let ht=!1,nt=!1;if(Z&&W){const et=T(Z,W);et<0?nt=!0:et>0&&(ht=!0)}else Z!=null?nt=!0:ht=!0;ht?(E(W),W=To(Q)):nt?(A(Z),Z=To(O)):(Z=To(O),W=To(Q))}})(o,u,Zr,(m=>{c.push(this.Hn(t,e,r,m))}),(m=>{c.push(this.Yn(t,e,r,m))})),U.waitFor(c)}Gn(t){let e=1;return So(t).ee({index:mS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),e=o.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((c,m)=>Zr(c,m))).filter(((c,m,g)=>!m||Zr(c,g[m-1])!==0));const o=[];o.push(t);for(const c of r){const m=Zr(c,t),g=Zr(c,e);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(e);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,jh,at.empty()),g=o[c+1].Vn(this.uid,jh,at.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,e){return Zr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(bE)}getMinOffset(t,e){return U.mapArray(this.Mn(e),(r=>this.xn(t,r).next((o=>o||ut(44426))))).next(bE)}}function EE(s){return Be(s,qu)}function bo(s){return Be(s,Du)}function yu(s){return Be(s,Lp)}function So(s){return Be(s,Cu)}function bE(s){mt(s.length!==0,28825);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Pp(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Vn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vA=41943040;class nn{static withCacheSize(t){return new nn(t,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(s,t,e){const r=s.store(si),o=s.store(Bo),u=[],c=IDBKeyRange.only(e.batchId);let m=0;const g=r.ee({range:c},((T,E,A)=>(m++,A.delete())));u.push(g.next((()=>{mt(m===1,47070,{batchId:e.batchId})})));const p=[];for(const T of e.mutations){const E=hS(t,T.key.path,e.batchId);u.push(o.delete(E)),p.push(T.key)}return U.waitFor(u).next((()=>p))}function xf(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ut(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(vA,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class td{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,e,r,o){mt(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new td(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wr(t).ee({index:la,range:r},((o,u,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,r,o){const u=Co(t),c=Wr(t);return c.add({}).next((m=>{mt(typeof m=="number",49019);const g=new Yp(m,e,r,o),p=(function(O,Q,Z){const W=Z.baseMutations.map((nt=>wf(O.yt,nt))),ht=Z.mutations.map((nt=>wf(O.yt,nt)));return{userId:Q,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:W,mutations:ht}})(this.serializer,this.userId,g),T=[];let E=new Zt(((A,O)=>St(A.canonicalString(),O.canonicalString())));for(const A of o){const O=hS(this.userId,A.key.path,m);E=E.add(A.key.path.popLast()),T.push(c.put(p)),T.push(u.put(O,lC))}return E.forEach((A=>{T.push(this.indexManager.addToCollectionParentIndex(t,A))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),U.waitFor(T).next((()=>g))}))}lookupMutationBatch(t,e){return Wr(t).get(e).next((r=>r?(mt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),ra(this.serializer,r)):null))}er(t,e){return this.Xn[e]?U.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const o=r.keys();return this.Xn[e]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Wr(t).ee({index:la,range:o},((c,m,g)=>{m.userId===this.userId&&(mt(m.batchId>=r,47524,{tr:r}),u=ra(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ha;return Wr(t).ee({index:la,range:e,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,ha],[this.userId,Number.POSITIVE_INFINITY]);return Wr(t).J(la,e).next((r=>r.map((o=>ra(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=Zh(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Co(t).ee({range:o},((c,m,g)=>{const[p,T,E]=c,A=Oi(T);if(p===this.userId&&e.path.isEqual(A))return Wr(t).get(E).next((O=>{if(!O)throw ut(61480,{nr:c,batchId:E});mt(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:E}),u.push(ra(this.serializer,O))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(St);const o=[];return e.forEach((u=>{const c=Zh(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Co(t).ee({range:m},((p,T,E)=>{const[A,O,Q]=p,Z=Oi(O);A===this.userId&&u.path.isEqual(Z)?r=r.add(Q):E.done()}));o.push(g)})),U.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=Zh(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Zt(St);return Co(t).ee({range:c},((g,p,T)=>{const[E,A,O]=g,Q=Oi(A);E===this.userId&&r.isPrefixOf(Q)?Q.length===o&&(m=m.add(O)):T.done()})).next((()=>this.rr(t,m)))}rr(t,e){const r=[],o=[];return e.forEach((u=>{o.push(Wr(t).get(u).next((c=>{if(c===null)throw ut(35274,{batchId:u});mt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(ra(this.serializer,c))})))})),U.waitFor(o).next((()=>r))}removeMutationBatch(t,e){return TA(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),U.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return U.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Co(t).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Oi(u[1]);o.push(g)}else m.done()})).next((()=>{mt(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,e){return EA(t,this.userId,e)}_r(t){return bA(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:ha,lastStreamToken:""}))}}function EA(s,t,e){const r=Zh(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Co(s).ee({range:u,X:!0},((m,g,p)=>{const[T,E,A]=m;T===t&&E===o&&(c=!0),p.done()})).next((()=>c))}function Wr(s){return Be(s,si)}function Co(s){return Be(s,Bo)}function bA(s){return Be(s,Bu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Sa(0)}static cr(){return new Sa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new Sa(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>pt.fromTimestamp(new Jt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.hr(t,o))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Ao(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(mt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let o=0;const u=[];return Ao(t).ee(((c,m)=>{const g=Su(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>U.waitFor(u))).next((()=>o))}forEachTarget(t,e){return Ao(t).ee(((r,o)=>{const u=Su(o);e(u)}))}lr(t){return AE(t).get(Tf).next((e=>(mt(e!==null,2888),e)))}hr(t,e){return AE(t).put(Tf,e)}Pr(t,e){return Ao(t).put(gA(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=Ta(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ao(t).ee({range:o,index:dS},((c,m,g)=>{const p=Su(m);ic(e,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(t,e,r){const o=[],u=rs(t);return e.forEach((c=>{const m=an(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,c))})),U.waitFor(o)}removeMatchingKeys(t,e,r){const o=rs(t);return U.forEach(e,(u=>{const c=an(u.path);return U.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,e){const r=rs(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=rs(t);let u=Dt();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Oi(c[1]),T=new at(p);u=u.add(T)})).next((()=>u))}containsKey(t,e){const r=an(e.path),o=IDBKeyRange.bound([r],[nS(r)],!1,!0);let u=0;return rs(t).ee({index:Up,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(t,e){return Ao(t).get(e).next((r=>r?Su(r):null))}}function Ao(s){return Be(s,jo)}function AE(s){return Be(s,fa)}function rs(s){return Be(s,qo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="LruGarbageCollector",SA=1048576;function IE([s,t],[e,r]){const o=St(s,e);return o===0?St(t,r):o}class OD{constructor(t){this.Ir=t,this.buffer=new Zt(IE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();IE(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class AA{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(wE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){vs(e)?tt(wE,"Ignoring IndexedDB error during garbage collection: ",e):await _s(e)}await this.Vr(3e5)}))}}class MD{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return U.resolve(_n.ce);const r=new OD(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(SE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,m,g,p;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(t,o)))).next((E=>(r=E,m=Date.now(),this.removeTargets(t,r,e)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((E=>(p=Date.now(),wo()<=Pt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-T}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function wA(s,t){return new MD(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t,e){this.db=t,this.garbageCollector=wA(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,o)=>e(o)))}addReference(t,e,r){return qh(t,r)}removeReference(t,e,r){return qh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return qh(t,e)}br(t,e){return(function(o,u){let c=!1;return bA(o).te((m=>EA(o,m,u).next((g=>(g&&(c=!0),U.resolve(!g)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((c,m)=>{if(m<=e){const g=this.br(t,c).next((p=>{if(!p)return u++,r.getEntry(t,c).next((()=>(r.removeEntry(c,pt.min()),rs(t).delete((function(E){return[0,an(E.path)]})(c)))))}));o.push(g)}})).next((()=>U.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return qh(t,e)}Sr(t,e){const r=rs(t);let o,u=_n.ce;return r.ee({index:Up},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==_n.ce&&e(new at(Oi(o)),u),u=p,o=g):u=_n.ce})).next((()=>{u!==_n.ce&&e(new at(Oi(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function qh(s,t){return rs(s).put((function(r,o){return{targetId:0,path:an(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.changes=new pr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,pe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?U.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Ws(t).put(r)}removeEntry(t,e,r){return Ws(t).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],If(c),m[m.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=pe.newInvalidDocument(e);return Ws(t).ee({index:Wh,range:IDBKeyRange.only(_u(e))},((o,u)=>{r=this.Cr(e,u)})).next((()=>r))}vr(t,e){let r={size:0,document:pe.newInvalidDocument(e)};return Ws(t).ee({index:Wh,range:IDBKeyRange.only(_u(e))},((o,u)=>{r={document:this.Cr(e,u),size:xf(u)}})).next((()=>r))}getEntries(t,e){let r=Dn();return this.Fr(t,e,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(t,e){let r=Dn(),o=new se(at.comparator);return this.Fr(t,e,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,xf(c))})).next((()=>({documents:r,Or:o})))}Fr(t,e,r){if(e.isEmpty())return U.resolve();let o=new Zt(CE);e.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(_u(o.first()),_u(o.last())),c=o.getIterator();let m=c.getNext();return Ws(t).ee({index:Wh,range:u},((g,p,T)=>{const E=at.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&CE(m,E)<0;)r(m,null),m=c.getNext();m&&m.isEqual(E)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?T.j(_u(m)):T.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,r,o,u){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),If(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ws(t).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let T=Dn();for(const E of p){const A=this.Cr(at.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);A.isFoundDocument()&&(rc(e,A)||o.has(A.key))&&(T=T.insert(A.key,A))}return T}))}getAllFromCollectionGroup(t,e,r,o){let u=Dn();const c=xE(e,r),m=xE(e,Vn.max());return Ws(t).ee({index:fS,range:IDBKeyRange.bound(c,m,!0)},((g,p,T)=>{const E=this.Cr(at.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(E.key,E),u.size===o&&T.done()})).next((()=>u))}newChangeBuffer(t){return new UD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return RE(t).get(Kg).next((e=>(mt(!!e,20021),e)))}Dr(t,e){return RE(t).put(Kg,e)}Cr(t,e){if(e){const r=bD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(pt.min())))return r}return pe.newInvalidDocument(t)}}function RA(s){return new kD(s)}class UD extends IA{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new pr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const e=[];let r=0,o=new Zt(((u,c)=>St(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(e.push(this.Nr.removeEntry(t,u,m.readTime)),c.isValidDocument()){const g=cE(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=xf(g);r+=p-m.size,e.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=cE(this.Nr.serializer,c.convertToNoDocument(pt.min()));e.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),e.push(this.Nr.updateMetadata(t,r)),U.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function RE(s){return Be(s,ju)}function Ws(s){return Be(s,vf)}function _u(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function xE(s,t){const e=t.documentKey.path.toArray();return[s,If(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function CE(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=St(e[u],r[u]),o)return o;return o=St(e.length,r.length),o||(o=St(e[e.length-2],r[r.length-2]),o||St(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&Mu(r.mutation,o,vn.empty(),Jt.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Dt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Dt()){const o=Mi();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=Eu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Mi();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Dt())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,o){let u=Dn();const c=Ou(),m=(function(){return Ou()})();return e.forEach(((g,p)=>{const T=r.get(p.key);o.has(p.key)&&(T===void 0||T.mutation instanceof yr)?u=u.insert(p.key,p):T!==void 0?(c.set(p.key,T.mutation.getFieldMask()),Mu(T.mutation,p,T.mutation.getFieldMask(),Jt.now())):c.set(p.key,vn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,T)=>c.set(p,T))),e.forEach(((p,T)=>m.set(p,new LD(T,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Ou();let o=new se(((c,m)=>c-m)),u=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=e.get(g);if(p===null)return;let T=r.get(g)||vn.empty();T=m.applyToLocalView(p,T),r.set(g,T);const E=(o.get(m.batchId)||Dt()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,T=g.value,E=HS();T.forEach((A=>{if(!u.has(A)){const O=JS(e.get(A),r.get(A));O!==null&&E.set(A,O),u=u.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,E))}return U.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return at.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):HC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):U.resolve(Mi());let m=zo,g=u;return c.next((p=>U.forEach(p,((T,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(T)?U.resolve():this.remoteDocumentCache.getEntry(t,T).next((A=>{g=g.insert(T,A)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Dt()))).next((T=>({batchId:m,changes:FS(T)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new at(e)).next((r=>{let o=Eu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=Eu();return this.indexManager.getCollectionParents(t,u).next((m=>U.forEach(m,(g=>{const p=(function(E,A){return new Qf(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,r,o).next((T=>{T.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const T=p.getKey();c.get(T)===null&&(c=c.insert(T,pe.newInvalidDocument(T)))}));let m=Eu();return c.forEach(((g,p)=>{const T=u.get(g);T!==void 0&&Mu(T.mutation,p,vn.empty(),Jt.now()),rc(e,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return U.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:cn(o.createTime)}})(e)),U.resolve()}getNamedQuery(t,e){return U.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:pA(o.bundledQuery),readTime:cn(o.readTime)}})(e)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.overlays=new se(at.comparator),this.qr=new Map}getOverlay(t,e){return U.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Mi();return U.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),U.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(t,e,r){const o=Mi(),u=e.length+1,c=new at(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return U.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new se(((p,T)=>p-T));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let T=u.get(p.largestBatchId);T===null&&(T=Mi(),u=u.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const m=Mi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,T)=>m.set(p,T))),!(m.size()>=o)););return U.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $p(e,r));let u=this.qr.get(e);u===void 0&&(u=Dt(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.sessionToken=be.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.Qr=new Zt(He.$r),this.Ur=new Zt(He.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new He(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new He(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new at(new Gt([])),r=new He(e,t),o=new He(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new at(new Gt([])),r=new He(e,t),o=new He(e,t+1);let u=Dt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new He(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class He{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return at.comparator(t.key,e.key)||St(t.Yr,e.Yr)}static Kr(t,e){return St(t.Yr,e.Yr)||at.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(He.$r)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Yp(u,e,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new He(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return U.resolve(c)}lookupMutationBatch(t,e){return U.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return U.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ha:this.tr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new He(e,0),o=new He(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),U.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(St);return e.forEach((o=>{const u=new He(o,0),c=new He(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;at.isDocumentKey(u)||(u=u.child(""));const c=new He(new at(u),0);let m=new Zt(St);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),U.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){mt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(e.mutations,(o=>{const u=new He(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new He(e,0),o=this.Zr.firstAfterOrEqual(r);return U.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t){this.ri=t,this.docs=(function(){return new se(at.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return U.resolve(r?r.document.mutableCopy():pe.newInvalidDocument(e))}getEntries(t,e){let r=Dn();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():pe.newInvalidDocument(o))})),U.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=Dn();const c=e.path,m=new at(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:T}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Pp(aS(T),r)<=0||(o.has(T.key)||rc(e,T))&&(u=u.insert(T.key,T.mutableCopy()))}return U.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ut(9500)}ii(t,e){return U.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new HD(this)}getSize(t){return U.resolve(this.size)}}class HD extends IA{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),U.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t){this.persistence=t,this.si=new pr((e=>Ta(e)),ic),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.oi=0,this._i=new ey,this.targetCount=0,this.ai=Sa.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),U.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Sa(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,U.resolve()}updateTargetData(t,e){return this.Pr(e),U.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),U.waitFor(u).next((()=>o))}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return U.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),U.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),U.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),U.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return U.resolve(r)}containsKey(t,e){return U.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,e){this.ui={},this.overlays={},this.ci=new _n(0),this.li=!1,this.li=!0,this.hi=new jD,this.referenceDelegate=t(this),this.Pi=new GD(this),this.indexManager=new DD,this.remoteDocumentCache=(function(o){return new FD(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new mA(e),this.Ii=new zD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new BD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new qD(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new KD(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class KD extends lS{constructor(t){super(),this.currentSequenceNumber=t}}class ed{constructor(t){this.persistence=t,this.Ri=new ey,this.Vi=null}static mi(t){return new ed(t)}get fi(){if(this.Vi)return this.Vi;throw ut(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),U.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),U.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const o=at.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,pt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return U.or([()=>U.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Cf{constructor(t,e){this.persistence=t,this.pi=new pr((r=>an(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=wA(this,e)}static mi(t,e){return new Cf(t,e)}Ei(){}di(t){return U.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return U.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?U.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,pt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),U.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),U.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),U.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ef(t.data.value)),e}br(t,e,r){return U.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return U.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t){this.serializer=t}k(t,e,r,o){const u=new Bf("createOrUpgrade",e);r<1&&o>=1&&((function(g){g.createObjectStore(nc)})(t),(function(g){g.createObjectStore(Bu,{keyPath:oC}),g.createObjectStore(si,{keyPath:BT,autoIncrement:!0}).createIndex(la,jT,{unique:!0}),g.createObjectStore(Bo)})(t),DE(t),(function(g){g.createObjectStore(na)})(t));let c=U.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(qo),g.deleteObjectStore(jo),g.deleteObjectStore(fa)})(t),DE(t)),c=c.next((()=>(function(g){const p=g.store(fa),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return p.put(Tf,T)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(si).J().next((E=>{g.deleteObjectStore(si),g.createObjectStore(si,{keyPath:BT,autoIncrement:!0}).createIndex(la,jT,{unique:!0});const A=p.store(si),O=E.map((Q=>A.put(Q)));return U.waitFor(O)}))})(t,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Fo,{keyPath:pC})})(t)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(ju)})(t),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(t,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(qf,{keyPath:yC})})(t),(function(g){g.createObjectStore(Ff,{keyPath:_C})})(t)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Hf,{keyPath:wC});p.createIndex(Yg,IC,{unique:!1}),p.createIndex(pS,RC,{unique:!1})})(t)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(vf,{keyPath:uC});p.createIndex(Wh,cC),p.createIndex(fS,hC)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(na)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Lp,{keyPath:vC,autoIncrement:!0}).createIndex(Qg,TC,{unique:!1}),g.createObjectStore(Cu,{keyPath:EC}).createIndex(mS,bC,{unique:!1}),g.createObjectStore(Du,{keyPath:SC}).createIndex(gS,AC,{unique:!1})})(t)))),r<16&&o>=16&&(c=c.next((()=>{e.objectStore(Cu).clear()})).next((()=>{e.objectStore(Du).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(zp,{keyPath:xC})})(t)}))),r<18&&o>=18&&cb()&&(c=c.next((()=>{e.objectStore(Cu).clear()})).next((()=>{e.objectStore(Du).clear()}))),c}wi(t){let e=0;return t.store(na).ee(((r,o)=>{e+=xf(o)})).next((()=>{const r={byteSize:e};return t.store(ju).put(Kg,r)}))}yi(t){const e=t.store(Bu),r=t.store(si);return e.J().next((o=>U.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ha],[u.userId,u.lastAcknowledgedBatchId]);return r.J(la,c).next((m=>U.forEach(m,(g=>{mt(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=ra(this.serializer,g);return TA(t,u.userId,p).next((()=>{}))}))))}))))}Si(t){const e=t.store(qo),r=t.store(na);return t.store(fa).get(Tf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Gt(c),p=(function(E){return[0,an(E)]})(g);u.push(e.get(p).next((T=>T?U.resolve():(E=>e.put({targetId:0,path:an(E),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>U.waitFor(u)))}))}bi(t,e){t.createObjectStore(qu,{keyPath:gC});const r=e.store(qu),o=new ty,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:an(g)})}};return e.store(na).ee({X:!0},((c,m)=>{const g=new Gt(c);return u(g.popLast())})).next((()=>e.store(Bo).ee({X:!0},(([c,m,g],p)=>{const T=Oi(m);return u(T.popLast())}))))}Di(t){const e=t.store(jo);return e.ee(((r,o)=>{const u=Su(o),c=gA(this.serializer,u);return e.put(c)}))}Ci(t,e){const r=e.store(na),o=[];return r.ee(((u,c)=>{const m=e.store(vf),g=(function(E){return E.document?new at(Gt.fromString(E.document.name).popFirst(5)):E.noDocument?at.fromSegments(E.noDocument.path):E.unknownDocument?at.fromSegments(E.unknownDocument.path):ut(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>U.waitFor(o)))}Fi(t,e){const r=e.store(si),o=RA(this.serializer),u=new ny(ed.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Dt();ra(this.serializer,g).keys().forEach((T=>p=p.add(T))),m.set(g.userId,p)})),U.forEach(m,((g,p)=>{const T=new Ge(p),E=Wf.wt(this.serializer,T),A=u.getIndexManager(T),O=td.wt(T,this.serializer,A,u.referenceDelegate);return new xA(o,O,E,A).recalculateAndSaveOverlaysForDocumentKeys(new Xg(e,_n.ce),g).next()}))}))}}function DE(s){s.createObjectStore(qo,{keyPath:dC}).createIndex(Up,mC,{unique:!0}),s.createObjectStore(jo,{keyPath:"targetId"}).createIndex(dS,fC,{unique:!0}),s.createObjectStore(fa)}const ts="IndexedDbPersistence",Rg=18e5,xg=5e3,Cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",YD="main";class iy{constructor(t,e,r,o,u,c,m,g,p,T,E=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=T,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!iy.v())throw new ot($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PD(this,o),this.$i=e+YD,this.serializer=new mA(g),this.Ui=new hs(this.$i,this.Ni,new QD(this.serializer)),this.hi=new AD,this.Pi=new VD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RA(this.serializer),this.Ii=new SD,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,T===!1&&Ee(ts,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ot($.FAILED_PRECONDITION,Cg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new _n(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Fh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(vs(t))return tt(ts,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(ts,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return vu(t).get(vo).next((e=>U.resolve(this.es(e))))}ts(t){return Fh(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Rg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=Be(e,Fo);return r.J().next((o=>{const u=this.ss(o,Rg),c=o.filter((m=>u.indexOf(m)===-1));return U.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?U.resolve(!0):vu(t).get(vo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,xg)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new ot($.FAILED_PRECONDITION,Cg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fh(t).J().next((r=>this.ss(r,xg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&tt(ts,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[nc,Fo],(t=>{const e=new Xg(t,_n.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Fh(t).J().next((e=>this.ss(e,Rg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return td.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new ND(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Wf.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt(ts,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?NC:g===17?TS:g===16?DC:g===15?Bp:g===14?vS:g===13?_S:g===12?CC:g===11?yS:void ut(60245)})(this.Ni);let c;return this.Ui.runTransaction(t,o,u,(m=>(c=new Xg(m,this.ci?this.ci.next():_n.ce),e==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Ee(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ot($.FAILED_PRECONDITION,oS);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(t){return vu(t).get(vo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,xg)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ot($.FAILED_PRECONDITION,Cg)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(t).put(vo,e)}static v(){return hs.v()}Zi(t){const e=vu(t);return e.get(vo).next((r=>this.es(r)?(tt(ts,"Releasing primary lease."),e.delete(vo)):U.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Ee(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;ub()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return tt(ts,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ee(ts,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Ee("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function vu(s){return Be(s,nc)}function Fh(s){return Be(s,Fo)}function CA(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=Dt(),o=Dt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ry(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ub()?8:uS(ze())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new XD;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(wo()<=Pt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Io(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(wo()<=Pt.DEBUG&&tt("QueryEngine","Query:",Io(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(wo()<=Pt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Io(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Nn(e))):U.resolve())}ys(t,e){if(tE(e))return U.resolve(null);let r=Nn(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=ep(e,null,"F"),r=Nn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Dt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const p=this.Ds(e,m);return this.Cs(e,p,c,g.readTime)?this.ys(t,ep(e,null,"F")):this.vs(t,p,e,g)}))))})))))}ws(t,e,r,o){return tE(e)||o.isEqual(pt.min())?U.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?U.resolve(null):(wo()<=Pt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Io(e)),this.vs(t,c,e,sS(o,zo)).next((m=>m)))}))}Ds(t,e){let r=new Zt(jS(t));return e.forEach(((o,u)=>{rc(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return wo()<=Pt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Io(e)),this.ps.getDocumentsMatchingQuery(t,e,Vn.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="LocalStore",$D=3e8;class JD{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new se(St),this.xs=new pr((u=>Ta(u)),ic),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function NA(s,t,e,r){return new JD(s,t,e,r)}async function VA(s,t){const e=ft(s);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Dt();for(const p of o){c.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}for(const p of u){m.push(p.batchId);for(const T of p.mutations)g=g.add(T.key)}return e.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function ZD(s,t){const e=ft(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,T){const E=p.batch,A=E.keys();let O=U.resolve();return A.forEach((Q=>{O=O.next((()=>T.getEntry(g,Q))).next((Z=>{const W=p.docVersions.get(Q);mt(W!==null,48541),Z.version.compareTo(W)<0&&(E.applyToRemoteDocument(Z,p),Z.isValidDocument()&&(Z.setReadTime(p.commitVersion),T.addEntry(Z)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Dt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function OA(s){const t=ft(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function WD(s,t){const e=ft(s),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((T,E)=>{const A=o.get(E);if(!A)return;m.push(e.Pi.removeMatchingKeys(u,T.removedDocuments,E).next((()=>e.Pi.addMatchingKeys(u,T.addedDocuments,E))));let O=A.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(E)!==null?O=O.withResumeToken(be.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,r)),o=o.insert(E,O),(function(Z,W,ht){return Z.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=$D?!0:ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0})(A,O,T)&&m.push(e.Pi.updateTargetData(u,O))}));let g=Dn(),p=Dt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(tN(u,c,t.documentUpdates).next((T=>{g=T.ks,p=T.qs}))),!r.isEqual(pt.min())){const T=e.Pi.getLastRemoteSnapshotVersion(u).next((E=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return U.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(e.Ms=o,u)))}function tN(s,t,e){let r=Dt(),o=Dt();return e.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let c=Dn();return e.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(pt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):tt(sy,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function eN(s,t){const e=ft(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=ha),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Df(s,t){const e=ft(s);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,U.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new cr(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function Zo(s,t,e){const r=ft(s),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!vs(c))throw c;tt(sy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function up(s,t,e){const r=ft(s);let o=pt.min(),u=Dt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,T){const E=ft(g),A=E.xs.get(T);return A!==void 0?U.resolve(E.Ms.get(A)):E.Pi.getTargetData(p,T)})(r,c,Nn(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:pt.min(),e?u:Dt()))).next((m=>(kA(r,BS(t),m),{documents:m,Qs:u})))))}function MA(s,t){const e=ft(s),r=ft(e.Pi),o=e.Ms.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,t).next((c=>c?c.target:null))))}function PA(s,t){const e=ft(s),r=e.Os.get(t)||pt.min();return e.persistence.runTransaction("Get new document changes","readonly",(o=>e.Ns.getAllFromCollectionGroup(o,t,sS(r,zo),Number.MAX_SAFE_INTEGER))).then((o=>(kA(e,t,o),o)))}function kA(s,t,e){let r=s.Os.get(t)||pt.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firestore_clients";function NE(s,t){return`${UA}_${s}_${t}`}const LA="firestore_mutations";function VE(s,t,e){let r=`${LA}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const zA="firestore_targets";function Dg(s,t){return`${zA}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="SharedClientState";class Nf{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static Ws(t,e,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new ot(o.error.code,o.error.message))),c?new Nf(t,e,o.state,u):(Ee(Vi,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Pu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new ot(r.error.code,r.error.message))),u?new Pu(t,r.state,o):(Ee(Vi,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Vf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Kp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=cS(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Vf(t,u):(Ee(Vi,`Failed to parse client data for instance '${t}': ${e}`),null)}}class ay{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new ay(e.clientId,e.onlineState):(Ee(Vi,`Failed to parse online state: ${t}`),null)}}class cp{constructor(){this.activeTargetIds=Kp()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ng{constructor(t,e,r,o,u){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new se(St),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=NE(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new cp),this.ro=new RegExp(`^${UA}_${c}_([^_]*)$`),this.io=new RegExp(`^${LA}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${zA}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const o=this.getItem(NE(this.persistenceKey,r));if(o){const u=Vf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(Dg(this.persistenceKey,t));if(o){const u=Pu.Ws(t,o);u&&(r=u.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Dg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach((o=>{this.Po(o)})),this.currentUser=t,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return tt(Vi,"READ",t,e),e}setItem(t,e){tt(Vi,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){tt(Vi,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(tt(Vi,"EVENT",e.key,e.newValue),e.key===this.eo)return void Ee("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=(function(u){let c=_n.ce;if(u!=null)try{const m=JSON.parse(u);mt(typeof m=="number",30636,{So:u}),c=m}catch(m){Ee(Vi,"Failed to read sequence number from WebStorage",m)}return c})(e.newValue);r!==_n.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const o=new Nf(this.currentUser,t,e,r),u=VE(this.persistenceKey,this.currentUser,t);this.setItem(u,o.Gs())}Po(t){const e=VE(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const o=Dg(this.persistenceKey,t),u=new Pu(t,e,r);this.setItem(o,u.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return Vf.Ws(r,e)}fo(t,e){const r=this.io.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Nf.Ws(new Ge(u),o,e)}yo(t,e){const r=this.so.exec(t),o=Number(r[1]);return Pu.Ws(o,e)}uo(t){return ay.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);tt(Vi,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Kp();return t.forEach(((r,o)=>{e=e.unionWith(o.activeTargetIds)})),e}}class BA{constructor(){this.Mo=new cp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new cp,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="ConnectivityMonitor";class ME{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(OE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(OE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function hp(){return Hh===null?Hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hh++,"0x"+Hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",iN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Hu?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=hp(),m=this.zo(t,e.toUriEncodedString());tt(Vg,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),T=Ia(p);return this.Jo(t,m,g,r,T).then((E=>(tt(Vg,`Received RPC '${t}' ${c}: `,E),E)),(E=>{throw Uo(Vg,`RPC '${t}' ${c} failed with error: `,E,"url: ",m,"request:",r),E}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=iN[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class aN extends rN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=hp();return new Promise(((m,g)=>{const p=new Xb;p.setWithCredentials(!0),p.listenOnce($b.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case $h.NO_ERROR:const E=p.getResponseJson();tt(en,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),m(E);break;case $h.TIMEOUT:tt(en,`RPC '${t}' ${c} timed out`),g(new ot($.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const A=p.getStatus();if(tt(en,`RPC '${t}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const Q=O==null?void 0:O.error;if(Q&&Q.status&&Q.message){const Z=(function(ht){const nt=ht.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(nt)>=0?nt:$.UNKNOWN})(Q.status);g(new ot(Z,Q.message))}else g(new ot($.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ot($.UNAVAILABLE,"Connection failed."));break;default:ut(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{tt(en,`RPC '${t}' ${c} completed.`)}}));const T=JSON.stringify(o);tt(en,`RPC '${t}' ${c} sending request:`,o),p.send(e,"POST",T,r,15)}))}T_(t,e,r){const o=hp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=Wb(),m=Zb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const T=u.join("");tt(en,`Creating RPC '${t}' stream ${o}: ${T}`,g);const E=c.createWebChannel(T,g);this.I_(E);let A=!1,O=!1;const Q=new sN({Yo:W=>{O?tt(en,`Not sending because RPC '${t}' stream ${o} is closed:`,W):(A||(tt(en,`Opening RPC '${t}' stream ${o} transport.`),E.open(),A=!0),tt(en,`RPC '${t}' stream ${o} sending:`,W),E.send(W))},Zo:()=>E.close()}),Z=(W,ht,nt)=>{W.listen(ht,(et=>{try{nt(et)}catch(_t){setTimeout((()=>{throw _t}),0)}}))};return Z(E,Tu.EventType.OPEN,(()=>{O||(tt(en,`RPC '${t}' stream ${o} transport opened.`),Q.o_())})),Z(E,Tu.EventType.CLOSE,(()=>{O||(O=!0,tt(en,`RPC '${t}' stream ${o} transport closed`),Q.a_(),this.E_(E))})),Z(E,Tu.EventType.ERROR,(W=>{O||(O=!0,Uo(en,`RPC '${t}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),Q.a_(new ot($.UNAVAILABLE,"The operation could not be completed")))})),Z(E,Tu.EventType.MESSAGE,(W=>{var ht;if(!O){const nt=W.data[0];mt(!!nt,16349);const et=nt,_t=(et==null?void 0:et.error)||((ht=et[0])==null?void 0:ht.error);if(_t){tt(en,`RPC '${t}' stream ${o} received error:`,_t);const At=_t.status;let Tt=(function(C){const M=Ve[C];if(M!==void 0)return tA(M)})(At),I=_t.message;Tt===void 0&&(Tt=$.INTERNAL,I="Unknown error status: "+At+" with message "+_t.message),O=!0,Q.a_(new ot(Tt,I)),E.close()}else tt(en,`RPC '${t}' stream ${o} received:`,nt),Q.u_(nt)}})),Z(m,Jb.STAT_EVENT,(W=>{W.stat===Fg.PROXY?tt(en,`RPC '${t}' stream ${o} detected buffering proxy`):W.stat===Fg.NOPROXY&&tt(en,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(){return typeof window<"u"?window:null}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(s){return new fD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="PersistentStream";class FA{constructor(t,e,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qA(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===$.RESOURCE_EXHAUSTED?(Ee(e.toString()),Ee("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new ot($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(PE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(tt(PE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oN extends FA{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=gD(this.serializer,t),r=(function(u){if(!("targetChange"in u))return pt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?pt.min():c.readTime?cn(c.readTime):pt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=rp(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=bf(g)?{documents:lA(u,g)}:{query:uA(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=iA(u,c.resumeToken);const p=np(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(pt.min())>0){m.readTime=Jo(u,c.snapshotVersion.toTimestamp());const p=np(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const r=yD(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=rp(this.serializer),e.removeTarget=t,this.q_(e)}}class lN extends FA{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=pD(t.writeResults,t.commitTime),r=cn(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=rp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>wf(this.serializer,r)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{}class cN extends uN{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ot($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,ip(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ot($.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,ip(e,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ot($.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hN{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ee(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class fN{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ra(this)&&(tt(Aa,"Restarting streams for network reachability change."),await(async function(g){const p=ft(g);p.Ea.add(4),await oc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await id(p)})(this))}))})),this.Ra=new hN(r,o)}}async function id(s){if(Ra(s))for(const t of s.da)await t(!0)}async function oc(s){for(const t of s.da)await t(!1)}function rd(s,t){const e=ft(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),uy(e)?ly(e):ol(e).O_()&&oy(e,t))}function Wo(s,t){const e=ft(s),r=ol(e);e.Ia.delete(t),r.O_()&&HA(e,t),e.Ia.size===0&&(r.O_()?r.L_():Ra(e)&&e.Ra.set("Unknown"))}function oy(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ol(s).Y_(t)}function HA(s,t){s.Va.Ue(t),ol(s).Z_(t)}function ly(s){s.Va=new lD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),ol(s).start(),s.Ra.ua()}function uy(s){return Ra(s)&&!ol(s).x_()&&s.Ia.size>0}function Ra(s){return ft(s).Ea.size===0}function GA(s){s.Va=void 0}async function dN(s){s.Ra.set("Online")}async function mN(s){s.Ia.forEach(((t,e)=>{oy(s,t)}))}async function gN(s,t){GA(s),uy(s)?(s.Ra.ha(t),ly(s)):s.Ra.set("Unknown")}async function pN(s,t,e){if(s.Ra.set("Online"),t instanceof nA&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){tt(Aa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Of(s,r)}else if(t instanceof sf?s.Va.Ze(t):t instanceof eA?s.Va.st(t):s.Va.tt(t),!e.isEqual(pt.min()))try{const r=await OA(s.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(p);T&&u.Ia.set(p,T.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(be.EMPTY_BYTE_STRING,T.snapshotVersion)),HA(u,g);const E=new cr(T.target,g,p,T.sequenceNumber);oy(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(s,e)}catch(r){tt(Aa,"Failed to raise snapshot:",r),await Of(s,r)}}async function Of(s,t,e){if(!vs(t))throw t;s.Ea.add(1),await oc(s),s.Ra.set("Offline"),e||(e=()=>OA(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{tt(Aa,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await id(s)}))}function KA(s,t){return t().catch((e=>Of(s,e,t)))}async function al(s){const t=ft(s),e=ps(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ha;for(;yN(t);)try{const o=await eN(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,_N(t,o)}catch(o){await Of(t,o)}QA(t)&&YA(t)}function yN(s){return Ra(s)&&s.Ta.length<10}function _N(s,t){s.Ta.push(t);const e=ps(s);e.O_()&&e.X_&&e.ea(t.mutations)}function QA(s){return Ra(s)&&!ps(s).x_()&&s.Ta.length>0}function YA(s){ps(s).start()}async function vN(s){ps(s).ra()}async function TN(s){const t=ps(s);for(const e of s.Ta)t.ea(e.mutations)}async function EN(s,t,e){const r=s.Ta.shift(),o=Xp.from(r,t,e);await KA(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await al(s)}async function bN(s,t){t&&ps(s).X_&&await(async function(r,o){if((function(c){return sD(c)&&c!==$.ABORTED})(o.code)){const u=r.Ta.shift();ps(r).B_(),await KA(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await al(r)}})(s,t),QA(s)&&YA(s)}async function kE(s,t){const e=ft(s);e.asyncQueue.verifyOperationInProgress(),tt(Aa,"RemoteStore received new credentials");const r=Ra(e);e.Ea.add(3),await oc(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await id(e)}async function fp(s,t){const e=ft(s);t?(e.Ea.delete(2),await id(e)):t||(e.Ea.add(2),await oc(e),e.Ra.set("Unknown"))}function ol(s){return s.ma||(s.ma=(function(e,r,o){const u=ft(e);return u.sa(),new oN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:dN.bind(null,s),t_:mN.bind(null,s),r_:gN.bind(null,s),H_:pN.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),uy(s)?ly(s):s.Ra.set("Unknown")):(await s.ma.stop(),GA(s))}))),s.ma}function ps(s){return s.fa||(s.fa=(function(e,r,o){const u=ft(e);return u.sa(),new lN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:vN.bind(null,s),r_:bN.bind(null,s),ta:TN.bind(null,s),na:EN.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await al(s)):(await s.fa.stop(),s.Ta.length>0&&(tt(Aa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,m=new cy(t,e,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(s,t){if(Ee("AsyncQueue",`${t}: ${s}`),vs(s))return new ot($.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(t){return new Oo(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||at.comparator(e.key,r.key):(e,r)=>at.comparator(e.key,r.key),this.keyedMap=Eu(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Oo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.ga=new se(at.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ut(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class tl{constructor(t,e,r,o,u,c,m,g,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new tl(t,e,Oo.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class AN{constructor(){this.queries=LE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=ft(e),u=o.queries;o.queries=LE(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ot($.ABORTED,"Firestore shutting down"))}}function LE(){return new pr((s=>zS(s)),Xf)}async function wN(s,t){const e=ft(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new SN,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=hy(c,`Initialization of query '${Io(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&fy(e)}async function IN(s,t){const e=ft(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function RN(s,t){const e=ft(s);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&fy(e)}function xN(s,t,e){const r=ft(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function fy(s){s.Ca.forEach((t=>{t.next()}))}var dp,zE;(zE=dp||(dp={})).Ma="default",zE.Cache="cache";class CN{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new tl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=tl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t){this.key=t}}class $A{constructor(t){this.key=t}}class DN{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Dt(),this.mutatedKeys=Dt(),this.eu=jS(t),this.tu=new Oo(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new UE,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((T,E)=>{const A=o.get(T),O=rc(this.query,E)?E:null,Q=!!A&&this.mutatedKeys.has(A.key),Z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let W=!1;A&&O?A.data.isEqual(O.data)?Q!==Z&&(r.track({type:3,doc:O}),W=!0):this.su(A,O)||(r.track({type:2,doc:O}),W=!0,(g&&this.eu(O,g)>0||p&&this.eu(O,p)<0)&&(m=!0)):!A&&O?(r.track({type:0,doc:O}),W=!0):A&&!O&&(r.track({type:1,doc:A}),W=!0,(g||p)&&(m=!0)),W&&(O?(c=c.add(O),u=Z?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((T,E)=>(function(O,Q){const Z=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut(20277,{Rt:W})}};return Z(O)-Z(Q)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new tl(this.query,t.tu,u,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new UE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Dt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new $A(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new XA(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=Dt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ll="SyncEngine";class NN{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class VN{constructor(t){this.key=t,this.hu=!1}}class ON{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new pr((m=>zS(m)),Xf),this.Iu=new Map,this.Eu=new Set,this.du=new se(at.comparator),this.Au=new Map,this.Ru=new ey,this.Vu={},this.mu=new Map,this.fu=Sa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MN(s,t,e=!0){const r=sd(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await JA(r,t,e,!0),o}async function PN(s,t){const e=sd(s);await JA(e,t,!0,!1)}async function JA(s,t,e,r){const o=await Df(s.localStore,Nn(t)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await dy(s,t,u,c==="current",o.resumeToken)),s.isPrimaryClient&&e&&rd(s.remoteStore,o),m}async function dy(s,t,e,r,o){s.pu=(E,A,O)=>(async function(Z,W,ht,nt){let et=W.view.ru(ht);et.Cs&&(et=await up(Z.localStore,W.query,!1).then((({documents:I})=>W.view.ru(I,et))));const _t=nt&&nt.targetChanges.get(W.targetId),At=nt&&nt.targetMismatches.get(W.targetId)!=null,Tt=W.view.applyChanges(et,Z.isPrimaryClient,_t,At);return mp(Z,W.targetId,Tt.au),Tt.snapshot})(s,E,A,O);const u=await up(s.localStore,t,!0),c=new DN(t,u.Qs),m=c.ru(u.documents),g=ac.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);mp(s,e,p.au);const T=new NN(t,e,c);return s.Tu.set(t,T),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),p.snapshot}async function kN(s,t,e){const r=ft(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!Xf(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Zo(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Wo(r.remoteStore,o.targetId),el(r,o.targetId)})).catch(_s)):(el(r,o.targetId),await Zo(r.localStore,o.targetId,!0))}async function UN(s,t){const e=ft(s),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Wo(e.remoteStore,r.targetId))}async function LN(s,t,e){const r=yy(s);try{const o=await(function(c,m){const g=ft(c),p=Jt.now(),T=m.reduce(((O,Q)=>O.add(Q.key)),Dt());let E,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let Q=Dn(),Z=Dt();return g.Ns.getEntries(O,T).next((W=>{Q=W,Q.forEach(((ht,nt)=>{nt.isValidDocument()||(Z=Z.add(ht))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,Q))).next((W=>{E=W;const ht=[];for(const nt of m){const et=iD(nt,E.get(nt.key).overlayedDocument);et!=null&&ht.push(new yr(nt.key,et,DS(et.value.mapValue),sn.exists(!0)))}return g.mutationQueue.addMutationBatch(O,p,ht,m)})).next((W=>{A=W;const ht=W.applyToLocalDocumentSet(E,Z);return g.documentOverlayCache.saveOverlays(O,W.batchId,ht)}))})).then((()=>({batchId:A.batchId,changes:FS(E)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new se(St)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,e),await Es(r,o.changes),await al(r.remoteStore)}catch(o){const u=hy(o,"Failed to persist write");e.reject(u)}}async function ZA(s,t){const e=ft(s);try{const r=await WD(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?mt(c.hu,14607):o.removedDocuments.size>0&&(mt(c.hu,42227),c.hu=!1))})),await Es(e,r,t)}catch(r){await _s(r)}}function BE(s,t,e){const r=ft(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=ft(c);g.onlineState=m;let p=!1;g.queries.forEach(((T,E)=>{for(const A of E.Sa)A.va(m)&&(p=!0)})),p&&fy(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function zN(s,t,e){const r=ft(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new se(at.comparator);c=c.insert(u,pe.newNoDocument(u,pt.min()));const m=Dt().add(u),g=new sc(pt.min(),new Map,new se(St),c,m);await ZA(r,g),r.du=r.du.remove(u),r.Au.delete(t),py(r)}else await Zo(r.localStore,t,!1).then((()=>el(r,t,e))).catch(_s)}async function BN(s,t){const e=ft(s),r=t.batch.batchId;try{const o=await ZD(e.localStore,t);gy(e,r,null),my(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Es(e,o)}catch(o){await _s(o)}}async function jN(s,t,e){const r=ft(s);try{const o=await(function(c,m){const g=ft(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let T;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(mt(E!==null,37113),T=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T))).next((()=>g.localDocuments.getDocuments(p,T)))}))})(r.localStore,t);gy(r,t,e),my(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Es(r,o)}catch(o){await _s(o)}}function my(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function gy(s,t,e){const r=ft(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function el(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),e&&s.Pu.yu(r,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||WA(s,r)}))}function WA(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(Wo(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),py(s))}function mp(s,t,e){for(const r of e)r instanceof XA?(s.Ru.addReference(r.key,t),qN(s,r)):r instanceof $A?(tt(ll,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||WA(s,r.key)):ut(19791,{wu:r})}function qN(s,t){const e=t.key,r=e.path.canonicalString();s.du.get(e)||s.Eu.has(r)||(tt(ll,"New document in limbo: "+e),s.Eu.add(r),py(s))}function py(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new at(Gt.fromString(t)),r=s.fu.next();s.Au.set(r,new VN(e)),s.du=s.du.insert(e,r),rd(s.remoteStore,new cr(Nn(Yf(e.path)),r,"TargetPurposeLimboResolution",_n.ce))}}async function Es(s,t,e){const r=ft(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((p=>{var T;if((p||e)&&r.isPrimaryClient){const E=p?!p.fromCache:(T=e==null?void 0:e.targetChanges.get(g.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=ry.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const T=ft(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>U.forEach(p,(A=>U.forEach(A.Es,(O=>T.persistence.referenceDelegate.addReference(E,A.targetId,O))).next((()=>U.forEach(A.ds,(O=>T.persistence.referenceDelegate.removeReference(E,A.targetId,O)))))))))}catch(E){if(!vs(E))throw E;tt(sy,"Failed to update sequence numbers: "+E)}for(const E of p){const A=E.targetId;if(!E.fromCache){const O=T.Ms.get(A),Q=O.snapshotVersion,Z=O.withLastLimboFreeSnapshotVersion(Q);T.Ms=T.Ms.insert(A,Z)}}})(r.localStore,u))}async function FN(s,t){const e=ft(s);if(!e.currentUser.isEqual(t)){tt(ll,"User change. New user:",t.toKey());const r=await VA(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ot($.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Es(e,r.Ls)}}function HN(s,t){const e=ft(s),r=e.Au.get(t);if(r&&r.hu)return Dt().add(r.key);{let o=Dt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function GN(s,t){const e=ft(s),r=await up(e.localStore,t.query,!0),o=t.view.cu(r);return e.isPrimaryClient&&mp(e,t.targetId,o.au),o}async function KN(s,t){const e=ft(s);return PA(e.localStore,t).then((r=>Es(e,r)))}async function QN(s,t,e,r){const o=ft(s),u=await(function(m,g){const p=ft(m),T=ft(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(E=>T.er(E,g).next((A=>A?p.localDocuments.getDocuments(E,A):U.resolve(null)))))})(o.localStore,t);u!==null?(e==="pending"?await al(o.remoteStore):e==="acknowledged"||e==="rejected"?(gy(o,t,r||null),my(o,t),(function(m,g){ft(ft(m).mutationQueue).ir(g)})(o.localStore,t)):ut(6720,"Unknown batchState",{Su:e}),await Es(o,u)):tt(ll,"Cannot apply mutation batch with id: "+t)}async function YN(s,t){const e=ft(s);if(sd(e),yy(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await jE(e,r.toArray());e.gu=!0,await fp(e.remoteStore,!0);for(const u of o)rd(e.remoteStore,u)}else if(t===!1&&e.gu!==!1){const r=[];let o=Promise.resolve();e.Iu.forEach(((u,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(el(e,c),Zo(e.localStore,c,!0)))),Wo(e.remoteStore,c)})),await o,await jE(e,r),(function(c){const m=ft(c);m.Au.forEach(((g,p)=>{Wo(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new se(at.comparator)})(e),e.gu=!1,await fp(e.remoteStore,!1)}}async function jE(s,t,e){const r=ft(s),o=[],u=[];for(const c of t){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await Df(r.localStore,Nn(g[0]));for(const p of g){const T=r.Tu.get(p),E=await GN(r,T);E.snapshot&&u.push(E.snapshot)}}else{const p=await MA(r.localStore,c);m=await Df(r.localStore,p),await dy(r,t1(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function t1(s){return LS(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function XN(s){return(function(e){return ft(ft(e).persistence).Ts()})(ft(s).localStore)}async function $N(s,t,e,r){const o=ft(s);if(o.gu)return void tt(ll,"Ignoring unexpected query state notification.");const u=o.Iu.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const c=await PA(o.localStore,BS(u[0])),m=sc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",be.EMPTY_BYTE_STRING);await Es(o,c,m);break}case"rejected":await Zo(o.localStore,t,!0),el(o,t,r);break;default:ut(64155,e)}}async function JN(s,t,e){const r=sd(s);if(r.gu){for(const o of t){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){tt(ll,"Adding an already active target "+o);continue}const u=await MA(r.localStore,o),c=await Df(r.localStore,u);await dy(r,t1(u),c.targetId,!1,c.resumeToken),rd(r.remoteStore,c)}for(const o of e)r.Iu.has(o)&&await Zo(r.localStore,o,!1).then((()=>{Wo(r.remoteStore,o),el(r,o)})).catch(_s)}}function sd(s){const t=ft(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=ZA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zN.bind(null,t),t.Pu.H_=RN.bind(null,t.eventManager),t.Pu.yu=xN.bind(null,t.eventManager),t}function yy(s){const t=ft(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jN.bind(null,t),t}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=nd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return NA(this.persistence,new DA,t.initialUser,this.serializer)}Cu(t){return new ny(ed.mi,this.serializer)}Du(t){return new BA}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class ZN extends Yu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){mt(this.persistence.referenceDelegate instanceof Cf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AA(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new ny((r=>Cf.mi(r,e)),this.serializer)}}class e1 extends Yu{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await yy(this.xu.syncEngine),await al(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return NA(this.persistence,new DA,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new AA(r,t.asyncQueue,e)}Mu(t,e){const r=new sC(e,this.persistence);return new rC(t.asyncQueue,r)}Cu(t){const e=CA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new iy(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,jA(),of(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new BA}}class WN extends e1{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Ng&&(this.sharedClientState.syncEngine={Co:QN.bind(null,e),vo:$N.bind(null,e),Fo:JN.bind(null,e),Ts:XN.bind(null,e),Do:KN.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await YN(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const e=jA();if(!Ng.v(e))throw new ot($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=CA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ng(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Xu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>BE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FN.bind(null,this.syncEngine),await fp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new AN})()}createDatastore(t){const e=nd(t.databaseInfo.databaseId),r=(function(u){return new aN(u)})(t.databaseInfo);return(function(u,c,m,g){return new cN(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,m){return new fN(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>BE(this.syncEngine,e,0)),(function(){return ME.v()?new ME:new nN})())}createSyncEngine(t,e){return(function(o,u,c,m,g,p,T){const E=new ON(o,u,c,m,g,p);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(o){const u=ft(o);tt(Aa,"RemoteStore shutting down."),u.Ea.add(5),await oc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Xu.provider={build:()=>new Xu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ee("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class eV{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=Ge.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{tt(ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(tt(ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=hy(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Og(s,t){s.asyncQueue.verifyOperationInProgress(),tt(ys,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await VA(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function qE(s,t){s.asyncQueue.verifyOperationInProgress();const e=await nV(s);tt(ys,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((r=>kE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>kE(t.remoteStore,o))),s._onlineComponents=t}async function nV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(ys,"Using user provided OfflineComponentProvider");try{await Og(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Uo("Error using user provided cache. Falling back to memory cache: "+e),await Og(s,new Yu)}}else tt(ys,"Using default OfflineComponentProvider"),await Og(s,new ZN(void 0));return s._offlineComponents}async function n1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(ys,"Using user provided OnlineComponentProvider"),await qE(s,s._uninitializedComponentsProvider._online)):(tt(ys,"Using default OnlineComponentProvider"),await qE(s,new Xu))),s._onlineComponents}function iV(s){return n1(s).then((t=>t.syncEngine))}async function FE(s){const t=await n1(s),e=t.eventManager;return e.onListen=MN.bind(null,t.syncEngine),e.onUnlisten=kN.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=PN.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=UN.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="firestore.googleapis.com",GE=!0;class KE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=r1,this.ssl=GE}else this.host=t.host,this.ssl=t.ssl??GE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=vA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<SA)throw new ot($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}eC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i1(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ad{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Gx;switch(r.type){case"firstParty":return new Xx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ot($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=HE.get(e);r&&(tt("ComponentProvider","Removing Datastore"),HE.delete(e),r.terminate())})(this),Promise.resolve()}}function rV(s,t,e,r={}){var p;s=ki(s,ad);const o=Ia(t),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${e}`;o&&(vp(`https://${m}`),ob("Firestore",!0)),u.host!==r1&&u.host!==m&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!ds(g,c)&&(s._setSettings(g),r.mockUserToken)){let T,E;if(typeof r.mockUserToken=="string")T=r.mockUserToken,E=Ge.MOCK_USER;else{T=_I(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new ot($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ge(A)}s._authCredentials=new Kx(new eS(T,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new od(this.firestore,t,this._query)}}class Me{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Me(this.firestore,t,this._key)}toJSON(){return{type:Me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(ec(e,Me._jsonSchema))return new Me(t,r||null,new at(Gt.fromString(e.referencePath)))}}Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:Oe("string",Me._jsonSchemaVersion),referencePath:Oe("string")};class fs extends od{constructor(t,e,r){super(t,e,Yf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Me(this.firestore,null,new at(t))}withConverter(t){return new fs(this.firestore,t,this._path)}}function QE(s,t,...e){if(s=We(s),iS("collection","path",t),s instanceof ad){const r=Gt.fromString(t,...e);return PT(r),new fs(s,null,r)}{if(!(s instanceof Me||s instanceof fs))throw new ot($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Gt.fromString(t,...e));return PT(r),new fs(s.firestore,null,r)}}function ma(s,t,...e){if(s=We(s),arguments.length===1&&(t=Op.newId()),iS("doc","path",t),s instanceof ad){const r=Gt.fromString(t,...e);return MT(r),new Me(s,null,new at(r))}{if(!(s instanceof Me||s instanceof fs))throw new ot($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Gt.fromString(t,...e));return MT(r),new Me(s.firestore,s instanceof fs?s.converter:null,new at(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="AsyncQueue";class XE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qA(this,"async_queue_retry"),this._c=()=>{const r=of();r&&tt(YE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=of();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=of();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!vs(t))throw t;tt(YE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ee("INTERNAL UNHANDLED ERROR: ",$E(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=cy.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ut(47125,{Pc:$E(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function $E(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(s){return(function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class wa extends ad{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new XE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new XE(t),this._firestoreClient=void 0,await t}}}function sV(s,t,e){e||(e=Hu);const r=kf(s,"firestore");if(r.isInitialized(e)){const o=r.getImmediate({identifier:e}),u=r.getOptions(e);if(ds(u,t))return o;throw new ot($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ot($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<SA)throw new ot($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Ia(t.host)&&vp(t.host),r.initialize({options:t,instanceIdentifier:e})}function aV(s,t){const e=gb(),r=Hu,o=kf(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=pI("firestore");u&&rV(o,...u)}return o}function s1(s){if(s._terminated)throw new ot($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||oV(s),s._firestoreClient}function oV(s){var r,o,u;const t=s._freezeSettings(),e=(function(m,g,p,T){return new OC(m,g,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,i1(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new eV(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Kn(be.fromBase64String(t))}catch(e){throw new ot($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Kn(be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ec(t,Kn._jsonSchema))return Kn.fromBase64String(t.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Oe("string",Kn._jsonSchemaVersion),bytes:Oe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ot($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ot($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ot($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return St(this._lat,t._lat)||St(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(t){if(ec(t,Ui._jsonSchema))return new Ui(t.latitude,t.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Oe("string",Ui._jsonSchemaVersion),latitude:Oe("number"),longitude:Oe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ec(t,Li._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Li(t.vectorValues);throw new ot($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Oe("string",Li._jsonSchemaVersion),vectorValues:Oe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=/^__.*__$/;class uV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new yr(t,this.data,this.fieldMask,e,this.fieldTransforms):new sl(t,this.data,e,this.fieldTransforms)}}class a1{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new yr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function o1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut(40011,{Ac:s})}}class _y{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new _y({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Mf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(o1(this.Ac)&&lV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class cV{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||nd(t)}Cc(t,e,r,o=!1){return new _y({Ac:t,methodName:e,Dc:r,path:de.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vy(s){const t=s._freezeSettings(),e=nd(s._databaseId);return new cV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function l1(s,t,e,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,t,e,o);Ey("Data must be an object, but it was:",c,r);const m=u1(r,c);let g,p;if(u.merge)g=new vn(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const E of u.mergeFields){const A=gp(t,E,e);if(!c.contains(A))throw new ot($.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);h1(T,A)||T.push(A)}g=new vn(T),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new uV(new rn(m),g,p)}class cd extends ud{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof cd}}class Ty extends ud{_toFieldTransform(t){return new $S(t.path,new Yo)}isEqual(t){return t instanceof Ty}}function hV(s,t,e,r){const o=s.Cc(1,t,e);Ey("Data must be an object, but it was:",o,r);const u=[],c=rn.empty();Ts(r,((g,p)=>{const T=by(t,g,e);p=We(p);const E=o.yc(T);if(p instanceof cd)u.push(T);else{const A=hd(p,E);A!=null&&(u.push(T),c.set(T,A))}}));const m=new vn(u);return new a1(c,m,o.fieldTransforms)}function fV(s,t,e,r,o,u){const c=s.Cc(1,t,e),m=[gp(t,r,e)],g=[o];if(u.length%2!=0)throw new ot($.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(gp(t,u[A])),g.push(u[A+1]);const p=[],T=rn.empty();for(let A=m.length-1;A>=0;--A)if(!h1(p,m[A])){const O=m[A];let Q=g[A];Q=We(Q);const Z=c.yc(O);if(Q instanceof cd)p.push(O);else{const W=hd(Q,Z);W!=null&&(p.push(O),T.set(O,W))}}const E=new vn(p);return new a1(T,E,c.fieldTransforms)}function hd(s,t){if(c1(s=We(s)))return Ey("Unsupported field value:",t,s),u1(s,t);if(s instanceof ud)return(function(r,o){if(!o1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=hd(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JC(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Jt.fromDate(r);return{timestampValue:Jo(o.serializer,u)}}if(r instanceof Jt){const u=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jo(o.serializer,u)}}if(r instanceof Ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:iA(o.serializer,r._byteString)};if(r instanceof Me){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Zp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Li)return(function(c,m){return{mapValue:{fields:{[qp]:{stringValue:Fp},[Ho]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Qp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Mp(r)}`)})(s,t)}function u1(s,t){const e={};return ES(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ts(s,((r,o)=>{const u=hd(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function c1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Jt||s instanceof Ui||s instanceof Kn||s instanceof Me||s instanceof ud||s instanceof Li)}function Ey(s,t,e){if(!c1(e)||!rS(e)){const r=Mp(e);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function gp(s,t,e){if((t=We(t))instanceof ld)return t._internalPath;if(typeof t=="string")return by(s,t);throw Mf("Field path arguments must be of type string or ",s,!1,void 0,e)}const dV=new RegExp("[~\\*/\\[\\]]");function by(s,t,e){if(t.search(dV)>=0)throw Mf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new ld(...t.split("."))._internalPath}catch{throw Mf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Mf(s,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new ot($.INVALID_ARGUMENT,m+s+g)}function h1(s,t){return s.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new mV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(d1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class mV extends f1{data(){return super.data()}}function d1(s,t){return typeof t=="string"?by(s,t):t instanceof ld?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ot($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pV{convertValue(t,e="none"){switch(ms(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(mr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ut(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Ts(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){var r,o,u;const e=(u=(o=(r=t.fields)==null?void 0:r[Ho].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>fe(c.doubleValue)));return new Li(e)}convertGeoPoint(t){return new Ui(fe(t.latitude),fe(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Gf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Fu(t));default:return null}}convertTimestamp(t){const e=dr(t);return new Jt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Gt.fromString(t);mt(dA(r),9688,{name:t});const o=new va(r.get(1),r.get(3)),u=new at(r.popFirst(5));return o.isEqual(e)||Ee(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(s,t,e){let r;return r=s?s.toFirestore(t):t,r}class Au{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ga extends f1{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(d1("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ga._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Oe("string",ga._jsonSchemaVersion),bundleSource:Oe("string","DocumentSnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class lf extends ga{data(t={}){return super.data(t)}}class Mo{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Au(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new lf(this._firestore,this._userDataWriter,r.key,r,new Au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ot($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new lf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Au(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new lf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Au(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,T=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:yV(m.type),doc:g,oldIndex:p,newIndex:T}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Mo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function yV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut(61501,{type:s})}}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:Oe("string",Mo._jsonSchemaVersion),bundleSource:Oe("string","QuerySnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class g1 extends pV{constructor(t){super(),this.firestore=t}convertBytes(t){return new Kn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Me(this.firestore,null,e)}}function _V(s,t,e){s=ki(s,Me);const r=ki(s.firestore,wa),o=m1(s.converter,t);return fd(r,[l1(vy(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,sn.none())])}function p1(s,t,e,...r){s=ki(s,Me);const o=ki(s.firestore,wa),u=vy(o);let c;return c=typeof(t=We(t))=="string"||t instanceof ld?fV(u,"updateDoc",s._key,t,e,r):hV(u,"updateDoc",s._key,t),fd(o,[c.toMutation(s._key,sn.exists(!0))])}function y1(s){return fd(ki(s.firestore,wa),[new Zf(s._key,sn.none())])}function vV(s,t){const e=ki(s.firestore,wa),r=ma(s),o=m1(s.converter,t);return fd(e,[l1(vy(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then((()=>r))}function _1(s,...t){var g,p,T;s=We(s);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||JE(t[r])||(e=t[r++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(JE(t[r])){const E=t[r];t[r]=(g=E.next)==null?void 0:g.bind(E),t[r+1]=(p=E.error)==null?void 0:p.bind(E),t[r+2]=(T=E.complete)==null?void 0:T.bind(E)}let u,c,m;if(s instanceof Me)c=ki(s.firestore,wa),m=Yf(s._key.path),u={next:E=>{t[r]&&t[r](TV(c,s,E))},error:t[r+1],complete:t[r+2]};else{const E=ki(s,od);c=ki(E.firestore,wa),m=E._query;const A=new g1(c);u={next:O=>{t[r]&&t[r](new Mo(c,A,E,O))},error:t[r+1],complete:t[r+2]},gV(s._query)}return(function(A,O,Q,Z){const W=new tV(Z),ht=new CN(O,W,Q);return A.asyncQueue.enqueueAndForget((async()=>wN(await FE(A),ht))),()=>{W.Nu(),A.asyncQueue.enqueueAndForget((async()=>IN(await FE(A),ht)))}})(s1(c),m,o,u)}function fd(s,t){return(function(r,o){const u=new cs;return r.asyncQueue.enqueueAndForget((async()=>LN(await iV(r),o,u))),u.promise})(s1(s),t)}function TV(s,t,e){const r=e.docs.get(t._key),o=new g1(s);return new ga(s,o,t._key,r,new Au(e.hasPendingWrites,e.fromCache),t.converter)}class EV{constructor(t){let e;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=wV(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function bV(s){return new EV(s)}class SV{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Xu.provider,this._offlineComponentProvider={build:e=>new e1(e,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class AV{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Xu.provider,this._offlineComponentProvider={build:e=>new WN(e,t==null?void 0:t.cacheSizeBytes)}}}function wV(s){return new SV(s==null?void 0:s.forceOwnership)}function IV(){return new AV}function pp(){return new Ty("serverTimestamp")}(function(t,e=!0){(function(o){rl=o})(nl),Po(new pa("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new wa(new Qx(r.getProvider("auth-internal")),new $x(c,r.getProvider("app-check-internal")),(function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ot($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(p.options.projectId,T)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ls(DT,NT,t),ls(DT,NT,"esm2020")})();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xV=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),ZE=s=>{const t=xV(s);return t.charAt(0).toUpperCase()+t.slice(1)},v1=(...s)=>s.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),CV=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=$t.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>$t.createElement("svg",{ref:g,...DV,width:t,height:t,stroke:s,strokeWidth:r?Number(e)*24/Number(t):e,className:v1("lucide",o),...!u&&!CV(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,T])=>$t.createElement(p,T)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=(s,t)=>{const e=$t.forwardRef(({className:r,...o},u)=>$t.createElement(NV,{ref:u,iconNode:t,className:v1(`lucide-${RV(ZE(s))}`,`lucide-${s}`,r),...o}));return e.displayName=ZE(s),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],OV=ji("circle-check",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],PV=ji("circle-x",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],UV=ji("image",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sy=ji("loader-circle",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],BV=ji("log-out",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ay=ji("play",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],T1=ji("plus",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],HV=ji("trash-2",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],yp=ji("trophy",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],QV=ji("users",KV),YV={apiKey:"AIzaSyAYtsSzPBLdZ6gnsFJZvyXEwBvq5xxsahY",authDomain:"mohoot-007.firebaseapp.com",projectId:"mohoot-007",storageBucket:"mohoot-007.firebasestorage.app",messagingSenderId:"277114765994",appId:"1:277114765994:web:5d5beff3bb4be86d8dc6d3"},XV=typeof __firebase_config<"u"?JSON.parse(__firebase_config):YV,E1=mb(XV),Mg=Fx(E1),ua=sV(E1,{localCache:bV({tabManager:IV()})}),Gh=typeof __app_id<"u"?__app_id:"mohoot-prod",b1=[{id:0,color:"bg-[#EA4335]",label:"Triangle"},{id:1,color:"bg-[#4285F4]",label:"Diamond"},{id:2,color:"bg-[#FBBC04]",label:"Circle"},{id:3,color:"bg-[#34A853]",label:"Square"}],WE=[{bg:"bg-rose-500",shadow:"shadow-rose-900/20",badge:"bg-rose-700/20 text-white",text:"text-white"},{bg:"bg-orange-400",shadow:"shadow-orange-900/20",badge:"bg-orange-700/20 text-white",text:"text-white"},{bg:"bg-emerald-500",shadow:"shadow-emerald-900/20",badge:"bg-emerald-700/20 text-white",text:"text-white"},{bg:"bg-blue-500",shadow:"shadow-blue-900/20",badge:"bg-blue-700/20 text-white",text:"text-white"},{bg:"bg-yellow-400",shadow:"shadow-yellow-900/20",badge:"bg-yellow-600/20 text-slate-900",text:"text-slate-900"}],$V=({quiz:s,index:t,onHost:e,onEdit:r})=>{var g;const o=WE[t%WE.length],[u,c]=$t.useState(!1),m=()=>{c(!0),setTimeout(()=>c(!1),2e3)};return j.jsxs("div",{onDoubleClick:()=>r(s),onClick:m,className:`${o.bg} ${o.shadow} h-64 rounded-3xl p-6 relative flex flex-col items-center justify-between shadow-xl cursor-pointer hover:scale-[1.02] transition-transform select-none group`,children:[j.jsxs("div",{className:`absolute top-4 left-4 ${o.badge} backdrop-blur-md font-black px-3 py-1 rounded-xl text-xs uppercase tracking-wider`,children:[((g=s.questions)==null?void 0:g.length)||0," Qs"]}),j.jsx("div",{className:"flex-1 flex items-center justify-center w-full text-center mt-4 px-2",children:j.jsx("h3",{className:`font-black text-3xl leading-none drop-shadow-md break-words line-clamp-3 ${o.text}`,children:s.title||"Untitled"})}),j.jsxs("button",{onClick:p=>{p.stopPropagation(),e(s)},className:"bg-white text-slate-900 w-full py-4 rounded-2xl font-black text-lg shadow-lg flex items-center justify-center gap-2 hover:bg-slate-50 active:scale-95 transition-all",children:[j.jsx(Ay,{size:24,fill:"currentColor"})," HOST"]}),u&&j.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] rounded-3xl flex items-center justify-center animate-in fade-in duration-200 z-10",children:j.jsx("span",{className:"text-white font-bold text-sm",children:"Double-click to Edit"})})]})},JV=({user:s,onSignOut:t})=>j.jsxs("nav",{className:"bg-slate-900/80 backdrop-blur-md border-b border-white/5 px-8 py-4 flex justify-between items-center sticky top-0 z-20",children:[j.jsxs("div",{className:"font-black text-2xl tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400",children:["Mohoot",j.jsx("span",{className:"text-white",children:"!"})]}),j.jsxs("div",{className:"flex items-center gap-4",children:[j.jsxs("span",{className:"text-xs font-mono bg-slate-800 px-3 py-1 rounded text-slate-400 border border-white/5",children:[s==null?void 0:s.uid.slice(0,6),"..."]}),j.jsx("button",{onClick:t,className:"p-2 text-slate-500 hover:text-rose-400 transition",title:"Sign Out",children:j.jsx(BV,{size:20})})]})]}),dd=({onClose:s})=>j.jsxs("div",{className:"fixed top-0 left-0 right-0 p-6 flex justify-between items-center z-50 pointer-events-none",children:[j.jsxs("div",{className:"font-black text-2xl tracking-tighter text-white/10 pointer-events-auto select-none",children:["Mohoot",j.jsx("span",{className:"text-white/20",children:"!"})]}),j.jsx("div",{className:"pointer-events-auto group relative",children:j.jsx("button",{onClick:s,className:"bg-slate-800/80 backdrop-blur border border-slate-700 p-3 rounded-full text-slate-400 hover:bg-rose-500 hover:text-white hover:border-rose-500 shadow-xl transition-all",children:j.jsx(PV,{size:24})})})]}),ZV=({pin:s,players:t,onStart:e,onClose:r})=>j.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center relative overflow-hidden",children:[j.jsx(dd,{onClose:r}),j.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),j.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-xl p-10 rounded-[3rem] shadow-2xl border border-slate-700 flex flex-col items-center text-center relative z-10 mb-10",children:[j.jsx("div",{className:"text-sm font-black text-indigo-400 uppercase tracking-[0.4em] mb-4",children:"Game PIN"}),j.jsx("div",{className:"text-[8rem] font-black leading-none text-white tabular-nums tracking-tighter drop-shadow-2xl",children:s}),j.jsxs("div",{className:"mt-8 flex items-center gap-4 text-slate-400 font-bold",children:[j.jsx(QV,{size:20})," ",t.length," Players Joined"]})]}),j.jsx("div",{className:"flex flex-wrap gap-4 justify-center max-w-5xl mb-20 relative z-10",children:t.map((o,u)=>j.jsx("div",{className:"bg-slate-800 px-6 py-3 rounded-xl shadow-lg border border-slate-700 font-black text-lg text-cyan-400 animate-in zoom-in",children:o.nickname},u))}),j.jsx("div",{className:"fixed bottom-10 z-20",children:j.jsx("button",{disabled:t.length===0,onClick:e,className:`px-12 py-5 rounded-2xl font-black text-2xl shadow-xl transition-all ${t.length>0?"bg-indigo-600 text-white hover:scale-105":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:"Start Game"})})]}),WV=({snap:s,players:t,timeLeft:e,onSkip:r,onClose:o})=>{const u=s.quizSnapshot.questions[s.currentQuestionIndex];return j.jsxs("div",{className:"min-h-screen bg-slate-900 relative flex flex-col",children:[j.jsx(dd,{onClose:o}),j.jsxs("div",{className:"flex-1 flex flex-col items-center pt-24 px-6 animate-in fade-in",children:[j.jsxs("div",{className:"w-full flex justify-between items-center max-w-6xl mb-8",children:[j.jsxs("div",{className:"text-indigo-400 font-bold text-xl",children:["Q ",s.currentQuestionIndex+1]}),j.jsx("div",{className:"text-5xl font-black text-white bg-slate-800 px-8 py-2 rounded-2xl shadow-lg border border-slate-700",children:e}),j.jsxs("div",{className:"text-slate-400 font-bold text-xl",children:[t.filter(c=>c.lastAnswerIdx!==void 0).length," Answers"]})]}),j.jsxs("div",{className:"flex-1 w-full max-w-5xl flex flex-col items-center justify-center text-center pb-20",children:[u.image&&j.jsx("img",{src:u.image,className:"h-56 object-contain rounded-2xl shadow-2xl mb-8 bg-black/20"}),j.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white leading-tight mb-12",children:u.text}),j.jsx("div",{className:"grid grid-cols-2 gap-6 w-full",children:u.answers.map((c,m)=>j.jsxs("div",{className:`${b1[m].color} p-6 rounded-2xl text-white text-2xl font-black flex items-center shadow-lg border-4 border-white/10`,children:[j.jsx("span",{className:"w-10 h-10 rounded-lg bg-black/20 flex items-center justify-center mr-4 text-lg",children:m+1}),c]},m))})]}),j.jsx("div",{className:"fixed bottom-6 right-6",children:j.jsx("button",{onClick:r,className:"bg-slate-800 text-indigo-400 px-6 py-3 rounded-xl font-bold hover:bg-slate-700",children:"Skip Timer"})})]})]})},tO=({snap:s,sortedPlayers:t,onNext:e,onClose:r})=>{const o=s.quizSnapshot.questions.length-(s.currentQuestionIndex+1)<3,u=o?t.slice(5):t,[c,m]=$t.useState(5),[g,p]=$t.useState(!1);$t.useEffect(()=>{if(c>0&&!g){const E=setTimeout(()=>m(A=>A-1),1e3);return()=>clearTimeout(E)}else c===0&&!g&&e()},[c,g]);const T=()=>{!g&&c>0?p(!0):e()};return j.jsxs("div",{className:"min-h-screen bg-slate-900 pt-20 px-6 relative",children:[j.jsx(dd,{onClose:r}),j.jsxs("div",{className:"max-w-3xl mx-auto pt-10 animate-in slide-in-from-bottom-8",children:[j.jsxs("div",{className:"text-center mb-10",children:[j.jsx(yp,{size:64,className:"mx-auto text-yellow-500 mb-4 drop-shadow-[0_0_15px_rgba(234,179,8,0.5)]"}),j.jsx("h2",{className:"text-5xl font-black text-white",children:"Current Ranking"})]}),j.jsx("div",{className:"space-y-3 mb-20",children:u.map((E,A)=>{const O=o?A+5:A;return j.jsxs("div",{className:`p-5 rounded-2xl flex justify-between items-center ${O===0?"bg-yellow-500/10 border border-yellow-500/50":"bg-slate-800 border border-slate-700"}`,children:[j.jsxs("div",{className:"flex items-center gap-6",children:[j.jsx("span",{className:`font-black text-2xl w-12 text-center flex justify-center ${O===0?"text-yellow-400":"text-slate-500"}`,children:O===0?j.jsx(yp,{size:24}):`#${O+1}`}),j.jsx("span",{className:"font-bold text-2xl text-white",children:E.nickname})]}),j.jsx("span",{className:"font-mono font-black text-2xl text-cyan-400",children:E.score})]},A)})}),j.jsx("div",{className:"fixed bottom-10 inset-x-0 flex justify-center",children:j.jsxs("button",{onClick:T,className:"group relative bg-indigo-600 text-white pl-8 pr-10 py-4 rounded-2xl font-black text-xl shadow-2xl shadow-indigo-500/40 hover:scale-105 active:scale-95 transition-all flex items-center gap-3 overflow-hidden",children:[j.jsx("span",{className:"relative z-10",children:!g&&c>0?`Auto Next (${c}s)`:"Next Round"}),j.jsx(Ay,{size:20,fill:"currentColor",className:"relative z-10"}),!g&&c>0&&j.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-white/30 transition-all duration-1000 ease-linear w-full",style:{width:`${c/5*100}%`}})]})})]})]})},eO=({sortedPlayers:s,onClose:t})=>{const e=s.slice(0,3);return j.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center pt-10",children:[j.jsx(dd,{onClose:t}),j.jsxs("div",{className:"flex items-end justify-center gap-4 md:gap-8 w-full max-w-4xl px-4 mb-20",children:[e[1]&&j.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-20 duration-[1500ms]",children:[j.jsx("div",{className:"text-2xl font-black text-slate-400 mb-4",children:e[1].nickname}),j.jsx("div",{className:"w-full h-40 bg-slate-700 rounded-t-2xl flex items-end justify-center pb-4 border-t-4 border-slate-500 relative",children:j.jsx("span",{className:"text-5xl font-black text-white/10",children:"2"})}),j.jsxs("div",{className:"mt-4 font-bold text-slate-500",children:[e[1].score," pts"]})]}),e[0]&&j.jsxs("div",{className:"flex flex-col items-center w-1/3 -mt-10 z-10 animate-in slide-in-from-bottom-32 duration-[2000ms]",children:[j.jsx(yp,{size:64,className:"text-yellow-400 mb-6 drop-shadow-[0_0_25px_rgba(250,204,21,0.6)]",fill:"currentColor"}),j.jsx("div",{className:"text-4xl font-black text-white mb-4",children:e[0].nickname}),j.jsx("div",{className:"w-full h-64 bg-gradient-to-b from-yellow-600 to-yellow-800 rounded-t-3xl flex items-end justify-center pb-6 border-t-4 border-yellow-400 shadow-2xl shadow-yellow-900/40",children:j.jsx("span",{className:"text-7xl font-black text-white text-shadow-lg",children:"1"})}),j.jsxs("div",{className:"mt-6 font-black text-3xl text-yellow-400 bg-yellow-900/20 px-6 py-2 rounded-xl border border-yellow-500/20",children:[e[0].score," pts"]})]}),e[2]&&j.jsxs("div",{className:"flex flex-col items-center w-1/3 animate-in slide-in-from-bottom-16 duration-[1200ms]",children:[j.jsx("div",{className:"text-2xl font-black text-amber-700 mb-4",children:e[2].nickname}),j.jsx("div",{className:"w-full h-32 bg-amber-900/40 rounded-t-2xl flex items-end justify-center pb-4 border-t-4 border-amber-700 relative",children:j.jsx("span",{className:"text-5xl font-black text-white/10",children:"3"})}),j.jsxs("div",{className:"mt-4 font-bold text-slate-500",children:[e[2].score," pts"]})]})]})]})};function nO(){const[s,t]=$t.useState(null),[e,r]=$t.useState("DASHBOARD"),[o,u]=$t.useState([]),[c,m]=$t.useState(null),[g,p]=$t.useState(null),[T,E]=$t.useState(!0),[A,O]=$t.useState(!1);$t.useEffect(()=>{const nt=N2(Mg,et=>{t(et),E(!1)});return()=>nt()},[]),$t.useEffect(()=>{if(!s)return;const nt=QE(ua,"artifacts",Gh,"users",s.uid,"quizzes"),et=_1(nt,_t=>{u(_t.docs.map(At=>({id:At.id,...At.data()})))});return()=>et()},[s]),$t.useEffect(()=>{const nt=localStorage.getItem("mohoot_host_active");if(nt&&s)try{const{quizId:et,pin:_t}=JSON.parse(nt);p({quizId:et,pin:_t}),r("GAME")}catch{localStorage.removeItem("mohoot_host_active")}},[s]);const Q=async()=>{try{await Z2(Mg,new or)}catch(nt){alert("Login failed: "+nt.message)}},Z=()=>{m({title:"Untitled Quiz",questions:[{text:"",image:"",answers:["","","",""],correct:0,duration:20}]}),r("EDITOR")},W=async nt=>{if(s){O(!0);try{const et=QE(ua,"artifacts",Gh,"users",s.uid,"quizzes");nt.id?await p1(ma(ua,"artifacts",Gh,"users",s.uid,"quizzes",nt.id),{...nt}):await vV(et,{...nt,createdAt:pp()}),r("DASHBOARD")}catch(et){alert("Error saving: "+et.message)}finally{O(!1)}}},ht=async nt=>{if(!s)return;const et=Math.floor(1e5+Math.random()*9e5).toString();try{await _V(ma(ua,"artifacts",Gh,"sessions",et),{hostId:s.uid,quizId:nt.id,status:"LOBBY",currentQuestionIndex:0,players:{},quizSnapshot:nt,lastUpdated:pp()}),p({quizId:nt.id,pin:et}),r("GAME"),localStorage.setItem("mohoot_host_active",JSON.stringify({quizId:nt.id,pin:et}))}catch(_t){alert("Failed to start game: "+_t.message)}};return T?j.jsx("div",{className:"h-screen bg-slate-900 flex items-center justify-center",children:j.jsx(Sy,{className:"animate-spin text-indigo-500"})}):s?j.jsxs("div",{className:"min-h-screen bg-slate-900 text-white font-sans selection:bg-indigo-500/30",children:[e==="DASHBOARD"&&j.jsxs(j.Fragment,{children:[j.jsx(JV,{user:s,onSignOut:()=>V2(Mg)}),j.jsxs("div",{className:"p-8 max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:[j.jsxs("div",{className:"flex justify-between items-center mb-10",children:[j.jsx("h2",{className:"text-4xl font-black text-white tracking-tight",children:"My Quizzes"}),j.jsxs("button",{onClick:Z,className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl font-bold flex gap-2 items-center hover:bg-indigo-500 shadow-lg shadow-indigo-500/20 transition transform hover:-translate-y-1",children:[j.jsx(T1,{size:20})," Create New"]})]}),o.length===0?j.jsxs("div",{className:"bg-slate-800/50 border-2 border-dashed border-slate-700 rounded-3xl p-20 text-center text-slate-500",children:[j.jsx(Ay,{size:48,className:"mx-auto mb-4 opacity-20"}),j.jsx("p",{className:"text-lg font-medium",children:'No quizzes found. Click "Create New" to start!'})]}):j.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((nt,et)=>j.jsx($V,{quiz:nt,index:et,onHost:ht,onEdit:_t=>{m(_t),r("EDITOR")}},nt.id))})]})]}),e==="EDITOR"&&j.jsx(iO,{user:s,quiz:c,onSave:W,onCancel:()=>r("DASHBOARD"),isSaving:A}),e==="GAME"&&j.jsx(rO,{user:s,sessionData:g,onExit:()=>{localStorage.removeItem("mohoot_host_active"),p(null),r("DASHBOARD")}})]}):j.jsx("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4",children:j.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 p-10 rounded-3xl shadow-2xl text-center max-w-md w-full",children:[j.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 mb-2 tracking-tighter",children:"Mohoot!"}),j.jsx("button",{onClick:Q,className:"w-full mt-8 bg-white text-slate-900 font-bold py-4 rounded-2xl hover:bg-slate-100 transition-all",children:"Sign in with Google"})]})})}const iO=({user:s,quiz:t,onSave:e,onCancel:r,isSaving:o})=>{const[u,c]=$t.useState(t),[m,g]=$t.useState(0),p=u.questions[m],T=(O,Q)=>{const Z=[...u.questions];Z[m]={...p,[O]:Q},c({...u,questions:Z})},E=()=>{const O=[...u.questions,{text:"",image:"",answers:["","","",""],correct:0,duration:20}];c({...u,questions:O}),g(O.length-1)},A=async()=>{if(confirm("Are you sure you want to delete this quiz completely?"))try{u.id&&await y1(ma(aV(),"artifacts","mohoot-prod","users",s.uid,"quizzes",u.id)),r()}catch(O){alert(O.message)}};return j.jsxs("div",{className:"flex gap-6 h-screen p-6 bg-slate-900 animate-in slide-in-from-right-4 duration-300",children:[j.jsxs("div",{className:"w-64 flex flex-col gap-2",children:[j.jsx("h2",{className:"text-slate-400 font-bold mb-4 px-2",children:"Questions"}),j.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-2",children:[u.questions.map((O,Q)=>j.jsxs("button",{onClick:()=>g(Q),className:`w-full text-left p-4 rounded-xl transition-all font-bold text-sm ${Q===m?"bg-indigo-600 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:["Question ",Q+1]},Q)),j.jsxs("button",{onClick:E,className:"w-full py-4 border-2 border-dashed border-slate-700 rounded-xl text-slate-500 font-bold text-sm hover:border-indigo-500/50 hover:text-indigo-400 transition-all flex items-center justify-center gap-2",children:[j.jsx(T1,{size:18})," Add Question"]})]})]}),j.jsxs("div",{className:"flex-1 bg-slate-800/30 rounded-3xl border border-slate-700/50 p-10 flex flex-col overflow-y-auto",children:[j.jsx("div",{className:"mb-8 border-b border-white/5 pb-8",children:j.jsx("input",{className:"w-full text-4xl font-black bg-transparent border-none focus:ring-0 outline-none text-white placeholder-slate-600",value:u.title,onChange:O=>c({...u,title:O.target.value}),placeholder:"Quiz Title..."})}),j.jsxs("div",{className:"flex-1 space-y-8",children:[j.jsxs("div",{children:[j.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:"Question Text"}),j.jsx("textarea",{className:"w-full p-6 bg-slate-950 rounded-2xl text-xl font-bold outline-none focus:ring-2 ring-indigo-500 text-white resize-none",rows:"2",value:p.text,onChange:O=>T("text",O.target.value),placeholder:"What is...?"})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[j.jsxs("div",{className:"space-y-4",children:[j.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase block",children:"Settings"}),j.jsxs("div",{className:"flex items-center gap-3 bg-slate-950 p-4 rounded-xl",children:[j.jsx(UV,{size:20,className:"text-indigo-400"}),j.jsx("input",{className:"bg-transparent w-full outline-none text-sm text-white",value:p.image||"",onChange:O=>T("image",O.target.value),placeholder:"Image URL (Optional)"})]}),j.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl",children:[j.jsx("span",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Time Limit (Seconds)"}),j.jsx("input",{type:"number",className:"bg-transparent w-full font-black text-xl outline-none text-white",value:p.duration,onChange:O=>T("duration",parseInt(O.target.value)||0)})]})]}),j.jsxs("div",{className:"space-y-3",children:[j.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase block",children:"Answers"}),j.jsx("div",{className:"grid gap-3",children:p.answers.map((O,Q)=>j.jsxs("div",{className:`flex items-center gap-3 p-1 rounded-xl ${p.correct===Q?"bg-indigo-500/20 ring-1 ring-indigo-500":"bg-slate-900"}`,children:[j.jsx("button",{onClick:()=>T("correct",Q),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${p.correct===Q?b1[Q].color:"bg-slate-800 text-slate-500"}`,children:j.jsx(OV,{size:20,className:p.correct===Q?"text-white":"text-slate-600"})}),j.jsx("input",{className:"bg-transparent flex-1 font-bold text-sm py-2 outline-none text-white",value:O,onChange:Z=>{const W=[...p.answers];W[Q]=Z.target.value,T("answers",W)},placeholder:`Option ${Q+1}`})]},Q))})]})]})]}),j.jsxs("div",{className:"mt-8 flex justify-between items-center pt-6 border-t border-white/5",children:[u.id&&j.jsxs("button",{onClick:A,className:"text-rose-400 font-bold hover:bg-rose-500/10 px-4 py-2 rounded-lg transition flex items-center gap-2",children:[j.jsx(HV,{size:18})," Delete Quiz"]}),j.jsxs("div",{className:"flex gap-4 ml-auto",children:[j.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl font-bold text-slate-400 hover:text-white transition",children:"Discard"}),j.jsx("button",{onClick:()=>e(u),disabled:o,className:"bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-indigo-500 shadow-lg shadow-indigo-500/20 flex items-center gap-2",children:o?j.jsx(Sy,{className:"animate-spin",size:20}):"Save Quiz"})]})]})]})]})},rO=({user:s,sessionData:t,onExit:e})=>{const[r,o]=$t.useState(null),[u,c]=$t.useState(null),[m,g]=$t.useState(0),[p,T]=$t.useState(!1),E=t.pin;$t.useEffect(()=>{const nt=_1(ma(ua,"artifacts","mohoot-prod","sessions",E),et=>et.exists()?o(et.data()):c("Session ended"),et=>c(et.message));return()=>nt()},[E]),$t.useEffect(()=>{if((r==null?void 0:r.status)==="QUESTION"&&r.endTime){const nt=setInterval(()=>{const et=Math.ceil((r.endTime-Date.now())/1e3);g(Math.max(0,et)),et<=0&&A("LEADERBOARD")},100);return()=>clearInterval(nt)}},[r==null?void 0:r.status,r==null?void 0:r.endTime]);const A=(nt,et={})=>{p1(ma(ua,"artifacts","mohoot-prod","sessions",E),{status:nt,...et,lastUpdated:pp()})},O=async()=>{if(!p){T(!0);try{await y1(ma(ua,"artifacts","mohoot-prod","sessions",E))}catch(nt){console.error(nt)}finally{e()}}},Q=()=>{const nt=r.currentQuestionIndex+1,et=r.quizSnapshot.questions[nt];et?A("QUESTION",{currentQuestionIndex:nt,roundId:Date.now(),startTime:Date.now()+2e3,endTime:Date.now()+2e3+et.duration*1e3}):A("FINISHED")};if(u)return j.jsx("div",{className:"h-screen flex items-center justify-center text-rose-500 font-bold bg-slate-900",children:u});if(!r)return j.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-900",children:j.jsx(Sy,{className:"animate-spin text-indigo-500"})});const Z=Object.values(r.players||{}),W=[...Z].sort((nt,et)=>(et.score||0)-(nt.score||0)),ht=r.quizSnapshot.questions[r.currentQuestionIndex];return r.status==="LOBBY"?j.jsx(ZV,{pin:E,players:Z,onStart:()=>A("QUESTION",{roundId:Date.now(),startTime:Date.now()+2e3,endTime:Date.now()+2e3+ht.duration*1e3}),onClose:O}):r.status==="QUESTION"?j.jsx(WV,{snap:r,players:Z,timeLeft:m,onSkip:()=>A("LEADERBOARD"),onClose:O}):r.status==="LEADERBOARD"?j.jsx(tO,{snap:r,sortedPlayers:W,onNext:Q,onClose:O}):r.status==="FINISHED"?j.jsx(eO,{sortedPlayers:W,onClose:O}):null};class sO extends $t.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("Uncaught error:",t,e)}render(){var t;return this.state.hasError?j.jsxs("div",{style:{padding:20,color:"white",background:"#0f172a",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[j.jsx("h1",{children:"Something went wrong."}),j.jsx("p",{style:{color:"#f87171"},children:(t=this.state.error)==null?void 0:t.toString()}),j.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:20,padding:"10px 20px",borderRadius:8,border:"none",background:"#4f46e5",color:"white",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}lI.createRoot(document.getElementById("root")).render(j.jsx($t.StrictMode,{children:j.jsx(sO,{children:j.jsx(nO,{})})}));

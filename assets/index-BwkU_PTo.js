Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;var e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var t=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var ee=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function re(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ie(e,t){return re(e.type,t,e.props)}function ae(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function oe(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var se=/\/+/g;function ce(e,t){return typeof e==`object`&&e&&e.key!=null?oe(``+e.key):t.toString(36)}function le(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(te,te):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ue(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ue(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ce(e,0):a,ee(o)?(i=``,c!=null&&(i=c.replace(se,`$&/`)+`/`),ue(o,r,i,``,function(e){return e})):o!=null&&(ae(o)&&(o=ie(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(se,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(ee(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ce(a,u),c+=ue(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ce(a,u++),c+=ue(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ue(le(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function de(e,t,n){if(e==null)return e;var r=[],i=0;return ue(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function fe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var C=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},w={map:de,forEach:function(e,t,n){de(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return de(e,function(){t++}),t},toArray:function(e){return de(e,function(e){return e})||[]},only:function(e){if(!ae(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=w,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!ne.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return re(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)ne.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return re(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=ae,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:fe}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(te,C)}catch(e){C(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),S.T=t}},e.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},e.use=function(e){return S.H.use(e)},e.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},e.useCallback=function(e,t){return S.H.useCallback(e,t)},e.useContext=function(e){return S.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return S.H.useEffect(e,t)},e.useEffectEvent=function(e){return S.H.useEffectEvent(e)},e.useId=function(){return S.H.useId()},e.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return S.H.useMemo(e,t)},e.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},e.useRef=function(e){return S.H.useRef(e)},e.useState=function(e){return S.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return S.H.useTransition()},e.version=`19.2.3`})),n=e(((e,n)=>{n.exports=t()})),r=e((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,ee||(ee=!0,ae());else{var t=n(l);t!==null&&ce(x,t.startTime-e)}}var ee=!1,te=-1,S=5,ne=-1;function re(){return g?!0:!(e.unstable_now()-ne<S)}function ie(){if(g=!1,ee){var t=e.unstable_now();ne=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(te),te=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&re());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ce(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?ae():ee=!1}}}var ae;if(typeof y==`function`)ae=function(){y(ie)};else if(typeof MessageChannel<`u`){var oe=new MessageChannel,se=oe.port2;oe.port1.onmessage=ie,ae=function(){se.postMessage(null)}}else ae=function(){_(ie,0)};function ce(t,n){te=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(te),te=-1):h=!0,ce(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,ee||(ee=!0,ae()))),r},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),i=e(((e,t)=>{t.exports=r()})),a=e((e=>{var t=n();function r(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for(`react.portal`);function s(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,e.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(r(299));return s(e,t,null,n)},e.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,a.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&a.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin),i=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?a.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):n===`script`&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??a.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else a.d.m(e)},e.requestFormReset=function(e){a.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},e.useFormStatus=function(){return c.H.useHostTransitionStatus()},e.version=`19.2.3`})),o=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=a()})),s=e((e=>{var t=i(),r=n(),a=o();function s(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(l(e)!==e)throw Error(s(188))}function p(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(s(188));return t===e?e:null}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return f(i),e;if(a===r)return f(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),ee=Symbol.for(`react.consumer`),te=Symbol.for(`react.context`),S=Symbol.for(`react.forward_ref`),ne=Symbol.for(`react.suspense`),re=Symbol.for(`react.suspense_list`),ie=Symbol.for(`react.memo`),ae=Symbol.for(`react.lazy`),oe=Symbol.for(`react.activity`),se=Symbol.for(`react.memo_cache_sentinel`),ce=Symbol.iterator;function le(e){return typeof e!=`object`||!e?null:(e=ce&&e[ce]||e[`@@iterator`],typeof e==`function`?e:null)}var ue=Symbol.for(`react.client.reference`);function de(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case ne:return`Suspense`;case re:return`SuspenseList`;case oe:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case te:return e.displayName||`Context`;case ee:return(e._context.displayName||`Context`)+`.Consumer`;case S:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ie:return t=e.displayName||null,t===null?de(e.type)||`Memo`:t;case ae:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}var fe=Array.isArray,C=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},me=[],he=-1;function ge(e){return{current:e}}function _e(e){0>he||(e.current=me[he],me[he]=null,he--)}function T(e,t){he++,me[he]=e.current,e.current=t}var ve=ge(null),ye=ge(null),be=ge(null),xe=ge(null);function Se(e,t){switch(T(be,t),T(ye,e),T(ve,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wd(t),e=Gd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}_e(ve),T(ve,e)}function Ce(){_e(ve),_e(ye),_e(be)}function we(e){e.memoizedState!==null&&T(xe,e);var t=ve.current,n=Gd(t,e.type);t!==n&&(T(ye,e),T(ve,n))}function Te(e){ye.current===e&&(_e(ve),_e(ye)),xe.current===e&&(_e(xe),$f._currentValue=pe)}var Ee,De;function Oe(e){if(Ee===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ee=t&&t[1]||``,De=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Ee+e+De}var ke=!1;function Ae(e,t){if(!e||ke)return``;ke=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ke=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Oe(n):``}function je(e,t){switch(e.tag){case 26:case 27:case 5:return Oe(e.type);case 16:return Oe(`Lazy`);case 13:return e.child!==t&&t!==null?Oe(`Suspense Fallback`):Oe(`Suspense`);case 19:return Oe(`SuspenseList`);case 0:case 15:return Ae(e.type,!1);case 11:return Ae(e.type.render,!1);case 1:return Ae(e.type,!0);case 31:return Oe(`Activity`);default:return``}}function Me(e){try{var t=``,n=null;do t+=je(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Ne=Object.prototype.hasOwnProperty,Pe=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,Ie=t.unstable_shouldYield,Le=t.unstable_requestPaint,Re=t.unstable_now,ze=t.unstable_getCurrentPriorityLevel,Be=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,E=t.unstable_NormalPriority,He=t.unstable_LowPriority,Ue=t.unstable_IdlePriority,We=t.log,Ge=t.unstable_setDisableYieldValue,Ke=null,qe=null;function Je(e){if(typeof We==`function`&&Ge(e),qe&&typeof qe.setStrictMode==`function`)try{qe.setStrictMode(Ke,e)}catch{}}var Ye=Math.clz32?Math.clz32:Qe,Xe=Math.log,Ze=Math.LN2;function Qe(e){return e>>>=0,e===0?32:31-(Xe(e)/Ze|0)|0}var $e=256,et=262144,tt=4194304;function nt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=nt(n))):i=nt(o):i=nt(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=nt(n))):i=nt(o)):i=nt(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function it(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function at(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ot(){var e=tt;return tt<<=1,!(tt&62914560)&&(tt=4194304),e}function st(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ct(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function lt(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ye(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&ut(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function ut(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ye(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function dt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ye(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ft(e,t){var n=t&-t;return n=n&42?1:pt(n),(n&(e.suspendedLanes|t))===0?n:0}function pt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ht(){var e=w.p;return e===0?(e=window.event,e===void 0?32:hp(e.type)):e}function gt(e,t){var n=w.p;try{return w.p=e,t()}finally{w.p=n}}var _t=Math.random().toString(36).slice(2),vt=`__reactFiber$`+_t,yt=`__reactProps$`+_t,bt=`__reactContainer$`+_t,xt=`__reactEvents$`+_t,St=`__reactListeners$`+_t,Ct=`__reactHandles$`+_t,wt=`__reactResources$`+_t,Tt=`__reactMarker$`+_t;function Et(e){delete e[vt],delete e[yt],delete e[xt],delete e[St],delete e[Ct]}function Dt(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=pf(e);e!==null;){if(n=e[vt])return n;e=pf(e)}return t}e=n,n=e.parentNode}return null}function Ot(e){if(e=e[vt]||e[bt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function kt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function At(e){var t=e[wt];return t||=e[wt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function jt(e){e[Tt]=!0}var Mt=new Set,Nt={};function Pt(e,t){Ft(e,t),Ft(e+`Capture`,t)}function Ft(e,t){for(Nt[e]=t,e=0;e<t.length;e++)Mt.add(t[e])}var It=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Lt={},Rt={};function zt(e){return Ne.call(Rt,e)?!0:Ne.call(Lt,e)?!1:It.test(e)?Rt[e]=!0:(Lt[e]=!0,!1)}function Bt(e,t,n){if(zt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Vt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Ht(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function D(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Ut(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Wt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gt(e){if(!e._valueTracker){var t=Ut(e)?`checked`:`value`;e._valueTracker=Wt(e,t,``+e[t])}}function Kt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Ut(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function qt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Jt=/[\n"\\]/g;function Yt(e){return e.replace(Jt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Xt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+D(t)):e.value!==``+D(t)&&(e.value=``+D(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Qt(e,o,D(n)):Qt(e,o,D(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+D(s):e.removeAttribute(`name`)}function Zt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Gt(e);return}n=n==null?``:``+D(n),t=t==null?n:``+D(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Gt(e)}function Qt(e,t,n){t===`number`&&qt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function $t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+D(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function en(e,t,n){if(t!=null&&(t=``+D(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+D(n)}function tn(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(s(92));if(fe(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}n??=``,t=n}n=D(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Gt(e)}function nn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function an(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||rn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function on(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(s(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&an(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&an(e,a,t[a])}function sn(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var cn=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),ln=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function un(e){return ln.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function dn(){}var fn=null;function pn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mn=null,hn=null;function gn(e){var t=Ot(e);if(t&&(e=t.stateNode)){var n=e[yt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Xt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Yt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[yt]||null;if(!i)throw Error(s(90));Xt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Kt(r)}break a;case`textarea`:en(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&$t(e,!!n.multiple,t,!1)}}}var _n=!1;function vn(e,t,n){if(_n)return e(t,n);_n=!0;try{return e(t)}finally{if(_n=!1,(mn!==null||hn!==null)&&(wu(),mn&&(t=mn,e=hn,hn=mn=null,gn(t),e)))for(t=0;t<e.length;t++)gn(e[t])}}function yn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[yt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(s(231,t,typeof n));return n}var bn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),xn=!1;if(bn)try{var Sn={};Object.defineProperty(Sn,`passive`,{get:function(){xn=!0}}),window.addEventListener(`test`,Sn,Sn),window.removeEventListener(`test`,Sn,Sn)}catch{xn=!1}var Cn=null,wn=null,Tn=null;function En(){if(Tn)return Tn;var e,t=wn,n=t.length,r,i=`value`in Cn?Cn.value:Cn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Tn=i.slice(e,1<r?1-r:void 0)}function Dn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function On(){return!0}function kn(){return!1}function An(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?On:kn,this.isPropagationStopped=kn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=On)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=On)},persist:function(){},isPersistent:On}),t}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=An(jn),Nn=h({},jn,{view:0,detail:0}),Pn=An(Nn),Fn,In,Ln,O=h({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Ln&&(Ln&&e.type===`mousemove`?(Fn=e.screenX-Ln.screenX,In=e.screenY-Ln.screenY):In=Fn=0,Ln=e),Fn)},movementY:function(e){return`movementY`in e?e.movementY:In}}),Rn=An(O),zn=An(h({},O,{dataTransfer:0})),Bn=An(h({},Nn,{relatedTarget:0})),Vn=An(h({},jn,{animationName:0,elapsedTime:0,pseudoElement:0})),Hn=An(h({},jn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Un=An(h({},jn,{data:0})),Wn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Gn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Kn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function qn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kn[e])?!!t[e]:!1}function Jn(){return qn}var Yn=An(h({},Nn,{key:function(e){if(e.key){var t=Wn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=Dn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Gn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(e){return e.type===`keypress`?Dn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?Dn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Xn=An(h({},O,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),k=An(h({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn})),Zn=An(h({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Qn=An(h({},O,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),$n=An(h({},jn,{newState:0,oldState:0})),er=[9,13,27,32],tr=bn&&`CompositionEvent`in window,nr=null;bn&&`documentMode`in document&&(nr=document.documentMode);var rr=bn&&`TextEvent`in window&&!nr,ir=bn&&(!tr||nr&&8<nr&&11>=nr),ar=` `,or=!1;function sr(e,t){switch(e){case`keyup`:return er.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function cr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var lr=!1;function ur(e,t){switch(e){case`compositionend`:return cr(t);case`keypress`:return t.which===32?(or=!0,ar):null;case`textInput`:return e=t.data,e===ar&&or?null:e;default:return null}}function dr(e,t){if(lr)return e===`compositionend`||!tr&&sr(e,t)?(e=En(),Tn=wn=Cn=null,lr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return ir&&t.locale!==`ko`?null:t.data;default:return null}}var fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!fr[e.type]:t===`textarea`}function mr(e,t,n,r){mn?hn?hn.push(r):hn=[r]:mn=r,t=kd(t,`onChange`),0<t.length&&(n=new Mn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var hr=null,gr=null;function _r(e){Sd(e,0)}function vr(e){if(Kt(kt(e)))return e}function yr(e,t){if(e===`change`)return t}var br=!1;if(bn){var xr;if(bn){var Sr=`oninput`in document;if(!Sr){var Cr=document.createElement(`div`);Cr.setAttribute(`oninput`,`return;`),Sr=typeof Cr.oninput==`function`}xr=Sr}else xr=!1;br=xr&&(!document.documentMode||9<document.documentMode)}function wr(){hr&&(hr.detachEvent(`onpropertychange`,Tr),gr=hr=null)}function Tr(e){if(e.propertyName===`value`&&vr(gr)){var t=[];mr(t,gr,e,pn(e)),vn(_r,t)}}function Er(e,t,n){e===`focusin`?(wr(),hr=t,gr=n,hr.attachEvent(`onpropertychange`,Tr)):e===`focusout`&&wr()}function Dr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return vr(gr)}function Or(e,t){if(e===`click`)return vr(t)}function kr(e,t){if(e===`input`||e===`change`)return vr(t)}function Ar(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var jr=typeof Object.is==`function`?Object.is:Ar;function Mr(e,t){if(jr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ne.call(t,i)||!jr(e[i],t[i]))return!1}return!0}function Nr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pr(e,t){var n=Nr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Nr(n)}}function Fr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ir(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=qt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=qt(e.document)}return t}function Lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Rr=bn&&`documentMode`in document&&11>=document.documentMode,zr=null,Br=null,Vr=null,Hr=!1;function Ur(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hr||zr==null||zr!==qt(r)||(r=zr,`selectionStart`in r&&Lr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vr&&Mr(Vr,r)||(Vr=r,r=kd(Br,`onSelect`),0<r.length&&(t=new Mn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=zr)))}function Wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Gr={animationend:Wr(`Animation`,`AnimationEnd`),animationiteration:Wr(`Animation`,`AnimationIteration`),animationstart:Wr(`Animation`,`AnimationStart`),transitionrun:Wr(`Transition`,`TransitionRun`),transitionstart:Wr(`Transition`,`TransitionStart`),transitioncancel:Wr(`Transition`,`TransitionCancel`),transitionend:Wr(`Transition`,`TransitionEnd`)},Kr={},qr={};bn&&(qr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),`TransitionEvent`in window||delete Gr.transitionend.transition);function Jr(e){if(Kr[e])return Kr[e];if(!Gr[e])return e;var t=Gr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qr)return Kr[e]=t[n];return e}var Yr=Jr(`animationend`),Xr=Jr(`animationiteration`),Zr=Jr(`animationstart`),Qr=Jr(`transitionrun`),$r=Jr(`transitionstart`),ei=Jr(`transitioncancel`),ti=Jr(`transitionend`),ni=new Map,ri=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);ri.push(`scrollEnd`);function ii(e,t){ni.set(e,t),Pt(t,[e])}var ai=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},oi=[],si=0,ci=0;function li(){for(var e=si,t=ci=si=0;t<e;){var n=oi[t];oi[t++]=null;var r=oi[t];oi[t++]=null;var i=oi[t];oi[t++]=null;var a=oi[t];if(oi[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&pi(n,i,a)}}function ui(e,t,n,r){oi[si++]=e,oi[si++]=t,oi[si++]=n,oi[si++]=r,ci|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function di(e,t,n,r){return ui(e,t,n,r),mi(e)}function fi(e,t){return ui(e,null,null,t),mi(e)}function pi(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Ye(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function mi(e){if(50<hu)throw hu=0,gu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var hi={};function gi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(e,t,n,r){return new gi(e,t,n,r)}function vi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yi(e,t){var n=e.alternate;return n===null?(n=_i(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function bi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function xi(e,t,n,r,i,a){var o=0;if(r=e,typeof e==`function`)vi(e)&&(o=1);else if(typeof e==`string`)o=Gf(e,n,ve.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case oe:return e=_i(31,n,t,i),e.elementType=oe,e.lanes=a,e;case y:return Si(n.children,i,a,t);case b:o=8,i|=24;break;case x:return e=_i(12,n,t,i|2),e.elementType=x,e.lanes=a,e;case ne:return e=_i(13,n,t,i),e.elementType=ne,e.lanes=a,e;case re:return e=_i(19,n,t,i),e.elementType=re,e.lanes=a,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case te:o=10;break a;case ee:o=9;break a;case S:o=11;break a;case ie:o=14;break a;case ae:o=16,r=null;break a}o=29,n=Error(s(130,e===null?`null`:typeof e,``)),r=null}return t=_i(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Si(e,t,n,r){return e=_i(7,e,r,t),e.lanes=n,e}function Ci(e,t,n){return e=_i(6,e,null,t),e.lanes=n,e}function wi(e){var t=_i(18,null,null,0);return t.stateNode=e,t}function Ti(e,t,n){return t=_i(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ei=new WeakMap;function Di(e,t){if(typeof e==`object`&&e){var n=Ei.get(e);return n===void 0?(t={value:e,source:t,stack:Me(t)},Ei.set(e,t),t):n}return{value:e,source:t,stack:Me(t)}}var Oi=[],ki=0,Ai=null,ji=0,Mi=[],Ni=0,Pi=null,Fi=1,Ii=``;function Li(e,t){Oi[ki++]=ji,Oi[ki++]=Ai,Ai=e,ji=t}function Ri(e,t,n){Mi[Ni++]=Fi,Mi[Ni++]=Ii,Mi[Ni++]=Pi,Pi=e;var r=Fi;e=Ii;var i=32-Ye(r)-1;r&=~(1<<i),n+=1;var a=32-Ye(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fi=1<<32-Ye(t)+i|n<<i|r,Ii=a+e}else Fi=1<<a|n<<i|r,Ii=e}function zi(e){e.return!==null&&(Li(e,1),Ri(e,1,0))}function Bi(e){for(;e===Ai;)Ai=Oi[--ki],Oi[ki]=null,ji=Oi[--ki],Oi[ki]=null;for(;e===Pi;)Pi=Mi[--Ni],Mi[Ni]=null,Ii=Mi[--Ni],Mi[Ni]=null,Fi=Mi[--Ni],Mi[Ni]=null}function Vi(e,t){Mi[Ni++]=Fi,Mi[Ni++]=Ii,Mi[Ni++]=Pi,Fi=t.id,Ii=t.overflow,Pi=e}var Hi=null,Ui=null,A=!1,Wi=null,Gi=!1,Ki=Error(s(519));function qi(e){throw $i(Di(Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Ki}function Ji(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[vt]=e,t[yt]=r,n){case`dialog`:Y(`cancel`,t),Y(`close`,t);break;case`iframe`:case`object`:case`embed`:Y(`load`,t);break;case`video`:case`audio`:for(n=0;n<bd.length;n++)Y(bd[n],t);break;case`source`:Y(`error`,t);break;case`img`:case`image`:case`link`:Y(`error`,t),Y(`load`,t);break;case`details`:Y(`toggle`,t);break;case`input`:Y(`invalid`,t),Zt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:Y(`invalid`,t);break;case`textarea`:Y(`invalid`,t),tn(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Fd(t.textContent,n)?(r.popover!=null&&(Y(`beforetoggle`,t),Y(`toggle`,t)),r.onScroll!=null&&Y(`scroll`,t),r.onScrollEnd!=null&&Y(`scrollend`,t),r.onClick!=null&&(t.onclick=dn),t=!0):t=!1,t||qi(e,!0)}function Yi(e){for(Hi=e.return;Hi;)switch(Hi.tag){case 5:case 31:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:Hi=Hi.return}}function Xi(e){if(e!==Hi)return!1;if(!A)return Yi(e),A=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Kd(e.type,e.memoizedProps)),n=!n),n&&Ui&&qi(e),Yi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Ui=Z(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Ui=Z(e)}else t===27?(t=Ui,ef(e.type)?(e=ff,ff=null,Ui=e):Ui=t):Ui=Hi?df(e.stateNode.nextSibling):null;return!0}function Zi(){Ui=Hi=null,A=!1}function Qi(){var e=Wi;return e!==null&&(tu===null?tu=e:tu.push.apply(tu,e),Wi=null),e}function $i(e){Wi===null?Wi=[e]:Wi.push(e)}var ea=ge(null),ta=null,na=null;function ra(e,t,n){T(ea,t._currentValue),t._currentValue=n}function ia(e){e._currentValue=ea.current,_e(ea)}function aa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function oa(e,t,n,r){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){var o=i.child;a=a.firstContext;a:for(;a!==null;){var c=a;a=i;for(var l=0;l<t.length;l++)if(c.context===t[l]){a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),aa(a.return,n,e),r||(o=null);break a}a=c.next}}else if(i.tag===18){if(o=i.return,o===null)throw Error(s(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),aa(o,n,e),o=null}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}}function sa(e,t,n,r){e=null;for(var i=t,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var o=i.alternate;if(o===null)throw Error(s(387));if(o=o.memoizedProps,o!==null){var c=i.type;jr(i.pendingProps.value,o.value)||(e===null?e=[c]:e.push(c))}}else if(i===xe.current){if(o=i.alternate,o===null)throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e===null?e=[$f]:e.push($f))}i=i.return}e!==null&&oa(t,e,n,r),t.flags|=262144}function ca(e){for(e=e.firstContext;e!==null;){if(!jr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function la(e){ta=e,na=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ua(e){return fa(ta,e)}function da(e,t){return ta===null&&la(e),fa(e,t)}function fa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},na===null){if(e===null)throw Error(s(308));na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else na=na.next=t;return n}var pa=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ma=t.unstable_scheduleCallback,ha=t.unstable_NormalPriority,ga={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _a(){return{controller:new pa,data:new Map,refCount:0}}function va(e){e.refCount--,e.refCount===0&&ma(ha,function(){e.controller.abort()})}var ya=null,ba=0,xa=0,Sa=null;function Ca(e,t){if(ya===null){var n=ya=[];ba=0,xa=hd(),Sa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return ba++,t.then(wa,wa),t}function wa(){if(--ba===0&&ya!==null){Sa!==null&&(Sa.status=`fulfilled`);var e=ya;ya=null,xa=0,Sa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ta(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var Ea=C.S;C.S=function(e,t){iu=Re(),typeof t==`object`&&t&&typeof t.then==`function`&&Ca(e,t),Ea!==null&&Ea(e,t)};var Da=ge(null);function Oa(){var e=Da.current;return e===null?W.pooledCache:e}function ka(e,t){t===null?T(Da,Da.current):T(Da,t.pool)}function Aa(){var e=Oa();return e===null?null:{parent:ga._currentValue,pool:e}}var ja=Error(s(460)),Ma=Error(s(474)),Na=Error(s(542)),Pa={then:function(){}};function Fa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ia(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(dn,dn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ba(e),e;default:if(typeof t.status==`string`)t.then(dn,dn);else{if(e=W,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ba(e),e}throw Ra=t,ja}}function La(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Ra=e,ja):e}}var Ra=null;function za(){if(Ra===null)throw Error(s(459));var e=Ra;return Ra=null,e}function Ba(e){if(e===ja||e===Na)throw Error(s(483))}var Va=null,Ha=0;function Ua(e){var t=Ha;return Ha+=1,Va===null&&(Va=[]),Ia(Va,e,t)}function Wa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ga(e,t){throw t.$$typeof===g?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ka(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function i(e,t){return e=yi(e,t),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function o(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Ci(n,e.mode,r),t.return=e,t):(t=i(t,n),t.return=e,t)}function l(e,t,n,r){var a=n.type;return a===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===a||typeof a==`object`&&a&&a.$$typeof===ae&&La(a)===t.type)?(t=i(t,n.props),Wa(t,n),t.return=e,t):(t=xi(n.type,n.key,n.props,null,e.mode,r),Wa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Ti(n,e.mode,r),t.return=e,t):(t=i(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,a){return t===null||t.tag!==7?(t=Si(n,e.mode,r,a),t.return=e,t):(t=i(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Ci(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=xi(t.type,t.key,t.props,null,e.mode,n),Wa(n,t),n.return=e,n;case v:return t=Ti(t,e.mode,n),t.return=e,t;case ae:return t=La(t),f(e,t,n)}if(fe(t)||le(t))return t=Si(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ua(t),n);if(t.$$typeof===te)return f(e,da(e,t),n);Ga(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case ae:return n=La(n),p(e,t,n,r)}if(fe(n)||le(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ua(n),r);if(n.$$typeof===te)return p(e,t,da(e,n),r);Ga(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case ae:return r=La(r),m(e,t,n,r,i)}if(fe(r)||le(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ua(r),i);if(r.$$typeof===te)return m(e,t,n,da(t,r),i);Ga(t,r)}return null}function h(i,o,s,c){for(var l=null,u=null,d=o,h=o=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),o=a(_,o,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),A&&Li(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(o=a(d,o,h),u===null?l=d:u.sibling=d,u=d);return A&&Li(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),o=a(g,o,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),A&&Li(i,h),l}function g(i,o,c,l){if(c==null)throw Error(s(151));for(var u=null,d=null,h=o,g=o=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(i,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(i,h),o=a(y,o,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(i,h),A&&Li(i,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(i,v.value,l),v!==null&&(o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return A&&Li(i,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,i,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(i,e)}),A&&Li(i,g),u}function b(e,r,a,c){if(typeof a==`object`&&a&&a.type===y&&a.key===null&&(a=a.props.children),typeof a==`object`&&a){switch(a.$$typeof){case _:a:{for(var l=a.key;r!==null;){if(r.key===l){if(l=a.type,l===y){if(r.tag===7){n(e,r.sibling),c=i(r,a.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===ae&&La(l)===r.type){n(e,r.sibling),c=i(r,a.props),Wa(c,a),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}a.type===y?(c=Si(a.props.children,e.mode,c,a.key),c.return=e,e=c):(c=xi(a.type,a.key,a.props,null,e.mode,c),Wa(c,a),c.return=e,e=c)}return o(e);case v:a:{for(l=a.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),c=i(r,a.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Ti(a,e.mode,c),c.return=e,e=c}return o(e);case ae:return a=La(a),b(e,r,a,c)}if(fe(a))return h(e,r,a,c);if(le(a)){if(l=le(a),typeof l!=`function`)throw Error(s(150));return a=l.call(a),g(e,r,a,c)}if(typeof a.then==`function`)return b(e,r,Ua(a),c);if(a.$$typeof===te)return b(e,r,da(e,a),c);Ga(e,a)}return typeof a==`string`&&a!==``||typeof a==`number`||typeof a==`bigint`?(a=``+a,r!==null&&r.tag===6?(n(e,r.sibling),c=i(r,a),c.return=e,e=c):(n(e,r),c=Ci(a,e.mode,c),c.return=e,e=c),o(e)):n(e,r)}return function(e,t,n,r){try{Ha=0;var i=b(e,t,n,r);return Va=null,i}catch(t){if(t===ja||t===Na)throw t;var a=_i(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var qa=Ka(!0),Ja=Ka(!1),Ya=!1;function Xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Za(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $a(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,U&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=mi(e),pi(e,null,n),t}return ui(e,r,t,n),mi(e)}function eo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}function to(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var no=!1;function ro(){if(no){var e=Sa;if(e!==null)throw e}}function io(e,t,n,r){no=!1;var i=e.updateQueue;Ya=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(K&f)===f:(r&f)===f){f!==0&&f===xa&&(no=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Ya=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Yl|=o,e.lanes=o,e.memoizedState=d}}function ao(e,t){if(typeof e!=`function`)throw Error(s(191,e));e.call(t)}function oo(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ao(n[e],t)}var so=ge(null),co=ge(0);function lo(e,t){e=ql,T(co,e),T(so,t),ql=e|t.baseLanes}function uo(){T(co,ql),T(so,so.current)}function fo(){ql=co.current,_e(so),_e(co)}var po=ge(null),mo=null;function ho(e){var t=e.alternate;T(bo,bo.current&1),T(po,e),mo===null&&(t===null||so.current!==null||t.memoizedState!==null)&&(mo=e)}function go(e){T(bo,bo.current),T(po,e),mo===null&&(mo=e)}function _o(e){e.tag===22?(T(bo,bo.current),T(po,e),mo===null&&(mo=e)):vo(e)}function vo(){T(bo,bo.current),T(po,po.current)}function yo(e){_e(po),mo===e&&(mo=null),_e(bo)}var bo=ge(0);function xo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||cf(n)||lf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var So=0,j=null,M=null,Co=null,wo=!1,To=!1,Eo=!1,Do=0,Oo=0,ko=null,Ao=0;function jo(){throw Error(s(321))}function Mo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jr(e[n],t[n]))return!1;return!0}function No(e,t,n,r,i,a){return So=a,j=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?Ws:z,Eo=!1,a=n(r,i),Eo=!1,To&&(a=Fo(t,n,r,i)),Po(e),a}function Po(e){C.H=Us;var t=M!==null&&M.next!==null;if(So=0,Co=M=j=null,wo=!1,Oo=0,ko=null,t)throw Error(s(300));e===null||oc||(e=e.dependencies,e!==null&&ca(e)&&(oc=!0))}function Fo(e,t,n,r){j=e;var i=0;do{if(To&&(ko=null),Oo=0,To=!1,25<=i)throw Error(s(301));if(i+=1,Co=M=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}C.H=Gs,a=t(n,r)}while(To);return a}function Io(){var e=C.H,t=e.useState()[0];return t=typeof t.then==`function`?Uo(t):t,e=e.useState()[0],(M===null?null:M.memoizedState)!==e&&(j.flags|=1024),t}function Lo(){var e=Do!==0;return Do=0,e}function Ro(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function zo(e){if(wo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wo=!1}So=0,Co=M=j=null,To=!1,Oo=Do=0,ko=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Co===null?j.memoizedState=Co=e:Co=Co.next=e,Co}function Vo(){if(M===null){var e=j.alternate;e=e===null?null:e.memoizedState}else e=M.next;var t=Co===null?j.memoizedState:Co.next;if(t!==null)Co=t,M=e;else{if(e===null)throw j.alternate===null?Error(s(467)):Error(s(310));M=e,e={memoizedState:M.memoizedState,baseState:M.baseState,baseQueue:M.baseQueue,queue:M.queue,next:null},Co===null?j.memoizedState=Co=e:Co=Co.next=e}return Co}function Ho(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uo(e){var t=Oo;return Oo+=1,ko===null&&(ko=[]),e=Ia(ko,e,t),t=j,(Co===null?t.memoizedState:Co.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?Ws:z),e}function Wo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Uo(e);if(e.$$typeof===te)return ua(e)}throw Error(s(438,String(e)))}function Go(e){var t=null,n=j.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=j.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Ho(),j.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=se;return t.index++,n}function Ko(e,t){return typeof t==`function`?t(e):t}function qo(e){return Jo(Vo(),M,e)}function Jo(e,t,n){var r=e.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,i===null)e.memoizedState=a;else{t=i.next;var c=o=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(So&f)===f:(K&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===xa&&(d=!0);else if((So&p)===p){u=u.next,p===xa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,o=a):l=l.next=f,j.lanes|=p,Yl|=p;f=u.action,Eo&&n(a,f),a=u.hasEagerState?u.eagerState:n(a,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,o=a):l=l.next=p,j.lanes|=f,Yl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?o=a:l.next=c,!jr(a,e.memoizedState)&&(oc=!0,d&&(n=Sa,n!==null)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=l,r.lastRenderedState=a}return i===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Yo(e){var t=Vo(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);jr(a,t.memoizedState)||(oc=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Xo(e,t,n){var r=j,i=Vo(),a=A;if(a){if(n===void 0)throw Error(s(407));n=n()}else n=t();var o=!jr((M||i).memoizedState,n);if(o&&(i.memoizedState=n,oc=!0),i=i.queue,xs($o.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||Co!==null&&Co.memoizedState.tag&1){if(r.flags|=2048,gs(9,{destroy:void 0},Qo.bind(null,r,i,n,t),null),W===null)throw Error(s(349));a||So&127||Zo(r,t,n)}return n}function Zo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=j.updateQueue,t===null?(t=Ho(),j.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qo(e,t,n,r){t.value=n,t.getSnapshot=r,es(t)&&ts(e)}function $o(e,t,n){return n(function(){es(t)&&ts(e)})}function es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jr(e,n)}catch{return!0}}function ts(e){var t=fi(e,2);t!==null&&yu(t,e,2)}function ns(e){var t=Bo();if(typeof e==`function`){var n=e;if(e=n(),Eo){Je(!0);try{n()}finally{Je(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:e},t}function rs(e,t,n,r){return e.baseState=n,Jo(e,M,typeof r==`function`?r:Ko)}function is(e,t,n,r,i){if(Bs(e))throw Error(s(485));if(e=t.action,e!==null){var a={payload:i,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};C.T===null?a.isTransition=!1:n(!0),r(a),n=t.pending,n===null?(a.next=t.pending=a,as(t,a)):(a.next=n.next,t.pending=n.next=a)}}function as(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=C.T,o={};C.T=o;try{var s=n(i,r),c=C.S;c!==null&&c(o,s),os(e,t,s)}catch(n){cs(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),C.T=a}}else try{a=n(i,r),os(e,t,a)}catch(n){cs(e,t,n)}}function os(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){ss(e,t,n)},function(n){return cs(e,t,n)}):ss(e,t,n)}function ss(e,t,n){t.status=`fulfilled`,t.value=n,ls(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,as(e,n)))}function cs(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,ls(t),t=t.next;while(t!==r)}e.action=null}function ls(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function us(e,t){return t}function ds(e,t){if(A){var n=W.formState;if(n!==null){a:{var r=j;if(A){if(Ui){b:{for(var i=Ui,a=Gi;i.nodeType!==8;){if(!a){i=null;break b}if(i=df(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Ui=df(i.nextSibling),r=i.data===`F!`;break a}}qi(r)}r=!1}r&&(t=n[0])}}return n=Bo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},n.queue=r,n=Ls.bind(null,j,r),r.dispatch=n,r=ns(!1),a=zs.bind(null,j,!1,r.queue),r=Bo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=is.bind(null,j,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function fs(e){return ps(Vo(),M,e)}function ps(e,t,n){if(t=Jo(e,t,us)[0],e=qo(Ko)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Uo(t)}catch(e){throw e===ja?Na:e}else r=t;t=Vo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(j.flags|=2048,gs(9,{destroy:void 0},ms.bind(null,i,n),null)),[r,a,e]}function ms(e,t){e.action=t}function hs(e){var t=Vo(),n=M;if(n!==null)return ps(t,n,e);Vo(),t=t.memoizedState,n=Vo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function gs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=j.updateQueue,t===null&&(t=Ho(),j.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _s(){return Vo().memoizedState}function vs(e,t,n,r){var i=Bo();j.flags|=e,i.memoizedState=gs(1|t,{destroy:void 0},n,r===void 0?null:r)}function ys(e,t,n,r){var i=Vo();r=r===void 0?null:r;var a=i.memoizedState.inst;M!==null&&r!==null&&Mo(r,M.memoizedState.deps)?i.memoizedState=gs(t,a,n,r):(j.flags|=e,i.memoizedState=gs(1|t,a,n,r))}function bs(e,t){vs(8390656,8,e,t)}function xs(e,t){ys(2048,8,e,t)}function Ss(e){j.flags|=4;var t=j.updateQueue;if(t===null)t=Ho(),j.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Cs(e){var t=Vo().memoizedState;return Ss({ref:t,nextImpl:e}),function(){if(U&2)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function ws(e,t){return ys(4,2,e,t)}function Ts(e,t){return ys(4,4,e,t)}function Es(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ds(e,t,n){n=n==null?null:n.concat([e]),ys(4,4,Es.bind(null,t,e),n)}function Os(){}function ks(e,t){var n=Vo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function As(e,t){var n=Vo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Mo(t,r[1]))return r[0];if(r=e(),Eo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r}function N(e,t,n){return n===void 0||So&1073741824&&!(K&261930)?e.memoizedState=t:(e.memoizedState=n,e=vu(),j.lanes|=e,Yl|=e,n)}function js(e,t,n,r){return jr(n,t)?n:so.current===null?!(So&42)||So&1073741824&&!(K&261930)?(oc=!0,e.memoizedState=n):(e=vu(),j.lanes|=e,Yl|=e,t):(e=N(e,n,r),jr(e,t)||(oc=!0),e)}function Ms(e,t,n,r,i){var a=w.p;w.p=a!==0&&8>a?a:8;var o=C.T,s={};C.T=s,zs(e,!1,t,n);try{var c=i(),l=C.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Rs(e,t,Ta(c,r),_u(e)):Rs(e,t,r,_u(e))}catch(n){Rs(e,t,{then:function(){},status:`rejected`,reason:n},_u())}finally{w.p=a,o!==null&&s.types!==null&&(o.types=s.types),C.T=o}}function Ns(){}function P(e,t,n,r){if(e.tag!==5)throw Error(s(476));var i=Ps(e).queue;Ms(e,i,t,pe,n===null?Ns:function(){return F(e),n(r)})}function Ps(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:pe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function F(e){var t=Ps(e);t.next===null&&(t=e.alternate.memoizedState),Rs(e,t.next.queue,{},_u())}function I(){return ua($f)}function L(){return Vo().memoizedState}function R(){return Vo().memoizedState}function Fs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_u();e=Qa(n);var r=$a(t,e,n);r!==null&&(yu(r,t,n),eo(r,t,n)),t={cache:_a()},e.payload=t;return}t=t.return}}function Is(e,t,n){var r=_u();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Bs(e)?Vs(t,n):(n=di(e,t,n,r),n!==null&&(yu(n,e,r),Hs(n,t,r)))}function Ls(e,t,n){Rs(e,t,n,_u())}function Rs(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bs(e))Vs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,jr(s,o))return ui(e,t,i,0),W===null&&li(),!1}catch{}if(n=di(e,t,i,r),n!==null)return yu(n,e,r),Hs(n,t,r),!0}return!1}function zs(e,t,n,r){if(r={lane:2,revertLane:hd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Bs(e)){if(t)throw Error(s(479))}else t=di(e,n,r,2),t!==null&&yu(t,e,2)}function Bs(e){var t=e.alternate;return e===j||t!==null&&t===j}function Vs(e,t){To=wo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hs(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}var Us={readContext:ua,use:Wo,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useLayoutEffect:jo,useInsertionEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useSyncExternalStore:jo,useId:jo,useHostTransitionStatus:jo,useFormState:jo,useActionState:jo,useOptimistic:jo,useMemoCache:jo,useCacheRefresh:jo};Us.useEffectEvent=jo;var Ws={readContext:ua,use:Wo,useCallback:function(e,t){return Bo().memoizedState=[e,t===void 0?null:t],e},useContext:ua,useEffect:bs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),vs(4194308,4,Es.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){vs(4,2,e,t)},useMemo:function(e,t){var n=Bo();t=t===void 0?null:t;var r=e();if(Eo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bo();if(n!==void 0){var i=n(t);if(Eo){Je(!0);try{n(t)}finally{Je(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Is.bind(null,j,e),[r.memoizedState,e]},useRef:function(e){var t=Bo();return e={current:e},t.memoizedState=e},useState:function(e){e=ns(e);var t=e.queue,n=Ls.bind(null,j,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Os,useDeferredValue:function(e,t){return N(Bo(),e,t)},useTransition:function(){var e=ns(!1);return e=Ms.bind(null,j,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=j,i=Bo();if(A){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),W===null)throw Error(s(349));K&127||Zo(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,bs($o.bind(null,r,a,e),[e]),r.flags|=2048,gs(9,{destroy:void 0},Qo.bind(null,r,a,n,t),null),n},useId:function(){var e=Bo(),t=W.identifierPrefix;if(A){var n=Ii,r=Fi;n=(r&~(1<<32-Ye(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Do++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Ao++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:I,useFormState:ds,useActionState:ds,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zs.bind(null,j,!0,n),n.dispatch=t,[e,t]},useMemoCache:Go,useCacheRefresh:function(){return Bo().memoizedState=Fs.bind(null,j)},useEffectEvent:function(e){var t=Bo(),n={impl:e};return t.memoizedState=n,function(){if(U&2)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},z={readContext:ua,use:Wo,useCallback:ks,useContext:ua,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:qo,useRef:_s,useState:function(){return qo(Ko)},useDebugValue:Os,useDeferredValue:function(e,t){return js(Vo(),M.memoizedState,e,t)},useTransition:function(){var e=qo(Ko)[0],t=Vo().memoizedState;return[typeof e==`boolean`?e:Uo(e),t]},useSyncExternalStore:Xo,useId:L,useHostTransitionStatus:I,useFormState:fs,useActionState:fs,useOptimistic:function(e,t){return rs(Vo(),M,e,t)},useMemoCache:Go,useCacheRefresh:R};z.useEffectEvent=Cs;var Gs={readContext:ua,use:Wo,useCallback:ks,useContext:ua,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:Yo,useRef:_s,useState:function(){return Yo(Ko)},useDebugValue:Os,useDeferredValue:function(e,t){var n=Vo();return M===null?N(n,e,t):js(n,M.memoizedState,e,t)},useTransition:function(){var e=Yo(Ko)[0],t=Vo().memoizedState;return[typeof e==`boolean`?e:Uo(e),t]},useSyncExternalStore:Xo,useId:L,useHostTransitionStatus:I,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var n=Vo();return M===null?(n.baseState=e,[e,n.queue.dispatch]):rs(n,M,e,t)},useMemoCache:Go,useCacheRefresh:R};Gs.useEffectEvent=Cs;function Ks(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_u(),i=Qa(r);i.payload=t,n!=null&&(i.callback=n),t=$a(e,i,r),t!==null&&(yu(t,e,r),eo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_u(),i=Qa(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=$a(e,i,r),t!==null&&(yu(t,e,r),eo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_u(),r=Qa(n);r.tag=2,t!=null&&(r.callback=t),t=$a(e,r,n),t!==null&&(yu(t,e,n),eo(t,e,n))}};function Js(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Mr(n,r)||!Mr(i,a):!0}function Ys(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qs.enqueueReplaceState(t,t.state,null)}function Xs(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Zs(e){ai(e)}function Qs(e){console.error(e)}function $s(e){ai(e)}function ec(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function tc(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function B(e,t,n){return n=Qa(n),n.tag=3,n.payload={element:null},n.callback=function(){ec(e,t)},n}function nc(e){return e=Qa(e),e.tag=3,e}function rc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){tc(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){tc(t,n,r),typeof i!=`function`&&(su===null?su=new Set([this]):su.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function ic(e,t,n,r,i){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&sa(t,n,i,!0),n=po.current,n!==null){switch(n.tag){case 31:case 13:return mo===null?ju():n.alternate===null&&Jl===0&&(Jl=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Pa?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Yu(e,r,i)),!1;case 22:return n.flags|=65536,r===Pa?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Yu(e,r,i)),!1}throw Error(s(435,n.tag))}return Yu(e,r,i),ju(),!1}if(A)return t=po.current,t===null?(r!==Ki&&(t=Error(s(423),{cause:r}),$i(Di(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,r=Di(r,n),i=B(e.stateNode,r,i),to(e,i),Jl!==4&&(Jl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Ki&&(e=Error(s(422),{cause:r}),$i(Di(e,n)))),!1;var a=Error(s(520),{cause:r});if(a=Di(a,n),eu===null?eu=[a]:eu.push(a),Jl!==4&&(Jl=2),t===null)return!0;r=Di(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=B(n.stateNode,r,e),to(n,e),!1;case 1:if(t=n.type,a=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||a!==null&&typeof a.componentDidCatch==`function`&&(su===null||!su.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=nc(i),rc(i,e,n,r),to(n,i),!1}n=n.return}while(n!==null);return!1}var ac=Error(s(461)),oc=!1;function sc(e,t,n,r){t.child=e===null?Ja(t,null,n,r):qa(t,e.child,n,r)}function cc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return la(t),r=No(e,t,n,o,a,i),s=Lo(),e!==null&&!oc?(Ro(e,t,i),Ac(e,t,i)):(A&&s&&zi(t),t.flags|=1,sc(e,t,r,i),t.child)}function lc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!vi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,uc(e,t,a,r,i)):(e=xi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!jc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Mr:n,n(o,r)&&e.ref===t.ref)return Ac(e,t,i)}return t.flags|=1,e=yi(a,r),e.ref=t.ref,e.return=t,t.child=e}function uc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Mr(a,r)&&e.ref===t.ref)if(oc=!1,t.pendingProps=r=a,jc(e,i))e.flags&131072&&(oc=!0);else return t.lanes=e.lanes,Ac(e,t,i)}return _c(e,t,n,r,i)}function dc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return pc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ka(t,a===null?null:a.cachePool),a===null?uo():lo(t,a),_o(t);else return r=t.lanes=536870912,pc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ka(t,null),uo(),vo(t)):(ka(t,a.cachePool),lo(t,a),vo(t),t.memoizedState=null);return sc(e,t,i,n),t.child}function fc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function pc(e,t,n,r,i){var a=Oa();return a=a===null?null:{parent:ga._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ka(t,null),uo(),_o(t),e!==null&&sa(e,t,r,!0),t.childLanes=i,null}function V(e,t){return t=Ec({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function mc(e,t,n){return qa(t,e.child,null,n),e=V(t,t.pendingProps),e.flags|=2,yo(t),t.memoizedState=null,e}function hc(e,t,n){var r=t.pendingProps,i=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(A){if(r.mode===`hidden`)return e=V(t,r),t.lanes=536870912,fc(null,e);if(go(t),(e=Ui)?(e=sf(e,Gi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pi===null?null:{id:Fi,overflow:Ii},retryLane:536870912,hydrationErrors:null},n=wi(e),n.return=t,t.child=n,Hi=t,Ui=null)):e=null,e===null)throw qi(t);return t.lanes=536870912,null}return V(t,r)}var a=e.memoizedState;if(a!==null){var o=a.dehydrated;if(go(t),i)if(t.flags&256)t.flags&=-257,t=mc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(oc||sa(e,t,n,!1),i=(n&e.childLanes)!==0,oc||i){if(r=W,r!==null&&(o=ft(r,n),o!==0&&o!==a.retryLane))throw a.retryLane=o,fi(e,o),yu(r,e,o),ac;ju(),t=mc(e,t,n)}else e=a.treeContext,Ui=df(o.nextSibling),Hi=t,A=!0,Wi=null,Gi=!1,e!==null&&Vi(t,e),t=V(t,r),t.flags|=4096;return t}return e=yi(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function gc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function _c(e,t,n,r,i){return la(t),n=No(e,t,n,r,void 0,i),r=Lo(),e!==null&&!oc?(Ro(e,t,i),Ac(e,t,i)):(A&&r&&zi(t),t.flags|=1,sc(e,t,n,i),t.child)}function vc(e,t,n,r,i,a){return la(t),t.updateQueue=null,n=Fo(t,r,n,i),Po(e),r=Lo(),e!==null&&!oc?(Ro(e,t,a),Ac(e,t,a)):(A&&r&&zi(t),t.flags|=1,sc(e,t,n,a),t.child)}function yc(e,t,n,r,i){if(la(t),t.stateNode===null){var a=hi,o=n.contextType;typeof o==`object`&&o&&(a=ua(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=qs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Xa(t),o=n.contextType,a.context=typeof o==`object`&&o?ua(o):hi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Ks(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&qs.enqueueReplaceState(a,a.state,null),io(t,r,a,i),ro(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Xs(n,s);a.props=c;var l=a.context,u=n.contextType;o=hi,typeof u==`object`&&u&&(o=ua(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Ys(t,a,r,o),Ya=!1;var f=t.memoizedState;a.state=f,io(t,r,a,i),ro(),l=t.memoizedState,s||f!==l||Ya?(typeof d==`function`&&(Ks(t,n,d,r),l=t.memoizedState),(c=Ya||Js(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Za(e,t),o=t.memoizedProps,u=Xs(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=hi,typeof l==`object`&&l&&(c=ua(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Ys(t,a,r,c),Ya=!1,f=t.memoizedState,a.state=f,io(t,r,a,i),ro();var p=t.memoizedState;o!==d||f!==p||Ya||e!==null&&e.dependencies!==null&&ca(e.dependencies)?(typeof s==`function`&&(Ks(t,n,s,r),p=t.memoizedState),(u=Ya||Js(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&ca(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,gc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=qa(t,e.child,null,i),t.child=qa(t,null,n,i)):sc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Ac(e,t,i),e}function bc(e,t,n,r){return Zi(),t.flags|=256,sc(e,t,n,r),t.child}var xc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sc(e){return{baseLanes:e,cachePool:Aa()}}function Cc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Ql),e}function wc(e,t,n){var r=t.pendingProps,i=!1,a=(t.flags&128)!=0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(bo.current&2)!=0),o&&(i=!0,t.flags&=-129),o=(t.flags&32)!=0,t.flags&=-33,e===null){if(A){if(i?ho(t):vo(t),(e=Ui)?(e=sf(e,Gi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pi===null?null:{id:Fi,overflow:Ii},retryLane:536870912,hydrationErrors:null},n=wi(e),n.return=t,t.child=n,Hi=t,Ui=null)):e=null,e===null)throw qi(t);return lf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,i?(vo(t),i=t.mode,c=Ec({mode:`hidden`,children:c},i),r=Si(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=Sc(n),r.childLanes=Cc(e,o,n),t.memoizedState=xc,fc(null,r)):(ho(t),Tc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(a)t.flags&256?(ho(t),t.flags&=-257,t=H(e,t,n)):t.memoizedState===null?(vo(t),c=r.fallback,i=t.mode,r=Ec({mode:`visible`,children:r.children},i),c=Si(c,i,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,qa(t,e.child,null,n),r=t.child,r.memoizedState=Sc(n),r.childLanes=Cc(e,o,n),t.memoizedState=xc,t=fc(null,r)):(vo(t),t.child=e.child,t.flags|=128,t=null);else if(ho(t),lf(c)){if(o=c.nextSibling&&c.nextSibling.dataset,o)var u=o.dgst;o=u,r=Error(s(419)),r.stack=``,r.digest=o,$i({value:r,source:null,stack:null}),t=H(e,t,n)}else if(oc||sa(e,t,n,!1),o=(n&e.childLanes)!==0,oc||o){if(o=W,o!==null&&(r=ft(o,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,fi(e,r),yu(o,e,r),ac;cf(c)||ju(),t=H(e,t,n)}else cf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Ui=df(c.nextSibling),Hi=t,A=!0,Wi=null,Gi=!1,e!==null&&Vi(t,e),t=Tc(t,r.children),t.flags|=4096);return t}return i?(vo(t),c=r.fallback,i=t.mode,l=e.child,u=l.sibling,r=yi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=Si(c,i,n,null),c.flags|=2):c=yi(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,fc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=Sc(n):(i=c.cachePool,i===null?i=Aa():(l=ga._currentValue,i=i.parent===l?i:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:i}),r.memoizedState=c,r.childLanes=Cc(e,o,n),t.memoizedState=xc,fc(e.child,r)):(ho(t),n=e.child,e=n.sibling,n=yi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function Tc(e,t){return t=Ec({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Ec(e,t){return e=_i(22,e,null,t),e.lanes=0,e}function H(e,t,n){return qa(t,e.child,null,n),e=Tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),aa(e.return,t,n)}function Oc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function kc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=bo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,T(bo,o),sc(e,t,r,n),r=A?ji:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dc(e,n,t);else if(e.tag===19)Dc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&xo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Oc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&xo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Oc(t,!0,n,null,a,r);break;case`together`:Oc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Ac(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(sa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=yi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&ca(e))):!0}function Mc(e,t,n){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),ra(t,ga,e.memoizedState.cache),Zi();break;case 27:case 5:we(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:ra(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,go(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(ho(t),e=Ac(e,t,n),e===null?null:e.sibling):wc(e,t,n):(ho(t),t.flags|=128,null);ho(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(sa(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return kc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),T(bo,bo.current),r)break;return null;case 22:return t.lanes=0,dc(e,t,n,t.pendingProps);case 24:ra(t,ga,e.memoizedState.cache)}return Ac(e,t,n)}function Nc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)oc=!0;else{if(!jc(e,n)&&!(t.flags&128))return oc=!1,Mc(e,t,n);oc=!!(e.flags&131072)}else oc=!1,A&&t.flags&1048576&&Ri(t,ji,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=La(t.elementType),t.type=e,typeof e==`function`)vi(e)?(r=Xs(e,r),t.tag=1,t=yc(null,t,e,r,n)):(t.tag=0,t=_c(null,t,e,r,n));else{if(e!=null){var i=e.$$typeof;if(i===S){t.tag=11,t=cc(null,t,e,r,n);break a}else if(i===ie){t.tag=14,t=lc(null,t,e,r,n);break a}}throw t=de(e)||e,Error(s(306,t,``))}}return t;case 0:return _c(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,i=Xs(r,t.pendingProps),yc(e,t,r,i,n);case 3:a:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,Za(e,t),io(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ra(t,ga,r),r!==a.cache&&oa(t,[ga],n,!0),ro(),r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=bc(e,t,r,n);break a}else if(r!==i){i=Di(Error(s(424)),t),$i(i),t=bc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Ui=df(e.firstChild),Hi=t,A=!0,Wi=null,Gi=!0,n=Ja(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Zi(),r===i){t=Ac(e,t,n);break a}sc(e,t,r,n)}t=t.child}return t;case 26:return gc(e,t),e===null?(n=jf(t.type,null,t.pendingProps,null))?t.memoizedState=n:A||(n=t.type,e=t.pendingProps,r=Ud(be.current).createElement(n),r[vt]=t,r[yt]=e,Ld(r,n,e),jt(r),t.stateNode=r):t.memoizedState=jf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return we(t),e===null&&A&&(r=t.stateNode=mf(t.type,t.pendingProps,be.current),Hi=t,Gi=!0,i=Ui,ef(t.type)?(ff=i,Ui=df(r.firstChild)):Ui=i),sc(e,t,t.pendingProps.children,n),gc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&A&&((i=r=Ui)&&(r=af(r,t.type,t.pendingProps,Gi),r===null?i=!1:(t.stateNode=r,Hi=t,Ui=df(r.firstChild),Gi=!1,i=!0)),i||qi(t)),we(t),i=t.type,a=t.pendingProps,o=e===null?null:e.memoizedProps,r=a.children,Kd(i,a)?r=null:o!==null&&Kd(i,o)&&(t.flags|=32),t.memoizedState!==null&&(i=No(e,t,Io,null,null,n),$f._currentValue=i),gc(e,t),sc(e,t,r,n),t.child;case 6:return e===null&&A&&((e=n=Ui)&&(n=of(n,t.pendingProps,Gi),n===null?e=!1:(t.stateNode=n,Hi=t,Ui=null,e=!0)),e||qi(t)),null;case 13:return wc(e,t,n);case 4:return Se(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qa(t,null,r,n):sc(e,t,r,n),t.child;case 11:return cc(e,t,t.type,t.pendingProps,n);case 7:return sc(e,t,t.pendingProps,n),t.child;case 8:return sc(e,t,t.pendingProps.children,n),t.child;case 12:return sc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ra(t,t.type,r.value),sc(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,la(t),i=ua(i),r=r(i),t.flags|=1,sc(e,t,r,n),t.child;case 14:return lc(e,t,t.type,t.pendingProps,n);case 15:return uc(e,t,t.type,t.pendingProps,n);case 19:return kc(e,t,n);case 31:return hc(e,t,n);case 22:return dc(e,t,n,t.pendingProps);case 24:return la(t),r=ua(ga),e===null?(i=Oa(),i===null&&(i=W,a=_a(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},Xa(t),ra(t,ga,i)):((e.lanes&n)!==0&&(Za(e,t),io(t,null,null,n),ro()),i=e.memoizedState,a=t.memoizedState,i.parent===r?(r=a.cache,ra(t,ga,r),r!==i.cache&&oa(t,[ga],n,!0)):(i={parent:r,cache:r},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),ra(t,ga,r))),sc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Pc(e){e.flags|=4}function Fc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Ou())e.flags|=8192;else throw Ra=Pa,Ma}else e.flags&=-16777217}function Ic(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Kf(t))if(Ou())e.flags|=8192;else throw Ra=Pa,Ma}function Lc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:ot(),e.lanes|=t,$l|=t)}function Rc(e,t){if(!A)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Bc(e,t,n){var r=t.pendingProps;switch(Bi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zc(t),null;case 1:return zc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ia(ga),Ce(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Xi(t)?Pc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qi())),zc(t),null;case 26:var i=t.type,a=t.memoizedState;return e===null?(Pc(t),a===null?(zc(t),Fc(t,i,null,r,n)):(zc(t),Ic(t,a))):a?a===e.memoizedState?(zc(t),t.flags&=-16777217):(Pc(t),zc(t),Ic(t,a)):(e=e.memoizedProps,e!==r&&Pc(t),zc(t),Fc(t,i,e,r,n)),null;case 27:if(Te(t),n=be.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return zc(t),null}e=ve.current,Xi(t)?Ji(t,e):(e=mf(i,r,n),t.stateNode=e,Pc(t))}return zc(t),null;case 5:if(Te(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return zc(t),null}if(a=ve.current,Xi(t))Ji(t,a);else{var o=Ud(be.current);switch(a){case 1:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case 2:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;default:switch(i){case`svg`:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case`math`:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;case`script`:a=o.createElement(`div`),a.innerHTML=`<script><\/script>`,a=a.removeChild(a.firstChild);break;case`select`:a=typeof r.is==`string`?o.createElement(`select`,{is:r.is}):o.createElement(`select`),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is==`string`?o.createElement(i,{is:r.is}):o.createElement(i)}}a[vt]=t,a[yt]=r;a:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)a.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break a;for(;o.sibling===null;){if(o.return===null||o.return===t)break a;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;a:switch(Ld(a,i,r),i){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Pc(t)}}return zc(t),Fc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(s(166));if(e=be.current,Xi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,i=Hi,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Fd(e.nodeValue,n)),e||qi(t,!0)}else e=Ud(e).createTextNode(r),e[vt]=t,t.stateNode=e}return zc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Xi(t),n!==null){if(e===null){if(!r)throw Error(s(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(557));e[vt]=t}else Zi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zc(t),e=!1}else n=Qi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(yo(t),t):(yo(t),null);if(t.flags&128)throw Error(s(558))}return zc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Xi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(s(318));if(i=t.memoizedState,i=i===null?null:i.dehydrated,!i)throw Error(s(317));i[vt]=t}else Zi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zc(t),i=!1}else i=Qi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(yo(t),t):(yo(t),null)}return yo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Lc(t,t.updateQueue),zc(t),null);case 4:return Ce(),e===null&&Td(t.stateNode.containerInfo),zc(t),null;case 10:return ia(t.type),zc(t),null;case 19:if(_e(bo),r=t.memoizedState,r===null)return zc(t),null;if(i=(t.flags&128)!=0,a=r.rendering,a===null)if(i)Rc(r,!1);else{if(Jl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=xo(e),a!==null){for(t.flags|=128,Rc(r,!1),e=a.updateQueue,t.updateQueue=e,Lc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)bi(n,e),n=n.sibling;return T(bo,bo.current&1|2),A&&Li(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Re()>au&&(t.flags|=128,i=!0,Rc(r,!1),t.lanes=4194304)}else{if(!i)if(e=xo(a),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Lc(t,e),Rc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!a.alternate&&!A)return zc(t),null}else 2*Re()-r.renderingStartTime>au&&n!==536870912&&(t.flags|=128,i=!0,Rc(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e===null?t.child=a:e.sibling=a,r.last=a)}return r.tail===null?(zc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Re(),e.sibling=null,n=bo.current,T(bo,i?n&1|2:n&1),A&&Li(t,r.treeForkCount),e);case 22:case 23:return yo(t),fo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(zc(t),t.subtreeFlags&6&&(t.flags|=8192)):zc(t),n=t.updateQueue,n!==null&&Lc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&_e(Da),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ia(ga),zc(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Vc(e,t){switch(Bi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ia(ga),Ce(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Te(t),null;case 31:if(t.memoizedState!==null){if(yo(t),t.alternate===null)throw Error(s(340));Zi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(yo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Zi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(bo),null;case 4:return Ce(),null;case 10:return ia(t.type),null;case 22:case 23:return yo(t),fo(),e!==null&&_e(Da),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ia(ga),null;case 25:return null;default:return null}}function Hc(e,t){switch(Bi(t),t.tag){case 3:ia(ga),Ce();break;case 26:case 27:case 5:Te(t);break;case 4:Ce();break;case 31:t.memoizedState!==null&&yo(t);break;case 13:yo(t);break;case 19:_e(bo);break;case 10:ia(t.type);break;case 22:case 23:yo(t),fo(),e!==null&&_e(Da);break;case 24:ia(ga)}}function Uc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){q(t,t.return,e)}}function Wc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){q(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){q(t,t.return,e)}}function Gc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{oo(t,n)}catch(t){q(e,e.return,t)}}}function Kc(e,t,n){n.props=Xs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){q(e,t,n)}}function qc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){q(e,t,n)}}function Jc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){q(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){q(e,t,n)}else n.current=null}function Yc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){q(e,e.return,t)}}function Xc(e,t,n){try{var r=e.stateNode;Rd(r,e.type,n,t),r[yt]=t}catch(t){q(e,e.return,t)}}function Zc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ef(e.type)||e.tag===4}function Qc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ef(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $c(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=dn));else if(r!==4&&(r===27&&ef(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for($c(e,t,n),e=e.sibling;e!==null;)$c(e,t,n),e=e.sibling}function el(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&ef(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(el(e,t,n),e=e.sibling;e!==null;)el(e,t,n),e=e.sibling}function tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ld(t,r,n),t[vt]=e,t[yt]=n}catch(t){q(e,e.return,t)}}var nl=!1,rl=!1,il=!1,al=typeof WeakSet==`function`?WeakSet:Set,ol=null;function sl(e,t){if(e=e.containerInfo,Vd=cp,e=Ir(e),Lr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break a}var o=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(c=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===i&&(c=o),p===a&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Hd={focusedElem:e,selectionRange:n},cp=!1,ol=t;ol!==null;)if(t=ol,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,ol=e;else for(;ol!==null;){switch(t=ol,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var h=Xs(n.type,i);e=r.getSnapshotBeforeUpdate(h,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){q(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)rf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:rf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,ol=e;break}ol=t.return}}function cl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Cl(e,n),r&4&&Uc(5,n);break;case 1:if(Cl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){q(n,n.return,e)}else{var i=Xs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){q(n,n.return,e)}}r&64&&Gc(n),r&512&&qc(n,n.return);break;case 3:if(Cl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{oo(e,t)}catch(e){q(n,n.return,e)}}break;case 27:t===null&&r&4&&tl(n);case 26:case 5:Cl(e,n),t===null&&r&4&&Yc(n),r&512&&qc(n,n.return);break;case 12:Cl(e,n);break;case 31:Cl(e,n),r&4&&ml(e,n);break;case 13:Cl(e,n),r&4&&hl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Qu.bind(null,n),uf(e,n))));break;case 22:if(r=n.memoizedState!==null||nl,!r){t=t!==null&&t.memoizedState!==null||rl,i=nl;var a=rl;nl=r,(rl=t)&&!a?Tl(e,n,(n.subtreeFlags&8772)!=0):Cl(e,n),nl=i,rl=a}break;case 30:break;default:Cl(e,n)}}function ll(e){var t=e.alternate;t!==null&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Et(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ul=null,dl=!1;function fl(e,t,n){for(n=n.child;n!==null;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(qe&&typeof qe.onCommitFiberUnmount==`function`)try{qe.onCommitFiberUnmount(Ke,n)}catch{}switch(n.tag){case 26:rl||Jc(n,t),fl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:rl||Jc(n,t);var r=ul,i=dl;ef(n.type)&&(ul=n.stateNode,dl=!1),fl(e,t,n),hf(n.stateNode),ul=r,dl=i;break;case 5:rl||Jc(n,t);case 6:if(r=ul,i=dl,ul=null,fl(e,t,n),ul=r,dl=i,ul!==null)if(dl)try{(ul.nodeType===9?ul.body:ul.nodeName===`HTML`?ul.ownerDocument.body:ul).removeChild(n.stateNode)}catch(e){q(n,t,e)}else try{ul.removeChild(n.stateNode)}catch(e){q(n,t,e)}break;case 18:ul!==null&&(dl?(e=ul,tf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Pp(e)):tf(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,fl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:Wc(2,n,t),rl||Wc(4,n,t),fl(e,t,n);break;case 1:rl||(Jc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Kc(n,t,r)),fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:rl=(r=rl)||n.memoizedState!==null,fl(e,t,n),rl=r;break;default:fl(e,t,n)}}function ml(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pp(e)}catch(e){q(t,t.return,e)}}}function hl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pp(e)}catch(e){q(t,t.return,e)}}function gl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new al),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new al),t;default:throw Error(s(435,e.tag))}}function _l(e,t){var n=gl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=$u.bind(null,e,t);t.then(r,r)}})}function vl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,c=o;a:for(;c!==null;){switch(c.tag){case 27:if(ef(c.type)){ul=c.stateNode,dl=!1;break a}break;case 5:ul=c.stateNode,dl=!1;break a;case 3:case 4:ul=c.stateNode.containerInfo,dl=!0;break a}c=c.return}if(ul===null)throw Error(s(160));pl(a,o,i),ul=null,dl=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)bl(t,e),t=t.sibling}var yl=null;function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vl(t,e),xl(e),r&4&&(Wc(3,e,e.return),Uc(3,e),Wc(5,e,e.return));break;case 1:vl(t,e),xl(e),r&512&&(rl||n===null||Jc(n,n.return)),r&64&&nl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=yl;if(vl(t,e),xl(e),r&512&&(rl||n===null||Jc(n,n.return)),r&4){var a=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;b:switch(r){case`title`:a=i.getElementsByTagName(`title`)[0],(!a||a[Tt]||a[vt]||a.namespaceURI===`http://www.w3.org/2000/svg`||a.hasAttribute(`itemprop`))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector(`head > title`))),Ld(a,r,n),a[vt]=e,jt(a),r=a;break a;case`link`:var o=Uf(`link`,`href`,i).get(r+(n.href||``));if(o){for(var c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&a.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&a.getAttribute(`title`)===(n.title==null?null:n.title)&&a.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(c,1);break b}}a=i.createElement(r),Ld(a,r,n),i.head.appendChild(a);break;case`meta`:if(o=Uf(`meta`,`content`,i).get(r+(n.content||``))){for(c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`content`)===(n.content==null?null:``+n.content)&&a.getAttribute(`name`)===(n.name==null?null:n.name)&&a.getAttribute(`property`)===(n.property==null?null:n.property)&&a.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){o.splice(c,1);break b}}a=i.createElement(r),Ld(a,r,n),i.head.appendChild(a);break;default:throw Error(s(468,r))}a[vt]=e,jt(a),r=a}e.stateNode=r}else Wf(i,e.type,e.stateNode);else e.stateNode=Rf(i,r,e.memoizedProps);else a===r?r===null&&e.stateNode!==null&&Xc(e,e.memoizedProps,n.memoizedProps):(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?Wf(i,e.type,e.stateNode):Rf(i,r,e.memoizedProps))}break;case 27:vl(t,e),xl(e),r&512&&(rl||n===null||Jc(n,n.return)),n!==null&&r&4&&Xc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(vl(t,e),xl(e),r&512&&(rl||n===null||Jc(n,n.return)),e.flags&32){i=e.stateNode;try{nn(i,``)}catch(t){q(e,e.return,t)}}r&4&&e.stateNode!=null&&(i=e.memoizedProps,Xc(e,i,n===null?i:n.memoizedProps)),r&1024&&(il=!0);break;case 6:if(vl(t,e),xl(e),r&4){if(e.stateNode===null)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){q(e,e.return,t)}}break;case 3:if(Hf=null,i=yl,yl=vf(t.containerInfo),vl(t,e),yl=i,xl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pp(t.containerInfo)}catch(t){q(e,e.return,t)}il&&(il=!1,Sl(e));break;case 4:r=yl,yl=vf(e.stateNode.containerInfo),vl(t,e),xl(e),yl=r;break;case 12:vl(t,e),xl(e);break;case 31:vl(t,e),xl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,_l(e,r)));break;case 13:vl(t,e),xl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ru=Re()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,_l(e,r)));break;case 22:i=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=nl,d=rl;if(nl=u||i,rl=d||l,vl(t,e),rl=d,nl=u,xl(e),r&8192)a:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||l||nl||rl||wl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(a=l.stateNode,i)o=a.style,typeof o.setProperty==`function`?o.setProperty(`display`,`none`,`important`):o.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){q(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=i?``:l.memoizedProps}catch(e){q(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;i?nf(m,!0):nf(l.stateNode,!1)}catch(e){q(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,_l(e,n))));break;case 19:vl(t,e),xl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,_l(e,r)));break;case 30:break;case 21:break;default:vl(t,e),xl(e)}}function xl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Zc(r)){n=r;break}r=r.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;el(e,Qc(e),i);break;case 5:var a=n.stateNode;n.flags&32&&(nn(a,``),n.flags&=-33),el(e,Qc(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;$c(e,Qc(e),o);break;default:throw Error(s(161))}}catch(t){q(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Sl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Cl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cl(e,t.alternate,t),t=t.sibling}function wl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wc(4,t,t.return),wl(t);break;case 1:Jc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Kc(t,t.return,n),wl(t);break;case 27:hf(t.stateNode);case 26:case 5:Jc(t,t.return),wl(t);break;case 22:t.memoizedState===null&&wl(t);break;case 30:wl(t);break;default:wl(t)}e=e.sibling}}function Tl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Tl(i,a,n),Uc(4,a);break;case 1:if(Tl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){q(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)ao(c[i],s)}catch(e){q(r,r.return,e)}}n&&o&64&&Gc(a),qc(a,a.return);break;case 27:tl(a);case 26:case 5:Tl(i,a,n),n&&r===null&&o&4&&Yc(a),qc(a,a.return);break;case 12:Tl(i,a,n);break;case 31:Tl(i,a,n),n&&o&4&&ml(i,a);break;case 13:Tl(i,a,n),n&&o&4&&hl(i,a);break;case 22:a.memoizedState===null&&Tl(i,a,n),qc(a,a.return);break;case 30:break;default:Tl(i,a,n)}t=t.sibling}}function El(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&va(n))}function Dl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&va(e))}function Ol(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)kl(e,t,n,r),t=t.sibling}function kl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ol(e,t,n,r),i&2048&&Uc(9,t);break;case 1:Ol(e,t,n,r);break;case 3:Ol(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&va(e)));break;case 12:if(i&2048){Ol(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){q(t,t.return,e)}}else Ol(e,t,n,r);break;case 31:Ol(e,t,n,r);break;case 13:Ol(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Ol(e,t,n,r):(a._visibility|=2,Al(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Ol(e,t,n,r):jl(e,t),i&2048&&El(o,t);break;case 24:Ol(e,t,n,r),i&2048&&Dl(t.alternate,t);break;default:Ol(e,t,n,r)}}function Al(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Al(a,o,s,c,i),Uc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Al(a,o,s,c,i)):u._visibility&2?Al(a,o,s,c,i):jl(a,o),i&&l&2048&&El(o.alternate,o);break;case 24:Al(a,o,s,c,i),i&&l&2048&&Dl(o.alternate,o);break;default:Al(a,o,s,c,i)}t=t.sibling}}function jl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:jl(n,r),i&2048&&El(r.alternate,r);break;case 24:jl(n,r),i&2048&&Dl(r.alternate,r);break;default:jl(n,r)}t=t.sibling}}var Ml=8192;function Nl(e,t,n){if(e.subtreeFlags&Ml)for(e=e.child;e!==null;)Pl(e,t,n),e=e.sibling}function Pl(e,t,n){switch(e.tag){case 26:Nl(e,t,n),e.flags&Ml&&e.memoizedState!==null&&qf(n,yl,e.memoizedState,e.memoizedProps);break;case 5:Nl(e,t,n);break;case 3:case 4:var r=yl;yl=vf(e.stateNode.containerInfo),Nl(e,t,n),yl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Ml,Ml=16777216,Nl(e,t,n),Ml=r):Nl(e,t,n));break;default:Nl(e,t,n)}}function Fl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Il(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];ol=r,zl(r,e)}Fl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ll(e),e=e.sibling}function Ll(e){switch(e.tag){case 0:case 11:case 15:Il(e),e.flags&2048&&Wc(9,e,e.return);break;case 3:Il(e);break;case 12:Il(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Rl(e)):Il(e);break;default:Il(e)}}function Rl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];ol=r,zl(r,e)}Fl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wc(8,t,t.return),Rl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Rl(t));break;default:Rl(t)}e=e.sibling}}function zl(e,t){for(;ol!==null;){var n=ol;switch(n.tag){case 0:case 11:case 15:Wc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:va(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,ol=r;else a:for(n=e;ol!==null;){r=ol;var i=r.sibling,a=r.return;if(ll(r),r===n){ol=null;break a}if(i!==null){i.return=a,ol=i;break a}ol=a}}}var Bl={getCacheForType:function(e){var t=ua(ga),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ua(ga).controller.signal}},Vl=typeof WeakMap==`function`?WeakMap:Map,U=0,W=null,G=null,K=0,Hl=0,Ul=null,Wl=!1,Gl=!1,Kl=!1,ql=0,Jl=0,Yl=0,Xl=0,Zl=0,Ql=0,$l=0,eu=null,tu=null,nu=!1,ru=0,iu=0,au=1/0,ou=null,su=null,cu=0,lu=null,uu=null,du=0,fu=0,pu=null,mu=null,hu=0,gu=null;function _u(){return U&2&&K!==0?K&-K:C.T===null?ht():hd()}function vu(){if(Ql===0)if(!(K&536870912)||A){var e=et;et<<=1,!(et&3932160)&&(et=262144),Ql=e}else Ql=536870912;return e=po.current,e!==null&&(e.flags|=32),Ql}function yu(e,t,n){(e===W&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)&&(Eu(e,0),Cu(e,K,Ql,!1)),ct(e,n),(!(U&2)||e!==W)&&(e===W&&(!(U&2)&&(Xl|=n),Jl===4&&Cu(e,K,Ql,!1)),sd(e))}function bu(e,t,n){if(U&6)throw Error(s(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||it(e,t),i=r?Pu(e,t):Mu(e,t,!0),a=r;do{if(i===0){Gl&&!r&&Cu(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!Su(n)){i=Mu(e,t,!1),a=!1;continue}if(i===2){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=e.pendingLanes&-536870913,o=o===0?o&536870912?536870912:0:o;if(o!==0){t=o;a:{var c=e;i=eu;var l=c.current.memoizedState.isDehydrated;if(l&&(Eu(c,o).flags|=256),o=Mu(c,o,!1),o!==2){if(Kl&&!l){c.errorRecoveryDisabledLanes|=a,Xl|=a,i=4;break a}a=tu,tu=i,a!==null&&(tu===null?tu=a:tu.push.apply(tu,a))}i=o}if(a=!1,i!==2)continue}}if(i===1){Eu(e,0),Cu(e,t,0,!0);break}a:{switch(r=e,a=i,a){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Cu(r,t,Ql,!Wl);break a;case 2:tu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(i=ru+300-Re(),10<i)){if(Cu(r,t,Ql,!Wl),rt(r,0,!0)!==0)break a;du=t,r.timeoutHandle=Yd(xu.bind(null,r,n,tu,ou,nu,t,Ql,Xl,$l,Wl,a,`Throttled`,-0,0),i);break a}xu(r,n,tu,ou,nu,t,Ql,Xl,$l,Wl,a,null,-0,0)}}break}while(1);sd(e)}function xu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dn},Pl(t,a,d);var m=(a&62914560)===a?ru-Re():(a&4194048)===a?iu-Re():0;if(m=Yf(d,m),m!==null){du=a,e.cancelPendingCommit=m(Vu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Cu(e,a,o,!l);return}}Vu(e,t,a,n,r,i,o,s,c)}function Su(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!jr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cu(e,t,n,r){t&=~Zl,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Ye(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&ut(e,n,t)}function wu(){return U&6?!0:(cd(0,!1),!1)}function Tu(){if(G!==null){if(Hl===0)var e=G.return;else e=G,na=ta=null,zo(e),Va=null,Ha=0,e=G;for(;e!==null;)Hc(e.alternate,e),e=e.return;G=null}}function Eu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Xd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),du=0,Tu(),W=e,G=n=yi(e.current,null),K=t,Hl=0,Ul=null,Wl=!1,Gl=it(e,t),Kl=!1,$l=Ql=Zl=Xl=Yl=Jl=0,tu=eu=null,nu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Ye(r),a=1<<i;t|=e[i],r&=~a}return ql=t,li(),n}function Du(e,t){j=null,C.H=Us,t===ja||t===Na?(t=za(),Hl=3):t===Ma?(t=za(),Hl=4):Hl=t===ac?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Ul=t,G===null&&(Jl=1,ec(e,Di(t,e.current)))}function Ou(){var e=po.current;return e===null?!0:(K&4194048)===K?mo===null:(K&62914560)===K||K&536870912?e===mo:!1}function ku(){var e=C.H;return C.H=Us,e===null?Us:e}function Au(){var e=C.A;return C.A=Bl,e}function ju(){Jl=4,Wl||(K&4194048)!==K&&po.current!==null||(Gl=!0),!(Yl&134217727)&&!(Xl&134217727)||W===null||Cu(W,K,Ql,!1)}function Mu(e,t,n){var r=U;U|=2;var i=ku(),a=Au();(W!==e||K!==t)&&(ou=null,Eu(e,t)),t=!1;var o=Jl;a:do try{if(Hl!==0&&G!==null){var s=G,c=Ul;switch(Hl){case 8:Tu(),o=6;break a;case 3:case 2:case 9:case 6:po.current===null&&(t=!0);var l=Hl;if(Hl=0,Ul=null,Ru(e,s,c,l),n&&Gl){o=0;break a}break;default:l=Hl,Hl=0,Ul=null,Ru(e,s,c,l)}}Nu(),o=Jl;break}catch(t){Du(e,t)}while(1);return t&&e.shellSuspendCounter++,na=ta=null,U=r,C.H=i,C.A=a,G===null&&(W=null,K=0,li()),o}function Nu(){for(;G!==null;)Iu(G)}function Pu(e,t){var n=U;U|=2;var r=ku(),i=Au();W!==e||K!==t?(ou=null,au=Re()+500,Eu(e,t)):Gl=it(e,t);a:do try{if(Hl!==0&&G!==null){t=G;var a=Ul;b:switch(Hl){case 1:Hl=0,Ul=null,Ru(e,t,a,1);break;case 2:case 9:if(Fa(a)){Hl=0,Ul=null,Lu(t);break}t=function(){Hl!==2&&Hl!==9||W!==e||(Hl=7),sd(e)},a.then(t,t);break a;case 3:Hl=7;break a;case 4:Hl=5;break a;case 7:Fa(a)?(Hl=0,Ul=null,Lu(t)):(Hl=0,Ul=null,Ru(e,t,a,7));break;case 5:var o=null;switch(G.tag){case 26:o=G.memoizedState;case 5:case 27:var c=G;if(o?Kf(o):c.stateNode.complete){Hl=0,Ul=null;var l=c.sibling;if(l!==null)G=l;else{var u=c.return;u===null?G=null:(G=u,zu(u))}break b}}Hl=0,Ul=null,Ru(e,t,a,5);break;case 6:Hl=0,Ul=null,Ru(e,t,a,6);break;case 8:Tu(),Jl=6;break a;default:throw Error(s(462))}}Fu();break}catch(t){Du(e,t)}while(1);return na=ta=null,C.H=r,C.A=i,U=n,G===null?(W=null,K=0,li(),Jl):0}function Fu(){for(;G!==null&&!Ie();)Iu(G)}function Iu(e){var t=Nc(e.alternate,e,ql);e.memoizedProps=e.pendingProps,t===null?zu(e):G=t}function Lu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=vc(n,t,t.pendingProps,t.type,void 0,K);break;case 11:t=vc(n,t,t.pendingProps,t.type.render,t.ref,K);break;case 5:zo(t);default:Hc(n,t),t=G=bi(t,ql),t=Nc(n,t,ql)}e.memoizedProps=e.pendingProps,t===null?zu(e):G=t}function Ru(e,t,n,r){na=ta=null,zo(t),Va=null,Ha=0;var i=t.return;try{if(ic(e,i,t,n,K)){Jl=1,ec(e,Di(n,e.current)),G=null;return}}catch(t){if(i!==null)throw G=i,t;Jl=1,ec(e,Di(n,e.current)),G=null;return}t.flags&32768?(A||r===1?e=!0:Gl||K&536870912?e=!1:(Wl=e=!0,(r===2||r===9||r===3||r===6)&&(r=po.current,r!==null&&r.tag===13&&(r.flags|=16384))),Bu(t,e)):zu(t)}function zu(e){var t=e;do{if(t.flags&32768){Bu(t,Wl);return}e=t.return;var n=Bc(t.alternate,t,ql);if(n!==null){G=n;return}if(t=t.sibling,t!==null){G=t;return}G=t=e}while(t!==null);Jl===0&&(Jl=5)}function Bu(e,t){do{var n=Vc(e.alternate,e);if(n!==null){n.flags&=32767,G=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){G=e;return}G=e=n}while(e!==null);Jl=6,G=null}function Vu(e,t,n,r,i,a,o,c,l){e.cancelPendingCommit=null;do Ku();while(cu!==0);if(U&6)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,a|=ci,lt(e,n,a,o,c,l),e===W&&(G=W=null,K=0),uu=t,lu=e,du=n,fu=a,pu=i,mu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,ed(E,function(){return qu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=C.T,C.T=null,i=w.p,w.p=2,o=U,U|=4;try{sl(e,t,n)}finally{U=o,w.p=i,C.T=r}}cu=1,Hu(),Uu(),Wu()}}function Hu(){if(cu===1){cu=0;var e=lu,t=uu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=C.T,C.T=null;var r=w.p;w.p=2;var i=U;U|=4;try{bl(t,e);var a=Hd,o=Ir(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Fr(s.ownerDocument.documentElement,s)){if(c!==null&&Lr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Pr(s,h),v=Pr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}cp=!!Vd,Hd=Vd=null}finally{U=i,w.p=r,C.T=n}}e.current=t,cu=2}}function Uu(){if(cu===2){cu=0;var e=lu,t=uu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=C.T,C.T=null;var r=w.p;w.p=2;var i=U;U|=4;try{cl(e,t.alternate,t)}finally{U=i,w.p=r,C.T=n}}cu=3}}function Wu(){if(cu===4||cu===3){cu=0,Le();var e=lu,t=uu,n=du,r=mu;t.subtreeFlags&10256||t.flags&10256?cu=5:(cu=0,uu=lu=null,Gu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(su=null),mt(n),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot==`function`)try{qe.onCommitFiberRoot(Ke,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=C.T,i=w.p,w.p=2,C.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{C.T=t,w.p=i}}du&3&&Ku(),sd(e),i=e.pendingLanes,n&261930&&i&42?e===gu?hu++:(hu=0,gu=e):hu=0,cd(0,!1)}}function Gu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,va(t)))}function Ku(){return Hu(),Uu(),Wu(),qu()}function qu(){if(cu!==5)return!1;var e=lu,t=fu;fu=0;var n=mt(du),r=C.T,i=w.p;try{w.p=32>n?32:n,C.T=null,n=pu,pu=null;var a=lu,o=du;if(cu=0,uu=lu=null,du=0,U&6)throw Error(s(331));var c=U;if(U|=4,Ll(a.current),kl(a,a.current,o,n),U=c,cd(0,!1),qe&&typeof qe.onPostCommitFiberRoot==`function`)try{qe.onPostCommitFiberRoot(Ke,a)}catch{}return!0}finally{w.p=i,C.T=r,Gu(e,t)}}function Ju(e,t,n){t=Di(n,t),t=B(e.stateNode,t,2),e=$a(e,t,2),e!==null&&(ct(e,2),sd(e))}function q(e,t,n){if(e.tag===3)Ju(e,e,n);else for(;t!==null;){if(t.tag===3){Ju(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(su===null||!su.has(r))){e=Di(n,e),n=nc(2),r=$a(t,n,2),r!==null&&(rc(n,r,t,e),ct(r,2),sd(r));break}}t=t.return}}function Yu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Vl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Kl=!0,i.add(n),e=Xu.bind(null,e,t,n),t.then(e,e))}function Xu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,W===e&&(K&n)===n&&(Jl===4||Jl===3&&(K&62914560)===K&&300>Re()-ru?!(U&2)&&Eu(e,0):Zl|=n,$l===K&&($l=0)),sd(e)}function Zu(e,t){t===0&&(t=ot()),e=fi(e,t),e!==null&&(ct(e,t),sd(e))}function Qu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zu(e,n)}function $u(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(t),Zu(e,n)}function ed(e,t){return Pe(e,t)}var td=null,nd=null,rd=!1,id=!1,ad=!1,od=0;function sd(e){e!==nd&&e.next===null&&(nd===null?td=nd=e:nd=nd.next=e),id=!0,rd||(rd=!0,md())}function cd(e,t){if(!ad&&id){ad=!0;do for(var n=!1,r=td;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Ye(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,pd(r,a))}else a=K,a=rt(r,r===W?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||it(r,a)||(n=!0,pd(r,a));r=r.next}while(n);ad=!1}}function ld(){ud()}function ud(){id=rd=!1;var e=0;od!==0&&Jd()&&(e=od);for(var t=Re(),n=null,r=td;r!==null;){var i=r.next,a=dd(r,t);a===0?(r.next=null,n===null?td=i:n.next=i,i===null&&(nd=n)):(n=r,(e!==0||a&3)&&(id=!0)),r=i}cu!==0&&cu!==5||cd(e,!1),od!==0&&(od=0)}function dd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ye(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=at(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=W,n=K,n=rt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Fe(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||it(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Fe(r),mt(n)){case 2:case 8:n=Ve;break;case 32:n=E;break;case 268435456:n=Ue;break;default:n=E}return r=fd.bind(null,e),n=Pe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Fe(r),e.callbackPriority=2,e.callbackNode=null,2}function fd(e,t){if(cu!==0&&cu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ku()&&e.callbackNode!==n)return null;var r=K;return r=rt(e,e===W?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(bu(e,r,t),dd(e,Re()),e.callbackNode!=null&&e.callbackNode===n?fd.bind(null,e):null)}function pd(e,t){if(Ku())return null;bu(e,t,!0)}function md(){Qd(function(){U&6?Pe(Be,ld):ud()})}function hd(){if(od===0){var e=xa;e===0&&(e=$e,$e<<=1,!($e&261888)&&($e=256)),od=e}return od}function J(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:un(``+e)}function gd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function _d(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=J((i[yt]||null).action),o=r.submitter;o&&(t=(t=o[yt]||null)?J(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new Mn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(od!==0){var e=o?gd(i,o):new FormData(i);P(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?gd(i,o):new FormData(i),P(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var vd=0;vd<ri.length;vd++){var yd=ri[vd];ii(yd.toLowerCase(),`on`+(yd[0].toUpperCase()+yd.slice(1)))}ii(Yr,`onAnimationEnd`),ii(Xr,`onAnimationIteration`),ii(Zr,`onAnimationStart`),ii(`dblclick`,`onDoubleClick`),ii(`focusin`,`onFocus`),ii(`focusout`,`onBlur`),ii(Qr,`onTransitionRun`),ii($r,`onTransitionStart`),ii(ei,`onTransitionCancel`),ii(ti,`onTransitionEnd`),Ft(`onMouseEnter`,[`mouseout`,`mouseover`]),Ft(`onMouseLeave`,[`mouseout`,`mouseover`]),Ft(`onPointerEnter`,[`pointerout`,`pointerover`]),Ft(`onPointerLeave`,[`pointerout`,`pointerover`]),Pt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Pt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Pt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Pt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Pt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Pt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var bd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),xd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(bd));function Sd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ai(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ai(e)}i.currentTarget=null,a=c}}}}function Y(e,t){var n=t[xt];n===void 0&&(n=t[xt]=new Set);var r=e+`__bubble`;n.has(r)||(Ed(t,e,2,!1),n.add(r))}function Cd(e,t,n){var r=0;t&&(r|=4),Ed(n,e,r,t)}var wd=`_reactListening`+Math.random().toString(36).slice(2);function Td(e){if(!e[wd]){e[wd]=!0,Mt.forEach(function(t){t!==`selectionchange`&&(xd.has(t)||Cd(t,!1,e),Cd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wd]||(t[wd]=!0,Cd(`selectionchange`,!1,t))}}function Ed(e,t,n,r){switch(hp(t)){case 2:var i=lp;break;case 8:i=up;break;default:i=dp}n=i.bind(null,t,n,e),i=void 0,!xn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Dd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===i)return;o=o.return}for(;s!==null;){if(o=Dt(s),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){r=a=o;continue a}s=s.parentNode}}r=r.return}vn(function(){var r=a,i=pn(n),o=[];a:{var s=ni.get(e);if(s!==void 0){var c=Mn,u=e;switch(e){case`keypress`:if(Dn(n)===0)break a;case`keydown`:case`keyup`:c=Yn;break;case`focusin`:u=`focus`,c=Bn;break;case`focusout`:u=`blur`,c=Bn;break;case`beforeblur`:case`afterblur`:c=Bn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:c=Rn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:c=zn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:c=k;break;case Yr:case Xr:case Zr:c=Vn;break;case ti:c=Zn;break;case`scroll`:case`scrollend`:c=Pn;break;case`wheel`:c=Qn;break;case`copy`:case`cut`:case`paste`:c=Hn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:c=Xn;break;case`toggle`:case`beforetoggle`:c=$n}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?s===null?null:s+`Capture`:s;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=yn(m,p),g!=null&&d.push(Od(m,g,h))),f)break;m=m.return}0<d.length&&(s=new c(s,u,null,n,i),o.push({event:s,listeners:d}))}}if(!(t&7)){a:{if(s=e===`mouseover`||e===`pointerover`,c=e===`mouseout`||e===`pointerout`,s&&n!==fn&&(u=n.relatedTarget||n.fromElement)&&(Dt(u)||u[bt]))break a;if((c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(u=n.relatedTarget||n.toElement,c=r,u=u?Dt(u):null,u!==null&&(f=l(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(c=null,u=r),c!==u)){if(d=Rn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Xn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=c==null?s:kt(c),h=u==null?s:kt(u),s=new d(g,m+`leave`,c,n,i),s.target=f,s.relatedTarget=h,g=null,Dt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,c&&u)b:{for(d=Ad,p=c,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;c!==null&&jd(o,s,c,d,!1),u!==null&&f!==null&&jd(o,f,u,d,!0)}}a:{if(s=r?kt(r):window,c=s.nodeName&&s.nodeName.toLowerCase(),c===`select`||c===`input`&&s.type===`file`)var v=yr;else if(pr(s))if(br)v=kr;else{v=Dr;var y=Er}else c=s.nodeName,!c||c.toLowerCase()!==`input`||s.type!==`checkbox`&&s.type!==`radio`?r&&sn(r.elementType)&&(v=yr):v=Or;if(v&&=v(e,r)){mr(o,v,n,i);break a}y&&y(e,s,r),e===`focusout`&&r&&s.type===`number`&&r.memoizedProps.value!=null&&Qt(s,`number`,s.value)}switch(y=r?kt(r):window,e){case`focusin`:(pr(y)||y.contentEditable===`true`)&&(zr=y,Br=r,Vr=null);break;case`focusout`:Vr=Br=zr=null;break;case`mousedown`:Hr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Hr=!1,Ur(o,n,i);break;case`selectionchange`:if(Rr)break;case`keydown`:case`keyup`:Ur(o,n,i)}var b;if(tr)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else lr?sr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(ir&&n.locale!==`ko`&&(lr||x!==`onCompositionStart`?x===`onCompositionEnd`&&lr&&(b=En()):(Cn=i,wn=`value`in Cn?Cn.value:Cn.textContent,lr=!0)),y=kd(r,x),0<y.length&&(x=new Un(x,e,null,n,i),o.push({event:x,listeners:y}),b?x.data=b:(b=cr(n),b!==null&&(x.data=b)))),(b=rr?ur(e,n):dr(e,n))&&(x=kd(r,`onBeforeInput`),0<x.length&&(y=new Un(`onBeforeInput`,`beforeinput`,null,n,i),o.push({event:y,listeners:x}),y.data=b)),_d(o,e,r,n,i)}Sd(o,t)})}function Od(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=yn(e,n),i!=null&&r.unshift(Od(e,i,a)),i=yn(e,t),i!=null&&r.push(Od(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Ad(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=yn(n,a),l!=null&&o.unshift(Od(n,l,c))):i||(l=yn(n,a),l!=null&&o.push(Od(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Md=/\r\n?/g,Nd=/\u0000|\uFFFD/g;function Pd(e){return(typeof e==`string`?e:``+e).replace(Md,`
`).replace(Nd,``)}function Fd(e,t){return t=Pd(t),Pd(e)===t}function X(e,t,n,r,i,a){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||nn(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&nn(e,``+r);break;case`className`:Vt(e,`class`,r);break;case`tabIndex`:Vt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Vt(e,n,r);break;case`style`:on(e,r,a);break;case`data`:if(t!==`object`){Vt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=un(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof a==`function`&&(n===`formAction`?(t!==`input`&&X(e,t,`name`,i.name,i,null),X(e,t,`formEncType`,i.formEncType,i,null),X(e,t,`formMethod`,i.formMethod,i,null),X(e,t,`formTarget`,i.formTarget,i,null)):(X(e,t,`encType`,i.encType,i,null),X(e,t,`method`,i.method,i,null),X(e,t,`target`,i.target,i,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=un(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=dn);break;case`onScroll`:r!=null&&Y(`scroll`,e);break;case`onScrollEnd`:r!=null&&Y(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=un(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Y(`beforetoggle`,e),Y(`toggle`,e),Bt(e,`popover`,r);break;case`xlinkActuate`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Bt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=cn.get(n)||n,Bt(e,n,r))}}function Id(e,t,n,r,i,a){switch(n){case`style`:on(e,r,a);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?nn(e,r):(typeof r==`number`||typeof r==`bigint`)&&nn(e,``+r);break;case`onScroll`:r!=null&&Y(`scroll`,e);break;case`onScrollEnd`:r!=null&&Y(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=dn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Nt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(i=n.endsWith(`Capture`),t=n.slice(2,i?n.length-7:void 0),a=e[yt]||null,a=a==null?null:a[n],typeof a==`function`&&e.removeEventListener(t,a,i),typeof r==`function`)){typeof a!=`function`&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Bt(e,n,r)}}}function Ld(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Y(`error`,e),Y(`load`,e);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o!=null)switch(a){case`src`:r=!0;break;case`srcSet`:i=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:X(e,t,a,o,n,null)}}i&&X(e,t,`srcSet`,n.srcSet,n,null),r&&X(e,t,`src`,n.src,n,null);return;case`input`:Y(`invalid`,e);var c=a=o=i=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:i=d;break;case`type`:o=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:a=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(s(137,t));break;default:X(e,t,r,d,n,null)}}Zt(e,a,c,l,u,o,i,!1);return;case`select`:for(i in Y(`invalid`,e),r=o=a=null,n)if(n.hasOwnProperty(i)&&(c=n[i],c!=null))switch(i){case`value`:a=c;break;case`defaultValue`:o=c;break;case`multiple`:r=c;default:X(e,t,i,c,n,null)}t=a,n=o,e.multiple=!!r,t==null?n!=null&&$t(e,!!r,n,!0):$t(e,!!r,t,!1);return;case`textarea`:for(o in Y(`invalid`,e),a=i=r=null,n)if(n.hasOwnProperty(o)&&(c=n[o],c!=null))switch(o){case`value`:r=c;break;case`defaultValue`:i=c;break;case`children`:a=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(s(91));break;default:X(e,t,o,c,n,null)}tn(e,r,i,a);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:X(e,t,l,r,n,null)}return;case`dialog`:Y(`beforetoggle`,e),Y(`toggle`,e),Y(`cancel`,e),Y(`close`,e);break;case`iframe`:case`object`:Y(`load`,e);break;case`video`:case`audio`:for(r=0;r<bd.length;r++)Y(bd[r],e);break;case`image`:Y(`error`,e),Y(`load`,e);break;case`details`:Y(`toggle`,e);break;case`embed`:case`source`:case`link`:Y(`error`,e),Y(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:X(e,t,u,r,n,null)}return;default:if(sn(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Id(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&X(e,t,c,r,n,null))}function Rd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var i=null,a=null,o=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||X(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:a=m;break;case`name`:i=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:o=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(s(137,t));break;default:m!==f&&X(e,t,p,m,r,f)}}Xt(e,o,c,l,u,d,a,i);return;case`select`:for(a in m=o=c=p=null,n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(a)||X(e,t,a,null,r,l)}for(i in r)if(a=r[i],l=n[i],r.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case`value`:p=a;break;case`defaultValue`:c=a;break;case`multiple`:o=a;default:a!==l&&X(e,t,i,a,r,l)}t=c,n=o,r=m,p==null?!!r!=!!n&&(t==null?$t(e,!!n,n?[]:``,!1):$t(e,!!n,t,!0)):$t(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(i=n[c],n.hasOwnProperty(c)&&i!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:X(e,t,c,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(i!=null||a!=null))switch(o){case`value`:p=i;break;case`defaultValue`:m=i;break;case`children`:break;case`dangerouslySetInnerHTML`:if(i!=null)throw Error(s(91));break;default:i!==a&&X(e,t,o,i,r,a)}en(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:X(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:X(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&X(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(s(137,t));break;default:X(e,t,u,p,r,m)}return;default:if(sn(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Id(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Id(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&X(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||X(e,t,f,p,r,m)}function zd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Bd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&zd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&zd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Vd=null,Hd=null;function Ud(e){return e.nodeType===9?e:e.ownerDocument}function Wd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Gd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Kd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qd=null;function Jd(){var e=window.event;return e&&e.type===`popstate`?e===qd?!1:(qd=e,!0):(qd=null,!1)}var Yd=typeof setTimeout==`function`?setTimeout:void 0,Xd=typeof clearTimeout==`function`?clearTimeout:void 0,Zd=typeof Promise==`function`?Promise:void 0,Qd=typeof queueMicrotask==`function`?queueMicrotask:Zd===void 0?Yd:function(e){return Zd.resolve(null).then(e).catch($d)};function $d(e){setTimeout(function(){throw e})}function ef(e){return e===`head`}function tf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Pp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)hf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,hf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[Tt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&hf(e.ownerDocument.body);n=i}while(n);Pp(t)}function nf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function rf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:rf(n),Et(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function af(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[Tt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=df(e.nextSibling),e===null)break}return null}function of(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=df(e.nextSibling),e===null))return null;return e}function sf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=df(e.nextSibling),e===null))return null;return e}function cf(e){return e.data===`$?`||e.data===`$~`}function lf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function uf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function df(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var ff=null;function Z(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return df(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function pf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function mf(e,t,n){switch(t=Ud(n),e){case`html`:if(e=t.documentElement,!e)throw Error(s(452));return e;case`head`:if(e=t.head,!e)throw Error(s(453));return e;case`body`:if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Et(e)}var gf=new Map,_f=new Set;function vf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yf=w.d;w.d={f:bf,r:xf,D:wf,C:Tf,L:Ef,m:Df,X:kf,S:Of,M:Af};function bf(){var e=yf.f(),t=wu();return e||t}function xf(e){var t=Ot(e);t!==null&&t.tag===5&&t.type===`form`?F(t):yf.r(e)}var Sf=typeof document>`u`?null:document;function Cf(e,t,n){var r=Sf;if(r&&typeof t==`string`&&t){var i=Yt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),_f.has(i)||(_f.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Ld(t,`link`,e),jt(t),r.head.appendChild(t)))}}function wf(e){yf.D(e),Cf(`dns-prefetch`,e,null)}function Tf(e,t){yf.C(e,t),Cf(`preconnect`,e,t)}function Ef(e,t,n){yf.L(e,t,n);var r=Sf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Yt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Yt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Yt(n.imageSizes)+`"]`)):i+=`[href="`+Yt(e)+`"]`;var a=i;switch(t){case`style`:a=Mf(e);break;case`script`:a=If(e)}gf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),gf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Nf(a))||t===`script`&&r.querySelector(Lf(a))||(t=r.createElement(`link`),Ld(t,`link`,e),jt(t),r.head.appendChild(t)))}}function Df(e,t){yf.m(e,t);var n=Sf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Yt(r)+`"][href="`+Yt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=If(e)}if(!gf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),gf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Lf(a)))return}r=n.createElement(`link`),Ld(r,`link`,e),jt(r),n.head.appendChild(r)}}}function Of(e,t,n){yf.S(e,t,n);var r=Sf;if(r&&e){var i=At(r).hoistableStyles,a=Mf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Nf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=gf.get(a))&&Bf(e,n);var c=o=r.createElement(`link`);jt(c),Ld(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,zf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function kf(e,t){yf.X(e,t);var n=Sf;if(n&&e){var r=At(n).hoistableScripts,i=If(e),a=r.get(i);a||(a=n.querySelector(Lf(i)),a||(e=h({src:e,async:!0},t),(t=gf.get(i))&&Vf(e,t),a=n.createElement(`script`),jt(a),Ld(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Af(e,t){yf.M(e,t);var n=Sf;if(n&&e){var r=At(n).hoistableScripts,i=If(e),a=r.get(i);a||(a=n.querySelector(Lf(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=gf.get(i))&&Vf(e,t),a=n.createElement(`script`),jt(a),Ld(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function jf(e,t,n,r){var i=(i=be.current)?vf(i):null;if(!i)throw Error(s(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Mf(n.href),n=At(i).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Mf(n.href);var a=At(i).hoistableStyles,o=a.get(e);if(o||(i=i.ownerDocument||i,o={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},a.set(e,o),(a=i.querySelector(Nf(e)))&&!a._p&&(o.instance=a,o.state.loading=5),gf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gf.set(e,n),a||Ff(i,e,n,o.state))),t&&r===null)throw Error(s(528,``));return o}if(t&&r!==null)throw Error(s(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=If(n),n=At(i).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Mf(e){return`href="`+Yt(e)+`"`}function Nf(e){return`link[rel="stylesheet"][`+e+`]`}function Pf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Ff(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Ld(t,`link`,n),jt(t),e.head.appendChild(t))}function If(e){return`[src="`+Yt(e)+`"]`}function Lf(e){return`script[async]`+e}function Rf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Yt(n.href)+`"]`);if(r)return t.instance=r,jt(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),jt(r),Ld(r,`style`,i),zf(r,n.precedence,e),t.instance=r;case`stylesheet`:i=Mf(n.href);var a=e.querySelector(Nf(i));if(a)return t.state.loading|=4,t.instance=a,jt(a),a;r=Pf(n),(i=gf.get(i))&&Bf(r,i),a=(e.ownerDocument||e).createElement(`link`),jt(a);var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Ld(a,`link`,r),t.state.loading|=4,zf(a,n.precedence,e),t.instance=a;case`script`:return a=If(n.src),(i=e.querySelector(Lf(a)))?(t.instance=i,jt(i),i):(r=n,(i=gf.get(a))&&(r=h({},n),Vf(r,i)),e=e.ownerDocument||e,i=e.createElement(`script`),jt(i),Ld(i,`link`,r),e.head.appendChild(i),t.instance=i);case`void`:return null;default:throw Error(s(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,zf(r,n.precedence,e));return t.instance}function zf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Bf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Vf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Hf=null;function Uf(e,t,n){if(Hf===null){var r=new Map,i=Hf=new Map;i.set(n,r)}else i=Hf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Tt]||a[vt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Wf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Gf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Kf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function qf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Mf(r.href),a=t.querySelector(Nf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Xf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,jt(a);return}a=t.ownerDocument||t,r=Pf(r),(i=gf.get(i))&&Bf(r,i),a=a.createElement(`link`),jt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Ld(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Xf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Jf=0;function Yf(e,t){return e.stylesheets&&e.count===0&&Qf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Qf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Jf===0&&(Jf=62500*Bd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Jf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Xf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zf=null;function Qf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zf=new Map,t.forEach(Q,e),Zf=null,Xf.call(e))}function Q(e,t){if(!(t.state.loading&4)){var n=Zf.get(e);if(n)var r=n.get(null);else{n=new Map,Zf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Xf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var $f={$$typeof:te,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function ep(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=st(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.hiddenUpdates=st(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function tp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new ep(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=_i(3,null,null,t),e.current=a,a.stateNode=e,t=_a(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Xa(a),e}function np(e){return e?(e=hi,e):hi}function rp(e,t,n,r,i,a){i=np(i),r.context===null?r.context=i:r.pendingContext=i,r=Qa(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=$a(e,r,t),n!==null&&(yu(n,e,t),eo(n,e,t))}function ip(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ap(e,t){ip(e,t),(e=e.alternate)&&ip(e,t)}function op(e){if(e.tag===13||e.tag===31){var t=fi(e,67108864);t!==null&&yu(t,e,67108864),ap(e,67108864)}}function sp(e){if(e.tag===13||e.tag===31){var t=_u();t=pt(t);var n=fi(e,t);n!==null&&yu(n,e,t),ap(e,t)}}var cp=!0;function lp(e,t,n,r){var i=C.T;C.T=null;var a=w.p;try{w.p=2,dp(e,t,n,r)}finally{w.p=a,C.T=i}}function up(e,t,n,r){var i=C.T;C.T=null;var a=w.p;try{w.p=8,dp(e,t,n,r)}finally{w.p=a,C.T=i}}function dp(e,t,n,r){if(cp){var i=fp(r);if(i===null)Dd(e,t,r,pp,n),wp(e,r);else if(Ep(i,e,t,n,r))r.stopPropagation();else if(wp(e,r),t&4&&-1<Cp.indexOf(e)){for(;i!==null;){var a=Ot(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=nt(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Ye(o);s.entanglements[1]|=c,o&=~c}sd(a),!(U&6)&&(au=Re()+500,cd(0,!1))}}break;case 31:case 13:s=fi(a,2),s!==null&&yu(s,a,2),wu(),ap(a,2)}if(a=fp(r),a===null&&Dd(e,t,r,pp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Dd(e,t,r,null,n)}}function fp(e){return e=pn(e),mp(e)}var pp=null;function mp(e){if(pp=null,e=Dt(e),e!==null){var t=l(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=u(t),e!==null)return e;e=null}else if(n===31){if(e=d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pp=e,null}function hp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(ze()){case Be:return 2;case Ve:return 8;case E:case He:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var gp=!1,_p=null,vp=null,yp=null,bp=new Map,xp=new Map,Sp=[],Cp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function wp(e,t){switch(e){case`focusin`:case`focusout`:_p=null;break;case`dragenter`:case`dragleave`:vp=null;break;case`mouseover`:case`mouseout`:yp=null;break;case`pointerover`:case`pointerout`:bp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:xp.delete(t.pointerId)}}function Tp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ot(t),t!==null&&op(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ep(e,t,n,r,i){switch(t){case`focusin`:return _p=Tp(_p,e,t,n,r,i),!0;case`dragenter`:return vp=Tp(vp,e,t,n,r,i),!0;case`mouseover`:return yp=Tp(yp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return bp.set(a,Tp(bp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,xp.set(a,Tp(xp.get(a)||null,e,t,n,r,i)),!0}return!1}function Dp(e){var t=Dt(e.target);if(t!==null){var n=l(t);if(n!==null){if(t=n.tag,t===13){if(t=u(n),t!==null){e.blockedOn=t,gt(e.priority,function(){sp(n)});return}}else if(t===31){if(t=d(n),t!==null){e.blockedOn=t,gt(e.priority,function(){sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Op(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fn=r,n.target.dispatchEvent(r),fn=null}else return t=Ot(n),t!==null&&op(t),e.blockedOn=n,!1;t.shift()}return!0}function kp(e,t,n){Op(e)&&n.delete(t)}function Ap(){gp=!1,_p!==null&&Op(_p)&&(_p=null),vp!==null&&Op(vp)&&(vp=null),yp!==null&&Op(yp)&&(yp=null),bp.forEach(kp),xp.forEach(kp)}function jp(e,n){e.blockedOn===n&&(e.blockedOn=null,gp||(gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ap)))}var Mp=null;function Np(e){Mp!==e&&(Mp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mp===e&&(Mp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(mp(r||n)===null)continue;break}var a=Ot(n);a!==null&&(e.splice(t,3),t-=3,P(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Pp(e){function t(t){return jp(t,e)}_p!==null&&jp(_p,e),vp!==null&&jp(vp,e),yp!==null&&jp(yp,e),bp.forEach(t),xp.forEach(t);for(var n=0;n<Sp.length;n++){var r=Sp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sp.length&&(n=Sp[0],n.blockedOn===null);)Dp(n),n.blockedOn===null&&Sp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[yt]||null;if(typeof a==`function`)o||Np(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[yt]||null)s=o.formAction;else if(mp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Np(n)}}}function Fp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Ip(e){this._internalRoot=e}Lp.prototype.render=Ip.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current;rp(n,_u(),e,t,null,null)},Lp.prototype.unmount=Ip.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rp(e.current,2,null,e,null,null),wu(),t[bt]=null}};function Lp(e){this._internalRoot=e}Lp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ht();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sp.length&&t!==0&&t<Sp[n].priority;n++);Sp.splice(n,0,e),n===0&&Dp(e)}};var Rp=r.version;if(Rp!==`19.2.3`)throw Error(s(527,Rp,`19.2.3`));w.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(s(188)):(e=Object.keys(e).join(`,`),Error(s(268,e)));return e=p(t),e=e===null?null:m(e),e=e===null?null:e.stateNode,e};var zp={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:C,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{Ke=Bp.inject(zp),qe=Bp}catch{}}e.createRoot=function(e,t){if(!c(e))throw Error(s(299));var n=!1,r=``,i=Zs,a=Qs,o=$s;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=tp(e,1,!1,null,null,n,r,null,i,a,o,Fp),e[bt]=t.current,Td(e),new Ip(t)}})),c=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=s()}))(),l=n(),u=()=>void 0,d=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},f=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):f(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new m;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},m=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},h=function(e){let t=d(e);return p.encodeByteArray(t,!0)},g=function(e){return h(e).replace(/\./g,``)},_=function(e){try{return p.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function v(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var y=()=>v().__FIREBASE_DEFAULTS__,b=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},x=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&_(e[1]);return t&&JSON.parse(t)},ee=()=>{try{return u()||y()||b()||x()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},te=e=>ee()?.emulatorHosts?.[e],S=()=>ee()?.config,ne=e=>ee()?.[`_${e}`],re=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function ie(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function ae(e){return(await fetch(e,{credentials:`include`})).ok}var oe={};function se(){let e={prod:[],emulator:[]};for(let t of Object.keys(oe))oe[t]?e.emulator.push(t):e.prod.push(t);return e}function ce(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var le=!1;function ue(e,t){if(typeof window>`u`||typeof document>`u`||!ie(window.location.host)||oe[e]===t||oe[e]||le)return;oe[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=se().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{le=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=ce(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function de(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function fe(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(de())}function C(){let e=ee()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function w(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function pe(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function me(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function he(){let e=de();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function ge(){return!C()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function _e(){return!C()&&!!navigator.userAgent&&(navigator.userAgent.includes(`Safari`)||navigator.userAgent.includes(`WebKit`))&&!navigator.userAgent.includes(`Chrome`)}function T(){try{return typeof indexedDB==`object`}catch{return!1}}function ve(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var ye=`FirebaseError`,be=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=ye,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xe.prototype.create)}},xe=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Se(i,n):`Error`;return new be(r,`${this.serviceName}: ${a} (${r}).`,n)}};function Se(e,t){return e.replace(Ce,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var Ce=/\{\$([^}]+)}/g;function we(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Te(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Ee(n)&&Ee(a)){if(!Te(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Ee(e){return typeof e==`object`&&!!e}function De(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Oe(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function ke(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Ae(e,t){let n=new je(e,t);return n.subscribe.bind(n)}var je=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=Me(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Ne),r.error===void 0&&(r.error=Ne),r.complete===void 0&&(r.complete=Ne);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Me(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Ne(){}function Pe(e){return e&&e._delegate?e._delegate:e}var Fe=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Ie=`[DEFAULT]`,Le=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new re;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(ze(e))try{this.getOrInitializeService({instanceIdentifier:Ie})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Ie){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ie){return this.instances.has(e)}getOptions(e=Ie){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Re(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ie){return this.component?this.component.multipleInstances?e:Ie:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Re(e){return e===Ie?void 0:e}function ze(e){return e.instantiationMode===`EAGER`}var Be=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Le(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Ve=[],E;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(E||={});var He={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},Ue=E.INFO,We={[E.DEBUG]:`log`,[E.VERBOSE]:`log`,[E.INFO]:`info`,[E.WARN]:`warn`,[E.ERROR]:`error`},Ge=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=We[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Ke=class{constructor(e){this.name=e,this._logLevel=Ue,this._logHandler=Ge,this._userLogHandler=null,Ve.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in E))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?He[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...e),this._logHandler(this,E.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...e),this._logHandler(this,E.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,E.INFO,...e),this._logHandler(this,E.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,E.WARN,...e),this._logHandler(this,E.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...e),this._logHandler(this,E.ERROR,...e)}},qe=(e,t)=>t.some(t=>e instanceof t),Je,Ye;function Xe(){return Je||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Ze(){return Ye||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var Qe=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap;function rt(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(lt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&Qe.set(t,e)}).catch(()=>{}),nt.set(t,e),t}function it(e){if($e.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});$e.set(e,t)}var at={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return $e.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||et.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function ot(e){at=e(at)}function st(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(ut(this),t,...n);return et.set(r,t.sort?t.sort():[t]),lt(r)}:Ze().includes(e)?function(...t){return e.apply(ut(this),t),lt(Qe.get(this))}:function(...t){return lt(e.apply(ut(this),t))}}function ct(e){return typeof e==`function`?st(e):(e instanceof IDBTransaction&&it(e),qe(e,Xe())?new Proxy(e,at):e)}function lt(e){if(e instanceof IDBRequest)return rt(e);if(tt.has(e))return tt.get(e);let t=ct(e);return t!==e&&(tt.set(e,t),nt.set(t,e)),t}var ut=e=>nt.get(e);function dt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=lt(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(lt(o.result),e.oldVersion,e.newVersion,lt(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var ft=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],pt=[`put`,`add`,`delete`,`clear`],mt=new Map;function ht(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(mt.get(t))return mt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=pt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ft.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return mt.set(t,a),a}ot(e=>({...e,get:(t,n,r)=>ht(t,n)||e.get(t,n,r),has:(t,n)=>!!ht(t,n)||e.has(t,n)}));var gt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(_t(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function _t(e){return e.getComponent()?.type===`VERSION`}var vt=`@firebase/app`,yt=`0.14.6`,bt=new Ke(`@firebase/app`),xt=`@firebase/app-compat`,St=`@firebase/analytics-compat`,Ct=`@firebase/analytics`,wt=`@firebase/app-check-compat`,Tt=`@firebase/app-check`,Et=`@firebase/auth`,Dt=`@firebase/auth-compat`,Ot=`@firebase/database`,kt=`@firebase/data-connect`,At=`@firebase/database-compat`,jt=`@firebase/functions`,Mt=`@firebase/functions-compat`,Nt=`@firebase/installations`,Pt=`@firebase/installations-compat`,Ft=`@firebase/messaging`,It=`@firebase/messaging-compat`,Lt=`@firebase/performance`,Rt=`@firebase/performance-compat`,zt=`@firebase/remote-config`,Bt=`@firebase/remote-config-compat`,Vt=`@firebase/storage`,Ht=`@firebase/storage-compat`,D=`@firebase/firestore`,Ut=`@firebase/ai`,Wt=`@firebase/firestore-compat`,Gt=`firebase`,Kt=`12.6.0`,qt=`[DEFAULT]`,Jt={[vt]:`fire-core`,[xt]:`fire-core-compat`,[Ct]:`fire-analytics`,[St]:`fire-analytics-compat`,[Tt]:`fire-app-check`,[wt]:`fire-app-check-compat`,[Et]:`fire-auth`,[Dt]:`fire-auth-compat`,[Ot]:`fire-rtdb`,[kt]:`fire-data-connect`,[At]:`fire-rtdb-compat`,[jt]:`fire-fn`,[Mt]:`fire-fn-compat`,[Nt]:`fire-iid`,[Pt]:`fire-iid-compat`,[Ft]:`fire-fcm`,[It]:`fire-fcm-compat`,[Lt]:`fire-perf`,[Rt]:`fire-perf-compat`,[zt]:`fire-rc`,[Bt]:`fire-rc-compat`,[Vt]:`fire-gcs`,[Ht]:`fire-gcs-compat`,[D]:`fire-fst`,[Wt]:`fire-fst-compat`,[Ut]:`fire-vertex`,"fire-js":`fire-js`,[Gt]:`fire-js-all`},Yt=new Map,Xt=new Map,Zt=new Map;function Qt(e,t){try{e.container.addComponent(t)}catch(n){bt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $t(e){let t=e.name;if(Zt.has(t))return bt.debug(`There were multiple attempts to register component ${t}.`),!1;Zt.set(t,e);for(let t of Yt.values())Qt(t,e);for(let t of Xt.values())Qt(t,e);return!0}function en(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tn(e){return e==null?!1:e.settings!==void 0}var nn=new xe(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),rn=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fe(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nn.create(`app-deleted`,{appName:this._name})}},an=Kt;function on(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:qt,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw nn.create(`bad-app-name`,{appName:String(i)});if(n||=S(),!n)throw nn.create(`no-options`);let a=Yt.get(i);if(a){if(Te(n,a.options)&&Te(r,a.config))return a;throw nn.create(`duplicate-app`,{appName:i})}let o=new Be(i);for(let e of Zt.values())o.addComponent(e);let s=new rn(n,r,o);return Yt.set(i,s),s}function sn(e=qt){let t=Yt.get(e);if(!t&&e===`[DEFAULT]`&&S())return on();if(!t)throw nn.create(`no-app`,{appName:e});return t}function cn(e,t,n){let r=Jt[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),bt.warn(e.join(` `));return}$t(new Fe(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var ln=`firebase-heartbeat-database`,un=1,dn=`firebase-heartbeat-store`,fn=null;function pn(){return fn||=dt(ln,un,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(dn)}catch(e){console.warn(e)}}}}).catch(e=>{throw nn.create(`idb-open`,{originalErrorMessage:e.message})}),fn}async function mn(e){try{let t=(await pn()).transaction(dn),n=await t.objectStore(dn).get(gn(e));return await t.done,n}catch(e){if(e instanceof be)bt.warn(e.message);else{let t=nn.create(`idb-get`,{originalErrorMessage:e?.message});bt.warn(t.message)}}}async function hn(e,t){try{let n=(await pn()).transaction(dn,`readwrite`);await n.objectStore(dn).put(t,gn(e)),await n.done}catch(e){if(e instanceof be)bt.warn(e.message);else{let t=nn.create(`idb-set`,{originalErrorMessage:e?.message});bt.warn(t.message)}}}function gn(e){return`${e.name}!${e.options.appId}`}var _n=1024,vn=30,yn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new Sn(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=bn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>vn){let e=wn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=bn(),{heartbeatsToSend:t,unsentEntries:n}=xn(this._heartbeatsCache.heartbeats),r=g(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return bt.warn(e),``}}};function bn(){return new Date().toISOString().substring(0,10)}function xn(e,t=_n){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Cn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Sn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T()?ve().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await mn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return hn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return hn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Cn(e){return g(JSON.stringify({version:2,heartbeats:e})).length}function wn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Tn(e){$t(new Fe(`platform-logger`,e=>new gt(e),`PRIVATE`)),$t(new Fe(`heartbeat`,e=>new yn(e),`PRIVATE`)),cn(vt,yt,e),cn(vt,yt,`esm2020`),cn(`fire-js`,``)}Tn(``),cn(`firebase`,`12.7.0`,`app`);function En(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Dn=En,On=new xe(`auth`,`Firebase`,En()),kn=new Ke(`@firebase/auth`);function An(e,...t){kn.logLevel<=E.WARN&&kn.warn(`Auth (${an}): ${e}`,...t)}function jn(e,...t){kn.logLevel<=E.ERROR&&kn.error(`Auth (${an}): ${e}`,...t)}function Mn(e,...t){throw Ln(e,...t)}function Nn(e,...t){return Ln(e,...t)}function Pn(e,t,n){return new xe(`auth`,`Firebase`,{...Dn(),[t]:n}).create(t,{appName:e.name})}function Fn(e){return Pn(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function In(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Mn(e,`argument-error`),Pn(e,`argument-error`,`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ln(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return On.create(e,...t)}function O(e,t,...n){if(!e)throw Ln(t,...n)}function Rn(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw jn(t),Error(t)}function zn(e,t){e||Rn(t)}function Bn(){return typeof self<`u`&&self.location?.href||``}function Vn(){return Hn()===`http:`||Hn()===`https:`}function Hn(){return typeof self<`u`&&self.location?.protocol||null}function Un(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(Vn()||pe()||`connection`in navigator)?navigator.onLine:!0}function Wn(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Gn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,zn(t>e,`Short delay should be less than long delay!`),this.isMobile=fe()||me()}get(){return Un()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Kn(e,t){zn(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var qn=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Rn(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Rn(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Rn(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},Jn={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},Yn=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],Xn=new Gn(3e4,6e4);function k(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Zn(e,t,n,r,i={}){return Qn(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=De({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return w()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&ie(e.emulatorConfig.host)&&(c.credentials=`include`),qn.fetch()(await er(e,e.config.apiHost,n,o),c)})}async function Qn(e,t,n){e._canInitEmulator=!1;let r={...Jn,...t};try{let t=new nr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw rr(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw rr(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw rr(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw rr(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Pn(e,o,n);Mn(e,o)}}catch(t){if(t instanceof be)throw t;Mn(e,`network-request-failed`,{message:String(t)})}}async function $n(e,t,n,r,i={}){let a=await Zn(e,t,n,r,i);return`mfaPendingCredential`in a&&Mn(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function er(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Kn(e.config,i):`${e.config.apiScheme}://${i}`;return Yn.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function tr(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var nr=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Nn(this.auth,`network-request-failed`)),Xn.get())})}};function rr(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Nn(e,t,r);return i.customData._tokenResponse=n,i}function ir(e){return e!==void 0&&e.enterprise!==void 0}var ar=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tr(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function or(e,t){return Zn(e,`GET`,`/v2/recaptchaConfig`,k(e,t))}async function sr(e,t){return Zn(e,`POST`,`/v1/accounts:delete`,t)}async function cr(e,t){return Zn(e,`POST`,`/v1/accounts:lookup`,t)}function lr(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ur(e,t=!1){let n=Pe(e),r=await n.getIdToken(t),i=fr(r);O(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:lr(dr(i.auth_time)),issuedAtTime:lr(dr(i.iat)),expirationTime:lr(dr(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function dr(e){return Number(e)*1e3}function fr(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return jn(`JWT malformed, contained fewer than 3 sections`),null;try{let e=_(n);return e?JSON.parse(e):(jn(`Failed to decode base64 JWT payload`),null)}catch(e){return jn(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function pr(e){let t=fr(e);return O(t,`internal-error`),O(t.exp!==void 0,`internal-error`),O(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function mr(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof be&&hr(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function hr({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var gr=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},_r=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function vr(e){let t=e.auth,n=await mr(e,cr(t,{idToken:await e.getIdToken()}));O(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?xr(r.providerUserInfo):[],a=br(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new _r(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function yr(e){let t=Pe(e);await vr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function br(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function xr(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Sr(e,t){let n=await Qn(e,{},async()=>{let n=De({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await er(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&ie(e.emulatorConfig.host)&&(s.credentials=`include`),qn.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Cr(e,t){return Zn(e,`POST`,`/v2/accounts:revokeToken`,k(e,t))}var wr=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,`internal-error`),O(e.idToken!==void 0,`internal-error`),O(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):pr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){O(e.length!==0,`internal-error`);let t=pr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Sr(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(O(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(O(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(O(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Rn(`not implemented`)}};function Tr(e,t){O(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Er=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new _r(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await mr(this,this.stsTokenManager.getToken(this.auth,e));return O(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ur(this,e)}reload(){return yr(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){O(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Fn(this.auth));let e=await this.getIdToken();return await mr(this,sr(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;O(d&&h,t,`internal-error`);let g=wr.fromJSON(this.name,h);O(typeof d==`string`,t,`internal-error`),Tr(r,t.name),Tr(i,t.name),O(typeof f==`boolean`,t,`internal-error`),O(typeof p==`boolean`,t,`internal-error`),Tr(a,t.name),Tr(o,t.name),Tr(s,t.name),Tr(c,t.name),Tr(l,t.name),Tr(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new wr;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await vr(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];O(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:xr(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new wr;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _r(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Dr=new Map;function Or(e){zn(e instanceof Function,`Expected a class definition`);let t=Dr.get(e);return t?(zn(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Dr.set(e,t),t)}var kr=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};kr.type=`NONE`;var Ar=kr;function jr(e,t,n){return`firebase:${e}:${t}:${n}`}var Mr=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=jr(this.userKey,r.apiKey,i),this.fullPersistenceKey=jr(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await cr(this.auth,{idToken:e}).catch(()=>void 0);return t?Er._fromGetAccountInfoResponse(this.auth,t,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Or(Ar),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Or(Ar),o=jr(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await cr(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await Er._fromGetAccountInfoResponse(t,e,n)}else r=Er._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function Nr(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Lr(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Pr(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(zr(t))return`Blackberry`;if(Br(t))return`Webos`;if(Fr(t))return`Safari`;if((t.includes(`chrome/`)||Ir(t))&&!t.includes(`edge/`))return`Chrome`;if(Rr(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Pr(e=de()){return/firefox\//i.test(e)}function Fr(e=de()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Ir(e=de()){return/crios\//i.test(e)}function Lr(e=de()){return/iemobile/i.test(e)}function Rr(e=de()){return/android/i.test(e)}function zr(e=de()){return/blackberry/i.test(e)}function Br(e=de()){return/webos/i.test(e)}function Vr(e=de()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Hr(e=de()){return Vr(e)&&!!window.navigator?.standalone}function Ur(){return he()&&document.documentMode===10}function Wr(e=de()){return Vr(e)||Rr(e)||Br(e)||zr(e)||/windows phone/i.test(e)||Lr(e)}function Gr(e,t=[]){let n;switch(e){case`Browser`:n=Nr(de());break;case`Worker`:n=`${Nr(de())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${an}/${r}`}var Kr=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function qr(e,t={}){return Zn(e,`GET`,`/v2/passwordPolicy`,k(e,t))}var Jr=6,Yr=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Jr,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},Xr=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qr(this),this.idTokenSubscription=new Qr(this),this.beforeStateQueue=new Kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=On,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Mr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await cr(this,{idToken:e}),n=await Er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tn(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vr(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wn()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Fn(this));let t=e?Pe(e):null;return t&&O(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new Yr(await qr(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xe(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await Cr(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Or(e)||this._popupRedirectResolver;O(t,this,`argument-error`),this.redirectPersistenceManager=await Mr.create(this,[Or(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&An(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Zr(e){return Pe(e)}var Qr=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ae(e=>this.observer=e)}get next(){return O(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},$r={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function ei(e){$r=e}function ti(e){return $r.loadJS(e)}function ni(){return $r.recaptchaEnterpriseScript}function ri(){return $r.gapiScript}function ii(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var ai=class{constructor(){this.enterprise=new oi}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},oi=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},si=`recaptcha-enterprise`,ci=`NO_RECAPTCHA`,li=class{constructor(e){this.type=si,this.auth=Zr(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{or(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new ar(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;ir(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(ci)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new ai().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&ir(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=ni();t.length!==0&&(t+=n),ti(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function ui(e,t,n,r=!1,i=!1){let a=new li(e),o;if(i)o=ci;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function di(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await ui(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await ui(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await ui(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await ui(e,t,n,!1,!0))):Promise.reject(i)):r(e,await ui(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function fi(e){let t=Zr(e),n=new ar(await or(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new li(t).verify()}function pi(e,t){let n=en(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(Te(n.getOptions(),t??{}))return e;Mn(e,`already-initialized`)}return n.initialize({options:t})}function mi(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Or);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function hi(e,t,n){let r=Zr(e);O(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=gi(t),{host:o,port:s}=_i(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){O(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),O(Te(l,r.config.emulator)&&Te(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ie(o)?(ae(`${a}//${o}${c}`),ue(`Auth`,!0)):i||yi()}function gi(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function _i(e){let t=gi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:vi(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:vi(t)}}}function vi(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function yi(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var bi=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rn(`not implemented`)}_getIdTokenResponse(e){return Rn(`not implemented`)}_linkToIdToken(e,t){return Rn(`not implemented`)}_getReauthenticationResolver(e){return Rn(`not implemented`)}};async function xi(e,t){return Zn(e,`POST`,`/v1/accounts:signUp`,t)}async function Si(e,t){return $n(e,`POST`,`/v1/accounts:signInWithPassword`,k(e,t))}async function Ci(e,t){return $n(e,`POST`,`/v1/accounts:signInWithEmailLink`,k(e,t))}async function wi(e,t){return $n(e,`POST`,`/v1/accounts:signInWithEmailLink`,k(e,t))}var Ti=class e extends bi{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return di(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,Si,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Ci(e,{email:this._email,oobCode:this._password});default:Mn(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return di(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,xi,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return wi(e,{idToken:t,email:this._email,oobCode:this._password});default:Mn(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Ei(e,t){return $n(e,`POST`,`/v1/accounts:signInWithIdp`,k(e,t))}var Di=`http://localhost`,Oi=class e extends bi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mn(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Ei(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,Ei(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ei(e,t)}buildRequest(){let e={requestUri:Di,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=De(t)}return e}};async function ki(e,t){return Zn(e,`POST`,`/v1/accounts:sendVerificationCode`,k(e,t))}async function Ai(e,t){return $n(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,k(e,t))}async function ji(e,t){let n=await $n(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,k(e,t));if(n.temporaryProof)throw rr(e,`account-exists-with-different-credential`,n);return n}var Mi={USER_NOT_FOUND:`user-not-found`};async function Ni(e,t){return $n(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,k(e,{...t,operation:`REAUTH`}),Mi)}var Pi=class e extends bi{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Ai(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return ji(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Ni(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function Fi(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Ii(e){let t=Oe(ke(e)).link,n=t?Oe(ke(t)).deep_link_id:null,r=Oe(ke(e)).deep_link_id;return(r?Oe(ke(r)).link:null)||r||n||t||e}var Li=class e{constructor(e){let t=Oe(ke(e)),n=t.apiKey??null,r=t.oobCode??null,i=Fi(t.mode??null);O(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Ii(t);try{return new e(n)}catch{return null}}},Ri=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ti._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=Li.parseLink(t);return O(n,`argument-error`),Ti._fromEmailAndCode(e,n.code,n.tenantId)}};Ri.PROVIDER_ID=`password`,Ri.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,Ri.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var zi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},Bi=class extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},Vi=class e extends Bi{constructor(){super(`facebook.com`)}static credential(t){return Oi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Vi.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,Vi.PROVIDER_ID=`facebook.com`;var Hi=class e extends Bi{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return Oi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};Hi.GOOGLE_SIGN_IN_METHOD=`google.com`,Hi.PROVIDER_ID=`google.com`;var Ui=class e extends Bi{constructor(){super(`github.com`)}static credential(t){return Oi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Ui.GITHUB_SIGN_IN_METHOD=`github.com`,Ui.PROVIDER_ID=`github.com`;var A=class e extends Bi{constructor(){super(`twitter.com`)}static credential(t,n){return Oi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};A.TWITTER_SIGN_IN_METHOD=`twitter.com`,A.PROVIDER_ID=`twitter.com`;var Wi=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await Er._fromIdTokenResponse(t,r,i),providerId:Gi(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:Gi(r),_tokenResponse:r,operationType:n})}};function Gi(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}var Ki=class e extends be{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function qi(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?Ki._fromErrorAndOperation(e,n,t,r):n})}async function Ji(e,t,n=!1){let r=await mr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Wi._forOperation(e,`link`,r)}async function Yi(e,t,n=!1){let{auth:r}=e;if(tn(r.app))return Promise.reject(Fn(r));let i=`reauthenticate`;try{let a=await mr(e,qi(r,i,t,e),n);O(a.idToken,r,`internal-error`);let o=fr(a.idToken);O(o,r,`internal-error`);let{sub:s}=o;return O(e.uid===s,r,`user-mismatch`),Wi._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&Mn(r,`user-mismatch`),e}}async function Xi(e,t,n=!1){if(tn(e.app))return Promise.reject(Fn(e));let r=`signIn`,i=await qi(e,r,t),a=await Wi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}function Zi(e,t,n,r){return Pe(e).onIdTokenChanged(t,n,r)}function Qi(e,t,n){return Pe(e).beforeAuthStateChanged(t,n)}function $i(e,t,n,r){return Pe(e).onAuthStateChanged(t,n,r)}function ea(e){return Pe(e).signOut()}function ta(e,t){return Zn(e,`POST`,`/v2/accounts/mfaEnrollment:start`,k(e,t))}function na(e,t){return Zn(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,k(e,t))}function ra(e,t){return Zn(e,`POST`,`/v2/accounts/mfaEnrollment:start`,k(e,t))}function ia(e,t){return Zn(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,k(e,t))}var aa=`__sak`,oa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,`1`),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},sa=1e3,ca=10,la=class extends oa{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Ur()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ca):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},sa)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};la.type=`LOCAL`;var ua=la,da=1e3;function fa(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function pa(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var ma=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=pa(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:fa(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=pa(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=pa(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=fa(n),i=setInterval(()=>{let e=fa(n);e!==r&&(t(e),r=e)},da);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};ma.type=`COOKIE`;var ha=class extends oa{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};ha.type=`SESSION`;var ga=ha;function _a(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var va=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await _a(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};va.receivers=[];function ya(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var ba=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=ya(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function xa(){return window}function Sa(e){xa().location.href=e}function Ca(){return xa().WorkerGlobalScope!==void 0&&typeof xa().importScripts==`function`}async function wa(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ta(){return navigator?.serviceWorker?.controller||null}function Ea(){return Ca()?self:null}var Da=`firebaseLocalStorageDb`,Oa=1,ka=`firebaseLocalStorage`,Aa=`fbase_key`,ja=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Ma(e,t){return e.transaction([ka],t?`readwrite`:`readonly`).objectStore(ka)}function Na(){return new ja(indexedDB.deleteDatabase(Da)).toPromise()}function Pa(){let e=indexedDB.open(Da,Oa);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(ka,{keyPath:Aa})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(ka)?t(n):(n.close(),await Na(),t(await Pa()))})})}async function Fa(e,t,n){return new ja(Ma(e,!0).put({[Aa]:t,value:n})).toPromise()}async function Ia(e,t){let n=await new ja(Ma(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function La(e,t){return new ja(Ma(e,!0).delete(t)).toPromise()}var Ra=800,za=3,Ba=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Pa(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>za)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Ca()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=va._getInstance(Ea()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await wa(),!this.activeServiceWorker)return;this.sender=new ba(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ta()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Pa();return await Fa(e,aa,`1`),await La(e,aa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fa(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Ia(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>La(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new ja(Ma(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ra)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Ba.type=`LOCAL`;var Va=Ba;function Ha(e,t){return Zn(e,`POST`,`/v2/accounts/mfaSignIn:start`,k(e,t))}function Ua(e,t){return Zn(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,k(e,t))}function Wa(e,t){return Zn(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,k(e,t))}ii(`rcb`),new Gn(3e4,6e4);var Ga=`recaptcha`;async function Ka(e,t,n){if(!e._getRecaptchaConfig())try{await fi(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return O(t.type===`enroll`,e,`internal-error`),(await di(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===ci?(O(n?.type===Ga,e,`argument-error`),ta(e,await qa(e,t,n))):ta(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{O(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return O(i,e,`missing-multi-factor-info`),(await di(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===ci?(O(n?.type===Ga,e,`argument-error`),Ha(e,await qa(e,t,n))):Ha(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await di(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===ci?(O(n?.type===Ga,e,`argument-error`),ki(e,await qa(e,t,n))):ki(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function qa(e,t,n){O(n.type===Ga,e,`argument-error`);let r=await n.verify();O(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var Ja=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Zr(t)}verifyPhoneNumber(e,t){return Ka(this.auth,e,Pe(t))}static credential(e,t){return Pi._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Pi._fromTokenResponse(t,n):null}};Ja.PROVIDER_ID=`phone`,Ja.PHONE_SIGN_IN_METHOD=`phone`;function Ya(e,t){return t?Or(t):(O(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var Xa=class extends bi{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ei(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Za(e){return Xi(e.auth,new Xa(e),e.bypassAuthState)}function Qa(e){let{auth:t,user:n}=e;return O(n,t,`internal-error`),Yi(n,new Xa(e),e.bypassAuthState)}async function $a(e){let{auth:t,user:n}=e;return O(n,t,`internal-error`),Ji(n,new Xa(e),e.bypassAuthState)}var eo=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return Za;case`linkViaPopup`:case`linkViaRedirect`:return $a;case`reauthViaPopup`:case`reauthViaRedirect`:return Qa;default:Mn(this.auth,`internal-error`)}}resolve(e){zn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},to=new Gn(2e3,1e4);async function no(e,t,n){if(tn(e.app))return Promise.reject(Nn(e,`operation-not-supported-in-this-environment`));let r=Zr(e);return In(e,t,zi),new ro(r,`signInViaPopup`,t,Ya(r,n)).executeNotNull()}var ro=class e extends eo{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return O(e,this.auth,`internal-error`),e}async onExecution(){zn(this.filter.length===1,`Popup operations only handle one event`);let e=ya();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Nn(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Nn(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,to.get())};e()}};ro.currentPopupAction=null;var io=`pendingRedirect`,ao=new Map,oo=class extends eo{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=ao.get(this.auth._key());if(!e){try{let t=await so(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}ao.set(this.auth._key(),e)}return this.bypassAuthState||ao.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function so(e,t){let n=uo(t),r=lo(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function co(e,t){ao.set(e._key(),t)}function lo(e){return Or(e._redirectPersistence)}function uo(e){return jr(io,e.config.apiKey,e.name)}async function fo(e,t,n=!1){if(tn(e.app))return Promise.reject(Fn(e));let r=Zr(e),i=await new oo(r,Ya(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var po=600*1e3,mo=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_o(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!go(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(Nn(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=po&&this.cachedEventUids.clear(),this.cachedEventUids.has(ho(e))}saveEventToCache(e){this.cachedEventUids.add(ho(e)),this.lastProcessedEventTime=Date.now()}};function ho(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function go({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function _o(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return go(e);default:return!1}}async function vo(e,t={}){return Zn(e,`GET`,`/v1/projects`,t)}var yo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bo=/^https?/;async function xo(e){if(e.config.emulator)return;let{authorizedDomains:t}=await vo(e);for(let e of t)try{if(So(e))return}catch{}Mn(e,`unauthorized-domain`)}function So(e){let t=Bn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!bo.test(n))return!1;if(yo.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var j=new Gn(3e4,6e4);function M(){let e=xa().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function Co(e){return new Promise((t,n)=>{function r(){M(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{M(),n(Nn(e,`network-request-failed`))},timeout:j.get()})}if(xa().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(xa().gapi?.load)r();else{let t=ii(`iframefcb`);return xa()[t]=()=>{gapi.load?r():n(Nn(e,`network-request-failed`))},ti(`${ri()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw wo=null,e})}var wo=null;function To(e){return wo||=Co(e),wo}var Eo=new Gn(5e3,15e3),Do=`__/auth/iframe`,Oo=`emulator/auth/iframe`,ko={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Ao=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function jo(e){let t=e.config;O(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Kn(t,Oo):`https://${e.config.authDomain}/${Do}`,r={apiKey:t.apiKey,appName:e.name,v:an},i=Ao.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${De(r).slice(1)}`}async function Mo(e){let t=await To(e),n=xa().gapi;return O(n,e,`internal-error`),t.open({where:document.body,url:jo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ko,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=Nn(e,`network-request-failed`),a=xa().setTimeout(()=>{r(i)},Eo.get());function o(){xa().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var No={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Po=500,Fo=600,Io=`_blank`,Lo=`http://localhost`,Ro=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function zo(e,t,n,r=Po,i=Fo){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...No,width:r.toString(),height:i.toString(),top:a,left:o},l=de().toLowerCase();n&&(s=Ir(l)?Io:n),Pr(l)&&(t||=Lo,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Hr(l)&&s!==`_self`)return Bo(t||``,s),new Ro(null);let d=window.open(t||``,s,u);O(d,e,`popup-blocked`);try{d.focus()}catch{}return new Ro(d)}function Bo(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Vo=`__/auth/handler`,Ho=`emulator/auth/handler`,Uo=`fac`;async function Wo(e,t,n,r,i,a){O(e.config.authDomain,e,`auth-domain-config-required`),O(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:an,eventId:i};if(t instanceof zi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,we(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof Bi){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${Uo}=${encodeURIComponent(c)}`:``;return`${Go(e)}?${De(s).slice(1)}${l}`}function Go({config:e}){return e.emulator?Kn(e,Ho):`https://${e.authDomain}/${Vo}`}var Ko=`webStorageSupport`,qo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ga,this._completeRedirectFn=fo,this._overrideRedirectResult=co}async _openPopup(e,t,n,r){return zn(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),zo(e,await Wo(e,t,n,Bn(),r),ya())}async _openRedirect(e,t,n,r){return await this._originValidation(e),Sa(await Wo(e,t,n,Bn(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zn(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Mo(e),n=new mo(e);return t.register(`authEvent`,t=>(O(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ko,{type:Ko},n=>{let r=n?.[0]?.[Ko];r!==void 0&&t(!!r),Mn(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wr()||Fr()||Vr()}},Jo=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Rn(`unexpected MultiFactorSessionType`)}}},Yo=class e extends Jo{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return na(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Ua(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Xo=class{constructor(){}static assertion(e){return Yo._fromCredential(e)}};Xo.FACTOR_ID=`phone`;var Zo=class{static assertionForEnrollment(e,t){return Qo._fromSecret(e,t)}static assertionForSignIn(e,t){return Qo._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;O(t.user?.auth!==void 0,`internal-error`);let n=await ra(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return $o._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};Zo.FACTOR_ID=`totp`;var Qo=class e extends Jo{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return O(this.secret!==void 0,e,`argument-error`),ia(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){O(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return Wa(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},$o=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(es(e)||es(t))&&(n=!0),n&&(es(e)&&(e=this.auth.currentUser?.email||`unknownuser`),es(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function es(e){return e===void 0||e?.length===0}var ts=`@firebase/auth`,ns=`1.12.0`,rs=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function is(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function as(e){$t(new Fe(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;O(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new Xr(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Gr(e)});return mi(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),$t(new Fe(`auth-internal`,e=>(e=>new rs(e))(Zr(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),cn(ts,ns,is(e)),cn(ts,ns,`esm2020`)}var os=ne(`authIdTokenMaxAge`)||300,ss=null,cs=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>os)return;let i=n?.token;ss!==i&&(ss=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ls(e=sn()){let t=en(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=pi(e,{popupRedirectResolver:qo,persistence:[Va,ua,ga]}),r=ne(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=cs(e.toString());Qi(n,t,()=>t(n.currentUser)),Zi(n,e=>t(e))}}let i=te(`auth`);return i&&hi(n,`http://${i}`),n}function us(){return document.getElementsByTagName(`head`)?.[0]??document}ei({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=Nn(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,us().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),as(`Browser`);var ds=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},fs={},ps,ms;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=ee(n,1),a=ee(r,1);for(r=ee(r,2),n=ee(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=ee(r,1),n=ee(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function ee(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ms=fs.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,ps=fs.Integer=o}).apply(ds===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:ds);var hs=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},gs={},_s,vs,ys,bs,xs,Ss,Cs,ws;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof hs==`object`&&hs];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=te;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,ee=!1,te=new v,S=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(ne)}};function ne(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}ee=!1}function re(){this.u=this.u,this.C=this.C}re.prototype.u=!1,re.prototype.dispose=function(){this.u||(this.u=!0,this.N())},re.prototype[Symbol.dispose]=function(){this.dispose()},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function oe(e){return/^[\s\xa0]*$/.test(e)}function se(e,t){ie.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(se,ie),se.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ce=`closure_listenable_`+(Math.random()*1e6|0),le=0;function ue(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++le,this.da=this.fa=!1}function de(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function fe(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function C(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function w(e){let t={};for(let n in e)t[n]=e[n];return t}let pe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function me(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<pe.length;t++)n=pe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function he(e){this.src=e,this.g={},this.h=0}he.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=_e(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ue(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function ge(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(de(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function _e(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var T=`closure_lm_`+(Math.random()*1e6|0),ve={};function ye(e,t,n,r,i){if(r&&r.once)return Se(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ye(e,t[a],n,r,i);return null}return n=ke(n),e&&e[ce]?e.J(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!1,r,i)}function be(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=De(e);if(c||(e[T]=c=new he(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=xe(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ae||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Te(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function xe(){function e(n){return t.call(e.src,e.listener,n)}let t=Ee;return e}function Se(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)Se(e,t[a],n,r,i);return null}return n=ke(n),e&&e[ce]?e.K(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!0,r,i)}function Ce(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ce(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ke(n),e&&e[ce]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=_e(t,n,r,i),n>-1&&(de(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=De(e))&&(t=e.g[t.toString()],e=-1,t&&(e=_e(t,n,r,i)),(n=e>-1?t[e]:null)&&we(n))}function we(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[ce])ge(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Te(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=De(t))?(ge(n,e),n.h==0&&(n.src=null,t[T]=null)):de(e)}}}function Te(e){return e in ve?ve[e]:ve[e]=`on`+e}function Ee(e,t){if(e.da)e=!0;else{t=new se(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function De(e){return e=e[T],e instanceof he?e:null}var Oe=`__closure_events_fn_`+(Math.random()*1e9>>>0);function ke(e){return typeof e==`function`?e:(e[Oe]||(e[Oe]=function(t){return e.handleEvent(t)}),e[Oe])}function Ae(){re.call(this),this.i=new he(this),this.M=this,this.G=null}d(Ae,re),Ae.prototype[ce]=!0,Ae.prototype.removeEventListener=function(e,t,n,r){Ce(this,e,t,n,r)};function je(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var i=t;t=new ie(r,e),me(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Me(a,r,!0,t)&&i;if(a=t.g=e,i=Me(a,r,!0,t)&&i,i=Me(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Me(a,r,!1,t)&&i}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)de(n[e]);delete e.g[t],e.h--}}this.G=null},Ae.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ae.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Me(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&ge(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Ne(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Pe(e){e.g=Ne(()=>{e.g=null,e.i&&(e.i=!1,Pe(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Fe extends re{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(e){re.call(this),this.h=e,this.g={}}d(Ie,re);var Le=[];function Re(e){fe(e.g,function(e,t){this.g.hasOwnProperty(t)&&we(e)},e),e.g={}}Ie.prototype.N=function(){Ie.Z.N.call(this),Re(this)},Ie.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var ze=o.JSON.stringify,Be=o.JSON.parse,Ve=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function E(){}function He(){}var Ue={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function We(){ie.call(this,`d`)}d(We,ie);function Ge(){ie.call(this,`c`)}d(Ge,ie);var Ke={},qe=null;function Je(){return qe||=new Ae}Ke.Ia=`serverreachability`;function Ye(e){ie.call(this,Ke.Ia,e)}d(Ye,ie);function Xe(e){let t=Je();je(t,new Ye(t))}Ke.STAT_EVENT=`statevent`;function Ze(e,t){ie.call(this,Ke.STAT_EVENT,e),this.stat=t}d(Ze,ie);function Qe(e){let t=Je();je(t,new Ze(t,e))}Ke.Ja=`timingevent`;function $e(e,t){ie.call(this,Ke.Ja,e),this.size=t}d($e,ie);function et(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function tt(){this.g=!0}tt.prototype.ua=function(){this.g=!1};function nt(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function rt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function it(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+ot(e,n)+(r?` `+r:``)})}function at(e,t){e.info(function(){return`TIMEOUT: `+t})}tt.prototype.info=function(){};function ot(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return ze(a)}catch{return t}}var st={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ct={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},lt;function ut(){}d(ut,E),ut.prototype.g=function(){return new XMLHttpRequest},lt=new ut;function dt(e){return encodeURIComponent(String(e))}function ft(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function pt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mt}function mt(){this.i=null,this.g=``,this.h=!1}var ht={},gt={};function _t(e,t,n){e.M=1,e.A=Ut(zt(t)),e.u=n,e.R=!0,vt(e,null)}function vt(e,t){e.F=Date.now(),St(e),e.B=zt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),rn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new mt,e.g=Jn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Fe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Le[0]=i.toString()),i=Le);for(let e=0;e<i.length;e++){let a=ye(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?w(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Xe(),nt(e.i,e.v,e.B,e.l,e.S,e.u)}pt.prototype.ba=function(e){e=e.target;let t=this.O;t&&En(e)==3?t.j():this.Y(e)},pt.prototype.Y=function(e){try{if(e==this.g)a:{let s=En(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||Dn(this.g)))){this.K||s!=4||c==7||Xe(c==8||l<=0?3:2),wt(this);var t=this.g.ca();this.X=t;var n=yt(this);if(this.o=t==200,rt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!oe(r)){var a=r;break b}}a=null}if(e=a)it(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Dt(this,e);else{this.o=!1,this.m=3,Qe(12),Et(this),Tt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=xt(this,n),t==gt){s==4&&(this.m=4,Qe(14),e=!1),it(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ht){this.m=4,Qe(15),it(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else it(this.i,this.l,t,null),Dt(this,t);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Qe(16),e=!1),this.o=this.o&&e,!e)it(this.i,this.l,n,`[Invalid Chunked Response]`),Et(this),Tt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Bn(o),o.P=!0,Qe(11))}}else it(this.i,this.l,n,null),Dt(this,n);s==4&&Et(this),this.o&&!this.K&&(s==4?Un(this.j,this):(this.o=!1,St(this)))}else On(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),Et(this),Tt(this)}}}catch{}};function yt(e){if(!bt(e))return e.g.la();let t=Dn(e.g);if(t===``)return``;let n=``,r=t.length,i=En(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Et(e),Tt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function bt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function xt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?gt:(n=Number(t.substring(n,r)),isNaN(n)?ht:(r+=1,r+n>t.length?gt:(t=t.slice(r,r+n),e.C=r+n,t)))}pt.prototype.cancel=function(){this.K=!0,Et(this)};function St(e){e.T=Date.now()+e.H,Ct(e,e.H)}function Ct(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=et(l(e.aa,e),t)}function wt(e){e.D&&=(o.clearTimeout(e.D),null)}pt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(at(this.i,this.B),this.M!=2&&(Xe(),Qe(17)),Et(this),this.m=2,Tt(this)):Ct(this,this.T-e)};function Tt(e){e.j.I==0||e.K||Un(e.j,e)}function Et(e){wt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Re(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Dt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||Mt(n.h,e))){if(!e.L&&Mt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Hn(n),Mn(n);else break a;zn(n),Qe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=et(l(n.Va,n),6e3));jt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Gn(n,11)}else if((e.L||n.g==e)&&Hn(n),!oe(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Nt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,D(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=qn(r,r.L?r.ba:null,r.W),o.L){Pt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(wt(s),St(s)),r.g=o}else Rn(r);n.i.length>0&&Pn(n)}else l[0]!=`stop`&&l[0]!=`close`||Gn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Gn(n,7):jn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Xe(4)}catch{}}var Ot=class{constructor(e,t){this.g=e,this.map=t}};function kt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function At(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function jt(e){return e.h?1:e.g?e.g.size:0}function Mt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Nt(e,t){e.g?e.g.add(t):e.h=t}function Pt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}kt.prototype.cancel=function(){if(this.i=Ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Ft(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var It=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Lt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Rt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Rt?(this.l=e.l,Bt(this,e.j),this.o=e.o,this.g=e.g,Vt(this,e.u),this.h=e.h,Ht(this,an(e.i)),this.m=e.m):e&&(t=String(e).match(It))?(this.l=!1,Bt(this,t[1]||``,!0),this.o=Wt(t[2]||``),this.g=Wt(t[3]||``,!0),Vt(this,t[4]),this.h=Wt(t[5]||``,!0),Ht(this,t[6]||``,!0),this.m=Wt(t[7]||``)):(this.l=!1,this.i=new Qt(null,this.l))}Rt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Gt(t,qt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Gt(t,qt,!0),`@`),e.push(dt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Gt(n,n.charAt(0)==`/`?Yt:Jt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Gt(n,Zt)),e.join(``)},Rt.prototype.resolve=function(e){let t=zt(this),n=!!e.j;n?Bt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Vt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Ht(t,an(e.i)):n=!!e.m,n&&(t.m=e.m),t};function zt(e){return new Rt(e)}function Bt(e,t,n){e.j=n?Wt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Vt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Ht(e,t,n){t instanceof Qt?(e.i=t,sn(e.i,e.l)):(n||(t=Gt(t,Xt)),e.i=new Qt(t,e.l))}function D(e,t,n){e.i.set(t,n)}function Ut(e){return D(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Gt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Kt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var qt=/[#\/\?@]/g,Jt=/[#\?:]/g,Yt=/[#\?]/g,Xt=/[#\?@]/g,Zt=/#/g;function Qt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function $t(e){e.g||(e.g=new Map,e.h=0,e.i&&Lt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Qt.prototype,e.add=function(e,t){$t(this),this.i=null,e=on(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function en(e,t){$t(e),t=on(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tn(e,t){return $t(e),t=on(e,t),e.g.has(t)}e.forEach=function(e,t){$t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function nn(e,t){$t(e);let n=[];if(typeof t==`string`)tn(e,t)&&(n=n.concat(e.g.get(on(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return $t(this),this.i=null,e=on(this,e),tn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=nn(this,e),e.length>0?String(e[0]):t):t};function rn(e,t,n){en(e,t),n.length>0&&(e.i=null,e.g.set(on(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=dt(n);n=nn(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+dt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function an(e){let t=new Qt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function on(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function sn(e,t){t&&!e.j&&($t(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(en(this,t),rn(this,n,e))},e)),e.j=t}function cn(e,t){let n=new tt;if(o.Image){let r=new Image;r.onload=u(un,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(un,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(un,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(un,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function ln(e,t){let n=new tt,r=new AbortController,i=setTimeout(()=>{r.abort(),un(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?un(n,`TestPingServer: ok`,!0,t):un(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),un(n,`TestPingServer: error`,!1,t)})}function un(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function dn(){this.g=new Ve}function fn(e){this.i=e.Sb||null,this.h=e.ab||!1}d(fn,E),fn.prototype.g=function(){return new pn(this.i,this.h)};function pn(e,t){Ae.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(pn,Ae),e=pn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,gn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;mn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function mn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hn(this):gn(this),this.readyState==3&&mn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,hn(this))},e.Na=function(e){this.g&&(this.response=e,hn(this))},e.ga=function(){this.g&&hn(this)};function hn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,gn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function gn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(pn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function _n(e){let t=``;return fe(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function vn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=_n(n),typeof e==`string`||D(e,t,n))}function yn(e){Ae.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(yn,Ae);var bn=/^https?$/i,xn=[`POST`,`PUT`];e=yn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lt.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){Sn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(xn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){Sn(this,e)}};function Sn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Cn(e),Tn(e)}function Cn(e){e.A||(e.A=!0,je(e,`complete`),je(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,je(this,`complete`),je(this,`abort`),Tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),yn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?wn(this):this.Xa())},e.Xa=function(){wn(this)};function wn(e){if(e.h&&a!==void 0){if(e.v&&En(e)==4)setTimeout(e.Ca.bind(e),0);else if(je(e,`readystatechange`),En(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(It)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!bn.test(t?t.toLowerCase():``)}n=r}if(n)je(e,`complete`),je(e,`success`);else{e.o=6;try{var i=En(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,Cn(e)}}finally{Tn(e)}}}}function Tn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||je(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function En(e){return e.g?e.g.readyState:0}e.ca=function(){try{return En(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Be(t)}};function Dn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function On(e){let t={};e=(e.g&&En(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(oe(e[r]))continue;var n=ft(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}C(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function kn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function An(e){this.za=0,this.i=[],this.j=new tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kn(`baseRetryDelayMs`,5e3,e),this.Za=kn(`retryDelaySeedMs`,1e4,e),this.Ta=kn(`forwardChannelMaxRetries`,2,e),this.va=kn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new kt(e&&e.concurrentRequestLimit),this.Ba=new dn,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=An.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Qe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=qn(this,null,this.W),Pn(this)};function jn(e){if(Nn(e),e.I==3){var t=e.V++,n=zt(e.J);if(D(n,`SID`,e.M),D(n,`RID`,t),D(n,`TYPE`,`terminate`),Ln(e,n),t=new pt(e,e.j,t),t.M=2,t.A=Ut(zt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Jn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),St(t)}Kn(e)}function Mn(e){e.g&&=(Bn(e),e.g.cancel(),null)}function Nn(e){Mn(e),e.v&&=(o.clearTimeout(e.v),null),Hn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Pn(e){if(!At(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||S(),ee||=(x(),!0),te.add(t,e),e.D=0}}function Fn(e,t){return jt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=et(l(e.Ea,e,t),Wn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new pt(this,this.j,e),a=this.o;if(this.U&&(a?(a=w(a),me(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=O(this,i,t),n=zt(this.J),D(n,`RID`,e),D(n,`CVER`,22),this.G&&D(n,`X-HTTP-Session-Id`,this.G),Ln(this,n),a&&(this.R?t=`headers=`+dt(_n(a))+`&`+t:this.u&&vn(n,this.u,a)),Nt(this.h,i),this.Ra&&D(n,`TYPE`,`init`),this.S?(D(n,`$req`,t),D(n,`SID`,`null`),i.U=!0,_t(i,n,null)):_t(i,n,t),this.I=2}}else this.I==3&&(e?In(this,e):this.i.length==0||At(this.h)||In(this))};function In(e,t){var n=t?t.l:e.V++;let r=zt(e.J);D(r,`SID`,e.M),D(r,`RID`,n),D(r,`AID`,e.K),Ln(e,r),e.u&&e.o&&vn(r,e.u,e.o),n=new pt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=O(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Nt(e.h,n),_t(n,r,t)}function Ln(e,t){e.H&&fe(e.H,function(e,n){D(t,n,e)}),e.l&&fe({},function(e,n){D(t,n,e)})}function O(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=ze(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Rn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||S(),ee||=(x(),!0),te.add(t,e),e.A=0}}function zn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=et(l(e.Da,e),Wn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Vn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=et(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Qe(10),Mn(this),Vn(this))};function Bn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Vn(e){e.g=new pt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=zt(e.na);D(t,`RID`,`rpc`),D(t,`SID`,e.M),D(t,`AID`,e.K),D(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&D(t,`TO`,e.ia),D(t,`TYPE`,`xmlhttp`),Ln(e,t),e.u&&e.o&&vn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Ut(zt(t)),n.u=null,n.R=!0,vt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,Mn(this),zn(this),Qe(19))};function Hn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Un(e,t){var n=null;if(e.g==t){Hn(e),Bn(e),e.g=null;var r=2}else if(Mt(e.h,t))n=t.G,Pt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Je(),je(r,new $e(r,n)),Pn(e)}else Rn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Fn(e,t)||r==2&&zn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Gn(e,5);break;case 4:Gn(e,10);break;case 3:Gn(e,6);break;default:Gn(e,2)}}}function Wn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Gn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Rt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Bt(r,`https`),Ut(r),t?cn(r.toString(),n):ln(r.toString(),n)}else Qe(2);e.I=0,e.l&&e.l.pa(t),Kn(e),Nn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Qe(2)):(this.j.info(`Failed to ping google.com`),Qe(1))};function Kn(e){if(e.I=0,e.ja=[],e.l){let t=Ft(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function qn(e,t,n){var r=n instanceof Rt?zt(n):new Rt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Vt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Rt(null);r&&Bt(e,r),t&&(e.g=t),i&&Vt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&D(r,n,t),D(r,`VER`,e.ka),Ln(e,r),r}function Jn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new yn(new fn({ab:n})):new yn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yn(){}e=Yn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Xn(){}Xn.prototype.g=function(e,t){return new k(e,t)};function k(e,t){Ae.call(this),this.g=new An(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!oe(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!oe(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new $n(this)}d(k,Ae),k.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},k.prototype.close=function(){jn(this.g)},k.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=ze(e),e=n);t.i.push(new Ot(t.Ya++,e)),t.I==3&&Pn(t)},k.prototype.N=function(){this.g.l=null,delete this.j,jn(this.g),delete this.g,k.Z.N.call(this)};function Zn(e){We.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Zn,We);function Qn(){Ge.call(this),this.status=1}d(Qn,Ge);function $n(e){this.g=e}d($n,Yn),$n.prototype.ra=function(){je(this.g,`a`)},$n.prototype.qa=function(e){je(this.g,new Zn(e))},$n.prototype.pa=function(e){je(this.g,new Qn)},$n.prototype.oa=function(){je(this.g,`b`)},Xn.prototype.createWebChannel=Xn.prototype.g,k.prototype.send=k.prototype.o,k.prototype.open=k.prototype.m,k.prototype.close=k.prototype.close,ws=gs.createWebChannelTransport=function(){return new Xn},Cs=gs.getStatEventTarget=function(){return Je()},Ss=gs.Event=Ke,xs=gs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,bs=gs.ErrorCode=st,ct.COMPLETE=`complete`,ys=gs.EventType=ct,He.EventType=Ue,Ue.OPEN=`a`,Ue.CLOSE=`b`,Ue.ERROR=`c`,Ue.MESSAGE=`d`,Ae.prototype.listen=Ae.prototype.J,vs=gs.WebChannel=He,gs.FetchXmlHttpFactory=fn,yn.prototype.listenOnce=yn.prototype.K,yn.prototype.getLastError=yn.prototype.Ha,yn.prototype.getLastErrorCode=yn.prototype.ya,yn.prototype.getStatus=yn.prototype.ca,yn.prototype.getResponseJson=yn.prototype.La,yn.prototype.getResponseText=yn.prototype.la,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Fa,_s=gs.XhrIo=yn}).apply(hs===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:hs);var Ts=`@firebase/firestore`,Es=`4.9.3`,Ds=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Ds.UNAUTHENTICATED=new Ds(null),Ds.GOOGLE_CREDENTIALS=new Ds(`google-credentials-uid`),Ds.FIRST_PARTY=new Ds(`first-party-uid`),Ds.MOCK_USER=new Ds(`mock-user`);var Os=`12.7.0`,ks=new Ke(`@firebase/firestore`);function As(){return ks.logLevel}function N(e,...t){if(ks.logLevel<=E.DEBUG){let n=t.map(Ns);ks.debug(`Firestore (${Os}): ${e}`,...n)}}function js(e,...t){if(ks.logLevel<=E.ERROR){let n=t.map(Ns);ks.error(`Firestore (${Os}): ${e}`,...n)}}function Ms(e,...t){if(ks.logLevel<=E.WARN){let n=t.map(Ns);ks.warn(`Firestore (${Os}): ${e}`,...n)}}function Ns(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function P(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Ps(e,r,n)}function Ps(e,t,n){let r=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw js(r),Error(r)}function F(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Ps(t,i,r)}function I(e,t){return e}var L={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},R=class extends be{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Fs=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Is=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Ls=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ds.UNAUTHENTICATED)))}shutdown(){}},Rs=class{constructor(e){this.t=e,this.currentUser=Ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){F(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fs,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{N(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(N(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Fs)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(F(typeof t.accessToken==`string`,31837,{l:t}),new Is(t.accessToken,this.currentUser)):null:(N(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return F(e===null||typeof e==`string`,2055,{h:e}),new Ds(e)}},zs=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Ds.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},Bs=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new zs(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ds.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Vs=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},Hs=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){F(this.o===void 0,3512);let n=e=>{e.error!=null&&N(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,N(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{N(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):N(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new Vs(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(F(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new Vs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Us(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var Ws=class{static newId(){let e=``;for(;e.length<20;){let t=Us(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function z(e,t){return e<t?-1:e>t?1:0}function Gs(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return Js(n)===Js(i)?z(n,i):Js(n)?1:-1}return z(e.length,t.length)}var Ks=55296,qs=57343;function Js(e){let t=e.charCodeAt(0);return t>=Ks&&t<=qs}function Ys(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Xs(e){return e+`\0`}var Zs=`__name__`,Qs=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&P(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return z(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):Gs(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}},$s=class e extends Qs{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new R(L.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},ec=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tc=class e extends Qs{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return ec.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zs}static keyField(){return new e([Zs])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new R(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new R(L.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new R(L.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new R(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},B=class e{constructor(e){this.path=e}static fromPath(t){return new e($s.fromString(t))}static fromName(t){return new e($s.fromString(t).popFirst(5))}static empty(){return new e($s.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$s.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $s.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new $s(t.slice()))}};function nc(e,t,n){if(!n)throw new R(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function rc(e,t,n,r){if(!0===t&&!0===r)throw new R(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ic(e){if(!B.isDocumentKey(e))throw new R(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ac(e){if(B.isDocumentKey(e))throw new R(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function oc(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function sc(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:P(12329,{type:typeof e})}function cc(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new R(L.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=sc(e);throw new R(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function lc(e,t){let n={typeString:e};return t&&(n.value=t),n}function uc(e,t){if(!oc(e))throw new R(L.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new R(L.INVALID_ARGUMENT,n);return!0}var dc=-62135596800,fc=1e6,pc=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*fc))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new R(L.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<dc||e>=253402300800)throw new R(L.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fc}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(uc(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-dc;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};pc._jsonSchemaVersion=`firestore/timestamp/1.0`,pc._jsonSchema={type:lc(`string`,pc._jsonSchemaVersion),seconds:lc(`number`),nanoseconds:lc(`number`)};var V=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new pc(0,0))}static max(){return new e(new pc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},mc=-1,hc=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};function gc(e){return e.fields.find((e=>e.kind===2))}function _c(e){return e.fields.filter((e=>e.kind!==2))}hc.UNKNOWN_ID=-1;var vc=class{constructor(e,t){this.fieldPath=e,this.kind=t}},yc=class e{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new e(0,Sc.min())}};function bc(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Sc(V.fromTimestamp(r===1e9?new pc(n+1,0):new pc(n,r)),B.empty(),t)}function xc(e){return new Sc(e.readTime,e.key,mc)}var Sc=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(V.min(),B.empty(),mc)}static max(){return new e(V.max(),B.empty(),mc)}};function Cc(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=B.comparator(e.documentKey,t.documentKey),n===0?z(e.largestBatchId,t.largestBatchId):n):n}var wc=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Tc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function Ec(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==wc)throw e;N(`LocalStore`,`Unexpectedly lost primary lease`)}var H=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}},Dc=`SimpleDb`,Oc=class e{static open(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(e){throw new Mc(n,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Fs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Mc(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{let n=Lc(t.target.error);this.S.reject(new Mc(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(N(Dc,`Aborting transaction:`,e?e.message:`Client-initiated abort`),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||typeof e.commit!=`function`||e.commit()}store(e){return new Pc(this.transaction.objectStore(e))}},kc=class e{static delete(e){return N(Dc,`Removing database:`,e),Fc(v().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!T())return!1;if(e.F())return!0;let t=de(),n=e.M(t),r=0<n&&n<10,i=Ac(t),a=0<i&&i<4.5;return!(t.indexOf(`MSIE `)>0||t.indexOf(`Trident/`)>0||t.indexOf(`Edge/`)>0||r||a)}static F(){return typeof process<`u`&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE===`YES`}static O(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split(`_`).slice(0,2).join(`.`):`-1`;return Number(n)}constructor(t,n,r){this.name=t,this.version=n,this.N=r,this.B=null,e.M(de())===12.2&&js(`Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`)}async L(e){return this.db||=(N(Dc,`Opening database:`,this.name),await new Promise(((t,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{let n=e.target.result;t(n)},r.onblocked=()=>{n(new Mc(e,`Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.`))},r.onerror=t=>{let r=t.target.error;r.name===`VersionError`?n(new R(L.FAILED_PRECONDITION,`A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.`)):r.name===`InvalidStateError`?n(new R(L.FAILED_PRECONDITION,`Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: `+r)):n(new Mc(e,r))},r.onupgradeneeded=e=>{N(Dc,`Database "`+this.name+`" requires upgrade from version:`,e.oldVersion);let t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next((()=>{N(Dc,`Database upgrade to version `+this.version+` complete`)}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){let i=t===`readonly`,a=0;for(;;){++a;try{this.db=await this.L(e);let t=Oc.open(this.db,e,i?`readonly`:`readwrite`,n),a=r(t).next((e=>(t.C(),e))).catch((e=>(t.abort(e),H.reject(e)))).toPromise();return a.catch((()=>{})),await t.D,a}catch(e){let t=e,n=t.name!==`FirebaseError`&&a<3;if(N(Dc,`Transaction failed with error:`,t.message,`Retrying:`,n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}};function Ac(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}var jc=class{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Fc(this.U.delete())}},Mc=class extends R{constructor(e,t){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name=`IndexedDbTransactionError`}};function Nc(e){return e.name===`IndexedDbTransactionError`}var Pc=class{constructor(e){this.store=e}put(e,t){let n;return t===void 0?(N(Dc,`PUT`,this.store.name,`<auto-key>`,e),n=this.store.put(e)):(N(Dc,`PUT`,this.store.name,e,t),n=this.store.put(t,e)),Fc(n)}add(e){return N(Dc,`ADD`,this.store.name,e,e),Fc(this.store.add(e))}get(e){return Fc(this.store.get(e)).next((t=>(t===void 0&&(t=null),N(Dc,`GET`,this.store.name,e,t),t)))}delete(e){return N(Dc,`DELETE`,this.store.name,e),Fc(this.store.delete(e))}count(){return N(Dc,`COUNT`,this.store.name),Fc(this.store.count())}J(e,t){let n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll==`function`){let e=r.getAll(n.range);return new H(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{let e=this.cursor(n),t=[];return this.H(e,((e,n)=>{t.push(n)})).next((()=>t))}}Y(e,t){let n=this.store.getAll(e,t===null?void 0:t);return new H(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}Z(e,t){N(Dc,`DELETE ALL`,this.store.name);let n=this.options(e,t);n.X=!1;let r=this.cursor(n);return this.H(r,((e,t,n)=>n.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);let r=this.cursor(n);return this.H(r,t)}te(e){let t=this.cursor({});return new H(((n,r)=>{t.onerror=e=>{r(Lc(e.target.error))},t.onsuccess=t=>{let r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}H(e,t){let n=[];return new H(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void r();let a=new jc(i),o=t(i.primaryKey,i.value,a);if(o instanceof H){let e=o.catch((e=>(a.done(),H.reject(e))));n.push(e)}a.isDone?r():a.G===null?i.continue():i.continue(a.G)}})).next((()=>H.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e==`string`?n=e:t=e),{index:n,range:t}}cursor(e){let t=`next`;if(e.reverse&&(t=`prev`),e.index){let n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Fc(e){return new H(((t,n)=>{e.onsuccess=e=>{let n=e.target.result;t(n)},e.onerror=e=>{n(Lc(e.target.error))}}))}var Ic=!1;function Lc(e){let t=kc.M(de());if(t>=12.2&&t<13){let t=`An internal error was encountered in the Indexed Database server`;if(e.message.indexOf(t)>=0){let e=new R(`internal`,`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ic||(Ic=!0,setTimeout((()=>{throw e}),0)),e}}return e}var Rc=`IndexBackfiller`,zc=class{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&=(this.task.cancel(),null)}get started(){return this.task!==null}re(e){N(Rc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay(`index_backfill`,e,(async()=>{this.task=null;try{N(Rc,`Documents written: ${await this.ne.ie()}`)}catch(e){Nc(e)?N(Rc,`Ignoring IndexedDB error during index backfill: `,e):await Ec(e)}await this.re(6e4)}))}},Bc=class{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction(`Backfill Indexes`,`readwrite-primary`,(t=>this.se(t,e)))}se(e,t){let n=new Set,r=t,i=!0;return H.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(t!==null&&!n.has(t))return N(Rc,`Processing collection: ${t}`),this.oe(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{let i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this._e(r,n))).next((n=>(N(Rc,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((e,t)=>{let r=xc(t);Cc(r,n)>0&&(n=r)})),new Sc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}},Vc=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Vc.ce=-1;var Hc=-1;function Uc(e){return e==null}function Wc(e){return e===0&&1/e==-1/0}function Gc(e){return typeof e==`number`&&Number.isInteger(e)&&!Wc(e)&&e<=2**53-1&&e>=-(2**53-1)}var Kc=``;function qc(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Yc(t)),t=Jc(e.get(n),t);return Yc(t)}function Jc(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Kc:n+=``;break;default:n+=r}}return n}function Yc(e){return e+Kc+``}function Xc(e){let t=e.length;if(F(t>=2,64408,{path:e}),t===2)return F(e.charAt(0)===Kc&&e.charAt(1)===``,56145,{path:e}),$s.emptyPath();let n=t-2,r=[],i=``;for(let a=0;a<t;){let t=e.indexOf(Kc,a);switch((t<0||t>n)&&P(50515,{path:e}),e.charAt(t+1)){case``:let n=e.substring(a,t),o;i.length===0?o=n:(i+=n,o=i,i=``),r.push(o);break;case``:i+=e.substring(a,t),i+=`\0`;break;case``:i+=e.substring(a,t+1);break;default:P(61167,{path:e})}a=t+2}return new $s(r)}var Zc=`remoteDocuments`,Qc=`owner`,$c=`owner`,el=`mutationQueues`,tl=`userId`,nl=`mutations`,rl=`batchId`,il=`userMutationsIndex`,al=[`userId`,`batchId`];function ol(e,t){return[e,qc(t)]}function sl(e,t,n){return[e,qc(t),n]}var cl={},ll=`documentMutations`,ul=`remoteDocumentsV14`,dl=[`prefixPath`,`collectionGroup`,`readTime`,`documentId`],fl=`documentKeyIndex`,pl=[`prefixPath`,`collectionGroup`,`documentId`],ml=`collectionGroupIndex`,hl=[`collectionGroup`,`readTime`,`prefixPath`,`documentId`],gl=`remoteDocumentGlobal`,_l=`remoteDocumentGlobalKey`,vl=`targets`,yl=`queryTargetsIndex`,bl=[`canonicalId`,`targetId`],xl=`targetDocuments`,Sl=[`targetId`,`path`],Cl=`documentTargetsIndex`,wl=[`path`,`targetId`],Tl=`targetGlobalKey`,El=`targetGlobal`,Dl=`collectionParents`,Ol=[`collectionId`,`parent`],kl=`clientMetadata`,Al=`clientId`,jl=`bundles`,Ml=`bundleId`,Nl=`namedQueries`,Pl=`name`,Fl=`indexConfiguration`,Il=`indexId`,Ll=`collectionGroupIndex`,Rl=`collectionGroup`,zl=`indexState`,Bl=[`indexId`,`uid`],Vl=`sequenceNumberIndex`,U=[`uid`,`sequenceNumber`],W=`indexEntries`,G=[`indexId`,`uid`,`arrayValue`,`directionalValue`,`orderedDocumentKey`,`documentKey`],K=`documentKeyIndex`,Hl=[`indexId`,`uid`,`orderedDocumentKey`],Ul=`documentOverlays`,Wl=[`userId`,`collectionPath`,`documentId`],Gl=`collectionPathOverlayIndex`,Kl=[`userId`,`collectionPath`,`largestBatchId`],ql=`collectionGroupOverlayIndex`,Jl=[`userId`,`collectionGroup`,`largestBatchId`],Yl=`globals`,Xl=`name`,Zl=[...[...[...[...[el,nl,ll,Zc,vl,Qc,El,xl],kl],gl],Dl],jl,Nl],Ql=[...Zl,Ul],$l=[el,nl,ll,ul,vl,Qc,El,xl,kl,gl,Dl,jl,Nl,Ul],eu=$l,tu=[...eu,Fl,zl,W],nu=tu,ru=[...tu,Yl],iu=ru,au=class extends Tc{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}};function ou(e,t){let n=I(e);return kc.O(n.le,t)}function su(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cu(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lu(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var uu=class e{constructor(e,t){this.comparator=e,this.root=t||fu.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fu.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}},du=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fu=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}};fu.EMPTY=null,fu.RED=!0,fu.BLACK=!1,fu.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new fu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pu=class e{constructor(e){this.comparator=e,this.data=new uu(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mu(this.data.getIterator())}getIteratorFrom(e){return new mu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},mu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function hu(e){return e.hasNext()?e.getNext():void 0}var gu=class e{constructor(e){this.fields=e,e.sort(tc.comparator)}static empty(){return new e([])}unionWith(t){let n=new pu(tc.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},_u=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},vu=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new _u(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vu.EMPTY_BYTE_STRING=new vu(``);var yu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bu(e){if(F(!!e,39018),typeof e==`string`){let t=0,n=yu.exec(e);if(F(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xu(e.seconds),nanos:xu(e.nanos)}}function xu(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Su(e){return typeof e==`string`?vu.fromBase64String(e):vu.fromUint8Array(e)}var Cu=`server_timestamp`,wu=`__type__`,Tu=`__previous_value__`,Eu=`__local_write_time__`;function Du(e){return(e?.mapValue?.fields||{})[wu]?.stringValue===Cu}function Ou(e){let t=e.mapValue.fields[Tu];return Du(t)?Ou(t):t}function ku(e){let t=bu(e.mapValue.fields[Eu].timestampValue);return new pc(t.seconds,t.nanos)}var Au=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},ju=`(default)`,Mu=class e{constructor(e,t){this.projectId=e,this.database=t||ju}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===ju}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Nu=`__type__`,Pu=`__max__`,Fu={mapValue:{fields:{__type__:{stringValue:Pu}}}},Iu=`__vector__`,Lu=`value`,Ru={nullValue:`NULL_VALUE`};function zu(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?Du(e)?4:td(e)?9007199254740991:$u(e)?10:11:P(28295,{value:e})}function Bu(e,t){if(e===t)return!0;let n=zu(e);if(n!==zu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ku(e).isEqual(ku(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=bu(e.timestampValue),r=bu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Su(e.bytesValue).isEqual(Su(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xu(e.geoPointValue.latitude)===xu(t.geoPointValue.latitude)&&xu(e.geoPointValue.longitude)===xu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return xu(e.integerValue)===xu(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=xu(e.doubleValue),r=xu(t.doubleValue);return n===r?Wc(n)===Wc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ys(e.arrayValue.values||[],t.arrayValue.values||[],Bu);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(su(n)!==su(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Bu(n[e],r[e])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function Vu(e,t){return(e.values||[]).find((e=>Bu(e,t)))!==void 0}function Hu(e,t){if(e===t)return 0;let n=zu(e),r=zu(t);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=xu(e.integerValue||e.doubleValue),r=xu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uu(e.timestampValue,t.timestampValue);case 4:return Uu(ku(e),ku(t));case 5:return Gs(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Su(e),r=Su(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=z(n[e],r[e]);if(t!==0)return t}return z(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=z(xu(e.latitude),xu(t.latitude));return n===0?z(xu(e.longitude),xu(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Wu(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[Lu]?.arrayValue,a=r[Lu]?.arrayValue,o=z(i?.values?.length||0,a?.values?.length||0);return o===0?Wu(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Fu.mapValue&&t===Fu.mapValue)return 0;if(e===Fu.mapValue)return 1;if(t===Fu.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=Gs(r[e],a[e]);if(t!==0)return t;let o=Hu(n[r[e]],i[a[e]]);if(o!==0)return o}return z(r.length,a.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function Uu(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return z(e,t);let n=bu(e),r=bu(t),i=z(n.seconds,r.seconds);return i===0?z(n.nanos,r.nanos):i}function Wu(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Hu(n[e],r[e]);if(t)return t}return z(n.length,r.length)}function Gu(e){return Ku(e)}function Ku(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=bu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Su(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return B.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Ku(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Ku(e.fields[i])}`;return n+`}`}(e.mapValue):P(61005,{value:e})}function qu(e){switch(zu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Ou(e);return t?16+qu(t):16;case 5:return 2*e.stringValue.length;case 6:return Su(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+qu(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return cu(e.fields,((e,n)=>{t+=e.length+qu(n)})),t}(e.mapValue);default:throw P(13486,{value:e})}}function Ju(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function q(e){return!!e&&`integerValue`in e}function Yu(e){return!!e&&`arrayValue`in e}function Xu(e){return!!e&&`nullValue`in e}function Zu(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function Qu(e){return!!e&&`mapValue`in e}function $u(e){return(e?.mapValue?.fields||{})[Nu]?.stringValue===Iu}function ed(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return cu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ed(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ed(e.arrayValue.values[n]);return t}return{...e}}function td(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Pu}var nd={mapValue:{fields:{[Nu]:{stringValue:Iu},[Lu]:{arrayValue:{}}}}};function rd(e){return`nullValue`in e?Ru:`booleanValue`in e?{booleanValue:!1}:`integerValue`in e||`doubleValue`in e?{doubleValue:NaN}:`timestampValue`in e?{timestampValue:{seconds:-(2**53-1)}}:`stringValue`in e?{stringValue:``}:`bytesValue`in e?{bytesValue:``}:`referenceValue`in e?Ju(Mu.empty(),B.empty()):`geoPointValue`in e?{geoPointValue:{latitude:-90,longitude:-180}}:`arrayValue`in e?{arrayValue:{}}:`mapValue`in e?$u(e)?nd:{mapValue:{}}:P(35942,{value:e})}function id(e){return`nullValue`in e?{booleanValue:!1}:`booleanValue`in e?{doubleValue:NaN}:`integerValue`in e||`doubleValue`in e?{timestampValue:{seconds:-(2**53-1)}}:`timestampValue`in e?{stringValue:``}:`stringValue`in e?{bytesValue:``}:`bytesValue`in e?Ju(Mu.empty(),B.empty()):`referenceValue`in e?{geoPointValue:{latitude:-90,longitude:-180}}:`geoPointValue`in e?{arrayValue:{}}:`arrayValue`in e?nd:`mapValue`in e?$u(e)?{mapValue:{}}:Fu:P(61959,{value:e})}function ad(e,t){let n=Hu(e.value,t.value);return n===0?e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0:n}function od(e,t){let n=Hu(e.value,t.value);return n===0?e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0:n}var sd=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ed(t)}setAll(e){let t=tc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ed(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){cu(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(ed(this.value))}};function cd(e){let t=[];return cu(e.fields,((e,n)=>{let r=new tc([e]);if(Qu(n)){let e=cd(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new gu(t)}var ld=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,V.min(),V.min(),V.min(),sd.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,V.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,V.min(),V.min(),sd.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,V.min(),V.min(),sd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},ud=class{constructor(e,t){this.position=e,this.inclusive=t}};function dd(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?B.comparator(B.fromName(o.referenceValue),n.key):Hu(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function fd(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bu(e.position[n],t.position[n]))return!1;return!0}var pd=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function md(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var hd=class{},J=class e extends hd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new wd(t,n,r):n===`array-contains`?new Od(t,r):n===`in`?new kd(t,r):n===`not-in`?new Ad(t,r):n===`array-contains-any`?new jd(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new Td(e,n):new Ed(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hu(t,this.value)):t!==null&&zu(this.value)===zu(t)&&this.matchesComparison(Hu(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gd=class e extends hd{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return _d(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function _d(e){return e.op===`and`}function vd(e){return e.op===`or`}function yd(e){return bd(e)&&_d(e)}function bd(e){for(let t of e.filters)if(t instanceof gd)return!1;return!0}function xd(e){if(e instanceof J)return e.field.canonicalString()+e.op.toString()+Gu(e.value);if(yd(e))return e.filters.map((e=>xd(e))).join(`,`);{let t=e.filters.map((e=>xd(e))).join(`,`);return`${e.op}(${t})`}}function Sd(e,t){return e instanceof J?function(e,t){return t instanceof J&&e.op===t.op&&e.field.isEqual(t.field)&&Bu(e.value,t.value)}(e,t):e instanceof gd?function(e,t){return t instanceof gd&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Sd(n,t.filters[r])),!0):!1}(e,t):void P(19439)}function Y(e,t){let n=e.filters.concat(t);return gd.create(n,e.op)}function Cd(e){return e instanceof J?function(e){return`${e.field.canonicalString()} ${e.op} ${Gu(e.value)}`}(e):e instanceof gd?function(e){return e.op.toString()+` {`+e.getFilters().map(Cd).join(` ,`)+`}`}(e):`Filter`}var wd=class extends J{constructor(e,t,n){super(e,t,n),this.key=B.fromName(n.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},Td=class extends J{constructor(e,t){super(e,`in`,t),this.keys=Dd(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Ed=class extends J{constructor(e,t){super(e,`not-in`,t),this.keys=Dd(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Dd(e,t){return(t.arrayValue?.values||[]).map((e=>B.fromName(e.referenceValue)))}var Od=class extends J{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Yu(t)&&Vu(t.arrayValue,this.value)}},kd=class extends J{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Vu(this.value.arrayValue,t)}},Ad=class extends J{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Vu(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vu(this.value.arrayValue,t)}},jd=class extends J{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Vu(this.value.arrayValue,e)))}},Md=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function Nd(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Md(e,t,n,r,i,a,o)}function Pd(e){let t=I(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>xd(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Uc(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>Gu(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>Gu(e))).join(`,`)),t.Te=e}return t.Te}function Fd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!md(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Sd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fd(e.startAt,t.startAt)&&fd(e.endAt,t.endAt)}function X(e){return B.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Id(e,t){return e.filters.filter((e=>e instanceof J&&e.field.isEqual(t)))}function Ld(e,t,n){let r=Ru,i=!0;for(let n of Id(e,t)){let e=Ru,t=!0;switch(n.op){case`<`:case`<=`:e=rd(n.value);break;case`==`:case`in`:case`>=`:e=n.value;break;case`>`:e=n.value,t=!1;break;case`!=`:case`not-in`:e=Ru}ad({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(n!==null){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=n.position[a];ad({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}function Rd(e,t,n){let r=Fu,i=!0;for(let n of Id(e,t)){let e=Fu,t=!0;switch(n.op){case`>=`:case`>`:e=id(n.value),t=!1;break;case`==`:case`in`:case`<=`:e=n.value;break;case`<`:e=n.value,t=!1;break;case`!=`:case`not-in`:e=Fu}od({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(n!==null){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=n.position[a];od({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}var zd=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Bd(e,t,n,r,i,a,o,s){return new zd(e,t,n,r,i,a,o,s)}function Vd(e){return new zd(e)}function Hd(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Ud(e){return e.collectionGroup!==null}function Wd(e){let t=I(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new pu(tc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new pd(r,n))})),e.has(tc.keyField().canonicalString())||t.Ie.push(new pd(tc.keyField(),n))}return t.Ie}function Gd(e){let t=I(e);return t.Ee||=Kd(t,Wd(e)),t.Ee}function Kd(e,t){if(e.limitType===`F`)return Nd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new pd(e.field,t)}));let n=e.endAt?new ud(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ud(e.startAt.position,e.startAt.inclusive):null;return Nd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qd(e,t,n){return new zd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jd(e,t){return Fd(Gd(e),Gd(t))&&e.limitType===t.limitType}function Yd(e){return`${Pd(Gd(e))}|lt:${e.limitType}`}function Xd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Cd(e))).join(`, `)}]`),Uc(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>Gu(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>Gu(e))).join(`,`)),`Target(${t})`}(Gd(e))}; limitType=${e.limitType})`}function Zd(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?B.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of Wd(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=dd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wd(e),t)||e.endAt&&!function(e,t,n){let r=dd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wd(e),t))}(e,t)}function Qd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $d(e){return(t,n)=>{let r=!1;for(let i of Wd(e)){let e=ef(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function ef(e,t,n){let r=e.field.isKeyField()?B.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Hu(r,i):P(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return P(19790,{direction:e.dir})}}var tf=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return lu(this.inner)}size(){return this.innerSize}},nf=new uu(B.comparator);function rf(){return nf}var af=new uu(B.comparator);function of(...e){let t=af;for(let n of e)t=t.insert(n.key,n);return t}function sf(e){let t=af;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function cf(){return uf()}function lf(){return uf()}function uf(){return new tf((e=>e.toString()),((e,t)=>e.isEqual(t)))}var df=new uu(B.comparator),ff=new pu(B.comparator);function Z(...e){let t=ff;for(let n of e)t=t.add(n);return t}var pf=new pu(z);function mf(){return pf}function hf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Wc(t)?`-0`:t}}function gf(e){return{integerValue:``+e}}function _f(e,t){return Gc(t)?gf(t):hf(e,t)}var vf=class{constructor(){this._=void 0}};function yf(e,t,n){return e instanceof Sf?function(e,t){let n={fields:{[wu]:{stringValue:Cu},[Eu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Du(t)&&(t=Ou(t)),t&&(n.fields[Tu]=t),{mapValue:n}}(n,t):e instanceof Cf?wf(e,t):e instanceof Tf?Ef(e,t):function(e,t){let n=xf(e,t),r=Of(n)+Of(e.Ae);return q(n)&&q(e.Ae)?gf(r):hf(e.serializer,r)}(e,t)}function bf(e,t,n){return e instanceof Cf?wf(e,t):e instanceof Tf?Ef(e,t):n}function xf(e,t){return e instanceof Df?function(e){return q(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var Sf=class extends vf{},Cf=class extends vf{constructor(e){super(),this.elements=e}};function wf(e,t){let n=kf(t);for(let t of e.elements)n.some((e=>Bu(e,t)))||n.push(t);return{arrayValue:{values:n}}}var Tf=class extends vf{constructor(e){super(),this.elements=e}};function Ef(e,t){let n=kf(t);for(let t of e.elements)n=n.filter((e=>!Bu(e,t)));return{arrayValue:{values:n}}}var Df=class extends vf{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Of(e){return xu(e.integerValue||e.doubleValue)}function kf(e){return Yu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Af=class{constructor(e,t){this.field=e,this.transform=t}};function jf(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cf&&t instanceof Cf||e instanceof Tf&&t instanceof Tf?Ys(e.elements,t.elements,Bu):e instanceof Df&&t instanceof Df?Bu(e.Ae,t.Ae):e instanceof Sf&&t instanceof Sf}(e.transform,t.transform)}var Mf=class{constructor(e,t){this.version=e,this.transformResults=t}},Nf=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pf(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var Ff=class{};function If(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Kf(e.key,Nf.none()):new Vf(e.key,e.data,Nf.none());{let n=e.data,r=sd.empty(),i=new pu(tc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new Hf(e.key,r,new gu(i.toArray()),Nf.none())}}function Lf(e,t,n){e instanceof Vf?function(e,t,n){let r=e.value.clone(),i=Wf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hf?function(e,t,n){if(!Pf(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=Wf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Uf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Rf(e,t,n,r){return e instanceof Vf?function(e,t,n,r){if(!Pf(e.precondition,t))return n;let i=e.value.clone(),a=Gf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hf?function(e,t,n,r){if(!Pf(e.precondition,t))return n;let i=Gf(e.fieldTransforms,r,t),a=t.data;return a.setAll(Uf(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Pf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zf(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=xf(r.transform,e||null);i!=null&&(n===null&&(n=sd.empty()),n.set(r.field,i))}return n||null}function Bf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&Ys(e,t,((e,t)=>jf(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Vf=class extends Ff{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Hf=class extends Ff{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Uf(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function Wf(e,t,n){let r=new Map;F(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,bf(o,s,n[i]))}return r}function Gf(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,yf(e,a,t))}return r}var Kf=class extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},qf=class extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},Jf=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&Lf(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=Rf(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=Rf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=lf();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=If(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(V.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Z())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,((e,t)=>Bf(e,t)))&&Ys(this.baseMutations,e.baseMutations,((e,t)=>Bf(e,t)))}},Yf=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){F(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return df}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},Xf=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},Zf=class{constructor(e,t){this.count=e,this.unchangedNames=t}},Qf,Q;function $f(e){switch(e){case L.OK:return P(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function ep(e){if(e===void 0)return js(`GRPC error has no .code`),L.UNKNOWN;switch(e){case Qf.OK:return L.OK;case Qf.CANCELLED:return L.CANCELLED;case Qf.UNKNOWN:return L.UNKNOWN;case Qf.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Qf.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Qf.INTERNAL:return L.INTERNAL;case Qf.UNAVAILABLE:return L.UNAVAILABLE;case Qf.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Qf.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Qf.NOT_FOUND:return L.NOT_FOUND;case Qf.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Qf.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Qf.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Qf.ABORTED:return L.ABORTED;case Qf.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Qf.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Qf.DATA_LOSS:return L.DATA_LOSS;default:return P(39323,{code:e})}}(Q=Qf||={})[Q.OK=0]=`OK`,Q[Q.CANCELLED=1]=`CANCELLED`,Q[Q.UNKNOWN=2]=`UNKNOWN`,Q[Q.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Q[Q.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Q[Q.NOT_FOUND=5]=`NOT_FOUND`,Q[Q.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Q[Q.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Q[Q.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Q[Q.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Q[Q.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Q[Q.ABORTED=10]=`ABORTED`,Q[Q.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Q[Q.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Q[Q.INTERNAL=13]=`INTERNAL`,Q[Q.UNAVAILABLE=14]=`UNAVAILABLE`,Q[Q.DATA_LOSS=15]=`DATA_LOSS`;var tp=null;function np(){return new TextEncoder}var rp=new ps([4294967295,4294967295],0);function ip(e){let t=np().encode(e),n=new ms;return n.update(t),new Uint8Array(n.digest())}function ap(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ps([n,r],0),new ps([i,a],0)]}var op=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sp(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new sp(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new sp(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ps.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ps.fromNumber(n)));return r.compare(rp)===1&&(r=new ps([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=ap(ip(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=ap(ip(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.Se(r)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},sp=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},cp=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,lp.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(V.min(),i,new uu(z),rf(),Z())}},lp=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,Z(),Z(),Z())}},up=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},dp=class{constructor(e,t){this.targetId=e,this.Ce=t}},fp=class{constructor(e,t,n=vu.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},pp=class{constructor(){this.ve=0,this.Fe=gp(),this.Me=vu.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Z(),t=Z(),n=Z();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}})),new lp(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=gp()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,F(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},mp=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=rf(),this.Je=hp(),this.He=hp(),this.Ye=new uu(z)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(X(i))if(n===0){let e=new B(i.path);this.et(t,e,ld.newNoDocument(e,V.min()))}else F(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}tp?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Su(n).toUint8Array()}catch(e){if(e instanceof _u)return Ms(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new op(a,r,i)}catch(e){return Ms(e instanceof sp?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&X(i.target)){let t=new B(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ld.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=Z();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new cp(e,t,this.Ye,this.je,n);return this.je=rf(),this.Je=hp(),this.He=hp(),this.Ye=new uu(z),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new pp,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new pu(z),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new pu(z),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||N(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pp),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function hp(){return new uu(B.comparator)}function gp(){return new uu(B.comparator)}var _p=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),vp=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),yp=(()=>({and:`AND`,or:`OR`}))(),bp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function xp(e,t){return e.useProto3Json||Uc(t)?t:{value:t}}function Sp(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Cp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wp(e,t){return Sp(e,t.toTimestamp())}function Tp(e){return F(!!e,49232),V.fromTimestamp(function(e){let t=bu(e);return new pc(t.seconds,t.nanos)}(e))}function Ep(e,t){return Dp(e,t).canonicalString()}function Dp(e,t){let n=function(e){return new $s([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function Op(e){let t=$s.fromString(e);return F($p(t),10190,{key:t.toString()}),t}function kp(e,t){return Ep(e.databaseId,t.path)}function Ap(e,t){let n=Op(t);if(n.get(1)!==e.databaseId.projectId)throw new R(L.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new R(L.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new B(Pp(n))}function jp(e,t){return Ep(e.databaseId,t)}function Mp(e){let t=Op(e);return t.length===4?$s.emptyPath():Pp(t)}function Np(e){return new $s([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function Pp(e){return F(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function Fp(e,t,n){return{name:kp(e,t),fields:n.value.mapValue.fields}}function Ip(e,t,n){let r=Ap(e,t.name),i=Tp(t.updateTime),a=t.createTime?Tp(t.createTime):V.min(),o=new sd({mapValue:{fields:t.fields}}),s=ld.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Lp(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:P(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(F(t===void 0||typeof t==`string`,58123),vu.fromBase64String(t||``)):(F(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),vu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new fp(r,i,a,o&&function(e){return new R(e.code===void 0?L.UNKNOWN:ep(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ap(e,r.document.name),a=Tp(r.document.updateTime),o=r.document.createTime?Tp(r.document.createTime):V.min(),s=new sd({mapValue:{fields:r.document.fields}}),c=ld.newFoundDocument(i,a,o,s);n=new up(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=Ap(e,r.document),a=r.readTime?Tp(r.readTime):V.min(),o=ld.newNoDocument(i,a);n=new up([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=Ap(e,r.document);n=new up([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return P(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new Zf(r,i),o=e.targetId;n=new dp(o,a)}}return n}function Rp(e,t){let n;if(t instanceof Vf)n={update:Fp(e,t.key,t.value)};else if(t instanceof Kf)n={delete:kp(e,t.key)};else if(t instanceof Hf)n={update:Fp(e,t.key,t.data),updateMask:Qp(t.fieldMask)};else{if(!(t instanceof qf))return P(16599,{Vt:t.type});n={verify:kp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof Cf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Df)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw P(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?P(27497):{exists:t.exists}:{updateTime:wp(e,t.updateTime)}}(e,t.precondition)),n}function zp(e,t){let n=t.currentDocument?function(e){return e.updateTime===void 0?e.exists===void 0?Nf.none():Nf.exists(e.exists):Nf.updateTime(Tp(e.updateTime))}(t.currentDocument):Nf.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;return`setToServerValue`in t?(F(t.setToServerValue===`REQUEST_TIME`,16630,{proto:t}),n=new Sf):`appendMissingElements`in t?n=new Cf(t.appendMissingElements.values||[]):`removeAllFromArray`in t?n=new Tf(t.removeAllFromArray.values||[]):`increment`in t?n=new Df(e,t.increment):P(16584,{proto:t}),new Af(tc.fromServerFormat(t.fieldPath),n)}(e,t))):[];if(t.update){t.update.name;let i=Ap(e,t.update.name),a=new sd({mapValue:{fields:t.update.fields}});return t.updateMask?new Hf(i,a,function(e){return new gu((e.fieldPaths||[]).map((e=>tc.fromServerFormat(e))))}(t.updateMask),n,r):new Vf(i,a,n,r)}return t.delete?new Kf(Ap(e,t.delete),n):t.verify?new qf(Ap(e,t.verify),n):P(1463,{proto:t})}function Bp(e,t){return e&&e.length>0?(F(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?Tp(e.updateTime):Tp(t);return n.isEqual(V.min())&&(n=Tp(t)),new Mf(n,e.transformResults||[])}(e,t)))):[]}function Vp(e,t){return{documents:[jp(e,t.path)]}}function Hp(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=jp(e,i);let a=function(e){if(e.length!==0)return Zp(gd.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:Yp(e.field),direction:Kp(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=xp(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Up(e){let t=Mp(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){F(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Gp(e);return t instanceof gd&&yd(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new pd(Xp(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Uc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new ud(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new ud(e.values||[],t)}(n.endAt)),Bd(t,i,o,a,s,`F`,c,l)}function Wp(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return P(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Gp(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?P(30097,{filter:e}):function(e){return gd.create(e.compositeFilter.filters.map((e=>Gp(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return P(1026)}}(e.compositeFilter.op))}(e):function(e){return J.create(Xp(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Xp(e.unaryFilter.field);return J.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Xp(e.unaryFilter.field);return J.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Xp(e.unaryFilter.field);return J.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Xp(e.unaryFilter.field);return J.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return P(61313);default:return P(60726)}}(e)}function Kp(e){return _p[e]}function qp(e){return vp[e]}function Jp(e){return yp[e]}function Yp(e){return{fieldPath:e.canonicalString()}}function Xp(e){return tc.fromServerFormat(e.fieldPath)}function Zp(e){return e instanceof J?function(e){if(e.op===`==`){if(Zu(e.value))return{unaryFilter:{field:Yp(e.field),op:`IS_NAN`}};if(Xu(e.value))return{unaryFilter:{field:Yp(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Zu(e.value))return{unaryFilter:{field:Yp(e.field),op:`IS_NOT_NAN`}};if(Xu(e.value))return{unaryFilter:{field:Yp(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:Yp(e.field),op:qp(e.op),value:e.value}}}(e):e instanceof gd?function(e){let t=e.getFilters().map((e=>Zp(e)));return t.length===1?t[0]:{compositeFilter:{op:Jp(e.op),filters:t}}}(e):P(54877,{filter:e})}function Qp(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function $p(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var em=class e{constructor(e,t,n,r,i=V.min(),a=V.min(),o=vu.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},tm=class{constructor(e){this.yt=e}};function nm(e,t){let n;if(t.document)n=Ip(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=B.fromSegments(t.noDocument.path),r=om(t.noDocument.readTime);n=ld.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return P(56709);{let e=B.fromSegments(t.unknownDocument.path),r=om(t.unknownDocument.version);n=ld.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){let t=new pc(e[0],e[1]);return V.fromTimestamp(t)}(t.readTime)),n}function rm(e,t){let n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:im(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:kp(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sp(e,t.version.toTimestamp()),createTime:Sp(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:am(t.version)};else{if(!t.isUnknownDocument())return P(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:am(t.version)}}return r}function im(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function am(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function om(e){let t=new pc(e.seconds,e.nanoseconds);return V.fromTimestamp(t)}function sm(e,t){let n=(t.baseMutations||[]).map((t=>zp(e.yt,t)));for(let e=0;e<t.mutations.length-1;++e){let n=t.mutations[e];e+1<t.mutations.length&&t.mutations[e+1].transform!==void 0&&(n.updateTransforms=t.mutations[e+1].transform.fieldTransforms,t.mutations.splice(e+1,1),++e)}let r=t.mutations.map((t=>zp(e.yt,t))),i=pc.fromMillis(t.localWriteTimeMs);return new Jf(t.batchId,i,n,r)}function cm(e){let t=om(e.readTime),n=e.lastLimboFreeSnapshotVersion===void 0?V.min():om(e.lastLimboFreeSnapshotVersion),r;return r=function(e){return e.documents!==void 0}(e.query)?function(e){let t=e.documents.length;return F(t===1,1966,{count:t}),Gd(Vd(Mp(e.documents[0])))}(e.query):function(e){return Gd(Up(e))}(e.query),new em(r,e.targetId,`TargetPurposeListen`,e.lastListenSequenceNumber,t,n,vu.fromBase64String(e.resumeToken))}function lm(e,t){let n=am(t.snapshotVersion),r=am(t.lastLimboFreeSnapshotVersion),i;i=X(t.target)?Vp(e.yt,t.target):Hp(e.yt,t.target).ft;let a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pd(t.target),readTime:n,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function um(e){let t=Up({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?qd(t,t.limit,`L`):t}function dm(e,t){return new Xf(t.largestBatchId,zp(e.yt,t.overlayMutation))}function fm(e,t){let n=t.path.lastSegment();return[e,qc(t.path.popLast()),n]}function pm(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:am(r.readTime),documentKey:qc(r.documentKey.path),largestBatchId:r.largestBatchId}}var mm=class{getBundleMetadata(e,t){return hm(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:om(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return hm(e).put(function(e){return{bundleId:e.id,createTime:am(Tp(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return gm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:um(e.bundledQuery),readTime:om(e.readTime)}}(e)}))}saveNamedQuery(e,t){return gm(e).put(function(e){return{name:e.name,readTime:am(Tp(e.readTime)),bundledQuery:e.bundledQuery}}(t))}};function hm(e){return ou(e,jl)}function gm(e){return ou(e,Nl)}var _m=class e{constructor(e,t){this.serializer=e,this.userId=t}static wt(t,n){return new e(t,n.uid||``)}getOverlay(e,t){return vm(e).get(fm(this.userId,t)).next((e=>e?dm(this.serializer,e):null))}getOverlays(e,t){let n=cf();return H.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){let r=[];return n.forEach(((n,i)=>{let a=new Xf(t,i);r.push(this.St(e,a))})),H.waitFor(r)}removeOverlaysForBatchId(e,t,n){let r=new Set;t.forEach((e=>r.add(qc(e.getCollectionPath()))));let i=[];return r.forEach((t=>{let r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(vm(e).Z(Gl,r))})),H.waitFor(i)}getOverlaysForCollection(e,t,n){let r=cf(),i=qc(t),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,1/0],!0);return vm(e).J(Gl,a).next((e=>{for(let t of e){let e=dm(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){let i=cf(),a,o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,1/0],!0);return vm(e).ee({index:ql,range:o},((e,t,n)=>{let o=dm(this.serializer,t);i.size()<r||o.largestBatchId===a?(i.set(o.getKey(),o),a=o.largestBatchId):n.done()})).next((()=>i))}St(e,t){return vm(e).put(function(e,t,n){let[r,i,a]=fm(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:a,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Rp(e.yt,n.mutation)}}(this.serializer,this.userId,t))}};function vm(e){return ou(e,Ul)}var ym=class{bt(e){return ou(e,Yl)}getSessionToken(e){return this.bt(e).get(`sessionToken`).next((e=>{let t=e?.value;return t?vu.fromUint8Array(t):vu.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:`sessionToken`,value:t.toUint8Array()})}},bm=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(xu(e.integerValue));else if(`doubleValue`in e){let n=xu(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Wc(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=bu(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Su(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?td(e)?this.Ft(t,2**53-1):$u(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):P(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=Lu,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(xu(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),B.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};bm.Kt=new bm;var xm=255;function Sm(e){if(e===0)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Cm(e){let t=64-function(e){let t=0;for(let n=0;n<8;++n){let r=Sm(255&e[n]);if(t+=r,r!==8)break}return t}(e);return Math.ceil(t/8)}var wm=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<`\ud800`||`\udbff`<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{let e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<`\ud800`||`\udbff`<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{let e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){let t=this.en(e),n=Cm(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}nn(e){let t=this.en(e),n=Cm(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}rn(){this.sn(xm),this.sn(255)}_n(){this.an(xm),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let t=function(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Gt(e){let t=255&e;t===0?(this.sn(0),this.sn(255)):t===xm?(this.sn(xm),this.sn(0)):this.sn(t)}Jt(e){let t=255&e;t===0?(this.an(0),this.an(255)):t===xm?(this.an(xm),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},Tm=class{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}},Em=class{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}},Dm=class{constructor(){this.cn=new wm,this.ln=new Tm(this.cn),this.hn=new Em(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}},Om=class e{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){let t=this.dn.length,n=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.dn,0),n===t?++r[r.length-1]:r.set([0],this.dn.length),new e(this.Tn,this.In,this.En,r)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:jm(this.En),directionalValue:jm(this.dn),orderedDocumentKey:jm(t),documentKey:n.path.toArray()}}Vn(e,t,n){let r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}};function km(e,t){let n=e.Tn-t.Tn;return n===0?(n=Am(e.En,t.En),n===0?(n=Am(e.dn,t.dn),n===0?B.comparator(e.In,t.In):n):n):n}function Am(e,t){for(let n=0;n<e.length&&n<t.length;++n){let r=e[n]-t[n];if(r!==0)return r}return e.length-t.length}function jm(e){return _e()?function(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Mm(e){return typeof e==`string`?function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e):e}var Nm=class{constructor(e){this.mn=new pu(((e,t)=>tc.comparator(e.field,t.field))),this.collectionId=e.collectionGroup==null?e.path.lastSegment():e.collectionGroup,this.fn=e.orderBy,this.gn=[];for(let t of e.filters){let e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(F(e.collectionGroup===this.collectionId,49279),this.pn)return!1;let t=gc(e);if(t!==void 0&&!this.wn(t))return!1;let n=_c(e),r=new Set,i=0,a=0;for(;i<n.length&&this.wn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){let e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){let t=n[i];if(!this.Sn(e,t)||!this.bn(this.fn[a++],t))return!1}++i}for(;i<n.length;++i){let e=n[i];if(a>=this.fn.length||!this.bn(this.fn[a++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new pu(tc.comparator),t=[];for(let n of this.gn)if(!n.field.isKeyField())if(n.op===`array-contains`||n.op===`array-contains-any`)t.push(new vc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new vc(n.field,0))}for(let n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new vc(n.field,n.dir===`asc`?0:1)));return new hc(hc.UNKNOWN_ID,this.collectionId,t,yc.empty())}wn(e){for(let t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let n=e.op===`array-contains`||e.op===`array-contains-any`;return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir===`asc`||t.kind===1&&e.dir===`desc`)}};function Pm(e){if(F(e instanceof J||e instanceof gd,20012),e instanceof J){if(e instanceof kd){let t=e.value.arrayValue?.values?.map((t=>J.create(e.field,`==`,t)))||[];return gd.create(t,`or`)}return e}let t=e.filters.map((e=>Pm(e)));return gd.create(t,e.op)}function Fm(e){if(e.getFilters().length===0)return[];let t=zm(Pm(e));return F(Rm(t),7391),Im(t)||Lm(t)?[t]:t.getFilters()}function Im(e){return e instanceof J}function Lm(e){return e instanceof gd&&yd(e)}function Rm(e){return Im(e)||Lm(e)||function(e){if(e instanceof gd&&vd(e)){for(let t of e.getFilters())if(!Im(t)&&!Lm(t))return!1;return!0}return!1}(e)}function zm(e){if(F(e instanceof J||e instanceof gd,34018),e instanceof J)return e;if(e.filters.length===1)return zm(e.filters[0]);let t=e.filters.map((e=>zm(e))),n=gd.create(t,e.op);return n=Hm(n),Rm(n)?n:(F(n instanceof gd,64498),F(_d(n),40251),F(n.filters.length>1,57927),n.filters.reduce(((e,t)=>Bm(e,t))))}function Bm(e,t){let n;return F(e instanceof J||e instanceof gd,38388),F(t instanceof J||t instanceof gd,25473),n=e instanceof J?t instanceof J?function(e,t){return gd.create([e,t],`and`)}(e,t):Vm(e,t):t instanceof J?Vm(t,e):function(e,t){if(F(e.filters.length>0&&t.filters.length>0,48005),_d(e)&&_d(t))return Y(e,t.getFilters());let n=vd(e)?e:t,r=vd(e)?t:e,i=n.filters.map((e=>Bm(e,r)));return gd.create(i,`or`)}(e,t),Hm(n)}function Vm(e,t){if(_d(t))return Y(t,e.getFilters());{let n=t.filters.map((t=>Bm(e,t)));return gd.create(n,`or`)}}function Hm(e){if(F(e instanceof J||e instanceof gd,11850),e instanceof J)return e;let t=e.getFilters();if(t.length===1)return Hm(t[0]);if(bd(e))return e;let n=t.map((e=>Hm(e))),r=[];return n.forEach((t=>{t instanceof J?r.push(t):t instanceof gd&&(t.op===e.op?r.push(...t.filters):r.push(t))})),r.length===1?r[0]:gd.create(r,e.op)}var Um=class{constructor(){this.Cn=new Wm}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Sc.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Sc.min())}updateCollectionGroup(e,t,n){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},Wm=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pu($s.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new pu($s.comparator)).toArray()}},Gm=`IndexedDbIndexManager`,Km=new Uint8Array,qm=class{constructor(e,t){this.databaseId=t,this.vn=new Wm,this.Fn=new tf((e=>Pd(e)),((e,t)=>Fd(e,t))),this.uid=e.uid||``}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));let i={collectionId:n,parent:qc(r)};return Jm(e).put(i)}return H.resolve()}getCollectionParents(e,t){let n=[],r=IDBKeyRange.bound([t,``],[Xs(t),``],!1,!0);return Jm(e).J(r).next((e=>{for(let r of e){if(r.collectionId!==t)break;n.push(Xc(r.parent))}return n}))}addFieldIndex(e,t){let n=Xm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;let i=n.add(r);if(t.indexState){let n=Zm(e);return i.next((e=>{n.put(pm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){let n=Xm(e),r=Zm(e),i=Ym(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){let t=Xm(e),n=Ym(e),r=Zm(e);return t.Z().next((()=>n.Z())).next((()=>r.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(t=>this.getIndexType(e,t).next((n=>{if(n===0||n===1){let n=new Nm(t).Dn();if(n!=null)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){let n=Ym(e),r=!0,i=new Map;return H.forEach(this.Mn(t),(t=>this.xn(e,t).next((e=>{r&&=!!e,i.set(t,e)})))).next((()=>{if(r){let e=Z(),r=[];return H.forEach(i,((i,a)=>{N(Gm,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(`,`)}`}(i)} to execute ${Pd(t)}`);let o=function(e,t){let n=gc(t);if(n===void 0)return null;for(let t of Id(e,n.fieldPath))switch(t.op){case`array-contains-any`:return t.value.arrayValue.values||[];case`array-contains`:return[t.value]}return null}(a,i),s=function(e,t){let n=new Map;for(let r of _c(t))for(let t of Id(e,r.fieldPath))switch(t.op){case`==`:case`in`:n.set(r.fieldPath.canonicalString(),t.value);break;case`not-in`:case`!=`:return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(a,i),c=function(e,t){let n=[],r=!0;for(let i of _c(t)){let t=i.kind===0?Ld(e,i.fieldPath,e.startAt):Rd(e,i.fieldPath,e.startAt);n.push(t.value),r&&=t.inclusive}return new ud(n,r)}(a,i),l=function(e,t){let n=[],r=!0;for(let i of _c(t)){let t=i.kind===0?Rd(e,i.fieldPath,e.endAt):Ld(e,i.fieldPath,e.endAt);n.push(t.value),r&&=t.inclusive}return new ud(n,r)}(a,i),u=this.On(i,a,c),d=this.On(i,a,l),f=this.Nn(i,a,s),p=this.Bn(i.indexId,o,u,c.inclusive,d,l.inclusive,f);return H.forEach(p,(i=>n.Y(i,t.limit).next((t=>{t.forEach((t=>{let n=B.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(t=e.filters.length===0?[e]:Fm(gd.create(e.filters,`and`)).map((t=>Nd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,r,i,a,o){let s=(t==null?1:t.length)*Math.max(n.length,i.length),c=s/(t==null?1:t.length),l=[];for(let u=0;u<s;++u){let s=t?this.Ln(t[u/c]):Km,d=this.kn(e,s,n[u%c],r),f=this.qn(e,s,i[u%c],a),p=o.map((t=>this.kn(e,s,t,!0)));l.push(...this.createRange(d,f,p))}return l}kn(e,t,n,r){let i=new Om(e,B.empty(),t,n);return r?i:i.An()}qn(e,t,n,r){let i=new Om(e,B.empty(),t,n);return r?i.An():i}xn(e,t){let n=new Nm(t),r=t.collectionGroup==null?t.path.lastSegment():t.collectionGroup;return this.getFieldIndexes(e,r).next((e=>{let t=null;for(let r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2,r=this.Mn(t);return H.forEach(r,(t=>this.xn(e,t).next((e=>{e?n!==0&&e.fields.length<function(e){let t=new pu(tc.comparator),n=!1;for(let r of e.filters)for(let e of r.getFlattenedFilters())e.field.isKeyField()||(e.op===`array-contains`||e.op===`array-contains-any`?n=!0:t=t.add(e.field));for(let n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return e.limit!==null}(t)&&r.length>1&&n===2?1:n))}Qn(e,t){let n=new Dm;for(let r of _c(e)){let e=t.data.field(r.fieldPath);if(e==null)return null;let i=n.Pn(r.kind);bm.Kt.Dt(e,i)}return n.un()}Ln(e){let t=new Dm;return bm.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){let n=new Dm;return bm.Kt.Dt(Ju(this.databaseId,t),n.Pn(function(e){let t=_c(e);return t.length===0?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(n===null)return[];let r=[];r.push(new Dm);let i=0;for(let a of _c(e)){let e=n[i++];for(let n of r)if(this.Un(t,a.fieldPath)&&Yu(e))r=this.Kn(r,a,e);else{let t=n.Pn(a.kind);bm.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){let t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){let r=[...e],i=[];for(let e of n.arrayValue.values||[])for(let n of r){let r=new Dm;r.seed(n.un()),bm.Kt.Dt(e,r.Pn(t.kind)),i.push(r)}return i}Un(e,t){return!!e.filters.find((e=>e instanceof J&&e.field.isEqual(t)&&(e.op===`in`||e.op===`not-in`)))}getFieldIndexes(e,t){let n=Xm(e),r=Zm(e);return(t?n.J(Ll,IDBKeyRange.bound(t,t)):n.J()).next((e=>{let t=[];return H.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){let n=t?new yc(t.sequenceNumber,new Sc(om(t.readTime),new B(Xc(t.documentKey)),t.largestBatchId)):yc.empty(),r=e.fields.map((([e,t])=>new vc(tc.fromServerFormat(e),t)));return new hc(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>e.length===0?null:(e.sort(((e,t)=>{let n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return n===0?z(e.collectionGroup,t.collectionGroup):n})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){let r=Xm(e),i=Zm(e);return this.Gn(e).next((e=>r.J(Ll,IDBKeyRange.bound(t,t)).next((t=>H.forEach(t,(t=>i.put(pm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){let n=new Map;return H.forEach(t,((t,r)=>{let i=n.get(t.collectionGroup);return(i?H.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),H.forEach(i,(n=>this.zn(e,t,n).next((t=>{let i=this.jn(r,n);return t.isEqual(i)?H.resolve():this.Jn(e,r,n,t,i)})))))))}))}Hn(e,t,n,r){return Ym(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return Ym(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){let r=Ym(e),i=new pu(km);return r.ee({index:K,range:IDBKeyRange.only([n.indexId,this.uid,jm(this.$n(n,t))])},((e,r)=>{i=i.add(new Om(n.indexId,t,Mm(r.arrayValue),Mm(r.directionalValue)))})).next((()=>i))}jn(e,t){let n=new pu(km),r=this.Qn(t,e);if(r==null)return n;let i=gc(t);if(i!=null){let a=e.data.field(i.fieldPath);if(Yu(a))for(let i of a.arrayValue.values||[])n=n.add(new Om(t.indexId,e.key,this.Ln(i),r))}else n=n.add(new Om(t.indexId,e.key,Km,r));return n}Jn(e,t,n,r,i){N(Gm,`Updating index entries for document '%s'`,t.key);let a=[];return function(e,t,n,r,i){let a=e.getIterator(),o=t.getIterator(),s=hu(a),c=hu(o);for(;s||c;){let e=!1,t=!1;if(s&&c){let r=n(s,c);r<0?t=!0:r>0&&(e=!0)}else s==null?e=!0:t=!0;e?(r(c),c=hu(o)):t?(i(s),s=hu(a)):(s=hu(a),c=hu(o))}}(r,i,km,(r=>{a.push(this.Hn(e,t,n,r))}),(r=>{a.push(this.Yn(e,t,n,r))})),H.waitFor(a)}Gn(e){let t=1;return Zm(e).ee({index:Vl,reverse:!0,range:IDBKeyRange.upperBound([this.uid,2**53-1])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>km(e,t))).filter(((e,t,n)=>!t||km(e,n[t-1])!==0));let r=[];r.push(e);for(let i of n){let n=km(i,e),a=km(i,t);if(n===0)r[0]=e.An();else if(n>0&&a<0)r.push(i),r.push(i.An());else if(a>0)break}r.push(t);let i=[];for(let e=0;e<r.length;e+=2){if(this.Zn(r[e],r[e+1]))return[];let t=r[e].Vn(this.uid,Km,B.empty()),n=r[e+1].Vn(this.uid,Km,B.empty());i.push(IDBKeyRange.bound(t,n))}return i}Zn(e,t){return km(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qm)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(t=>this.xn(e,t).next((e=>e||P(44426))))).next(Qm)}};function Jm(e){return ou(e,Dl)}function Ym(e){return ou(e,W)}function Xm(e){return ou(e,Fl)}function Zm(e){return ou(e,zl)}function Qm(e){F(e.length!==0,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){let i=e[r].indexState.offset;Cc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Sc(t.readTime,t.documentKey,n)}var $m={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eh=41943040,th=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};function nh(e,t,n){let r=e.store(nl),i=e.store(ll),a=[],o=IDBKeyRange.only(n.batchId),s=0,c=r.ee({range:o},((e,t,n)=>(s++,n.delete())));a.push(c.next((()=>{F(s===1,47070,{batchId:n.batchId})})));let l=[];for(let e of n.mutations){let r=sl(t,e.key.path,n.batchId);a.push(i.delete(r)),l.push(e.key)}return H.waitFor(a).next((()=>l))}function rh(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw P(14731);t=e.noDocument}return JSON.stringify(t).length}th.DEFAULT_COLLECTION_PERCENTILE=10,th.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,th.DEFAULT=new th(eh,th.DEFAULT_COLLECTION_PERCENTILE,th.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),th.DISABLED=new th(-1,0,0);var ih=class e{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(t,n,r,i){return F(t.uid!==``,64387),new e(t.isAuthenticated()?t.uid:``,n,r,i)}checkEmpty(e){let t=!0,n=IDBKeyRange.bound([this.userId,-1/0],[this.userId,1/0]);return oh(e).ee({index:il,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){let i=sh(e),a=oh(e);return a.add({}).next((o=>{F(typeof o==`number`,49019);let s=new Jf(o,t,n,r),c=function(e,t,n){let r=n.baseMutations.map((t=>Rp(e.yt,t))),i=n.mutations.map((t=>Rp(e.yt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,s),l=[],u=new pu(((e,t)=>z(e.canonicalString(),t.canonicalString())));for(let e of r){let t=sl(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(a.put(c)),l.push(i.put(t,cl))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Xn[o]=s.keys()})),H.waitFor(l).next((()=>s))}))}lookupMutationBatch(e,t){return oh(e).get(t).next((e=>e?(F(e.userId===this.userId,48,`Unexpected user for mutation batch`,{userId:e.userId,batchId:t}),sm(this.serializer,e)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){let n=e.keys();return this.Xn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]),i=null;return oh(e).ee({index:il,range:r},((e,t,r)=>{t.userId===this.userId&&(F(t.batchId>=n,47524,{tr:n}),i=sm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,1/0]),n=Hc;return oh(e).ee({index:il,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Hc],[this.userId,1/0]);return oh(e).J(il,t).next((e=>e.map((e=>sm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){let n=ol(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return sh(e).ee({range:r},((n,r,a)=>{let[o,s,c]=n,l=Xc(s);if(o===this.userId&&t.path.isEqual(l))return oh(e).get(c).next((e=>{if(!e)throw P(61480,{nr:n,batchId:c});F(e.userId===this.userId,10503,`Unexpected user for mutation batch`,{userId:e.userId,batchId:c}),i.push(sm(this.serializer,e))}));a.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pu(z),r=[];return t.forEach((t=>{let i=ol(this.userId,t.path),a=IDBKeyRange.lowerBound(i),o=sh(e).ee({range:a},((e,r,i)=>{let[a,o,s]=e,c=Xc(o);a===this.userId&&t.path.isEqual(c)?n=n.add(s):i.done()}));r.push(o)})),H.waitFor(r).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=ol(this.userId,n),a=IDBKeyRange.lowerBound(i),o=new pu(z);return sh(e).ee({range:a},((e,t,i)=>{let[a,s,c]=e,l=Xc(s);a===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.rr(e,o)))}rr(e,t){let n=[],r=[];return t.forEach((t=>{r.push(oh(e).get(t).next((e=>{if(e===null)throw P(35274,{batchId:t});F(e.userId===this.userId,9748,`Unexpected user for mutation batch`,{userId:e.userId,batchId:t}),n.push(sm(this.serializer,e))})))})),H.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return nh(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();let n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return sh(e).ee({range:n},((e,t,n)=>{if(e[0]===this.userId){let t=Xc(e[1]);r.push(t)}else n.done()})).next((()=>{F(r.length===0,56720,{sr:r.map((e=>e.canonicalString()))})}))}))}containsKey(e,t){return ah(e,this.userId,t)}_r(e){return ch(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Hc,lastStreamToken:``}))}};function ah(e,t,n){let r=ol(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return sh(e).ee({range:a,X:!0},((e,n,r)=>{let[a,s,c]=e;a===t&&s===i&&(o=!0),r.done()})).next((()=>o))}function oh(e){return ou(e,nl)}function sh(e){return ou(e,ll)}function ch(e){return ou(e,el)}var lh=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},uh=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>(t.highestTargetId=new lh(t.highestTargetId).next(),this.hr(e,t).next((()=>t.highestTargetId)))))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((e=>V.fromTimestamp(new pc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>dh(e).delete(t.targetId))).next((()=>this.lr(e))).next((t=>(F(t.targetCount>0,8065),--t.targetCount,this.hr(e,t))))}removeTargets(e,t,n){let r=0,i=[];return dh(e).ee(((a,o)=>{let s=cm(o);s.sequenceNumber<=t&&n.get(s.targetId)===null&&(r++,i.push(this.removeTargetData(e,s)))})).next((()=>H.waitFor(i))).next((()=>r))}forEachTarget(e,t){return dh(e).ee(((e,n)=>{t(cm(n))}))}lr(e){return fh(e).get(Tl).next((e=>(F(e!==null,2888),e)))}hr(e,t){return fh(e).put(Tl,t)}Pr(e,t){return dh(e).put(lm(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((e=>e.targetCount))}getTargetData(e,t){let n=Pd(t),r=IDBKeyRange.bound([n,-1/0],[n,1/0]),i=null;return dh(e).ee({range:r,index:yl},((e,n,r)=>{let a=cm(n);Fd(t,a.target)&&(i=a,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){let r=[],i=ph(e);return t.forEach((t=>{let a=qc(t.path);r.push(i.put({targetId:n,path:a})),r.push(this.referenceDelegate.addReference(e,n,t))})),H.waitFor(r)}removeMatchingKeys(e,t,n){let r=ph(e);return H.forEach(t,(t=>{let i=qc(t.path);return H.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){let n=ph(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){let n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ph(e),i=Z();return r.ee({range:n,X:!0},((e,t,n)=>{let r=new B(Xc(e[1]));i=i.add(r)})).next((()=>i))}containsKey(e,t){let n=qc(t.path),r=IDBKeyRange.bound([n],[Xs(n)],!1,!0),i=0;return ph(e).ee({index:Cl,X:!0,range:r},(([e,t],n,r)=>{e!==0&&(i++,r.done())})).next((()=>i>0))}At(e,t){return dh(e).get(t).next((e=>e?cm(e):null))}};function dh(e){return ou(e,vl)}function fh(e){return ou(e,El)}function ph(e){return ou(e,xl)}var mh=`LruGarbageCollector`,hh=1048576;function gh([e,t],[n,r]){let i=z(e,n);return i===0?z(t,r):i}var _h=class{constructor(e){this.Ir=e,this.buffer=new pu(gh),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();gh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},vh=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){N(mh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Nc(e)?N(mh,`Ignoring IndexedDB error during garbage collection: `,e):await Ec(e)}await this.Vr(3e5)}))}},yh=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Vc.ce);let n=new _h(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(N(`LruGarbageCollector`,`Garbage collection skipped; disabled`),H.resolve($m)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(N(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$m):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(N(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),As()<=E.DEBUG&&N(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function bh(e,t){return new yh(e,t)}var xh=class{constructor(e,t){this.db=e,this.garbageCollector=bh(this,t)}gr(e){let t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((e,n)=>t(n)))}addReference(e,t,n){return Sh(e,n)}removeReference(e,t,n){return Sh(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Sh(e,t)}br(e,t){return function(e,t){let n=!1;return ch(e).te((r=>ah(e,r,t).next((e=>(e&&(n=!0),H.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],i=0;return this.Sr(e,((a,o)=>{if(o<=t){let t=this.br(e,a).next((t=>{if(!t)return i++,n.getEntry(e,a).next((()=>(n.removeEntry(a,V.min()),ph(e).delete(function(e){return[0,qc(e.path)]}(a)))))}));r.push(t)}})).next((()=>H.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Sh(e,t)}Sr(e,t){let n=ph(e),r,i=Vc.ce;return n.ee({index:Cl},(([e,n],{path:a,sequenceNumber:o})=>{e===0?(i!==Vc.ce&&t(new B(Xc(r)),i),i=o,r=a):i=Vc.ce})).next((()=>{i!==Vc.ce&&t(new B(Xc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Sh(e,t){return ph(e).put(function(e,t){return{targetId:0,path:qc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ch=class{constructor(){this.changes=new tf((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ld.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):H.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},wh=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Oh(e).put(n)}removeEntry(e,t,n){return Oh(e).delete(function(e,t){let n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],im(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=ld.newInvalidDocument(t);return Oh(e).ee({index:fl,range:IDBKeyRange.only(kh(t))},((e,r)=>{n=this.Cr(t,r)})).next((()=>n))}vr(e,t){let n={size:0,document:ld.newInvalidDocument(t)};return Oh(e).ee({index:fl,range:IDBKeyRange.only(kh(t))},((e,r)=>{n={document:this.Cr(t,r),size:rh(r)}})).next((()=>n))}getEntries(e,t){let n=rf();return this.Fr(e,t,((e,t)=>{let r=this.Cr(e,t);n=n.insert(e,r)})).next((()=>n))}Mr(e,t){let n=rf(),r=new uu(B.comparator);return this.Fr(e,t,((e,t)=>{let i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,rh(t))})).next((()=>({documents:n,Or:r})))}Fr(e,t,n){if(t.isEmpty())return H.resolve();let r=new pu(jh);t.forEach((e=>r=r.add(e)));let i=IDBKeyRange.bound(kh(r.first()),kh(r.last())),a=r.getIterator(),o=a.getNext();return Oh(e).ee({index:fl,range:i},((e,t,r)=>{let i=B.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&jh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(kh(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){let a=t.path,o=[a.popLast().toArray(),a.lastSegment(),im(n.readTime),n.documentKey.path.isEmpty()?``:n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[2**53-1,2**53-1],``];return Oh(e).J(IDBKeyRange.bound(o,s,!0)).next((e=>{i?.incrementDocumentReadCount(e.length);let n=rf();for(let i of e){let e=this.Cr(B.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Zd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=rf(),a=Ah(t,n),o=Ah(t,Sc.max());return Oh(e).ee({index:ml,range:IDBKeyRange.bound(a,o,!0)},((e,t,n)=>{let a=this.Cr(B.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(a.key,a),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Eh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Dh(e).get(_l).next((e=>(F(!!e,20021),e)))}Dr(e,t){return Dh(e).put(_l,t)}Cr(e,t){if(t){let e=nm(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(V.min())))return e}return ld.newInvalidDocument(e)}};function Th(e){return new wh(e)}var Eh=class extends Ch{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new tf((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){let t=[],n=0,r=new pu(((e,t)=>z(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,a)=>{let o=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,o.readTime)),a.isValidDocument()){let s=rm(this.Nr.serializer,a);r=r.add(i.path.popLast());let c=rh(s);n+=c-o.size,t.push(this.Nr.addEntry(e,i,s))}else if(n-=o.size,this.trackRemovals){let n=rm(this.Nr.serializer,a.convertToNoDocument(V.min()));t.push(this.Nr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Nr.updateMetadata(e,n)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:e,Or:t})=>(t.forEach(((t,n)=>{this.Br.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}};function Dh(e){return ou(e,gl)}function Oh(e){return ou(e,ul)}function kh(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ah(e,t){let n=t.documentKey.path.toArray();return[e,im(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:``]}function jh(e,t){let n=e.path.toArray(),r=t.path.toArray(),i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=z(n[e],r[e]),i)return i;return i=z(n.length,r.length),i||(i=z(n[n.length-2],r[r.length-2]),i||z(n[n.length-1],r[r.length-1]))}var Mh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Nh=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&Rf(n.mutation,e,gu.empty(),pc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Z()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Z()){let r=cf();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=of();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=cf();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Z())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=rf(),a=uf(),o=function(){return uf()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof Hf)?i=i.insert(t.key,t):o===void 0?a.set(t.key,gu.empty()):(a.set(t.key,o.mutation.getFieldMask()),Rf(o.mutation,t,o.mutation.getFieldMask(),pc.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Mh(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=uf(),r=new uu(((e,t)=>e-t)),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||gu.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||Z()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=lf();c.forEach((e=>{if(!i.has(e)){let r=If(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return H.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return B.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ud(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):H.resolve(cf()),o=mc,s=i;return a.next((t=>H.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?H.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Z()))).next((e=>({batchId:o,changes:sf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next((e=>{let t=of();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=of();return this.indexManager.getCollectionParents(e,i).next((o=>H.forEach(o,(o=>{let s=function(e,t){return new zd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,ld.newInvalidDocument(r)))}));let n=of();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&Rf(a.mutation,r,gu.empty(),pc.now()),Zd(t,r)&&(n=n.insert(e,r))})),n}))}},Ph=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Tp(e.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:um(e.bundledQuery),readTime:Tp(e.readTime)}}(t)),H.resolve()}},Fh=class{constructor(){this.overlays=new uu(B.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let n=cf();return H.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),H.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),H.resolve()}getOverlaysForCollection(e,t,n){let r=cf(),i=t.length+1,a=new B(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return H.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new uu(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=cf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=cf(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return H.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xf(t,n));let i=this.qr.get(t);i===void 0&&(i=Z(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},Ih=class{constructor(){this.sessionToken=vu.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}},Lh=class{constructor(){this.Qr=new pu(Rh.$r),this.Ur=new pu(Rh.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new Rh(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new Rh(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new B(new $s([])),n=new Rh(t,e),r=new Rh(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new B(new $s([])),n=new Rh(t,e),r=new Rh(t,e+1),i=Z();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new Rh(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Rh=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return B.comparator(e.key,t.key)||z(e.Yr,t.Yr)}static Kr(e,t){return z(e.Yr,t.Yr)||B.comparator(e.key,t.key)}},zh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new pu(Rh.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Jf(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new Rh(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Hc:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Rh(t,0),r=new Rh(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pu(z);return t.forEach((e=>{let t=new Rh(e,0),r=new Rh(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),H.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;B.isDocumentKey(i)||(i=i.child(``));let a=new Rh(new B(i),0),o=new pu(z);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),H.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){F(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return H.forEach(t.mutations,(r=>{let i=new Rh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new Rh(t,0),r=this.Zr.firstAfterOrEqual(n);return H.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},Bh=class{constructor(e){this.ri=e,this.docs=function(){return new uu(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return H.resolve(n?n.document.mutableCopy():ld.newInvalidDocument(t))}getEntries(e,t){let n=rf();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ld.newInvalidDocument(e))})),H.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=rf(),a=t.path,o=new B(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Cc(xc(o),n)<=0||(r.has(o.key)||Zd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ii(e,t){return H.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Vh(this)}getSize(e){return H.resolve(this.size)}},Vh=class extends Ch{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},Hh=class{constructor(e){this.persistence=e,this.si=new tf((e=>Pd(e)),Fd),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.oi=0,this._i=new Lh,this.targetCount=0,this.ai=lh.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new lh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,H.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),H.waitFor(i).next((()=>r))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return H.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),H.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),H.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return H.resolve(n)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}},Uh=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vc(0),this.li=!1,this.li=!0,this.hi=new Ih,this.referenceDelegate=e(this),this.Pi=new Hh(this),this.indexManager=new Um,this.remoteDocumentCache=function(e){return new Bh(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new tm(t),this.Ii=new Ph(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new zh(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){N(`MemoryPersistence`,`Starting transaction:`,e);let r=new Wh(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return H.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},Wh=class extends Tc{constructor(e){super(),this.currentSequenceNumber=e}},Gh=class e{constructor(e){this.persistence=e,this.Ri=new Lh,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),H.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(n=>{let r=B.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,V.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Kh=class e{constructor(e,t){this.persistence=e,this.pi=new tf((e=>qc(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=bh(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?H.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,V.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qu(e.data.value)),t}br(e,t,n){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return H.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},qh=class{constructor(e){this.serializer=e}k(e,t,n,r){let i=new Oc(`createOrUpgrade`,t);n<1&&r>=1&&(function(e){e.createObjectStore(Qc)}(e),function(e){e.createObjectStore(el,{keyPath:tl}),e.createObjectStore(nl,{keyPath:rl,autoIncrement:!0}).createIndex(il,al,{unique:!0}),e.createObjectStore(ll)}(e),Jh(e),function(e){e.createObjectStore(Zc)}(e));let a=H.resolve();return n<3&&r>=3&&(n!==0&&(function(e){e.deleteObjectStore(xl),e.deleteObjectStore(vl),e.deleteObjectStore(El)}(e),Jh(e)),a=a.next((()=>function(e){let t=e.store(El),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return t.put(Tl,n)}(i)))),n<4&&r>=4&&(n!==0&&(a=a.next((()=>function(e,t){return t.store(nl).J().next((n=>{e.deleteObjectStore(nl),e.createObjectStore(nl,{keyPath:rl,autoIncrement:!0}).createIndex(il,al,{unique:!0});let r=t.store(nl),i=n.map((e=>r.put(e)));return H.waitFor(i)}))}(e,i)))),a=a.next((()=>{(function(e){e.createObjectStore(kl,{keyPath:Al})})(e)}))),n<5&&r>=5&&(a=a.next((()=>this.yi(i)))),n<6&&r>=6&&(a=a.next((()=>(function(e){e.createObjectStore(gl)}(e),this.wi(i))))),n<7&&r>=7&&(a=a.next((()=>this.Si(i)))),n<8&&r>=8&&(a=a.next((()=>this.bi(e,i)))),n<9&&r>=9&&(a=a.next((()=>{(function(e){e.objectStoreNames.contains(`remoteDocumentChanges`)&&e.deleteObjectStore(`remoteDocumentChanges`)})(e)}))),n<10&&r>=10&&(a=a.next((()=>this.Di(i)))),n<11&&r>=11&&(a=a.next((()=>{(function(e){e.createObjectStore(jl,{keyPath:Ml})})(e),function(e){e.createObjectStore(Nl,{keyPath:Pl})}(e)}))),n<12&&r>=12&&(a=a.next((()=>{(function(e){let t=e.createObjectStore(Ul,{keyPath:Wl});t.createIndex(Gl,Kl,{unique:!1}),t.createIndex(ql,Jl,{unique:!1})})(e)}))),n<13&&r>=13&&(a=a.next((()=>function(e){let t=e.createObjectStore(ul,{keyPath:dl});t.createIndex(fl,pl),t.createIndex(ml,hl)}(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(Zc)))),n<14&&r>=14&&(a=a.next((()=>this.Fi(e,i)))),n<15&&r>=15&&(a=a.next((()=>function(e){e.createObjectStore(Fl,{keyPath:Il,autoIncrement:!0}).createIndex(Ll,Rl,{unique:!1}),e.createObjectStore(zl,{keyPath:Bl}).createIndex(Vl,U,{unique:!1}),e.createObjectStore(W,{keyPath:G}).createIndex(K,Hl,{unique:!1})}(e)))),n<16&&r>=16&&(a=a.next((()=>{t.objectStore(zl).clear()})).next((()=>{t.objectStore(W).clear()}))),n<17&&r>=17&&(a=a.next((()=>{(function(e){e.createObjectStore(Yl,{keyPath:Xl})})(e)}))),n<18&&r>=18&&_e()&&(a=a.next((()=>{t.objectStore(zl).clear()})).next((()=>{t.objectStore(W).clear()}))),a}wi(e){let t=0;return e.store(Zc).ee(((e,n)=>{t+=rh(n)})).next((()=>{let n={byteSize:t};return e.store(gl).put(_l,n)}))}yi(e){let t=e.store(el),n=e.store(nl);return t.J().next((t=>H.forEach(t,(t=>{let r=IDBKeyRange.bound([t.userId,Hc],[t.userId,t.lastAcknowledgedBatchId]);return n.J(il,r).next((n=>H.forEach(n,(n=>{F(n.userId===t.userId,18650,`Cannot process batch from unexpected user`,{batchId:n.batchId});let r=sm(this.serializer,n);return nh(e,t.userId,r).next((()=>{}))}))))}))))}Si(e){let t=e.store(xl),n=e.store(Zc);return e.store(El).get(Tl).next((e=>{let r=[];return n.ee(((n,i)=>{let a=new $s(n),o=function(e){return[0,qc(e)]}(a);r.push(t.get(o).next((n=>n?H.resolve():(n=>t.put({targetId:0,path:qc(n),sequenceNumber:e.highestListenSequenceNumber}))(a))))})).next((()=>H.waitFor(r)))}))}bi(e,t){e.createObjectStore(Dl,{keyPath:Ol});let n=t.store(Dl),r=new Wm,i=e=>{if(r.add(e)){let t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:qc(r)})}};return t.store(Zc).ee({X:!0},((e,t)=>i(new $s(e).popLast()))).next((()=>t.store(ll).ee({X:!0},(([e,t,n],r)=>i(Xc(t).popLast())))))}Di(e){let t=e.store(vl);return t.ee(((e,n)=>{let r=cm(n),i=lm(this.serializer,r);return t.put(i)}))}Ci(e,t){let n=t.store(Zc),r=[];return n.ee(((e,n)=>{let i=t.store(ul),a=function(e){return e.document?new B($s.fromString(e.document.name).popFirst(5)):e.noDocument?B.fromSegments(e.noDocument.path):e.unknownDocument?B.fromSegments(e.unknownDocument.path):P(36783)}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>H.waitFor(r)))}Fi(e,t){let n=t.store(nl),r=Th(this.serializer),i=new Uh(Gh.mi,this.serializer.yt);return n.J().next((e=>{let n=new Map;return e.forEach((e=>{let t=n.get(e.userId)??Z();sm(this.serializer,e).keys().forEach((e=>t=t.add(e))),n.set(e.userId,t)})),H.forEach(n,((e,n)=>{let a=new Ds(n),o=_m.wt(this.serializer,a),s=i.getIndexManager(a);return new Nh(r,ih.wt(a,this.serializer,s,i.referenceDelegate),o,s).recalculateAndSaveOverlaysForDocumentKeys(new au(t,Vc.ce),e).next()}))}))}};function Jh(e){e.createObjectStore(xl,{keyPath:Sl}).createIndex(Cl,wl,{unique:!0}),e.createObjectStore(vl,{keyPath:`targetId`}).createIndex(yl,bl,{unique:!0}),e.createObjectStore(El)}var Yh=`IndexedDbPersistence`,Xh=18e5,Zh=5e3,Qh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$h=`main`,eg=class e{constructor(t,n,r,i,a,o,s,c,l,u,d=18){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=o,this.document=s,this.xi=l,this.Oi=u,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=-1/0,this.Qi=e=>Promise.resolve(),!e.v())throw new R(L.UNIMPLEMENTED,`This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.`);this.referenceDelegate=new xh(this,i),this.$i=n+$h,this.serializer=new tm(c),this.Ui=new kc(this.$i,this.Ni,new qh(this.serializer)),this.hi=new ym,this.Pi=new uh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Th(this.serializer),this.Ii=new mm,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===u&&js(Yh,`LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.`))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new R(L.FAILED_PRECONDITION,Qh);return this.Gi(),this.zi(),this.ji(),this.runTransaction(`getHighestListenSequenceNumber`,`readonly`,(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Vc(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction(`updateClientMetadataAndTryBecomePrimary`,`readwrite`,(e=>ng(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Nc(e))return N(Yh,`Failed to extend owner lease: `,e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return N(Yh,`Releasing owner lease after error during lease refresh`,e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return tg(e).get($c).next((e=>H.resolve(this.es(e))))}ts(e){return ng(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Xh)){this.qi=Date.now();let e=await this.runTransaction(`maybeGarbageCollectMultiClientState`,`readwrite-primary`,(e=>{let t=ou(e,kl);return t.J().next((e=>{let n=this.ss(e,Xh),r=e.filter((e=>n.indexOf(e)===-1));return H.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ki)for(let t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay(`client_metadata_refresh`,4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):tg(e).get($c).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Zh)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new R(L.FAILED_PRECONDITION,Qh);return!1}}return!(!this.networkEnabled||!this.inForeground)||ng(e).J().next((e=>this.ss(e,Zh).find((e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&N(Yh,`Client ${e?`is`:`is not`} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&=(this.ki.cancel(),null),this.ls(),this.hs(),await this.Ui.runTransaction(`shutdown`,`readwrite`,[Qc,kl],(e=>{let t=new au(e,Vc.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId)))}Ts(){return this.runTransaction(`getActiveClients`,`readonly`,(e=>ng(e).J().next((e=>this.ss(e,Xh).map((e=>e.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return ih.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qm(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return _m.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){N(Yh,`Starting transaction:`,e);let r=t===`readonly`?`readonly`:`readwrite`,i=function(e){return e===18?iu:e===17?ru:e===16?nu:e===15?tu:e===14?eu:e===13?$l:e===12?Ql:e===11?Zl:void P(60245)}(this.Ni),a;return this.Ui.runTransaction(e,r,i,(r=>(a=new au(r,this.ci?this.ci.next():Vc.ce),t===`readwrite-primary`?this.Hi(a).next((e=>!!e||this.Yi(a))).next((t=>{if(!t)throw js(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new R(L.FAILED_PRECONDITION,wc);return n(a)})).next((e=>this.Xi(a).next((()=>e)))):this.Is(a).next((()=>n(a)))))).then((e=>(a.raiseOnCommittedEvent(),e)))}Is(e){return tg(e).get($c).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Zh)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new R(L.FAILED_PRECONDITION,Qh)}))}Xi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tg(e).put($c,t)}static v(){return kc.v()}Zi(e){let t=tg(e);return t.get($c).next((e=>this.es(e)?(N(Yh,`Releasing primary lease.`),t.delete($c)):H.resolve()))}rs(e,t){let n=Date.now();return!(e<n-t)&&(!(e>n)||(js(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener==`function`&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState===`visible`,this.Wi())))},this.document.addEventListener(`visibilitychange`,this.Li),this.inForeground=this.document.visibilityState===`visible`)}ls(){this.Li&&=(this.document.removeEventListener(`visibilitychange`,this.Li),null)}zi(){typeof this.window?.addEventListener==`function`&&(this.Bi=()=>{this.cs();let e=/(?:Version|Mobile)\/1[456]/;ge()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener(`pagehide`,this.Bi))}hs(){this.Bi&&=(this.window.removeEventListener(`pagehide`,this.Bi),null)}us(e){try{let t=this.Ki?.getItem(this._s(e))!==null;return N(Yh,`Client '${e}' ${t?`is`:`is not`} zombied in LocalStorage`),t}catch(e){return js(Yh,`Failed to get zombied client id.`,e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){js(`Failed to set zombie client id.`,e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function tg(e){return ou(e,Qc)}function ng(e){return ou(e,kl)}function rg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+=`.`+e.database),`firestore/`+t+`/`+n+`/`}var ig=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=Z(),i=Z();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},ag=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},og=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ge()?8:Ac(de())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new ag;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(As()<=E.DEBUG&&N(`QueryEngine`,`SDK will not create cache indexes for query:`,Xd(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),H.resolve()):(As()<=E.DEBUG&&N(`QueryEngine`,`Query:`,Xd(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(As()<=E.DEBUG&&N(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Xd(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Gd(t))):H.resolve())}ys(e,t){if(Hd(t))return H.resolve(null);let n=Gd(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=qd(t,null,`F`),n=Gd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=Z(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,qd(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return Hd(t)||r.isEqual(V.min())?H.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?H.resolve(null):(As()<=E.DEBUG&&N(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Xd(t)),this.vs(e,a,t,bc(r,mc)).next((e=>e)))}))}Ds(e,t){let n=new pu($d(e));return t.forEach(((t,r)=>{Zd(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return As()<=E.DEBUG&&N(`QueryEngine`,`Using full collection scan to execute query:`,Xd(t)),this.ps.getDocumentsMatchingQuery(e,t,Sc.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},sg=`LocalStore`,cg=3e8,lg=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new uu(z),this.xs=new tf((e=>Pd(e)),Fd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nh(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function ug(e,t,n,r){return new lg(e,t,n,r)}async function dg(e,t){let n=I(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=Z();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function fg(e,t){let n=I(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=H.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);F(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Z();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function pg(e){let t=I(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function mg(e,t){let n=I(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(vu.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=cg?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=rf(),c=Z();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(hg(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(V.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return H.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function hg(e,t,n){let r=Z(),i=Z();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=rf();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(V.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):N(sg,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function gg(e,t){let n=I(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Hc),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function _g(e,t){let n=I(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,H.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new em(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function vg(e,t,n){let r=I(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Nc(e))throw e;N(sg,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function yg(e,t,n){let r=I(e),i=V.min(),a=Z();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=I(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):H.resolve(r.Ms.get(i))}(r,e,Gd(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:V.min(),n?a:Z()))).next((e=>(Sg(r,Qd(t),e),{documents:e,Qs:a})))))}function bg(e,t){let n=I(e),r=I(n.Pi),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction(`Get target data`,`readonly`,(e=>r.At(e,t).next((e=>e?e.target:null))))}function xg(e,t){let n=I(e),r=n.Os.get(t)||V.min();return n.persistence.runTransaction(`Get new document changes`,`readonly`,(e=>n.Ns.getAllFromCollectionGroup(e,t,bc(r,mc),2**53-1))).then((e=>(Sg(n,t,e),e)))}function Sg(e,t,n){let r=e.Os.get(t)||V.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var Cg=`firestore_clients`;function wg(e,t){return`${Cg}_${e}_${t}`}var Tg=`firestore_mutations`;function Eg(e,t,n){let r=`${Tg}_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}var Dg=`firestore_targets`;function Og(e,t){return`${Dg}_${e}_${t}`}var kg=`SharedClientState`,Ag=class e{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(t,n,r){let i=JSON.parse(r),a,o=typeof i==`object`&&[`pending`,`acknowledged`,`rejected`].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error==`object`);return o&&i.error&&(o=typeof i.error.message==`string`&&typeof i.error.code==`string`,o&&(a=new R(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(js(kg,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},jg=class e{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(t,n){let r=JSON.parse(n),i,a=typeof r==`object`&&[`not-current`,`current`,`rejected`].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error==`object`);return a&&r.error&&(a=typeof r.error.message==`string`&&typeof r.error.code==`string`,a&&(i=new R(r.error.code,r.error.message))),a?new e(t,r.state,i):(js(kg,`Failed to parse target state for ID '${t}': ${n}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Mg=class e{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(t,n){let r=JSON.parse(n),i=typeof r==`object`&&r.activeTargetIds instanceof Array,a=mf();for(let e=0;i&&e<r.activeTargetIds.length;++e)i=Gc(r.activeTargetIds[e]),a=a.add(r.activeTargetIds[e]);return i?new e(t,a):(js(kg,`Failed to parse client data for instance '${t}': ${n}`),null)}},Ng=class e{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(t){let n=JSON.parse(t);return typeof n==`object`&&[`Unknown`,`Online`,`Offline`].indexOf(n.onlineState)!==-1&&typeof n.clientId==`string`?new e(n.clientId,n.onlineState):(js(kg,`Failed to parse online state: ${t}`),null)}},Pg=class{constructor(){this.activeTargetIds=mf()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Fg=class{constructor(e,t,n,r,i){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new uu(z),this.started=!1,this.Xs=[];let a=n.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`);this.storage=this.window.localStorage,this.currentUser=i,this.eo=wg(this.persistenceKey,this.Js),this.no=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Pg),this.ro=RegExp(`^${Cg}_${a}_([^_]*)$`),this.io=RegExp(`^${Tg}_${a}_(\\d+)(?:_(.*))?$`),this.so=RegExp(`^${Dg}_${a}_(\\d+)$`),this.oo=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this._o=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener(`storage`,this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){let e=await this.syncEngine.Ts();for(let t of e){if(t===this.Js)continue;let e=this.getItem(wg(this.persistenceKey,t));if(e){let n=Mg.Ws(t,e);n&&(this.Zs=this.Zs.insert(n.clientId,n))}}this.ao();let t=this.storage.getItem(this.oo);if(t){let e=this.uo(t);e&&this.co(e)}for(let e of this.Xs)this.Ys(e);this.Xs=[],this.window.addEventListener(`pagehide`,(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,`pending`)}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e,t=!0){let n=`not-current`;if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(Og(this.persistenceKey,e));if(t){let r=jg.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Og(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Po(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&=(this.window.removeEventListener(`storage`,this.Hs),this.removeItem(this.eo),!1)}getItem(e){let t=this.storage.getItem(e);return N(kg,`READ`,e,t),t}setItem(e,t){N(kg,`SET`,e,t),this.storage.setItem(e,t)}removeItem(e){N(kg,`REMOVE`,e),this.storage.removeItem(e)}Ys(e){let t=e;if(t.storageArea===this.storage){if(N(kg,`EVENT`,t.key,t.newValue),t.key===this.eo)return void js(`Received WebStorage notification for local change. Another client might have garbage-collected our state`);this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){let e=this.Ro(t.key);return this.Vo(e,null)}{let e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(t.newValue!==null){let e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(t.newValue!==null){let e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(t.newValue!==null){let e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){let e=function(e){let t=Vc.ce;if(e!=null)try{let n=JSON.parse(e);F(typeof n==`number`,30636,{So:e}),t=n}catch(e){js(kg,`Failed to read sequence number from WebStorage`,e)}return t}(t.newValue);e!==Vc.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){let e=this.bo(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Do(e))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){let r=new Ag(this.currentUser,e,t,n),i=Eg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){let t=Eg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){let t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){let r=Og(this.persistenceKey,e),i=new jg(e,t,n);this.setItem(r,i.Gs())}Ao(e){let t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){let t=this.ro.exec(e);return t?t[1]:null}mo(e,t){let n=this.Ro(e);return Mg.Ws(n,t)}fo(e,t){let n=this.io.exec(e),r=Number(n[1]),i=n[2]===void 0?null:n[2];return Ag.Ws(new Ds(i),r,t)}yo(e,t){let n=this.so.exec(e),r=Number(n[1]);return jg.Ws(r,t)}uo(e){return Ng.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);N(kg,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){let n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(n),a=[],o=[];return i.forEach((e=>{r.has(e)||a.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Fo(a,o).then((()=>{this.Zs=n}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=mf();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}},Ig=class{constructor(){this.Mo=new Pg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Lg=class{Oo(e){}shutdown(){}},Rg=`ConnectivityMonitor`,zg=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){N(Rg,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){N(Rg,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},Bg=null;function Vg(){return Bg===null?Bg=function(){return 268435456+Math.round(2147483648*Math.random())}():Bg++,`0x`+Bg.toString(16)}var Hg=`RestConnection`,Ug={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},Wg=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===ju?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=Vg(),o=this.zo(e,t.toUriEncodedString());N(Hg,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=ie(c);return this.Jo(e,o,s,n,l).then((t=>(N(Hg,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Ms(Hg,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Os}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=Ug[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},Gg=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},Kg=`WebChannelConnection`,qg=class extends Wg{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=Vg();return new Promise(((i,o)=>{let s=new _s;s.setWithCredentials(!0),s.listenOnce(ys.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case bs.NO_ERROR:let t=s.getResponseJson();N(Kg,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case bs.TIMEOUT:N(Kg,`RPC '${e}' ${a} timed out`),o(new R(L.DEADLINE_EXCEEDED,`Request time out`));break;case bs.HTTP_ERROR:let n=s.getStatus();if(N(Kg,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new R(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(t.status),t.message)):o(new R(L.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new R(L.UNAVAILABLE,`Connection failed.`));break;default:P(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{N(Kg,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);N(Kg,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=Vg(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=ws(),o=Cs(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);N(Kg,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new Gg({Yo:t=>{f?N(Kg,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(N(Kg,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),N(Kg,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,vs.EventType.OPEN,(()=>{f||(N(Kg,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,vs.EventType.CLOSE,(()=>{f||(f=!0,N(Kg,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,vs.EventType.ERROR,(t=>{f||(f=!0,Ms(Kg,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new R(L.UNAVAILABLE,`The operation could not be completed`)))})),m(u,vs.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];F(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){N(Kg,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=Qf[e];if(t!==void 0)return ep(t)}(t),i=a.message;n===void 0&&(n=L.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new R(n,i)),u.close()}else N(Kg,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,Ss.STAT_EVENT,(t=>{t.stat===xs.PROXY?N(Kg,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===xs.NOPROXY&&N(Kg,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function Jg(){return typeof window<`u`?window:null}function Yg(){return typeof document<`u`?document:null}function Xg(e){return new bp(e,!0)}var Zg=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&N(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},Qg=`PersistentStream`,$g=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===L.RESOURCE_EXHAUSTED?(js(t.toString()),js(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new R(L.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return N(Qg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(N(Qg,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},e_=class extends $g{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Lp(this.serializer,e),n=function(e){if(!(`targetChange`in e))return V.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?V.min():t.readTime?Tp(t.readTime):V.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=Np(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=X(r)?{documents:Vp(e,r)}:{query:Hp(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Cp(e,t.resumeToken);let r=xp(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(V.min())>0){n.readTime=Sp(e,t.snapshotVersion.toTimestamp());let r=xp(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=Wp(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=Np(this.serializer),t.removeTarget=e,this.q_(t)}},t_=class extends $g{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return F(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,F(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){F(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=Bp(e.writeResults,e.commitTime),n=Tp(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=Np(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>Rp(this.serializer,e)))};this.q_(t)}},n_=class{},r_=class extends n_{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new R(L.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,Dp(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new R(L.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,Dp(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new R(L.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},i_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(js(t),this.aa=!1):N(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},a_=`RemoteStore`,o_=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{h_(this)&&(N(a_,`Restarting streams for network reachability change.`),await async function(e){let t=I(e);t.Ea.add(4),await c_(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await s_(t)}(this))}))})),this.Ra=new i_(n,r)}};async function s_(e){if(h_(e))for(let t of e.da)await t(!0)}async function c_(e){for(let t of e.da)await t(!1)}function l_(e,t){let n=I(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),m_(n)?p_(n):P_(n).O_()&&d_(n,t))}function u_(e,t){let n=I(e),r=P_(n);n.Ia.delete(t),r.O_()&&f_(n,t),n.Ia.size===0&&(r.O_()?r.L_():h_(n)&&n.Ra.set(`Unknown`))}function d_(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(V.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}P_(e).Y_(t)}function f_(e,t){e.Va.Ue(t),P_(e).Z_(t)}function p_(e){e.Va=new mp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),P_(e).start(),e.Ra.ua()}function m_(e){return h_(e)&&!P_(e).x_()&&e.Ia.size>0}function h_(e){return I(e).Ea.size===0}function g_(e){e.Va=void 0}async function __(e){e.Ra.set(`Online`)}async function v_(e){e.Ia.forEach(((t,n)=>{d_(e,t)}))}async function y_(e,t){g_(e),m_(e)?(e.Ra.ha(t),p_(e)):e.Ra.set(`Unknown`)}async function b_(e,t,n){if(e.Ra.set(`Online`),t instanceof fp&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){N(a_,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await x_(e,n)}else if(t instanceof up?e.Va.Ze(t):t instanceof dp?e.Va.st(t):e.Va.tt(t),!n.isEqual(V.min()))try{let t=await pg(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(vu.EMPTY_BYTE_STRING,r.snapshotVersion)),f_(e,t),d_(e,new em(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){N(a_,`Failed to raise snapshot:`,t),await x_(e,t)}}async function x_(e,t,n){if(!Nc(t))throw t;e.Ea.add(1),await c_(e),e.Ra.set(`Offline`),n||=()=>pg(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{N(a_,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await s_(e)}))}function S_(e,t){return t().catch((n=>x_(e,n,t)))}async function C_(e){let t=I(e),n=F_(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Hc;for(;w_(t);)try{let e=await gg(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,T_(t,e)}catch(e){await x_(t,e)}E_(t)&&D_(t)}function w_(e){return h_(e)&&e.Ta.length<10}function T_(e,t){e.Ta.push(t);let n=F_(e);n.O_()&&n.X_&&n.ea(t.mutations)}function E_(e){return h_(e)&&!F_(e).x_()&&e.Ta.length>0}function D_(e){F_(e).start()}async function O_(e){F_(e).ra()}async function k_(e){let t=F_(e);for(let n of e.Ta)t.ea(n.mutations)}async function A_(e,t,n){let r=e.Ta.shift(),i=Yf.from(r,t,n);await S_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await C_(e)}async function j_(e,t){t&&F_(e).X_&&await async function(e,t){if(function(e){return $f(e)&&e!==L.ABORTED}(t.code)){let n=e.Ta.shift();F_(e).B_(),await S_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await C_(e)}}(e,t),E_(e)&&D_(e)}async function M_(e,t){let n=I(e);n.asyncQueue.verifyOperationInProgress(),N(a_,`RemoteStore received new credentials`);let r=h_(n);n.Ea.add(3),await c_(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await s_(n)}async function N_(e,t){let n=I(e);t?(n.Ea.delete(2),await s_(n)):t||(n.Ea.add(2),await c_(n),n.Ra.set(`Unknown`))}function P_(e){return e.ma||(e.ma=function(e,t,n){let r=I(e);return r.sa(),new e_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:__.bind(null,e),t_:v_.bind(null,e),r_:y_.bind(null,e),H_:b_.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),m_(e)?p_(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),g_(e))}))),e.ma}function F_(e){return e.fa||(e.fa=function(e,t,n){let r=I(e);return r.sa(),new t_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:O_.bind(null,e),r_:j_.bind(null,e),ta:k_.bind(null,e),na:A_.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await C_(e)):(await e.fa.stop(),e.Ta.length>0&&(N(a_,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var I_=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(L.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function L_(e,t){if(js(`AsyncQueue`,`${t}: ${e}`),Nc(e))return new R(L.UNAVAILABLE,`${t}: ${e}`);throw e}var R_=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||B.comparator(t.key,n.key):(e,t)=>B.comparator(e.key,t.key),this.keyedMap=of(),this.sortedSet=new uu(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},z_=class{constructor(){this.ga=new uu(B.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},B_=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,R_.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},V_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},H_=class{constructor(){this.queries=U_(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=I(e),r=n.queries;n.queries=U_(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new R(L.ABORTED,`Firestore shutting down`))}};function U_(){return new tf((e=>Yd(e)),Jd)}async function W_(e,t){let n=I(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new V_,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=L_(e,`Initialization of query '${Xd(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&J_(n)}async function G_(e,t){let n=I(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function K_(e,t){let n=I(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&J_(n)}function q_(e,t,n){let r=I(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function J_(e){e.Ca.forEach((e=>{e.next()}))}var Y_,X_;(X_=Y_||={}).Ma=`default`,X_.Cache=`cache`;var Z_=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new B_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=B_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Y_.Cache}},Q_=class{constructor(e){this.key=e}},$_=class{constructor(e){this.key=e}},ev=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Z(),this.mutatedKeys=Z(),this.eu=$d(e),this.tu=new R_(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new z_,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Zd(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new B_(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new z_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Z(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new $_(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Q_(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Z();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return B_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},tv=`SyncEngine`,nv=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},rv=class{constructor(e){this.key=e,this.hu=!1}},iv=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new tf((e=>Yd(e)),Jd),this.Iu=new Map,this.Eu=new Set,this.du=new uu(B.comparator),this.Au=new Map,this.Ru=new Lh,this.Vu={},this.mu=new Map,this.fu=lh.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function av(e,t,n=!0){let r=Iv(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await sv(r,t,n,!0),i}async function ov(e,t){await sv(Iv(e),t,!0,!1)}async function sv(e,t,n,r){let i=await _g(e.localStore,Gd(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await cv(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&l_(e.remoteStore,i),s}async function cv(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await yg(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return xv(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await yg(e.localStore,t,!0),o=new ev(t,a.Qs),s=o.ru(a.documents),c=lp.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);xv(e,n,l.au);let u=new nv(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function lv(e,t,n){let r=I(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Jd(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&u_(r.remoteStore,i.targetId),yv(r,i.targetId)})).catch(Ec)):(yv(r,i.targetId),await vg(r.localStore,i.targetId,!0))}async function uv(e,t){let n=I(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),u_(n.remoteStore,r.targetId))}async function dv(e,t,n){let r=Lv(e);try{let e=await function(e,t){let n=I(e),r=pc.now(),i=t.reduce(((e,t)=>e.add(t.key)),Z()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=rf(),c=Z();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=zf(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new Hf(e.key,t,cd(t.value.mapValue),Nf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:sf(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new uu(z),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await wv(r,e.changes),await C_(r.remoteStore)}catch(e){let t=L_(e,`Failed to persist write`);n.reject(t)}}async function fv(e,t){let n=I(e);try{let e=await mg(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(F(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?F(r.hu,14607):e.removedDocuments.size>0&&(F(r.hu,42227),r.hu=!1))})),await wv(n,e,t)}catch(e){await Ec(e)}}function pv(e,t,n){let r=I(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=I(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&J_(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mv(e,t,n){let r=I(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new uu(B.comparator);e=e.insert(a,ld.newNoDocument(a,V.min()));let n=Z().add(a);await fv(r,new cp(V.min(),new Map,new uu(z),e,n)),r.du=r.du.remove(a),r.Au.delete(t),Cv(r)}else await vg(r.localStore,t,!1).then((()=>yv(r,t,n))).catch(Ec)}async function hv(e,t){let n=I(e),r=t.batch.batchId;try{let e=await fg(n.localStore,t);vv(n,r,null),_v(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await wv(n,e)}catch(e){await Ec(e)}}async function gv(e,t,n){let r=I(e);try{let e=await function(e,t){let n=I(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(F(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);vv(r,t,n),_v(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await wv(r,e)}catch(e){await Ec(e)}}function _v(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function vv(e,t,n){let r=I(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function yv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||bv(e,t)}))}function bv(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(u_(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Cv(e))}function xv(e,t,n){for(let r of n)r instanceof Q_?(e.Ru.addReference(r.key,t),Sv(e,r)):r instanceof $_?(N(tv,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||bv(e,r.key)):P(19791,{wu:r})}function Sv(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(N(tv,`New document in limbo: `+n),e.Eu.add(r),Cv(e))}function Cv(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new B($s.fromString(t)),r=e.fu.next();e.Au.set(r,new rv(n)),e.du=e.du.insert(n,r),l_(e.remoteStore,new em(Gd(Vd(n.path)),r,`TargetPurposeLimboResolution`,Vc.ce))}}async function wv(e,t,n){let r=I(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=ig.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=I(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>H.forEach(t,(t=>H.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>H.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Nc(e))throw e;N(sg,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function Tv(e,t){let n=I(e);if(!n.currentUser.isEqual(t)){N(tv,`User change. New user:`,t.toKey());let e=await dg(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new R(L.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await wv(n,e.Ls)}}function Ev(e,t){let n=I(e),r=n.Au.get(t);if(r&&r.hu)return Z().add(r.key);{let e=Z(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function Dv(e,t){let n=I(e),r=await yg(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&xv(n,t.targetId,i.au),i}async function Ov(e,t){let n=I(e);return xg(n.localStore,t).then((e=>wv(n,e)))}async function kv(e,t,n,r){let i=I(e),a=await function(e,t){let n=I(e),r=I(n.mutationQueue);return n.persistence.runTransaction(`Lookup mutation documents`,`readonly`,(e=>r.er(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):H.resolve(null)))))}(i.localStore,t);a===null?N(tv,`Cannot apply mutation batch with id: `+t):(n===`pending`?await C_(i.remoteStore):n===`acknowledged`||n===`rejected`?(vv(i,t,r||null),_v(i,t),function(e,t){I(I(e).mutationQueue).ir(t)}(i.localStore,t)):P(6720,`Unknown batchState`,{Su:n}),await wv(i,a))}async function Av(e,t){let n=I(e);if(Iv(n),Lv(n),!0===t&&!0!==n.gu){let e=await jv(n,n.sharedClientState.getAllActiveQueryTargets().toArray());n.gu=!0,await N_(n.remoteStore,!0);for(let t of e)l_(n.remoteStore,t)}else if(!1===t&&!1!==n.gu){let e=[],t=Promise.resolve();n.Iu.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(yv(n,i),vg(n.localStore,i,!0)))),u_(n.remoteStore,i)})),await t,await jv(n,e),function(e){let t=I(e);t.Au.forEach(((e,n)=>{u_(t.remoteStore,n)})),t.Ru.Jr(),t.Au=new Map,t.du=new uu(B.comparator)}(n),n.gu=!1,await N_(n.remoteStore,!1)}}async function jv(e,t,n){let r=I(e),i=[],a=[];for(let e of t){let t,n=r.Iu.get(e);if(n&&n.length!==0){t=await _g(r.localStore,Gd(n[0]));for(let e of n){let t=await Dv(r,r.Tu.get(e));t.snapshot&&a.push(t.snapshot)}}else{let n=await bg(r.localStore,e);t=await _g(r.localStore,n),await cv(r,Mv(n),e,!1,t.resumeToken)}i.push(t)}return r.Pu.H_(a),i}function Mv(e){return Bd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,`F`,e.startAt,e.endAt)}function Nv(e){return function(e){return I(I(e).persistence).Ts()}(I(e).localStore)}async function Pv(e,t,n,r){let i=I(e);if(i.gu)return void N(tv,`Ignoring unexpected query state notification.`);let a=i.Iu.get(t);if(a&&a.length>0)switch(n){case`current`:case`not-current`:await wv(i,await xg(i.localStore,Qd(a[0])),cp.createSynthesizedRemoteEventForCurrentChange(t,n===`current`,vu.EMPTY_BYTE_STRING));break;case`rejected`:await vg(i.localStore,t,!0),yv(i,t,r);break;default:P(64155,n)}}async function Fv(e,t,n){let r=Iv(e);if(r.gu){for(let e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){N(tv,`Adding an already active target `+e);continue}let t=await bg(r.localStore,e),n=await _g(r.localStore,t);await cv(r,Mv(t),n.targetId,!1,n.resumeToken),l_(r.remoteStore,n)}for(let e of n)r.Iu.has(e)&&await vg(r.localStore,e,!1).then((()=>{u_(r.remoteStore,e),yv(r,e)})).catch(Ec)}}function Iv(e){let t=I(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ev.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mv.bind(null,t),t.Pu.H_=K_.bind(null,t.eventManager),t.Pu.yu=q_.bind(null,t.eventManager),t}function Lv(e){let t=I(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gv.bind(null,t),t}var Rv=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=Xg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ug(this.persistence,new og,e.initialUser,this.serializer)}Cu(e){return new Uh(Gh.mi,this.serializer)}Du(e){return new Ig}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Rv.provider={build:()=>new Rv};var zv=class extends Rv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){F(this.persistence.referenceDelegate instanceof Kh,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new vh(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?th.DEFAULT:th.withCacheSize(this.cacheSizeBytes);return new Uh((e=>Kh.mi(e,t)),this.serializer)}},Bv=class extends Rv{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind=`persistent`,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Lv(this.xu.syncEngine),await C_(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return ug(this.persistence,new og,e.initialUser,this.serializer)}Fu(e,t){let n=this.persistence.referenceDelegate.garbageCollector;return new vh(n,e.asyncQueue,t)}Mu(e,t){let n=new Bc(t,this.persistence);return new zc(e.asyncQueue,n)}Cu(e){let t=rg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes===void 0?th.DEFAULT:th.withCacheSize(this.cacheSizeBytes);return new eg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Jg(),Yg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Ig}},Vv=class extends Bv{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.xu.syncEngine;this.sharedClientState instanceof Fg&&(this.sharedClientState.syncEngine={Co:kv.bind(null,t),vo:Pv.bind(null,t),Fo:Fv.bind(null,t),Ts:Nv.bind(null,t),Do:Ov.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async e=>{await Av(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}Du(e){let t=Jg();if(!Fg.v(t))throw new R(L.UNIMPLEMENTED,`IndexedDB persistence is only available on platforms that support LocalStorage.`);let n=rg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fg(t,e.asyncQueue,n,e.clientId,e.initialUser)}},Hv=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tv.bind(null,this.syncEngine),await N_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new H_}()}createDatastore(e){let t=Xg(e.databaseInfo.databaseId),n=function(e){return new qg(e)}(e.databaseInfo);return function(e,t,n,r){return new r_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new o_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>pv(this.syncEngine,e,0)),function(){return zg.v()?new zg:new Lg}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new iv(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=I(e);N(a_,`RemoteStore shutting down.`),t.Ea.add(5),await c_(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Hv.provider={build:()=>new Hv};var Uv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):js(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},Wv=`FirestoreClient`,Gv=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ds.UNAUTHENTICATED,this.clientId=Ws.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{N(Wv,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(N(Wv,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=L_(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function Kv(e,t){e.asyncQueue.verifyOperationInProgress(),N(Wv,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await dg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function qv(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Jv(e);N(Wv,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>M_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>M_(t.remoteStore,n))),e._onlineComponents=t}async function Jv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N(Wv,`Using user provided OfflineComponentProvider`);try{await Kv(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Ms(`Error using user provided cache. Falling back to memory cache: `+n),await Kv(e,new Rv)}}else N(Wv,`Using default OfflineComponentProvider`),await Kv(e,new zv(void 0));return e._offlineComponents}async function Yv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N(Wv,`Using user provided OnlineComponentProvider`),await qv(e,e._uninitializedComponentsProvider._online)):(N(Wv,`Using default OnlineComponentProvider`),await qv(e,new Hv))),e._onlineComponents}function Xv(e){return Yv(e).then((e=>e.syncEngine))}async function Zv(e){let t=await Yv(e),n=t.eventManager;return n.onListen=av.bind(null,t.syncEngine),n.onUnlisten=lv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ov.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uv.bind(null,t.syncEngine),n}function Qv(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var $v=new Map,ey=`firestore.googleapis.com`,ty=!0,ny=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new R(L.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=ey,this.ssl=ty}else this.host=e.host,this.ssl=e.ssl??ty;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hh)throw new R(L.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}rc(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qv(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ry=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new ny({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new R(L.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new R(L.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new ny(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Ls;switch(e.type){case`firstParty`:return new Bs(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new R(L.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=$v.get(e);t&&(N(`ComponentProvider`,`Removing Datastore`),$v.delete(e),t.terminate())}(this),Promise.resolve()}},iy=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},ay=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oy(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(uc(n,e._jsonSchema))return new e(t,r||null,new B($s.fromString(n.referencePath)))}};ay._jsonSchemaVersion=`firestore/documentReference/1.0`,ay._jsonSchema={type:lc(`string`,ay._jsonSchemaVersion),referencePath:lc(`string`)};var oy=class e extends iy{constructor(e,t,n){super(e,t,Vd(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ay(this.firestore,null,new B(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function sy(e,t,...n){if(e=Pe(e),nc(`collection`,`path`,t),e instanceof ry){let r=$s.fromString(t,...n);return ac(r),new oy(e,null,r)}{if(!(e instanceof ay||e instanceof oy))throw new R(L.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child($s.fromString(t,...n));return ac(r),new oy(e.firestore,null,r)}}function cy(e,t,...n){if(e=Pe(e),arguments.length===1&&(t=Ws.newId()),nc(`doc`,`path`,t),e instanceof ry){let r=$s.fromString(t,...n);return ic(r),new ay(e,null,new B(r))}{if(!(e instanceof ay||e instanceof oy))throw new R(L.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child($s.fromString(t,...n));return ic(r),new ay(e.firestore,e instanceof oy?e.converter:null,new B(r))}}var ly=`AsyncQueue`,uy=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zg(this,`async_queue_retry`),this._c=()=>{let e=Yg();e&&N(ly,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=Yg();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Yg();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nc(e))throw e;N(ly,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,js(`INTERNAL UNHANDLED ERROR: `,dy(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=I_.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:dy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function dy(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function fy(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var py=class extends ry{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new uy,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new uy(e),this._firestoreClient=void 0,await e}}};function my(e,t,n){n||=ju;let r=en(e,`firestore`);if(r.isInitialized(n)){let e=r.getImmediate({identifier:n});if(Te(r.getOptions(n),t))return e;throw new R(L.FAILED_PRECONDITION,`initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.`)}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new R(L.INVALID_ARGUMENT,`cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object`);if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<hh)throw new R(L.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);return t.host&&ie(t.host)&&ae(t.host),r.initialize({options:t,instanceIdentifier:n})}function hy(e){if(e._terminated)throw new R(L.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||gy(e),e._firestoreClient}function gy(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new Au(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Qv(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Gv(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var _y=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(vu.fromBase64String(t))}catch(e){throw new R(L.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(vu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(uc(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};_y._jsonSchemaVersion=`firestore/bytes/1.0`,_y._jsonSchema={type:lc(`string`,_y._jsonSchemaVersion),bytes:lc(`string`)};var vy=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new R(L.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new tc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},yy=class{constructor(e){this._methodName=e}},by=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(L.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new R(L.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(uc(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};by._jsonSchemaVersion=`firestore/geoPoint/1.0`,by._jsonSchema={type:lc(`string`,by._jsonSchemaVersion),latitude:lc(`number`),longitude:lc(`number`)};var xy=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(uc(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new R(L.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};xy._jsonSchemaVersion=`firestore/vectorValue/1.0`,xy._jsonSchema={type:lc(`string`,xy._jsonSchemaVersion),vectorValues:lc(`object`)};var Sy=/^__.*__$/,Cy=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new Vf(e,this.data,t,this.fieldTransforms):new Hf(e,this.data,this.fieldMask,t,this.fieldTransforms)}},wy=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hf(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ty(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ac:e})}}var Ey=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(Ty(this.Ac)&&Sy.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},Dy=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xg(e)}Cc(e,t,n,r=!1){return new Ey({Ac:e,methodName:t,Dc:n,path:tc.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Oy(e){let t=e._freezeSettings(),n=Xg(e._databaseId);return new Dy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ky(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);Ly(`Data must be an object, but it was:`,o,r);let s=Fy(r,o),c,l;if(a.merge)c=new gu(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=Ry(t,r,n);if(!o.contains(i))throw new R(L.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Hy(e,i)||e.push(i)}c=new gu(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Cy(new sd(s),c,l)}var Ay=class e extends yy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},jy=class e extends yy{_toFieldTransform(e){return new Af(e.path,new Sf)}isEqual(t){return t instanceof e}};function My(e,t,n,r){let i=e.Cc(1,t,n);Ly(`Data must be an object, but it was:`,i,r);let a=[],o=sd.empty();return cu(r,((e,r)=>{let s=By(t,e,n);r=Pe(r);let c=i.yc(s);if(r instanceof Ay)a.push(s);else{let e=Py(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new wy(o,new gu(a),i.fieldTransforms)}function Ny(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[Ry(t,r,n)],c=[i];if(a.length%2!=0)throw new R(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(Ry(t,a[e])),c.push(a[e+1]);let l=[],u=sd.empty();for(let e=s.length-1;e>=0;--e)if(!Hy(l,s[e])){let t=s[e],n=c[e];n=Pe(n);let r=o.yc(t);if(n instanceof Ay)l.push(t);else{let e=Py(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new wy(u,new gu(l),o.fieldTransforms)}function Py(e,t){if(Iy(e=Pe(e)))return Ly(`Unsupported field value:`,t,e),Fy(e,t);if(e instanceof yy)return function(e,t){if(!Ty(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=Py(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Pe(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return _f(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=pc.fromDate(e);return{timestampValue:Sp(t.serializer,n)}}if(e instanceof pc){let n=new pc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sp(t.serializer,n)}}if(e instanceof by)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _y)return{bytesValue:Cp(t.serializer,e._byteString)};if(e instanceof ay){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ep(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof xy)return function(e,t){return{mapValue:{fields:{[Nu]:{stringValue:Iu},[Lu]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return hf(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${sc(e)}`)}(e,t)}function Fy(e,t){let n={};return lu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cu(e,((e,r)=>{let i=Py(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function Iy(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof pc||e instanceof by||e instanceof _y||e instanceof ay||e instanceof yy||e instanceof xy)}function Ly(e,t,n){if(!Iy(n)||!oc(n)){let r=sc(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function Ry(e,t,n){if((t=Pe(t))instanceof vy)return t._internalPath;if(typeof t==`string`)return By(e,t);throw Vy(`Field path arguments must be of type string or `,e,!1,void 0,n)}var zy=RegExp(`[~\\*/\\[\\]]`);function By(e,t,n){if(t.search(zy)>=0)throw Vy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new vy(...t.split(`.`))._internalPath}catch{throw Vy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vy(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new R(L.INVALID_ARGUMENT,s+e+c)}function Hy(e,t){return e.some((e=>e.isEqual(t)))}var Uy=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ay(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Wy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Gy(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Wy=class extends Uy{data(){return super.data()}};function Gy(e,t){return typeof t==`string`?By(e,t):t instanceof vy?t._internalPath:t._delegate._internalPath}function Ky(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new R(L.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var qy=class{convertValue(e,t=`none`){switch(zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return cu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[Lu].arrayValue?.values?.map((e=>xu(e.doubleValue)));return new xy(t)}convertGeoPoint(e){return new by(xu(e.latitude),xu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Ou(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){let t=bu(e);return new pc(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=$s.fromString(e);F($p(n),9688,{name:e});let r=new Mu(n.get(1),n.get(3)),i=new B(n.popFirst(5));return r.isEqual(t)||js(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function Jy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Yy=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xy=class e extends Uy{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Zy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(Gy(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new R(L.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Xy._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Xy._jsonSchema={type:lc(`string`,Xy._jsonSchemaVersion),bundleSource:lc(`string`,`DocumentSnapshot`),bundleName:lc(`string`),bundle:lc(`string`)};var Zy=class extends Xy{data(e={}){return super.data(e)}},Qy=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Yy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Zy(this._firestore,this._userDataWriter,n.key,n,new Yy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(L.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new Zy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Yy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new Zy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Yy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:$y(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new R(L.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=Ws.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function $y(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return P(61501,{type:e})}}Qy._jsonSchemaVersion=`firestore/querySnapshot/1.0`,Qy._jsonSchema={type:lc(`string`,Qy._jsonSchemaVersion),bundleSource:lc(`string`,`QuerySnapshot`),bundleName:lc(`string`),bundle:lc(`string`)};var eb=class extends qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new _y(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ay(this.firestore,null,t)}};function tb(e,t,n){e=cc(e,ay);let r=cc(e.firestore,py),i=Jy(e.converter,t,n);return ob(r,[ky(Oy(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,Nf.none())])}function nb(e,t,n,...r){e=cc(e,ay);let i=cc(e.firestore,py),a=Oy(i),o;return o=typeof(t=Pe(t))==`string`||t instanceof vy?Ny(a,`updateDoc`,e._key,t,n,r):My(a,`updateDoc`,e._key,t),ob(i,[o.toMutation(e._key,Nf.exists(!0))])}function rb(e){return ob(cc(e.firestore,py),[new Kf(e._key,Nf.none())])}function ib(e,t){let n=cc(e.firestore,py),r=cy(e),i=Jy(e.converter,t);return ob(n,[ky(Oy(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,Nf.exists(!1))]).then((()=>r))}function ab(e,...t){e=Pe(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||fy(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(fy(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof ay)o=cc(e.firestore,py),s=Vd(e._key.path),a={next:n=>{t[r]&&t[r](sb(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=cc(e,iy);o=cc(n.firestore,py),s=n._query;let i=new eb(o);a={next:e=>{t[r]&&t[r](new Qy(o,i,n,e))},error:t[r+1],complete:t[r+2]},Ky(e._query)}return function(e,t,n,r){let i=new Uv(r),a=new Z_(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>W_(await Zv(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>G_(await Zv(e),a)))}}(hy(o),s,i,a)}function ob(e,t){return function(e,t){let n=new Fs;return e.asyncQueue.enqueueAndForget((async()=>dv(await Xv(e),t,n))),n.promise}(hy(e),t)}function sb(e,t,n){let r=n.docs.get(t._key);return new Xy(e,new eb(e),t._key,r,new Yy(n.hasPendingWrites,n.fromCache),t.converter)}var cb=class{constructor(e){let t;this.kind=`persistent`,e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=fb(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function lb(e){return new cb(e)}var ub=class{constructor(e){this.forceOwnership=e,this.kind=`persistentSingleTab`}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hv.provider,this._offlineComponentProvider={build:t=>new Bv(t,e?.cacheSizeBytes,this.forceOwnership)}}},db=class{constructor(){this.kind=`PersistentMultipleTab`}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hv.provider,this._offlineComponentProvider={build:t=>new Vv(t,e?.cacheSizeBytes)}}};function fb(e){return new ub(e?.forceOwnership)}function pb(){return new db}function mb(){return new jy(`serverTimestamp`)}(function(e,t=!0){(function(e){Os=e})(an),$t(new Fe(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new py(new Rs(e.getProvider(`auth-internal`)),new Hs(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new R(L.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Mu(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),cn(Ts,Es,e),cn(Ts,Es,`esm2020`)})();var hb=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),gb=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),_b=e=>{let t=gb(e);return t.charAt(0).toUpperCase()+t.slice(1)},vb=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),yb=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},bb={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},xb=(0,l.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,l.createElement)(`svg`,{ref:c,...bb,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:vb(`lucide`,i),...!a&&!yb(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Sb=(e,t)=>{let n=(0,l.forwardRef)(({className:n,...r},i)=>(0,l.createElement)(xb,{ref:i,iconNode:t,className:vb(`lucide-${hb(_b(e))}`,`lucide-${e}`,n),...r}));return n.displayName=_b(e),n},Cb=Sb(`circle-check`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),wb=Sb(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),Tb=Sb(`image`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,ry:`2`,key:`1m3agn`}],[`circle`,{cx:`9`,cy:`9`,r:`2`,key:`af1f0g`}],[`path`,{d:`m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21`,key:`1xmnt7`}]]),Eb=Sb(`loader-circle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),Db=Sb(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),Ob=Sb(`pen-line`,[[`path`,{d:`M13 21h8`,key:`1jsn5i`}],[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),kb=Sb(`play`,[[`path`,{d:`M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z`,key:`10ikf1`}]]),Ab=Sb(`plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),jb=Sb(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),Mb=Sb(`trophy`,[[`path`,{d:`M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978`,key:`1n3hpd`}],[`path`,{d:`M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978`,key:`rfe1zi`}],[`path`,{d:`M18 9h1.5a1 1 0 0 0 0-5H18`,key:`7xy6bh`}],[`path`,{d:`M4 22h16`,key:`57wxv0`}],[`path`,{d:`M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z`,key:`1mhfuq`}],[`path`,{d:`M6 9H4.5a1 1 0 0 1 0-5H6`,key:`tex48p`}]]),Nb=Sb(`users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),Pb=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=e(((e,t)=>{t.exports=Pb()}))(),Fb=on(typeof __firebase_config<`u`?JSON.parse(__firebase_config):{apiKey:`AIzaSyAYtsSzPBLdZ6gnsFJZvyXEwBvq5xxsahY`,authDomain:`mohoot-007.firebaseapp.com`,projectId:`mohoot-007`,storageBucket:`mohoot-007.firebasestorage.app`,messagingSenderId:`277114765994`,appId:`1:277114765994:web:5d5beff3bb4be86d8dc6d3`}),Ib=ls(Fb),Lb=my(Fb,{localCache:lb({tabManager:pb()})}),Rb=typeof __app_id<`u`?__app_id:`mohoot-prod`,zb=[{id:0,color:`bg-[#EA4335]`,label:`Triangle`},{id:1,color:`bg-[#4285F4]`,label:`Diamond`},{id:2,color:`bg-[#FBBC04]`,label:`Circle`},{id:3,color:`bg-[#34A853]`,label:`Square`}];function Bb(){let[e,t]=(0,l.useState)(null),[n,r]=(0,l.useState)(`DASHBOARD`),[i,a]=(0,l.useState)([]),[o,s]=(0,l.useState)(null),[c,u]=(0,l.useState)(null),[d,f]=(0,l.useState)(!0),[p,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=$i(Ib,e=>{t(e),f(!1)});return()=>e()},[]);let h=async()=>{try{await no(Ib,new Hi)}catch(e){console.error(`Login failed:`,e),alert(`Login failed: `+e.message)}};(0,l.useEffect)(()=>{if(!e)return;let t=ab(sy(Lb,`artifacts`,Rb,`users`,e.uid,`quizzes`),e=>{a(e.docs.map(e=>({id:e.id,...e.data()})))},e=>console.error(`Firestore Error:`,e));return()=>t()},[e]),(0,l.useEffect)(()=>{let t=localStorage.getItem(`mohoot_host_active`);if(t&&e)try{let{quizId:e,pin:n}=JSON.parse(t);u({quizId:e,pin:n}),r(`GAME`)}catch{localStorage.removeItem(`mohoot_host_active`)}},[e]);let g=()=>{s({title:`Untitled Quiz`,questions:[{text:``,image:``,answers:[``,``,``,``],correct:0,duration:20}]}),r(`EDITOR`)},_=async t=>{if(e){m(!0),console.log(`Saving quiz...`,t);try{let n=sy(Lb,`artifacts`,Rb,`users`,e.uid,`quizzes`),i=t.id?nb(cy(Lb,`artifacts`,Rb,`users`,e.uid,`quizzes`,t.id),{...t,questions:t.questions}):ib(n,{...t,createdAt:mb()});await Promise.race([i,new Promise((e,t)=>setTimeout(()=>t(Error(`Save timed out. Check connection.`)),5e3))]),console.log(`Save successful`),r(`DASHBOARD`)}catch(e){console.error(`Save failed:`,e),alert(`Saved (offline/background)`),r(`DASHBOARD`)}finally{m(!1)}}},v=async t=>{if(!e)return;let n=Math.floor(1e5+Math.random()*9e5).toString();try{let i={hostId:e.uid,quizId:t.id,status:`LOBBY`,currentQuestionIndex:0,players:{},quizSnapshot:t,lastUpdated:mb()},a=tb(cy(Lb,`artifacts`,Rb,`sessions`,n),i);await Promise.race([a,new Promise((e,t)=>setTimeout(()=>t(Error(`Host timed out`)),5e3))]),u({quizId:t.id,pin:n}),r(`GAME`),localStorage.setItem(`mohoot_host_active`,JSON.stringify({quizId:t.id,pin:n}))}catch(e){console.error(`Hosting slow/offline:`,e),alert(`Game starting (Background Sync)`)}};return d?(0,$.jsx)(`div`,{className:`h-screen flex items-center justify-center`,children:(0,$.jsx)(Eb,{className:`animate-spin`})}):e?(0,$.jsxs)(`div`,{className:`min-h-screen bg-gray-50 text-gray-800 font-sans`,children:[(0,$.jsxs)(`nav`,{className:`bg-white border-b px-6 py-4 flex justify-between items-center sticky top-0 z-10 shadow-sm`,children:[(0,$.jsxs)(`div`,{className:`font-black text-2xl tracking-tighter text-indigo-600`,children:[`Mohoot`,(0,$.jsx)(`span`,{className:`text-red-500`,children:`!`}),` `,(0,$.jsx)(`span`,{className:`text-gray-400 font-light text-sm ml-2`,children:`HOST`})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col items-end`,children:[(0,$.jsx)(`span`,{className:`text-xs font-bold text-gray-400 uppercase`,children:`User ID`}),(0,$.jsxs)(`span`,{className:`text-xs font-mono bg-gray-100 px-2 py-0.5 rounded text-gray-600`,children:[e.uid.slice(0,6),`...`]})]}),(0,$.jsx)(`button`,{onClick:()=>ea(Ib),className:`p-2 text-gray-400 hover:text-red-500 transition`,title:`Sign Out`,children:(0,$.jsx)(Db,{size:20})})]})]}),(0,$.jsxs)(`div`,{className:`p-6 max-w-7xl mx-auto`,children:[n===`DASHBOARD`&&(0,$.jsxs)(`div`,{className:`animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[(0,$.jsx)(`h2`,{className:`text-3xl font-black text-gray-900`,children:`My Quizzes`}),(0,$.jsxs)(`button`,{onClick:g,className:`bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold flex gap-2 items-center hover:bg-indigo-700 shadow-lg transition transform hover:-translate-y-1`,children:[(0,$.jsx)(Ab,{size:20}),` Create Quiz`]})]}),i.length===0?(0,$.jsxs)(`div`,{className:`bg-white border-2 border-dashed border-gray-200 rounded-3xl p-20 text-center text-gray-400`,children:[(0,$.jsx)(kb,{size:48,className:`mx-auto mb-4 opacity-20`}),(0,$.jsx)(`p`,{className:`text-lg font-medium`,children:`No quizzes found. Click "Create Quiz" to start!`})]}):(0,$.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`,children:i.map(t=>(0,$.jsxs)(`div`,{className:`bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-xl transition-all group`,children:[(0,$.jsx)(`div`,{className:`h-2 w-full bg-indigo-100 rounded-full mb-4 overflow-hidden`,children:(0,$.jsx)(`div`,{className:`h-full bg-indigo-500 w-1/3 group-hover:w-full transition-all duration-700`})}),(0,$.jsx)(`h3`,{className:`font-bold text-xl mb-1 truncate text-gray-900`,children:t.title}),(0,$.jsxs)(`div`,{className:`text-sm text-gray-400 font-medium mb-6`,children:[t.questions?.length||0,` Questions`]}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsxs)(`button`,{onClick:()=>v(t),className:`flex-1 bg-green-500 text-white py-2.5 rounded-lg font-bold hover:bg-green-600 transition flex items-center justify-center gap-2 shadow-sm hover:shadow-md`,children:[(0,$.jsx)(kb,{size:18,fill:`currentColor`}),` Host`]}),(0,$.jsx)(`button`,{onClick:()=>{s(t),r(`EDITOR`)},className:`p-2.5 bg-gray-50 rounded-lg text-gray-600 hover:bg-indigo-50 hover:text-indigo-600 transition`,children:(0,$.jsx)(Ob,{size:20})}),(0,$.jsx)(`button`,{onClick:()=>rb(cy(Lb,`artifacts`,Rb,`users`,e.uid,`quizzes`,t.id)),className:`p-2.5 bg-gray-50 rounded-lg text-gray-400 hover:bg-red-50 hover:text-red-500 transition`,children:(0,$.jsx)(jb,{size:20})})]})]},t.id))})]}),n===`EDITOR`&&(0,$.jsx)(Vb,{quiz:o,onSave:_,onCancel:()=>r(`DASHBOARD`),isSaving:p}),n===`GAME`&&(0,$.jsx)(Hb,{sessionData:c,onExit:()=>{localStorage.removeItem(`mohoot_host_active`),u(null),r(`DASHBOARD`)}})]})]}):(0,$.jsx)(`div`,{className:`min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4 font-sans`,children:(0,$.jsxs)(`div`,{className:`bg-white p-10 rounded-3xl shadow-xl text-center max-w-md w-full border border-gray-100`,children:[(0,$.jsx)(`h1`,{className:`text-5xl font-black text-[#46178F] mb-2 tracking-tighter`,children:`Mohoot!`}),(0,$.jsx)(`p`,{className:`text-gray-400 font-medium mb-10`,children:`Host your own live quiz games.`}),(0,$.jsxs)(`button`,{onClick:h,className:`w-full flex items-center justify-center gap-4 bg-white border-2 border-gray-100 hover:border-[#46178F] hover:bg-indigo-50 text-gray-700 font-bold py-4 px-6 rounded-2xl transition-all group`,children:[(0,$.jsxs)(`svg`,{className:`w-6 h-6 group-hover:scale-110 transition-transform`,viewBox:`0 0 24 24`,children:[(0,$.jsx)(`path`,{d:`M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z`,fill:`#4285F4`}),(0,$.jsx)(`path`,{d:`M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z`,fill:`#34A853`}),(0,$.jsx)(`path`,{d:`M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z`,fill:`#FBBC05`}),(0,$.jsx)(`path`,{d:`M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z`,fill:`#EA4335`})]}),`Sign in with Google`]})]})})}var Vb=({quiz:e,onSave:t,onCancel:n,isSaving:r})=>{let[i,a]=(0,l.useState)(e),[o,s]=(0,l.useState)(0),c=i.questions[o],u=(e,t)=>{let n=[...i.questions];n[o]={...c,[e]:t},a({...i,questions:n})};return(0,$.jsxs)(`div`,{className:`flex gap-6 h-[calc(100vh-160px)] animate-in slide-in-from-right-4 duration-300`,children:[(0,$.jsx)(`div`,{className:`w-64 flex flex-col gap-2`,children:(0,$.jsxs)(`div`,{className:`flex-1 overflow-y-auto pr-2 custom-scrollbar`,children:[i.questions.map((e,t)=>(0,$.jsxs)(`button`,{onClick:()=>s(t),className:`w-full text-left p-4 mb-2 rounded-xl transition-all font-bold text-sm ${t===o?`bg-indigo-600 text-white shadow-md scale-[1.02]`:`bg-white border border-gray-100 hover:bg-indigo-50 text-gray-500`}`,children:[`Question `,t+1]},t)),(0,$.jsxs)(`button`,{onClick:()=>{let e=[...i.questions,{text:``,image:``,answers:[``,``,``,``],correct:0,duration:20}];a({...i,questions:e}),s(e.length-1)},className:`w-full py-4 border-2 border-dashed border-gray-200 rounded-xl text-gray-400 font-bold text-sm hover:border-indigo-400 hover:text-indigo-500 transition-all flex items-center justify-center gap-2`,children:[(0,$.jsx)(Ab,{size:18}),` Add Question`]})]})}),(0,$.jsxs)(`div`,{className:`flex-1 overflow-y-auto bg-white rounded-3xl shadow-xl border border-gray-100 p-10 flex flex-col`,children:[(0,$.jsxs)(`div`,{className:`mb-10`,children:[(0,$.jsx)(`label`,{className:`text-[10px] font-black text-indigo-300 uppercase tracking-widest mb-1 block`,children:`Quiz Title`}),(0,$.jsx)(`input`,{className:`w-full text-4xl font-black border-none focus:ring-0 outline-none p-0 text-indigo-900 placeholder-indigo-100`,value:i.title,onChange:e=>a({...i,title:e.target.value}),placeholder:`My Awesome Quiz`})]}),(0,$.jsxs)(`div`,{className:`flex-1 space-y-8`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`label`,{className:`text-xs font-bold text-gray-400 uppercase mb-2 block`,children:[`Question `,o+1,` Prompt`]}),(0,$.jsx)(`textarea`,{className:`w-full p-6 bg-indigo-50/30 rounded-2xl text-xl font-bold outline-none focus:ring-2 ring-indigo-500 transition-all resize-none text-indigo-900`,rows:`2`,value:c.text,onChange:e=>u(`text`,e.target.value),placeholder:`What is the capital of France?`})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-6`,children:[(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-gray-400 uppercase block`,children:`Media & Timer`}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3 bg-gray-50 p-4 rounded-xl border border-gray-100 focus-within:ring-2 ring-indigo-500/20`,children:[(0,$.jsx)(Tb,{size:20,className:`text-indigo-400`}),(0,$.jsx)(`input`,{className:`bg-transparent w-full outline-none text-sm font-medium text-gray-600`,value:c.image||``,onChange:e=>u(`image`,e.target.value),placeholder:`Image URL (optional)`})]}),(0,$.jsx)(`div`,{className:`flex items-center gap-4`,children:(0,$.jsxs)(`div`,{className:`flex-1 bg-gray-50 p-4 rounded-xl border border-gray-100 focus-within:ring-2 ring-indigo-500/20`,children:[(0,$.jsx)(`span`,{className:`text-xs font-bold text-gray-400 block mb-1`,children:`Duration (sec)`}),(0,$.jsx)(`input`,{type:`number`,className:`bg-transparent w-full font-black text-xl outline-none text-gray-700`,value:c.duration,onChange:e=>u(`duration`,parseInt(e.target.value)||0)})]})})]}),(0,$.jsxs)(`div`,{className:`space-y-3`,children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-gray-400 uppercase block`,children:`Options`}),(0,$.jsx)(`div`,{className:`grid gap-3`,children:c.answers.map((e,t)=>(0,$.jsxs)(`div`,{className:`flex items-center gap-3 p-1 rounded-xl transition-all ${c.correct===t?`bg-indigo-50 ring-1 ring-indigo-200`:`bg-gray-50`}`,children:[(0,$.jsx)(`button`,{onClick:()=>u(`correct`,t),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${c.correct===t?zb[t].color:`bg-white border text-gray-300`}`,children:(0,$.jsx)(Cb,{size:20,className:c.correct===t?`text-white`:`text-gray-100`})}),(0,$.jsx)(`input`,{className:`bg-transparent flex-1 font-bold text-sm py-2 outline-none text-gray-700`,value:e,onChange:e=>{let n=[...c.answers];n[t]=e.target.value,u(`answers`,n)},placeholder:`Option ${t+1}`})]},t))})]})]})]}),(0,$.jsxs)(`div`,{className:`mt-10 pt-6 border-t flex justify-end gap-4`,children:[(0,$.jsx)(`button`,{onClick:n,disabled:r,className:`px-8 py-3 rounded-xl font-bold text-gray-400 hover:text-gray-600 transition disabled:opacity-50`,children:`Discard Changes`}),(0,$.jsx)(`button`,{onClick:()=>t(i),disabled:r,className:`px-10 py-3 rounded-xl font-black text-white shadow-xl shadow-indigo-200 transition-all flex items-center gap-2
                 ${r?`bg-indigo-400 cursor-wait`:`bg-indigo-600 hover:bg-indigo-700 hover:-translate-y-1`}`,children:r?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Eb,{className:`animate-spin`,size:20}),`Saving...`]}):`Save Quiz`})]})]})]})},Hb=({sessionData:e,onExit:t})=>{let[n,r]=(0,l.useState)(null),[i,a]=(0,l.useState)(null),o=e.pin;(0,l.useEffect)(()=>{let e=ab(cy(Lb,`artifacts`,Rb,`sessions`,o),e=>{e.exists()?r(e.data()):a(`Session not found (Check Firestore Permissions or Path)`)},e=>{console.error(`Session Sync Error:`,e),a(e.message)});return()=>e()},[o]);let s=(e,t={})=>{nb(cy(Lb,`artifacts`,Rb,`sessions`,o),{status:e,...t,lastUpdated:mb()})},c=()=>{let e=n.currentQuestionIndex+1,t=n.quizSnapshot.questions[e];t?s(`QUESTION`,{currentQuestionIndex:e,startTime:Date.now()+2e3,endTime:Date.now()+2e3+t.duration*1e3}):s(`FINISHED`)};if(i)return(0,$.jsxs)(`div`,{className:`flex flex-col items-center justify-center p-20 text-red-500 h-full text-center`,children:[(0,$.jsx)(wb,{size:48,className:`mb-4`}),(0,$.jsx)(`h3`,{className:`text-xl font-bold mb-2`,children:`Connection Error`}),(0,$.jsx)(`p`,{className:`mb-6 max-w-md`,children:i}),(0,$.jsx)(`button`,{onClick:t,className:`bg-gray-100 px-6 py-3 rounded-xl font-bold text-gray-600 hover:bg-gray-200`,children:`Return to Dashboard`})]});if(!n)return(0,$.jsxs)(`div`,{className:`flex flex-col items-center justify-center p-20 text-indigo-400 h-full`,children:[(0,$.jsx)(Eb,{className:`animate-spin mb-4`,size:48}),(0,$.jsxs)(`p`,{className:`font-bold`,children:[`Syncing Session `,o,`...`]})]});let u=n.quizSnapshot.questions[n.currentQuestionIndex],d=Object.values(n.players||{});if(n.status===`LOBBY`)return(0,$.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-10 animate-in fade-in duration-700`,children:[(0,$.jsxs)(`div`,{className:`bg-white p-10 rounded-[3rem] shadow-2xl border border-gray-100 flex flex-col items-center text-center`,children:[(0,$.jsx)(`div`,{className:`text-sm font-black text-indigo-300 uppercase tracking-[0.4em] mb-4`,children:`Game PIN`}),(0,$.jsx)(`div`,{className:`text-[10rem] font-black leading-none text-indigo-900 mb-6 tabular-nums`,children:o}),(0,$.jsxs)(`div`,{className:`flex items-center gap-8 text-xl font-bold text-gray-400 mb-10`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(Nb,{size:24}),` `,d.length,` Joined`]}),(0,$.jsx)(`div`,{className:`w-1.5 h-1.5 rounded-full bg-gray-200`}),(0,$.jsx)(`div`,{className:`uppercase tracking-widest text-sm`,children:`Waiting for Host...`})]})]}),(0,$.jsx)(`div`,{className:`mt-12 flex flex-wrap gap-4 justify-center max-w-5xl`,children:d.map((e,t)=>(0,$.jsx)(`div`,{className:`bg-white px-8 py-4 rounded-2xl shadow-sm border border-gray-100 font-black text-xl text-indigo-600 animate-in zoom-in duration-300`,children:e.nickname},t))}),(0,$.jsxs)(`div`,{className:`fixed bottom-10 inset-x-0 flex justify-center gap-6 px-10`,children:[(0,$.jsx)(`button`,{onClick:t,className:`px-8 py-4 rounded-2xl font-bold bg-white text-gray-400 shadow-lg hover:text-red-500 transition-all`,children:`Cancel Game`}),(0,$.jsx)(`button`,{disabled:d.length===0,onClick:()=>s(`QUESTION`,{startTime:Date.now()+2e3,endTime:Date.now()+2e3+u.duration*1e3}),className:`px-12 py-4 rounded-2xl font-black text-xl shadow-xl transition-all ${d.length>0?`bg-indigo-600 text-white hover:scale-105 active:scale-95`:`bg-gray-200 text-gray-400 cursor-not-allowed`}`,children:`Start Now!`})]})]});if(n.status===`QUESTION`)return(0,$.jsxs)(`div`,{className:`h-[calc(100vh-140px)] flex flex-col items-center animate-in fade-in duration-500`,children:[(0,$.jsxs)(`div`,{className:`w-full flex justify-between items-center mb-8`,children:[(0,$.jsxs)(`div`,{className:`bg-indigo-100 text-indigo-600 px-4 py-2 rounded-xl font-black text-lg`,children:[`Question `,n.currentQuestionIndex+1,` of `,n.quizSnapshot.questions.length]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 font-black text-gray-400 text-xl`,children:[(0,$.jsx)(Nb,{size:20}),d.filter(e=>e.lastAnswerIdx!==null&&e.lastAnswerIdx!==void 0).length,` / `,d.length,` Answers`]})]}),(0,$.jsxs)(`div`,{className:`flex-1 w-full max-w-5xl flex flex-col items-center justify-center text-center`,children:[u.image&&(0,$.jsxs)(`div`,{className:`relative mb-8 group`,children:[(0,$.jsx)(`div`,{className:`absolute -inset-4 bg-indigo-500/10 rounded-[2rem] blur-xl opacity-0 group-hover:opacity-100 transition-opacity`}),(0,$.jsx)(`img`,{src:u.image,className:`h-64 object-contain mx-auto rounded-3xl shadow-lg border-4 border-white relative z-10`})]}),(0,$.jsx)(`h2`,{className:`text-5xl font-black text-indigo-900 leading-tight mb-12`,children:u.text}),(0,$.jsx)(`div`,{className:`grid grid-cols-2 gap-6 w-full`,children:u.answers.map((e,t)=>(0,$.jsxs)(`div`,{className:`${zb[t].color} p-8 rounded-3xl text-white text-3xl font-black flex items-center shadow-lg transition-transform hover:scale-[1.02]`,children:[(0,$.jsx)(`span`,{className:`w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center mr-6 text-2xl`,children:t+1}),e]},t))})]}),(0,$.jsx)(`div`,{className:`mt-10 w-full flex justify-end`,children:(0,$.jsx)(`button`,{onClick:()=>s(`LEADERBOARD`),className:`bg-white border-2 border-indigo-100 shadow-xl px-10 py-4 rounded-2xl font-black text-indigo-600 hover:bg-indigo-50 transition-all`,children:`End Question`})})]});let f=[...d].sort((e,t)=>(t.score||0)-(e.score||0));return(0,$.jsxs)(`div`,{className:`max-w-3xl mx-auto pt-10 animate-in slide-in-from-bottom-8 duration-700`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-12`,children:[(0,$.jsx)(Mb,{size:64,className:`mx-auto text-yellow-500 mb-4 animate-bounce`}),(0,$.jsx)(`h2`,{className:`text-5xl font-black text-indigo-900`,children:n.status===`FINISHED`?`Final Standings`:`Current Ranking`})]}),(0,$.jsx)(`div`,{className:`space-y-3`,children:f.map((e,t)=>(0,$.jsxs)(`div`,{className:`p-6 rounded-3xl border shadow-sm flex justify-between items-center transform transition-all hover:translate-x-2 ${t===0?`bg-yellow-50 border-yellow-200 ring-2 ring-yellow-400`:`bg-white border-gray-100`}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-6`,children:[(0,$.jsx)(`span`,{className:`font-black text-3xl w-12 text-center ${t===0?`text-yellow-600`:`text-gray-300`}`,children:t===0?``:t===1?``:t===2?``:`#${t+1}`}),(0,$.jsx)(`span`,{className:`font-black text-2xl text-indigo-900`,children:e.nickname})]}),(0,$.jsxs)(`div`,{className:`flex flex-col items-end`,children:[(0,$.jsx)(`span`,{className:`text-xs font-bold text-gray-400 uppercase`,children:`Points`}),(0,$.jsx)(`span`,{className:`font-mono font-black text-3xl text-indigo-600`,children:e.score||0})]})]},t))}),(0,$.jsxs)(`div`,{className:`mt-16 flex justify-center gap-6 pb-20`,children:[n.status!==`FINISHED`&&(0,$.jsx)(`button`,{onClick:c,className:`bg-indigo-600 text-white px-12 py-5 rounded-2xl font-black text-2xl shadow-2xl shadow-indigo-200 hover:scale-110 active:scale-95 transition-all`,children:`Next Round`}),(0,$.jsx)(`button`,{onClick:t,className:`bg-white border-2 border-gray-100 px-10 py-5 rounded-2xl font-black text-xl text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all`,children:`Close Game`})]})]})};(0,c.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(l.StrictMode,{children:(0,$.jsx)(Bb,{})}));